(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var X0={exports:{}},mc={},J0={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=Symbol.for("react.element"),xE=Symbol.for("react.portal"),EE=Symbol.for("react.fragment"),kE=Symbol.for("react.strict_mode"),bE=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),IE=Symbol.for("react.context"),AE=Symbol.for("react.forward_ref"),SE=Symbol.for("react.suspense"),NE=Symbol.for("react.memo"),CE=Symbol.for("react.lazy"),ag=Symbol.iterator;function RE(t){return t===null||typeof t!="object"?null:(t=ag&&t[ag]||t["@@iterator"],typeof t=="function"?t:null)}var Z0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ev=Object.assign,tv={};function fo(t,e,n){this.props=t,this.context=e,this.refs=tv,this.updater=n||Z0}fo.prototype.isReactComponent={};fo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function nv(){}nv.prototype=fo.prototype;function xf(t,e,n){this.props=t,this.context=e,this.refs=tv,this.updater=n||Z0}var Ef=xf.prototype=new nv;Ef.constructor=xf;ev(Ef,fo.prototype);Ef.isPureReactComponent=!0;var lg=Array.isArray,rv=Object.prototype.hasOwnProperty,kf={current:null},sv={key:!0,ref:!0,__self:!0,__source:!0};function iv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)rv.call(e,r)&&!sv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Wa,type:t,key:i,ref:o,props:s,_owner:kf.current}}function qE(t,e){return{$$typeof:Wa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wa}function PE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ug=/\/+/g;function cd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PE(""+t.key):e.toString(36)}function eu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wa:case xE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+cd(o,0):r,lg(s)?(n="",t!=null&&(n=t.replace(ug,"$&/")+"/"),eu(s,e,n,"",function(h){return h})):s!=null&&(bf(s)&&(s=qE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ug,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",lg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+cd(i,l);o+=eu(i,e,n,c,s)}else if(c=RE(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+cd(i,l++),o+=eu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Al(t,e,n){if(t==null)return t;var r=[],s=0;return eu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rn={current:null},tu={transition:null},DE={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:tu,ReactCurrentOwner:kf};function ov(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Al,forEach:function(t,e,n){Al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Al(t,function(){e++}),e},toArray:function(t){return Al(t,function(e){return e})||[]},only:function(t){if(!bf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=fo;_e.Fragment=EE;_e.Profiler=bE;_e.PureComponent=xf;_e.StrictMode=kE;_e.Suspense=SE;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DE;_e.act=ov;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ev({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=kf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)rv.call(e,c)&&!sv.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Wa,type:t.type,key:s,ref:i,props:r,_owner:o}};_e.createContext=function(t){return t={$$typeof:IE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TE,_context:t},t.Consumer=t};_e.createElement=iv;_e.createFactory=function(t){var e=iv.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:AE,render:t}};_e.isValidElement=bf;_e.lazy=function(t){return{$$typeof:CE,_payload:{_status:-1,_result:t},_init:jE}};_e.memo=function(t,e){return{$$typeof:NE,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=tu.transition;tu.transition={};try{t()}finally{tu.transition=e}};_e.unstable_act=ov;_e.useCallback=function(t,e){return rn.current.useCallback(t,e)};_e.useContext=function(t){return rn.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return rn.current.useDeferredValue(t)};_e.useEffect=function(t,e){return rn.current.useEffect(t,e)};_e.useId=function(){return rn.current.useId()};_e.useImperativeHandle=function(t,e,n){return rn.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return rn.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return rn.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return rn.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return rn.current.useReducer(t,e,n)};_e.useRef=function(t){return rn.current.useRef(t)};_e.useState=function(t){return rn.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return rn.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return rn.current.useTransition()};_e.version="18.3.1";J0.exports=_e;var O=J0.exports;const OE=wE(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME=O,LE=Symbol.for("react.element"),VE=Symbol.for("react.fragment"),UE=Object.prototype.hasOwnProperty,FE=ME.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zE={key:!0,ref:!0,__self:!0,__source:!0};function av(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)UE.call(e,r)&&!zE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:LE,type:t,key:i,ref:o,props:s,_owner:FE.current}}mc.Fragment=VE;mc.jsx=av;mc.jsxs=av;X0.exports=mc;var u=X0.exports,Jd={},lv={exports:{}},An={},uv={exports:{}},cv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ee){var se=G.length;G.push(ee);e:for(;0<se;){var ge=se-1>>>1,me=G[ge];if(0<s(me,ee))G[ge]=ee,G[se]=me,se=ge;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ee=G[0],se=G.pop();if(se!==ee){G[0]=se;e:for(var ge=0,me=G.length,be=me>>>1;ge<be;){var it=2*(ge+1)-1,At=G[it],Je=it+1,pt=G[Je];if(0>s(At,se))Je<me&&0>s(pt,At)?(G[ge]=pt,G[Je]=se,ge=Je):(G[ge]=At,G[it]=se,ge=it);else if(Je<me&&0>s(pt,se))G[ge]=pt,G[Je]=se,ge=Je;else break e}}return ee}function s(G,ee){var se=G.sortIndex-ee.sortIndex;return se!==0?se:G.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,g=3,S=!1,R=!1,D=!1,I=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var ee=n(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=G)r(h),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(h)}}function P(G){if(D=!1,k(G),!R)if(n(c)!==null)R=!0,Mt(W);else{var ee=n(h);ee!==null&&Se(P,ee.startTime-G)}}function W(G,ee){R=!1,D&&(D=!1,x(v),v=-1),S=!0;var se=g;try{for(k(ee),m=n(c);m!==null&&(!(m.expirationTime>ee)||G&&!N());){var ge=m.callback;if(typeof ge=="function"){m.callback=null,g=m.priorityLevel;var me=ge(m.expirationTime<=ee);ee=t.unstable_now(),typeof me=="function"?m.callback=me:m===n(c)&&r(c),k(ee)}else r(c);m=n(c)}if(m!==null)var be=!0;else{var it=n(h);it!==null&&Se(P,it.startTime-ee),be=!1}return be}finally{m=null,g=se,S=!1}}var z=!1,w=null,v=-1,E=5,b=-1;function N(){return!(t.unstable_now()-b<E)}function C(){if(w!==null){var G=t.unstable_now();b=G;var ee=!0;try{ee=w(!0,G)}finally{ee?T():(z=!1,w=null)}}else z=!1}var T;if(typeof _=="function")T=function(){_(C)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,lt=Ue.port2;Ue.port1.onmessage=C,T=function(){lt.postMessage(null)}}else T=function(){I(C,0)};function Mt(G){w=G,z||(z=!0,T())}function Se(G,ee){v=I(function(){G(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){R||S||(R=!0,Mt(W))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var se=g;g=ee;try{return G()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ee){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var se=g;g=G;try{return ee()}finally{g=se}},t.unstable_scheduleCallback=function(G,ee,se){var ge=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?ge+se:ge):se=ge,G){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=se+me,G={id:p++,callback:ee,priorityLevel:G,startTime:se,expirationTime:me,sortIndex:-1},se>ge?(G.sortIndex=se,e(h,G),n(c)===null&&G===n(h)&&(D?(x(v),v=-1):D=!0,Se(P,se-ge))):(G.sortIndex=me,e(c,G),R||S||(R=!0,Mt(W))),G},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(G){var ee=g;return function(){var se=g;g=ee;try{return G.apply(this,arguments)}finally{g=se}}}})(cv);uv.exports=cv;var BE=uv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E=O,Tn=BE;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dv=new Set,pa={};function di(t,e){Xi(t,e),Xi(t+"Capture",e)}function Xi(t,e){for(pa[t]=e,t=0;t<e.length;t++)dv.add(e[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zd=Object.prototype.hasOwnProperty,WE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cg={},dg={};function HE(t){return Zd.call(dg,t)?!0:Zd.call(cg,t)?!1:WE.test(t)?dg[t]=!0:(cg[t]=!0,!1)}function KE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GE(t,e,n,r){if(e===null||typeof e>"u"||KE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tf=/[\-:]([a-z])/g;function If(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tf,If);Dt[e]=new sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tf,If);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tf,If);Dt[e]=new sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Af(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GE(e,n,s,r)&&(n=null),r||s===null?HE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Br=$E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),Ai=Symbol.for("react.portal"),Si=Symbol.for("react.fragment"),Sf=Symbol.for("react.strict_mode"),eh=Symbol.for("react.profiler"),hv=Symbol.for("react.provider"),fv=Symbol.for("react.context"),Nf=Symbol.for("react.forward_ref"),th=Symbol.for("react.suspense"),nh=Symbol.for("react.suspense_list"),Cf=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),pv=Symbol.for("react.offscreen"),hg=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=hg&&t[hg]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,dd;function Fo(t){if(dd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dd=e&&e[1]||""}return`
`+dd+t}var hd=!1;function fd(t,e){if(!t||hd)return"";hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fo(t):""}function QE(t){switch(t.tag){case 5:return Fo(t.type);case 16:return Fo("Lazy");case 13:return Fo("Suspense");case 19:return Fo("SuspenseList");case 0:case 2:case 15:return t=fd(t.type,!1),t;case 11:return t=fd(t.type.render,!1),t;case 1:return t=fd(t.type,!0),t;default:return""}}function rh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Si:return"Fragment";case Ai:return"Portal";case eh:return"Profiler";case Sf:return"StrictMode";case th:return"Suspense";case nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fv:return(t.displayName||"Context")+".Consumer";case hv:return(t._context.displayName||"Context")+".Provider";case Nf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cf:return e=t.displayName||null,e!==null?e:rh(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return rh(t(e))}catch{}}return null}function YE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rh(e);case 8:return e===Sf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function XE(t){var e=mv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nl(t){t._valueTracker||(t._valueTracker=XE(t))}function gv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=mv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Eu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sh(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_s(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yv(t,e){e=e.checked,e!=null&&Af(t,"checked",e,!1)}function ih(t,e){yv(t,e);var n=_s(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?oh(t,e.type,n):e.hasOwnProperty("defaultValue")&&oh(t,e.type,_s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function oh(t,e,n){(e!=="number"||Eu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zo=Array.isArray;function Ui(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_s(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ah(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(zo(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_s(n)}}function vv(t,e){var n=_s(e.value),r=_s(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function _v(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?_v(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cl,wv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JE=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(t){JE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zo[e]=Zo[t]})});function xv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zo.hasOwnProperty(t)&&Zo[t]?(""+e).trim():e+"px"}function Ev(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=xv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ZE=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function uh(t,e){if(e){if(ZE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function ch(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dh=null;function Rf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hh=null,Fi=null,zi=null;function yg(t){if(t=Ga(t)){if(typeof hh!="function")throw Error(K(280));var e=t.stateNode;e&&(e=wc(e),hh(t.stateNode,t.type,e))}}function kv(t){Fi?zi?zi.push(t):zi=[t]:Fi=t}function bv(){if(Fi){var t=Fi,e=zi;if(zi=Fi=null,yg(t),e)for(t=0;t<e.length;t++)yg(e[t])}}function Tv(t,e){return t(e)}function Iv(){}var pd=!1;function Av(t,e,n){if(pd)return t(e,n);pd=!0;try{return Tv(t,e,n)}finally{pd=!1,(Fi!==null||zi!==null)&&(Iv(),bv())}}function ga(t,e){var n=t.stateNode;if(n===null)return null;var r=wc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var fh=!1;if(Dr)try{var qo={};Object.defineProperty(qo,"passive",{get:function(){fh=!0}}),window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{fh=!1}function ek(t,e,n,r,s,i,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var ea=!1,ku=null,bu=!1,ph=null,tk={onError:function(t){ea=!0,ku=t}};function nk(t,e,n,r,s,i,o,l,c){ea=!1,ku=null,ek.apply(tk,arguments)}function rk(t,e,n,r,s,i,o,l,c){if(nk.apply(this,arguments),ea){if(ea){var h=ku;ea=!1,ku=null}else throw Error(K(198));bu||(bu=!0,ph=h)}}function hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vg(t){if(hi(t)!==t)throw Error(K(188))}function sk(t){var e=t.alternate;if(!e){if(e=hi(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return vg(s),t;if(i===r)return vg(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Nv(t){return t=sk(t),t!==null?Cv(t):null}function Cv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cv(t);if(e!==null)return e;t=t.sibling}return null}var Rv=Tn.unstable_scheduleCallback,_g=Tn.unstable_cancelCallback,ik=Tn.unstable_shouldYield,ok=Tn.unstable_requestPaint,at=Tn.unstable_now,ak=Tn.unstable_getCurrentPriorityLevel,qf=Tn.unstable_ImmediatePriority,qv=Tn.unstable_UserBlockingPriority,Tu=Tn.unstable_NormalPriority,lk=Tn.unstable_LowPriority,Pv=Tn.unstable_IdlePriority,gc=null,lr=null;function uk(t){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot(gc,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:hk,ck=Math.log,dk=Math.LN2;function hk(t){return t>>>=0,t===0?32:31-(ck(t)/dk|0)|0}var Rl=64,ql=4194304;function Bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Iu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Bo(l):(i&=o,i!==0&&(r=Bo(i)))}else o=n&~s,o!==0?r=Bo(o):i!==0&&(r=Bo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),s=1<<n,r|=t[n],e&=~s;return r}function fk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Kn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=fk(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jv(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ha(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function mk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Kn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function Dv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ov,jf,Mv,Lv,Vv,gh=!1,Pl=[],ls=null,us=null,cs=null,ya=new Map,va=new Map,Zr=[],gk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wg(t,e){switch(t){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":ya.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":va.delete(e.pointerId)}}function Po(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ga(e),e!==null&&jf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function yk(t,e,n,r,s){switch(e){case"focusin":return ls=Po(ls,t,e,n,r,s),!0;case"dragenter":return us=Po(us,t,e,n,r,s),!0;case"mouseover":return cs=Po(cs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ya.set(i,Po(ya.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,va.set(i,Po(va.get(i)||null,t,e,n,r,s)),!0}return!1}function Uv(t){var e=Fs(t.target);if(e!==null){var n=hi(e);if(n!==null){if(e=n.tag,e===13){if(e=Sv(n),e!==null){t.blockedOn=e,Vv(t.priority,function(){Mv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dh=r,n.target.dispatchEvent(r),dh=null}else return e=Ga(n),e!==null&&jf(e),t.blockedOn=n,!1;e.shift()}return!0}function xg(t,e,n){nu(t)&&n.delete(e)}function vk(){gh=!1,ls!==null&&nu(ls)&&(ls=null),us!==null&&nu(us)&&(us=null),cs!==null&&nu(cs)&&(cs=null),ya.forEach(xg),va.forEach(xg)}function jo(t,e){t.blockedOn===e&&(t.blockedOn=null,gh||(gh=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,vk)))}function _a(t){function e(s){return jo(s,t)}if(0<Pl.length){jo(Pl[0],t);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ls!==null&&jo(ls,t),us!==null&&jo(us,t),cs!==null&&jo(cs,t),ya.forEach(e),va.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)Uv(n),n.blockedOn===null&&Zr.shift()}var Bi=Br.ReactCurrentBatchConfig,Au=!0;function _k(t,e,n,r){var s=Re,i=Bi.transition;Bi.transition=null;try{Re=1,Df(t,e,n,r)}finally{Re=s,Bi.transition=i}}function wk(t,e,n,r){var s=Re,i=Bi.transition;Bi.transition=null;try{Re=4,Df(t,e,n,r)}finally{Re=s,Bi.transition=i}}function Df(t,e,n,r){if(Au){var s=yh(t,e,n,r);if(s===null)Td(t,e,r,Su,n),wg(t,r);else if(yk(s,t,e,n,r))r.stopPropagation();else if(wg(t,r),e&4&&-1<gk.indexOf(t)){for(;s!==null;){var i=Ga(s);if(i!==null&&Ov(i),i=yh(t,e,n,r),i===null&&Td(t,e,r,Su,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Td(t,e,r,null,n)}}var Su=null;function yh(t,e,n,r){if(Su=null,t=Rf(r),t=Fs(t),t!==null)if(e=hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Su=t,null}function Fv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ak()){case qf:return 1;case qv:return 4;case Tu:case lk:return 16;case Pv:return 536870912;default:return 16}default:return 16}}var is=null,Of=null,ru=null;function zv(){if(ru)return ru;var t,e=Of,n=e.length,r,s="value"in is?is.value:is.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ru=s.slice(t,1<r?1-r:void 0)}function su(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jl(){return!0}function Eg(){return!1}function Sn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jl:Eg,this.isPropagationStopped=Eg,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),e}var po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=Sn(po),Ka=Ye({},po,{view:0,detail:0}),xk=Sn(Ka),gd,yd,Do,yc=Ye({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(gd=t.screenX-Do.screenX,yd=t.screenY-Do.screenY):yd=gd=0,Do=t),gd)},movementY:function(t){return"movementY"in t?t.movementY:yd}}),kg=Sn(yc),Ek=Ye({},yc,{dataTransfer:0}),kk=Sn(Ek),bk=Ye({},Ka,{relatedTarget:0}),vd=Sn(bk),Tk=Ye({},po,{animationName:0,elapsedTime:0,pseudoElement:0}),Ik=Sn(Tk),Ak=Ye({},po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sk=Sn(Ak),Nk=Ye({},po,{data:0}),bg=Sn(Nk),Ck={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qk[t])?!!e[t]:!1}function Lf(){return Pk}var jk=Ye({},Ka,{key:function(t){if(t.key){var e=Ck[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=su(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lf,charCode:function(t){return t.type==="keypress"?su(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?su(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dk=Sn(jk),Ok=Ye({},yc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tg=Sn(Ok),Mk=Ye({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lf}),Lk=Sn(Mk),Vk=Ye({},po,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uk=Sn(Vk),Fk=Ye({},yc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zk=Sn(Fk),Bk=[9,13,27,32],Vf=Dr&&"CompositionEvent"in window,ta=null;Dr&&"documentMode"in document&&(ta=document.documentMode);var $k=Dr&&"TextEvent"in window&&!ta,Bv=Dr&&(!Vf||ta&&8<ta&&11>=ta),Ig=" ",Ag=!1;function $v(t,e){switch(t){case"keyup":return Bk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ni=!1;function Wk(t,e){switch(t){case"compositionend":return Wv(e);case"keypress":return e.which!==32?null:(Ag=!0,Ig);case"textInput":return t=e.data,t===Ig&&Ag?null:t;default:return null}}function Hk(t,e){if(Ni)return t==="compositionend"||!Vf&&$v(t,e)?(t=zv(),ru=Of=is=null,Ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bv&&e.locale!=="ko"?null:e.data;default:return null}}var Kk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Kk[t.type]:e==="textarea"}function Hv(t,e,n,r){kv(r),e=Nu(e,"onChange"),0<e.length&&(n=new Mf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var na=null,wa=null;function Gk(t){r_(t,0)}function vc(t){var e=qi(t);if(gv(e))return t}function Qk(t,e){if(t==="change")return e}var Kv=!1;if(Dr){var _d;if(Dr){var wd="oninput"in document;if(!wd){var Ng=document.createElement("div");Ng.setAttribute("oninput","return;"),wd=typeof Ng.oninput=="function"}_d=wd}else _d=!1;Kv=_d&&(!document.documentMode||9<document.documentMode)}function Cg(){na&&(na.detachEvent("onpropertychange",Gv),wa=na=null)}function Gv(t){if(t.propertyName==="value"&&vc(wa)){var e=[];Hv(e,wa,t,Rf(t)),Av(Gk,e)}}function Yk(t,e,n){t==="focusin"?(Cg(),na=e,wa=n,na.attachEvent("onpropertychange",Gv)):t==="focusout"&&Cg()}function Xk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vc(wa)}function Jk(t,e){if(t==="click")return vc(e)}function Zk(t,e){if(t==="input"||t==="change")return vc(e)}function eb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:eb;function xa(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zd.call(e,s)||!Yn(t[s],e[s]))return!1}return!0}function Rg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,e){var n=Rg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rg(n)}}function Qv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yv(){for(var t=window,e=Eu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Eu(t.document)}return e}function Uf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tb(t){var e=Yv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qv(n.ownerDocument.documentElement,n)){if(r!==null&&Uf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qg(n,i);var o=qg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nb=Dr&&"documentMode"in document&&11>=document.documentMode,Ci=null,vh=null,ra=null,_h=!1;function Pg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_h||Ci==null||Ci!==Eu(r)||(r=Ci,"selectionStart"in r&&Uf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ra&&xa(ra,r)||(ra=r,r=Nu(vh,"onSelect"),0<r.length&&(e=new Mf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ci)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ri={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},xd={},Xv={};Dr&&(Xv=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function _c(t){if(xd[t])return xd[t];if(!Ri[t])return t;var e=Ri[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Xv)return xd[t]=e[n];return t}var Jv=_c("animationend"),Zv=_c("animationiteration"),e_=_c("animationstart"),t_=_c("transitionend"),n_=new Map,jg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(t,e){n_.set(t,e),di(e,[t])}for(var Ed=0;Ed<jg.length;Ed++){var kd=jg[Ed],rb=kd.toLowerCase(),sb=kd[0].toUpperCase()+kd.slice(1);Ts(rb,"on"+sb)}Ts(Jv,"onAnimationEnd");Ts(Zv,"onAnimationIteration");Ts(e_,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(t_,"onTransitionEnd");Xi("onMouseEnter",["mouseout","mouseover"]);Xi("onMouseLeave",["mouseout","mouseover"]);Xi("onPointerEnter",["pointerout","pointerover"]);Xi("onPointerLeave",["pointerout","pointerover"]);di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));di("onBeforeInput",["compositionend","keypress","textInput","paste"]);di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ib=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function Dg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rk(r,e,void 0,t),t.currentTarget=null}function r_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Dg(s,l,h),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Dg(s,l,h),i=c}}}if(bu)throw t=ph,bu=!1,ph=null,t}function ze(t,e){var n=e[bh];n===void 0&&(n=e[bh]=new Set);var r=t+"__bubble";n.has(r)||(s_(e,t,2,!1),n.add(r))}function bd(t,e,n){var r=0;e&&(r|=4),s_(n,t,r,e)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function Ea(t){if(!t[Ol]){t[Ol]=!0,dv.forEach(function(n){n!=="selectionchange"&&(ib.has(n)||bd(n,!1,t),bd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ol]||(e[Ol]=!0,bd("selectionchange",!1,e))}}function s_(t,e,n,r){switch(Fv(e)){case 1:var s=_k;break;case 4:s=wk;break;default:s=Df}n=s.bind(null,e,n,t),s=void 0,!fh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Td(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Fs(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Av(function(){var h=i,p=Rf(n),m=[];e:{var g=n_.get(t);if(g!==void 0){var S=Mf,R=t;switch(t){case"keypress":if(su(n)===0)break e;case"keydown":case"keyup":S=Dk;break;case"focusin":R="focus",S=vd;break;case"focusout":R="blur",S=vd;break;case"beforeblur":case"afterblur":S=vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=kk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Lk;break;case Jv:case Zv:case e_:S=Ik;break;case t_:S=Uk;break;case"scroll":S=xk;break;case"wheel":S=zk;break;case"copy":case"cut":case"paste":S=Sk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Tg}var D=(e&4)!==0,I=!D&&t==="scroll",x=D?g!==null?g+"Capture":null:g;D=[];for(var _=h,k;_!==null;){k=_;var P=k.stateNode;if(k.tag===5&&P!==null&&(k=P,x!==null&&(P=ga(_,x),P!=null&&D.push(ka(_,P,k)))),I)break;_=_.return}0<D.length&&(g=new S(g,R,null,n,p),m.push({event:g,listeners:D}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&n!==dh&&(R=n.relatedTarget||n.fromElement)&&(Fs(R)||R[Or]))break e;if((S||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,S?(R=n.relatedTarget||n.toElement,S=h,R=R?Fs(R):null,R!==null&&(I=hi(R),R!==I||R.tag!==5&&R.tag!==6)&&(R=null)):(S=null,R=h),S!==R)){if(D=kg,P="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(D=Tg,P="onPointerLeave",x="onPointerEnter",_="pointer"),I=S==null?g:qi(S),k=R==null?g:qi(R),g=new D(P,_+"leave",S,n,p),g.target=I,g.relatedTarget=k,P=null,Fs(p)===h&&(D=new D(x,_+"enter",R,n,p),D.target=k,D.relatedTarget=I,P=D),I=P,S&&R)t:{for(D=S,x=R,_=0,k=D;k;k=wi(k))_++;for(k=0,P=x;P;P=wi(P))k++;for(;0<_-k;)D=wi(D),_--;for(;0<k-_;)x=wi(x),k--;for(;_--;){if(D===x||x!==null&&D===x.alternate)break t;D=wi(D),x=wi(x)}D=null}else D=null;S!==null&&Og(m,g,S,D,!1),R!==null&&I!==null&&Og(m,I,R,D,!0)}}e:{if(g=h?qi(h):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var W=Qk;else if(Sg(g))if(Kv)W=Zk;else{W=Xk;var z=Yk}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(W=Jk);if(W&&(W=W(t,h))){Hv(m,W,n,p);break e}z&&z(t,g,h),t==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&oh(g,"number",g.value)}switch(z=h?qi(h):window,t){case"focusin":(Sg(z)||z.contentEditable==="true")&&(Ci=z,vh=h,ra=null);break;case"focusout":ra=vh=Ci=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,Pg(m,n,p);break;case"selectionchange":if(nb)break;case"keydown":case"keyup":Pg(m,n,p)}var w;if(Vf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ni?$v(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Bv&&n.locale!=="ko"&&(Ni||v!=="onCompositionStart"?v==="onCompositionEnd"&&Ni&&(w=zv()):(is=p,Of="value"in is?is.value:is.textContent,Ni=!0)),z=Nu(h,v),0<z.length&&(v=new bg(v,t,null,n,p),m.push({event:v,listeners:z}),w?v.data=w:(w=Wv(n),w!==null&&(v.data=w)))),(w=$k?Wk(t,n):Hk(t,n))&&(h=Nu(h,"onBeforeInput"),0<h.length&&(p=new bg("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=w))}r_(m,e)})}function ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ga(t,n),i!=null&&r.unshift(ka(t,i,s)),i=ga(t,e),i!=null&&r.push(ka(t,i,s))),t=t.return}return r}function wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Og(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=ga(n,i),c!=null&&o.unshift(ka(n,c,l))):s||(c=ga(n,i),c!=null&&o.push(ka(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ob=/\r\n?/g,ab=/\u0000|\uFFFD/g;function Mg(t){return(typeof t=="string"?t:""+t).replace(ob,`
`).replace(ab,"")}function Ml(t,e,n){if(e=Mg(e),Mg(t)!==e&&n)throw Error(K(425))}function Cu(){}var wh=null,xh=null;function Eh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kh=typeof setTimeout=="function"?setTimeout:void 0,lb=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,ub=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(t){return Lg.resolve(null).then(t).catch(cb)}:kh;function cb(t){setTimeout(function(){throw t})}function Id(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_a(e)}function ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mo=Math.random().toString(36).slice(2),or="__reactFiber$"+mo,ba="__reactProps$"+mo,Or="__reactContainer$"+mo,bh="__reactEvents$"+mo,db="__reactListeners$"+mo,hb="__reactHandles$"+mo;function Fs(t){var e=t[or];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Or]||n[or]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vg(t);t!==null;){if(n=t[or])return n;t=Vg(t)}return e}t=n,n=t.parentNode}return null}function Ga(t){return t=t[or]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function wc(t){return t[ba]||null}var Th=[],Pi=-1;function Is(t){return{current:t}}function $e(t){0>Pi||(t.current=Th[Pi],Th[Pi]=null,Pi--)}function Ve(t,e){Pi++,Th[Pi]=t.current,t.current=e}var ws={},Gt=Is(ws),un=Is(!1),Ys=ws;function Ji(t,e){var n=t.type.contextTypes;if(!n)return ws;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function cn(t){return t=t.childContextTypes,t!=null}function Ru(){$e(un),$e(Gt)}function Ug(t,e,n){if(Gt.current!==ws)throw Error(K(168));Ve(Gt,e),Ve(un,n)}function i_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,YE(t)||"Unknown",s));return Ye({},n,r)}function qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ws,Ys=Gt.current,Ve(Gt,t),Ve(un,un.current),!0}function Fg(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=i_(t,e,Ys),r.__reactInternalMemoizedMergedChildContext=t,$e(un),$e(Gt),Ve(Gt,t)):$e(un),Ve(un,n)}var br=null,xc=!1,Ad=!1;function o_(t){br===null?br=[t]:br.push(t)}function fb(t){xc=!0,o_(t)}function As(){if(!Ad&&br!==null){Ad=!0;var t=0,e=Re;try{var n=br;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,xc=!1}catch(s){throw br!==null&&(br=br.slice(t+1)),Rv(qf,As),s}finally{Re=e,Ad=!1}}return null}var ji=[],Di=0,Pu=null,ju=0,Rn=[],qn=0,Xs=null,Ar=1,Sr="";function Ms(t,e){ji[Di++]=ju,ji[Di++]=Pu,Pu=t,ju=e}function a_(t,e,n){Rn[qn++]=Ar,Rn[qn++]=Sr,Rn[qn++]=Xs,Xs=t;var r=Ar;t=Sr;var s=32-Kn(r)-1;r&=~(1<<s),n+=1;var i=32-Kn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ar=1<<32-Kn(e)+s|n<<s|r,Sr=i+t}else Ar=1<<i|n<<s|r,Sr=t}function Ff(t){t.return!==null&&(Ms(t,1),a_(t,1,0))}function zf(t){for(;t===Pu;)Pu=ji[--Di],ji[Di]=null,ju=ji[--Di],ji[Di]=null;for(;t===Xs;)Xs=Rn[--qn],Rn[qn]=null,Sr=Rn[--qn],Rn[qn]=null,Ar=Rn[--qn],Rn[qn]=null}var bn=null,xn=null,Ke=!1,Wn=null;function l_(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,xn=ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xs!==null?{id:Ar,overflow:Sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,xn=null,!0):!1;default:return!1}}function Ih(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ah(t){if(Ke){var e=xn;if(e){var n=e;if(!zg(t,e)){if(Ih(t))throw Error(K(418));e=ds(n.nextSibling);var r=bn;e&&zg(t,e)?l_(r,n):(t.flags=t.flags&-4097|2,Ke=!1,bn=t)}}else{if(Ih(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ke=!1,bn=t}}}function Bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function Ll(t){if(t!==bn)return!1;if(!Ke)return Bg(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Eh(t.type,t.memoizedProps)),e&&(e=xn)){if(Ih(t))throw u_(),Error(K(418));for(;e;)l_(t,e),e=ds(e.nextSibling)}if(Bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){xn=ds(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}xn=null}}else xn=bn?ds(t.stateNode.nextSibling):null;return!0}function u_(){for(var t=xn;t;)t=ds(t.nextSibling)}function Zi(){xn=bn=null,Ke=!1}function Bf(t){Wn===null?Wn=[t]:Wn.push(t)}var pb=Br.ReactCurrentBatchConfig;function Oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Vl(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $g(t){var e=t._init;return e(t._payload)}function c_(t){function e(x,_){if(t){var k=x.deletions;k===null?(x.deletions=[_],x.flags|=16):k.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=ms(x,_),x.index=0,x.sibling=null,x}function i(x,_,k){return x.index=k,t?(k=x.alternate,k!==null?(k=k.index,k<_?(x.flags|=2,_):k):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,_,k,P){return _===null||_.tag!==6?(_=jd(k,x.mode,P),_.return=x,_):(_=s(_,k),_.return=x,_)}function c(x,_,k,P){var W=k.type;return W===Si?p(x,_,k.props.children,P,k.key):_!==null&&(_.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xr&&$g(W)===_.type)?(P=s(_,k.props),P.ref=Oo(x,_,k),P.return=x,P):(P=du(k.type,k.key,k.props,null,x.mode,P),P.ref=Oo(x,_,k),P.return=x,P)}function h(x,_,k,P){return _===null||_.tag!==4||_.stateNode.containerInfo!==k.containerInfo||_.stateNode.implementation!==k.implementation?(_=Dd(k,x.mode,P),_.return=x,_):(_=s(_,k.children||[]),_.return=x,_)}function p(x,_,k,P,W){return _===null||_.tag!==7?(_=Ks(k,x.mode,P,W),_.return=x,_):(_=s(_,k),_.return=x,_)}function m(x,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return _=jd(""+_,x.mode,k),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sl:return k=du(_.type,_.key,_.props,null,x.mode,k),k.ref=Oo(x,null,_),k.return=x,k;case Ai:return _=Dd(_,x.mode,k),_.return=x,_;case Xr:var P=_._init;return m(x,P(_._payload),k)}if(zo(_)||Ro(_))return _=Ks(_,x.mode,k,null),_.return=x,_;Vl(x,_)}return null}function g(x,_,k,P){var W=_!==null?_.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return W!==null?null:l(x,_,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Sl:return k.key===W?c(x,_,k,P):null;case Ai:return k.key===W?h(x,_,k,P):null;case Xr:return W=k._init,g(x,_,W(k._payload),P)}if(zo(k)||Ro(k))return W!==null?null:p(x,_,k,P,null);Vl(x,k)}return null}function S(x,_,k,P,W){if(typeof P=="string"&&P!==""||typeof P=="number")return x=x.get(k)||null,l(_,x,""+P,W);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Sl:return x=x.get(P.key===null?k:P.key)||null,c(_,x,P,W);case Ai:return x=x.get(P.key===null?k:P.key)||null,h(_,x,P,W);case Xr:var z=P._init;return S(x,_,k,z(P._payload),W)}if(zo(P)||Ro(P))return x=x.get(k)||null,p(_,x,P,W,null);Vl(_,P)}return null}function R(x,_,k,P){for(var W=null,z=null,w=_,v=_=0,E=null;w!==null&&v<k.length;v++){w.index>v?(E=w,w=null):E=w.sibling;var b=g(x,w,k[v],P);if(b===null){w===null&&(w=E);break}t&&w&&b.alternate===null&&e(x,w),_=i(b,_,v),z===null?W=b:z.sibling=b,z=b,w=E}if(v===k.length)return n(x,w),Ke&&Ms(x,v),W;if(w===null){for(;v<k.length;v++)w=m(x,k[v],P),w!==null&&(_=i(w,_,v),z===null?W=w:z.sibling=w,z=w);return Ke&&Ms(x,v),W}for(w=r(x,w);v<k.length;v++)E=S(w,x,v,k[v],P),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?v:E.key),_=i(E,_,v),z===null?W=E:z.sibling=E,z=E);return t&&w.forEach(function(N){return e(x,N)}),Ke&&Ms(x,v),W}function D(x,_,k,P){var W=Ro(k);if(typeof W!="function")throw Error(K(150));if(k=W.call(k),k==null)throw Error(K(151));for(var z=W=null,w=_,v=_=0,E=null,b=k.next();w!==null&&!b.done;v++,b=k.next()){w.index>v?(E=w,w=null):E=w.sibling;var N=g(x,w,b.value,P);if(N===null){w===null&&(w=E);break}t&&w&&N.alternate===null&&e(x,w),_=i(N,_,v),z===null?W=N:z.sibling=N,z=N,w=E}if(b.done)return n(x,w),Ke&&Ms(x,v),W;if(w===null){for(;!b.done;v++,b=k.next())b=m(x,b.value,P),b!==null&&(_=i(b,_,v),z===null?W=b:z.sibling=b,z=b);return Ke&&Ms(x,v),W}for(w=r(x,w);!b.done;v++,b=k.next())b=S(w,x,v,b.value,P),b!==null&&(t&&b.alternate!==null&&w.delete(b.key===null?v:b.key),_=i(b,_,v),z===null?W=b:z.sibling=b,z=b);return t&&w.forEach(function(C){return e(x,C)}),Ke&&Ms(x,v),W}function I(x,_,k,P){if(typeof k=="object"&&k!==null&&k.type===Si&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Sl:e:{for(var W=k.key,z=_;z!==null;){if(z.key===W){if(W=k.type,W===Si){if(z.tag===7){n(x,z.sibling),_=s(z,k.props.children),_.return=x,x=_;break e}}else if(z.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xr&&$g(W)===z.type){n(x,z.sibling),_=s(z,k.props),_.ref=Oo(x,z,k),_.return=x,x=_;break e}n(x,z);break}else e(x,z);z=z.sibling}k.type===Si?(_=Ks(k.props.children,x.mode,P,k.key),_.return=x,x=_):(P=du(k.type,k.key,k.props,null,x.mode,P),P.ref=Oo(x,_,k),P.return=x,x=P)}return o(x);case Ai:e:{for(z=k.key;_!==null;){if(_.key===z)if(_.tag===4&&_.stateNode.containerInfo===k.containerInfo&&_.stateNode.implementation===k.implementation){n(x,_.sibling),_=s(_,k.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Dd(k,x.mode,P),_.return=x,x=_}return o(x);case Xr:return z=k._init,I(x,_,z(k._payload),P)}if(zo(k))return R(x,_,k,P);if(Ro(k))return D(x,_,k,P);Vl(x,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,k),_.return=x,x=_):(n(x,_),_=jd(k,x.mode,P),_.return=x,x=_),o(x)):n(x,_)}return I}var eo=c_(!0),d_=c_(!1),Du=Is(null),Ou=null,Oi=null,$f=null;function Wf(){$f=Oi=Ou=null}function Hf(t){var e=Du.current;$e(Du),t._currentValue=e}function Sh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function $i(t,e){Ou=t,$f=Oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ln=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if($f!==t)if(t={context:t,memoizedValue:e,next:null},Oi===null){if(Ou===null)throw Error(K(308));Oi=t,Ou.dependencies={lanes:0,firstContext:t}}else Oi=Oi.next=t;return e}var zs=null;function Kf(t){zs===null?zs=[t]:zs.push(t)}function h_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Kf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mr(t,r)}function Mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jr=!1;function Gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mr(t,n)}return s=r.interleaved,s===null?(e.next=e,Kf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mr(t,n)}function iu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pf(t,n)}}function Wg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mu(t,e,n,r){var s=t.updateQueue;Jr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,l=i;do{var g=l.lane,S=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,D=l;switch(g=e,S=n,D.tag){case 1:if(R=D.payload,typeof R=="function"){m=R.call(S,m,g);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=D.payload,g=typeof R=="function"?R.call(S,m,g):R,g==null)break e;m=Ye({},m,g);break e;case 2:Jr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else S={eventTime:S,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=S,c=m):p=p.next=S,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Zs|=o,t.lanes=o,t.memoizedState=m}}function Hg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var Qa={},ur=Is(Qa),Ta=Is(Qa),Ia=Is(Qa);function Bs(t){if(t===Qa)throw Error(K(174));return t}function Qf(t,e){switch(Ve(Ia,e),Ve(Ta,t),Ve(ur,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lh(e,t)}$e(ur),Ve(ur,e)}function to(){$e(ur),$e(Ta),$e(Ia)}function p_(t){Bs(Ia.current);var e=Bs(ur.current),n=lh(e,t.type);e!==n&&(Ve(Ta,t),Ve(ur,n))}function Yf(t){Ta.current===t&&($e(ur),$e(Ta))}var Ge=Is(0);function Lu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sd=[];function Xf(){for(var t=0;t<Sd.length;t++)Sd[t]._workInProgressVersionPrimary=null;Sd.length=0}var ou=Br.ReactCurrentDispatcher,Nd=Br.ReactCurrentBatchConfig,Js=0,Qe=null,vt=null,Tt=null,Vu=!1,sa=!1,Aa=0,mb=0;function Ft(){throw Error(K(321))}function Jf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function Zf(t,e,n,r,s,i){if(Js=i,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ou.current=t===null||t.memoizedState===null?_b:wb,t=n(r,s),sa){i=0;do{if(sa=!1,Aa=0,25<=i)throw Error(K(301));i+=1,Tt=vt=null,e.updateQueue=null,ou.current=xb,t=n(r,s)}while(sa)}if(ou.current=Uu,e=vt!==null&&vt.next!==null,Js=0,Tt=vt=Qe=null,Vu=!1,e)throw Error(K(300));return t}function ep(){var t=Aa!==0;return Aa=0,t}function ir(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Qe.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function Ln(){if(vt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=Tt===null?Qe.memoizedState:Tt.next;if(e!==null)Tt=e,vt=t;else{if(t===null)throw Error(K(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Tt===null?Qe.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Sa(t,e){return typeof e=="function"?e(t):e}function Cd(t){var e=Ln(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=vt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,h=i;do{var p=h.lane;if((Js&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Qe.lanes|=p,Zs|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=l,Yn(r,e.memoizedState)||(ln=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Qe.lanes|=i,Zs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rd(t){var e=Ln(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Yn(i,e.memoizedState)||(ln=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function m_(){}function g_(t,e){var n=Qe,r=Ln(),s=e(),i=!Yn(r.memoizedState,s);if(i&&(r.memoizedState=s,ln=!0),r=r.queue,tp(__.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Na(9,v_.bind(null,n,r,s,e),void 0,null),It===null)throw Error(K(349));Js&30||y_(n,e,s)}return s}function y_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function v_(t,e,n,r){e.value=n,e.getSnapshot=r,w_(e)&&x_(t)}function __(t,e,n){return n(function(){w_(e)&&x_(t)})}function w_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function x_(t){var e=Mr(t,1);e!==null&&Gn(e,t,1,-1)}function Kg(t){var e=ir();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:t},e.queue=t,t=t.dispatch=vb.bind(null,Qe,t),[e.memoizedState,t]}function Na(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function E_(){return Ln().memoizedState}function au(t,e,n,r){var s=ir();Qe.flags|=t,s.memoizedState=Na(1|e,n,void 0,r===void 0?null:r)}function Ec(t,e,n,r){var s=Ln();r=r===void 0?null:r;var i=void 0;if(vt!==null){var o=vt.memoizedState;if(i=o.destroy,r!==null&&Jf(r,o.deps)){s.memoizedState=Na(e,n,i,r);return}}Qe.flags|=t,s.memoizedState=Na(1|e,n,i,r)}function Gg(t,e){return au(8390656,8,t,e)}function tp(t,e){return Ec(2048,8,t,e)}function k_(t,e){return Ec(4,2,t,e)}function b_(t,e){return Ec(4,4,t,e)}function T_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function I_(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4,4,T_.bind(null,e,t),n)}function np(){}function A_(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function S_(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function N_(t,e,n){return Js&21?(Yn(n,e)||(n=jv(),Qe.lanes|=n,Zs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ln=!0),t.memoizedState=n)}function gb(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Nd.transition;Nd.transition={};try{t(!1),e()}finally{Re=n,Nd.transition=r}}function C_(){return Ln().memoizedState}function yb(t,e,n){var r=ps(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},R_(t))q_(e,n);else if(n=h_(t,e,n,r),n!==null){var s=en();Gn(n,t,r,s),P_(n,e,r)}}function vb(t,e,n){var r=ps(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(R_(t))q_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Yn(l,o)){var c=e.interleaved;c===null?(s.next=s,Kf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=h_(t,e,s,r),n!==null&&(s=en(),Gn(n,t,r,s),P_(n,e,r))}}function R_(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function q_(t,e){sa=Vu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pf(t,n)}}var Uu={readContext:Mn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},_b={readContext:Mn,useCallback:function(t,e){return ir().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:Gg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,au(4194308,4,T_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return au(4194308,4,t,e)},useInsertionEffect:function(t,e){return au(4,2,t,e)},useMemo:function(t,e){var n=ir();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ir();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yb.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=ir();return t={current:t},e.memoizedState=t},useState:Kg,useDebugValue:np,useDeferredValue:function(t){return ir().memoizedState=t},useTransition:function(){var t=Kg(!1),e=t[0];return t=gb.bind(null,t[1]),ir().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,s=ir();if(Ke){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),It===null)throw Error(K(349));Js&30||y_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Gg(__.bind(null,r,i,t),[t]),r.flags|=2048,Na(9,v_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ir(),e=It.identifierPrefix;if(Ke){var n=Sr,r=Ar;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},wb={readContext:Mn,useCallback:A_,useContext:Mn,useEffect:tp,useImperativeHandle:I_,useInsertionEffect:k_,useLayoutEffect:b_,useMemo:S_,useReducer:Cd,useRef:E_,useState:function(){return Cd(Sa)},useDebugValue:np,useDeferredValue:function(t){var e=Ln();return N_(e,vt.memoizedState,t)},useTransition:function(){var t=Cd(Sa)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:m_,useSyncExternalStore:g_,useId:C_,unstable_isNewReconciler:!1},xb={readContext:Mn,useCallback:A_,useContext:Mn,useEffect:tp,useImperativeHandle:I_,useInsertionEffect:k_,useLayoutEffect:b_,useMemo:S_,useReducer:Rd,useRef:E_,useState:function(){return Rd(Sa)},useDebugValue:np,useDeferredValue:function(t){var e=Ln();return vt===null?e.memoizedState=t:N_(e,vt.memoizedState,t)},useTransition:function(){var t=Rd(Sa)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:m_,useSyncExternalStore:g_,useId:C_,unstable_isNewReconciler:!1};function Bn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Nh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kc={isMounted:function(t){return(t=t._reactInternals)?hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),s=ps(t),i=qr(r,s);i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Gn(e,t,s,r),iu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),s=ps(t),i=qr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hs(t,i,s),e!==null&&(Gn(e,t,s,r),iu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=ps(t),s=qr(n,r);s.tag=2,e!=null&&(s.callback=e),e=hs(t,s,r),e!==null&&(Gn(e,t,r,n),iu(e,t,r))}};function Qg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!xa(n,r)||!xa(s,i):!0}function j_(t,e,n){var r=!1,s=ws,i=e.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(s=cn(e)?Ys:Gt.current,r=e.contextTypes,i=(r=r!=null)?Ji(t,s):ws),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Yg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kc.enqueueReplaceState(e,e.state,null)}function Ch(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Gf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mn(i):(i=cn(e)?Ys:Gt.current,s.context=Ji(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Nh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&kc.enqueueReplaceState(s,s.state,null),Mu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function no(t,e){try{var n="",r=e;do n+=QE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function qd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Eb=typeof WeakMap=="function"?WeakMap:Map;function D_(t,e,n){n=qr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zu||(zu=!0,Fh=r),Rh(t,e)},n}function O_(t,e,n){n=qr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Rh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Rh(t,e),typeof r!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Xg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Eb;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ob.bind(null,t,e,n),e.then(t,t))}function Jg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qr(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var kb=Br.ReactCurrentOwner,ln=!1;function Zt(t,e,n,r){e.child=t===null?d_(e,null,n,r):eo(e,t.child,n,r)}function ey(t,e,n,r,s){n=n.render;var i=e.ref;return $i(e,s),r=Zf(t,e,n,r,i,s),n=ep(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lr(t,e,s)):(Ke&&n&&Ff(e),e.flags|=1,Zt(t,e,r,s),e.child)}function ty(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!cp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,M_(t,e,i,r,s)):(t=du(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xa,n(o,r)&&t.ref===e.ref)return Lr(t,e,s)}return e.flags|=1,t=ms(i,r),t.ref=e.ref,t.return=e,e.child=t}function M_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xa(i,r)&&t.ref===e.ref)if(ln=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ln=!0);else return e.lanes=t.lanes,Lr(t,e,s)}return qh(t,e,n,r,s)}function L_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Li,wn),wn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Li,wn),wn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ve(Li,wn),wn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ve(Li,wn),wn|=r;return Zt(t,e,s,n),e.child}function V_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qh(t,e,n,r,s){var i=cn(n)?Ys:Gt.current;return i=Ji(e,i),$i(e,s),n=Zf(t,e,n,r,i,s),r=ep(),t!==null&&!ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lr(t,e,s)):(Ke&&r&&Ff(e),e.flags|=1,Zt(t,e,n,s),e.child)}function ny(t,e,n,r,s){if(cn(n)){var i=!0;qu(e)}else i=!1;if($i(e,s),e.stateNode===null)lu(t,e),j_(e,n,r),Ch(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Mn(h):(h=cn(n)?Ys:Gt.current,h=Ji(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Yg(e,o,r,h),Jr=!1;var g=e.memoizedState;o.state=g,Mu(e,r,o,s),c=e.memoizedState,l!==r||g!==c||un.current||Jr?(typeof p=="function"&&(Nh(e,n,p,r),c=e.memoizedState),(l=Jr||Qg(e,n,l,r,g,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,f_(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Bn(e.type,l),o.props=h,m=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mn(c):(c=cn(n)?Ys:Gt.current,c=Ji(e,c));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==c)&&Yg(e,o,r,c),Jr=!1,g=e.memoizedState,o.state=g,Mu(e,r,o,s);var R=e.memoizedState;l!==m||g!==R||un.current||Jr?(typeof S=="function"&&(Nh(e,n,S,r),R=e.memoizedState),(h=Jr||Qg(e,n,h,r,g,R,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ph(t,e,n,r,i,s)}function Ph(t,e,n,r,s,i){V_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Fg(e,n,!1),Lr(t,e,i);r=e.stateNode,kb.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=eo(e,t.child,null,i),e.child=eo(e,null,l,i)):Zt(t,e,l,i),e.memoizedState=r.state,s&&Fg(e,n,!0),e.child}function U_(t){var e=t.stateNode;e.pendingContext?Ug(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ug(t,e.context,!1),Qf(t,e.containerInfo)}function ry(t,e,n,r,s){return Zi(),Bf(s),e.flags|=256,Zt(t,e,n,r),e.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function Dh(t){return{baseLanes:t,cachePool:null,transitions:null}}function F_(t,e,n){var r=e.pendingProps,s=Ge.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ve(Ge,s&1),t===null)return Ah(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ic(o,r,0,null),t=Ks(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Dh(n),e.memoizedState=jh,t):rp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return bb(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ms(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ms(l,i):(i=Ks(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Dh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=jh,r}return i=t.child,t=i.sibling,r=ms(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rp(t,e){return e=Ic({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,r){return r!==null&&Bf(r),eo(e,t.child,null,n),t=rp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bb(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=qd(Error(K(422))),Ul(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ic({mode:"visible",children:r.children},s,0,null),i=Ks(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&eo(e,t.child,null,o),e.child.memoizedState=Dh(o),e.memoizedState=jh,i);if(!(e.mode&1))return Ul(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(K(419)),r=qd(i,r,void 0),Ul(t,e,o,r)}if(l=(o&t.childLanes)!==0,ln||l){if(r=It,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mr(t,s),Gn(r,t,s,-1))}return up(),r=qd(Error(K(421))),Ul(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Mb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,xn=ds(s.nextSibling),bn=e,Ke=!0,Wn=null,t!==null&&(Rn[qn++]=Ar,Rn[qn++]=Sr,Rn[qn++]=Xs,Ar=t.id,Sr=t.overflow,Xs=e),e=rp(e,r.children),e.flags|=4096,e)}function sy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sh(t.return,e,n)}function Pd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function z_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Zt(t,e,r.children,n),r=Ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sy(t,n,e);else if(t.tag===19)sy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(Ge,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Pd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Pd(e,!0,n,null,i);break;case"together":Pd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=ms(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ms(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Tb(t,e,n){switch(e.tag){case 3:U_(e),Zi();break;case 5:p_(e);break;case 1:cn(e.type)&&qu(e);break;case 4:Qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ve(Du,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?F_(t,e,n):(Ve(Ge,Ge.current&1),t=Lr(t,e,n),t!==null?t.sibling:null);Ve(Ge,Ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return z_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ve(Ge,Ge.current),r)break;return null;case 22:case 23:return e.lanes=0,L_(t,e,n)}return Lr(t,e,n)}var B_,Oh,$_,W_;B_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Oh=function(){};$_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Bs(ur.current);var i=null;switch(n){case"input":s=sh(t,s),r=sh(t,r),i=[];break;case"select":s=Ye({},s,{value:void 0}),r=Ye({},r,{value:void 0}),i=[];break;case"textarea":s=ah(t,s),r=ah(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cu)}uh(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(pa.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(pa.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ze("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};W_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ib(t,e,n){var r=e.pendingProps;switch(zf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(e),null;case 1:return cn(e.type)&&Ru(),zt(e),null;case 3:return r=e.stateNode,to(),$e(un),$e(Gt),Xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&($h(Wn),Wn=null))),Oh(t,e),zt(e),null;case 5:Yf(e);var s=Bs(Ia.current);if(n=e.type,t!==null&&e.stateNode!=null)$_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return zt(e),null}if(t=Bs(ur.current),Ll(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[or]=e,r[ba]=i,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<$o.length;s++)ze($o[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":fg(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":mg(r,i),ze("invalid",r)}uh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ml(r.textContent,l,t),s=["children",""+l]):pa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Nl(r),pg(r,i,!0);break;case"textarea":Nl(r),gg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=_v(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[or]=e,t[ba]=r,B_(t,e,!1,!1),e.stateNode=t;e:{switch(o=ch(n,r),n){case"dialog":ze("cancel",t),ze("close",t),s=r;break;case"iframe":case"object":case"embed":ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<$o.length;s++)ze($o[s],t);s=r;break;case"source":ze("error",t),s=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=r;break;case"details":ze("toggle",t),s=r;break;case"input":fg(t,r),s=sh(t,r),ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ye({},r,{value:void 0}),ze("invalid",t);break;case"textarea":mg(t,r),s=ah(t,r),ze("invalid",t);break;default:s=r}uh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ev(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&wv(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ma(t,c):typeof c=="number"&&ma(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",t):c!=null&&Af(t,i,c,o))}switch(n){case"input":Nl(t),pg(t,r,!1);break;case"textarea":Nl(t),gg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_s(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ui(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ui(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zt(e),null;case 6:if(t&&e.stateNode!=null)W_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Bs(Ia.current),Bs(ur.current),Ll(e)){if(r=e.stateNode,n=e.memoizedProps,r[or]=e,(i=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:Ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ml(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return zt(e),null;case 13:if($e(Ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&xn!==null&&e.mode&1&&!(e.flags&128))u_(),Zi(),e.flags|=98560,i=!1;else if(i=Ll(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[or]=e}else Zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),i=!1}else Wn!==null&&($h(Wn),Wn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?_t===0&&(_t=3):up())),e.updateQueue!==null&&(e.flags|=4),zt(e),null);case 4:return to(),Oh(t,e),t===null&&Ea(e.stateNode.containerInfo),zt(e),null;case 10:return Hf(e.type._context),zt(e),null;case 17:return cn(e.type)&&Ru(),zt(e),null;case 19:if($e(Ge),i=e.memoizedState,i===null)return zt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Mo(i,!1);else{if(_t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lu(t),o!==null){for(e.flags|=128,Mo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(Ge,Ge.current&1|2),e.child}t=t.sibling}i.tail!==null&&at()>ro&&(e.flags|=128,r=!0,Mo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ke)return zt(e),null}else 2*at()-i.renderingStartTime>ro&&n!==1073741824&&(e.flags|=128,r=!0,Mo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=at(),e.sibling=null,n=Ge.current,Ve(Ge,r?n&1|2:n&1),e):(zt(e),null);case 22:case 23:return lp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?wn&1073741824&&(zt(e),e.subtreeFlags&6&&(e.flags|=8192)):zt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function Ab(t,e){switch(zf(e),e.tag){case 1:return cn(e.type)&&Ru(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return to(),$e(un),$e(Gt),Xf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yf(e),null;case 13:if($e(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Ge),null;case 4:return to(),null;case 10:return Hf(e.type._context),null;case 22:case 23:return lp(),null;case 24:return null;default:return null}}var Fl=!1,Wt=!1,Sb=typeof WeakSet=="function"?WeakSet:Set,J=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){tt(t,e,r)}else n.current=null}function Mh(t,e,n){try{n()}catch(r){tt(t,e,r)}}var iy=!1;function Nb(t,e){if(wh=Au,t=Yv(),Uf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var S;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)g=m,m=S;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++p===r&&(c=o),(S=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=S}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xh={focusedElem:t,selectionRange:n},Au=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var D=R.memoizedProps,I=R.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?D:Bn(e.type,D),I);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(P){tt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return R=iy,iy=!1,R}function ia(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mh(e,n,i)}s=s.next}while(s!==r)}}function bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function H_(t){var e=t.alternate;e!==null&&(t.alternate=null,H_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[or],delete e[ba],delete e[bh],delete e[db],delete e[hb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function K_(t){return t.tag===5||t.tag===3||t.tag===4}function oy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||K_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cu));else if(r!==4&&(t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}function Uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Uh(t,e,n),t=t.sibling;t!==null;)Uh(t,e,n),t=t.sibling}var Ct=null,$n=!1;function Qr(t,e,n){for(n=n.child;n!==null;)G_(t,e,n),n=n.sibling}function G_(t,e,n){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount(gc,n)}catch{}switch(n.tag){case 5:Wt||Mi(n,e);case 6:var r=Ct,s=$n;Ct=null,Qr(t,e,n),Ct=r,$n=s,Ct!==null&&($n?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&($n?(t=Ct,n=n.stateNode,t.nodeType===8?Id(t.parentNode,n):t.nodeType===1&&Id(t,n),_a(t)):Id(Ct,n.stateNode));break;case 4:r=Ct,s=$n,Ct=n.stateNode.containerInfo,$n=!0,Qr(t,e,n),Ct=r,$n=s;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mh(n,e,o),s=s.next}while(s!==r)}Qr(t,e,n);break;case 1:if(!Wt&&(Mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){tt(n,e,l)}Qr(t,e,n);break;case 21:Qr(t,e,n);break;case 22:n.mode&1?(Wt=(r=Wt)||n.memoizedState!==null,Qr(t,e,n),Wt=r):Qr(t,e,n);break;default:Qr(t,e,n)}}function ay(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Sb),e.forEach(function(r){var s=Lb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ct=l.stateNode,$n=!1;break e;case 3:Ct=l.stateNode.containerInfo,$n=!0;break e;case 4:Ct=l.stateNode.containerInfo,$n=!0;break e}l=l.return}if(Ct===null)throw Error(K(160));G_(i,o,s),Ct=null,$n=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){tt(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Q_(e,t),e=e.sibling}function Q_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zn(e,t),sr(t),r&4){try{ia(3,t,t.return),bc(3,t)}catch(D){tt(t,t.return,D)}try{ia(5,t,t.return)}catch(D){tt(t,t.return,D)}}break;case 1:zn(e,t),sr(t),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(zn(e,t),sr(t),r&512&&n!==null&&Mi(n,n.return),t.flags&32){var s=t.stateNode;try{ma(s,"")}catch(D){tt(t,t.return,D)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&yv(s,i),ch(l,o);var h=ch(l,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Ev(s,m):p==="dangerouslySetInnerHTML"?wv(s,m):p==="children"?ma(s,m):Af(s,p,m,h)}switch(l){case"input":ih(s,i);break;case"textarea":vv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Ui(s,!!i.multiple,S,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ui(s,!!i.multiple,i.defaultValue,!0):Ui(s,!!i.multiple,i.multiple?[]:"",!1))}s[ba]=i}catch(D){tt(t,t.return,D)}}break;case 6:if(zn(e,t),sr(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(D){tt(t,t.return,D)}}break;case 3:if(zn(e,t),sr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_a(e.containerInfo)}catch(D){tt(t,t.return,D)}break;case 4:zn(e,t),sr(t);break;case 13:zn(e,t),sr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(op=at())),r&4&&ay(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(h=Wt)||p,zn(e,t),Wt=h):zn(e,t),sr(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(J=t,p=t.child;p!==null;){for(m=J=p;J!==null;){switch(g=J,S=g.child,g.tag){case 0:case 11:case 14:case 15:ia(4,g,g.return);break;case 1:Mi(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(D){tt(r,n,D)}}break;case 5:Mi(g,g.return);break;case 22:if(g.memoizedState!==null){uy(m);continue}}S!==null?(S.return=g,J=S):uy(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=xv("display",o))}catch(D){tt(t,t.return,D)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(D){tt(t,t.return,D)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:zn(e,t),sr(t),r&4&&ay(t);break;case 21:break;default:zn(e,t),sr(t)}}function sr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(K_(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ma(s,""),r.flags&=-33);var i=oy(t);Uh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=oy(t);Vh(t,l,o);break;default:throw Error(K(161))}}catch(c){tt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Cb(t,e,n){J=t,Y_(t)}function Y_(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Wt;l=Fl;var h=Wt;if(Fl=o,(Wt=c)&&!h)for(J=s;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?cy(s):c!==null?(c.return=o,J=c):cy(s);for(;i!==null;)J=i,Y_(i),i=i.sibling;J=s,Fl=l,Wt=h}ly(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):ly(t)}}function ly(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||bc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Bn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Hg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&_a(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Wt||e.flags&512&&Lh(e)}catch(g){tt(e,e.return,g)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function uy(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function cy(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{bc(4,e)}catch(c){tt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){tt(e,s,c)}}var i=e.return;try{Lh(e)}catch(c){tt(e,i,c)}break;case 5:var o=e.return;try{Lh(e)}catch(c){tt(e,o,c)}}}catch(c){tt(e,e.return,c)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var Rb=Math.ceil,Fu=Br.ReactCurrentDispatcher,sp=Br.ReactCurrentOwner,On=Br.ReactCurrentBatchConfig,ke=0,It=null,dt=null,Pt=0,wn=0,Li=Is(0),_t=0,Ca=null,Zs=0,Tc=0,ip=0,oa=null,on=null,op=0,ro=1/0,kr=null,zu=!1,Fh=null,fs=null,zl=!1,os=null,Bu=0,aa=0,zh=null,uu=-1,cu=0;function en(){return ke&6?at():uu!==-1?uu:uu=at()}function ps(t){return t.mode&1?ke&2&&Pt!==0?Pt&-Pt:pb.transition!==null?(cu===0&&(cu=jv()),cu):(t=Re,t!==0||(t=window.event,t=t===void 0?16:Fv(t.type)),t):1}function Gn(t,e,n,r){if(50<aa)throw aa=0,zh=null,Error(K(185));Ha(t,n,r),(!(ke&2)||t!==It)&&(t===It&&(!(ke&2)&&(Tc|=n),_t===4&&es(t,Pt)),dn(t,r),n===1&&ke===0&&!(e.mode&1)&&(ro=at()+500,xc&&As()))}function dn(t,e){var n=t.callbackNode;pk(t,e);var r=Iu(t,t===It?Pt:0);if(r===0)n!==null&&_g(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_g(n),e===1)t.tag===0?fb(dy.bind(null,t)):o_(dy.bind(null,t)),ub(function(){!(ke&6)&&As()}),n=null;else{switch(Dv(r)){case 1:n=qf;break;case 4:n=qv;break;case 16:n=Tu;break;case 536870912:n=Pv;break;default:n=Tu}n=sw(n,X_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function X_(t,e){if(uu=-1,cu=0,ke&6)throw Error(K(327));var n=t.callbackNode;if(Wi()&&t.callbackNode!==n)return null;var r=Iu(t,t===It?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$u(t,r);else{e=r;var s=ke;ke|=2;var i=Z_();(It!==t||Pt!==e)&&(kr=null,ro=at()+500,Hs(t,e));do try{jb();break}catch(l){J_(t,l)}while(!0);Wf(),Fu.current=i,ke=s,dt!==null?e=0:(It=null,Pt=0,e=_t)}if(e!==0){if(e===2&&(s=mh(t),s!==0&&(r=s,e=Bh(t,s))),e===1)throw n=Ca,Hs(t,0),es(t,r),dn(t,at()),n;if(e===6)es(t,r);else{if(s=t.current.alternate,!(r&30)&&!qb(s)&&(e=$u(t,r),e===2&&(i=mh(t),i!==0&&(r=i,e=Bh(t,i))),e===1))throw n=Ca,Hs(t,0),es(t,r),dn(t,at()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:Ls(t,on,kr);break;case 3:if(es(t,r),(r&130023424)===r&&(e=op+500-at(),10<e)){if(Iu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kh(Ls.bind(null,t,on,kr),e);break}Ls(t,on,kr);break;case 4:if(es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Kn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Rb(r/1960))-r,10<r){t.timeoutHandle=kh(Ls.bind(null,t,on,kr),r);break}Ls(t,on,kr);break;case 5:Ls(t,on,kr);break;default:throw Error(K(329))}}}return dn(t,at()),t.callbackNode===n?X_.bind(null,t):null}function Bh(t,e){var n=oa;return t.current.memoizedState.isDehydrated&&(Hs(t,e).flags|=256),t=$u(t,e),t!==2&&(e=on,on=n,e!==null&&$h(e)),t}function $h(t){on===null?on=t:on.push.apply(on,t)}function qb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e){for(e&=~ip,e&=~Tc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function dy(t){if(ke&6)throw Error(K(327));Wi();var e=Iu(t,0);if(!(e&1))return dn(t,at()),null;var n=$u(t,e);if(t.tag!==0&&n===2){var r=mh(t);r!==0&&(e=r,n=Bh(t,r))}if(n===1)throw n=Ca,Hs(t,0),es(t,e),dn(t,at()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ls(t,on,kr),dn(t,at()),null}function ap(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(ro=at()+500,xc&&As())}}function ei(t){os!==null&&os.tag===0&&!(ke&6)&&Wi();var e=ke;ke|=1;var n=On.transition,r=Re;try{if(On.transition=null,Re=1,t)return t()}finally{Re=r,On.transition=n,ke=e,!(ke&6)&&As()}}function lp(){wn=Li.current,$e(Li)}function Hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lb(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(zf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ru();break;case 3:to(),$e(un),$e(Gt),Xf();break;case 5:Yf(r);break;case 4:to();break;case 13:$e(Ge);break;case 19:$e(Ge);break;case 10:Hf(r.type._context);break;case 22:case 23:lp()}n=n.return}if(It=t,dt=t=ms(t.current,null),Pt=wn=e,_t=0,Ca=null,ip=Tc=Zs=0,on=oa=null,zs!==null){for(e=0;e<zs.length;e++)if(n=zs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zs=null}return t}function J_(t,e){do{var n=dt;try{if(Wf(),ou.current=Uu,Vu){for(var r=Qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Vu=!1}if(Js=0,Tt=vt=Qe=null,sa=!1,Aa=0,sp.current=null,n===null||n.return===null){_t=1,Ca=e,dt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Jg(o);if(S!==null){S.flags&=-257,Zg(S,o,l,i,e),S.mode&1&&Xg(i,h,e),e=S,c=h;var R=e.updateQueue;if(R===null){var D=new Set;D.add(c),e.updateQueue=D}else R.add(c);break e}else{if(!(e&1)){Xg(i,h,e),up();break e}c=Error(K(426))}}else if(Ke&&l.mode&1){var I=Jg(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),Zg(I,o,l,i,e),Bf(no(c,l));break e}}i=c=no(c,l),_t!==4&&(_t=2),oa===null?oa=[i]:oa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=D_(i,c,e);Wg(i,x);break e;case 1:l=c;var _=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(fs===null||!fs.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=O_(i,l,e);Wg(i,P);break e}}i=i.return}while(i!==null)}tw(n)}catch(W){e=W,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function Z_(){var t=Fu.current;return Fu.current=Uu,t===null?Uu:t}function up(){(_t===0||_t===3||_t===2)&&(_t=4),It===null||!(Zs&268435455)&&!(Tc&268435455)||es(It,Pt)}function $u(t,e){var n=ke;ke|=2;var r=Z_();(It!==t||Pt!==e)&&(kr=null,Hs(t,e));do try{Pb();break}catch(s){J_(t,s)}while(!0);if(Wf(),ke=n,Fu.current=r,dt!==null)throw Error(K(261));return It=null,Pt=0,_t}function Pb(){for(;dt!==null;)ew(dt)}function jb(){for(;dt!==null&&!ik();)ew(dt)}function ew(t){var e=rw(t.alternate,t,wn);t.memoizedProps=t.pendingProps,e===null?tw(t):dt=e,sp.current=null}function tw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Ab(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{_t=6,dt=null;return}}else if(n=Ib(n,e,wn),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);_t===0&&(_t=5)}function Ls(t,e,n){var r=Re,s=On.transition;try{On.transition=null,Re=1,Db(t,e,n,r)}finally{On.transition=s,Re=r}return null}function Db(t,e,n,r){do Wi();while(os!==null);if(ke&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(mk(t,i),t===It&&(dt=It=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,sw(Tu,function(){return Wi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=On.transition,On.transition=null;var o=Re;Re=1;var l=ke;ke|=4,sp.current=null,Nb(t,n),Q_(n,t),tb(xh),Au=!!wh,xh=wh=null,t.current=n,Cb(n),ok(),ke=l,Re=o,On.transition=i}else t.current=n;if(zl&&(zl=!1,os=t,Bu=s),i=t.pendingLanes,i===0&&(fs=null),uk(n.stateNode),dn(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zu)throw zu=!1,t=Fh,Fh=null,t;return Bu&1&&t.tag!==0&&Wi(),i=t.pendingLanes,i&1?t===zh?aa++:(aa=0,zh=t):aa=0,As(),null}function Wi(){if(os!==null){var t=Dv(Bu),e=On.transition,n=Re;try{if(On.transition=null,Re=16>t?16:t,os===null)var r=!1;else{if(t=os,os=null,Bu=0,ke&6)throw Error(K(331));var s=ke;for(ke|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(J=h;J!==null;){var p=J;switch(p.tag){case 0:case 11:case 15:ia(8,p,i)}var m=p.child;if(m!==null)m.return=p,J=m;else for(;J!==null;){p=J;var g=p.sibling,S=p.return;if(H_(p),p===h){J=null;break}if(g!==null){g.return=S,J=g;break}J=S}}}var R=i.alternate;if(R!==null){var D=R.child;if(D!==null){R.child=null;do{var I=D.sibling;D.sibling=null,D=I}while(D!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ia(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,J=x;break e}J=i.return}}var _=t.current;for(J=_;J!==null;){o=J;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,J=k;else e:for(o=_;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:bc(9,l)}}catch(W){tt(l,l.return,W)}if(l===o){J=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,J=P;break e}J=l.return}}if(ke=s,As(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot(gc,t)}catch{}r=!0}return r}finally{Re=n,On.transition=e}}return!1}function hy(t,e,n){e=no(n,e),e=D_(t,e,1),t=hs(t,e,1),e=en(),t!==null&&(Ha(t,1,e),dn(t,e))}function tt(t,e,n){if(t.tag===3)hy(t,t,n);else for(;e!==null;){if(e.tag===3){hy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fs===null||!fs.has(r))){t=no(n,t),t=O_(e,t,1),e=hs(e,t,1),t=en(),e!==null&&(Ha(e,1,t),dn(e,t));break}}e=e.return}}function Ob(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Pt&n)===n&&(_t===4||_t===3&&(Pt&130023424)===Pt&&500>at()-op?Hs(t,0):ip|=n),dn(t,e)}function nw(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var n=en();t=Mr(t,e),t!==null&&(Ha(t,e,n),dn(t,n))}function Mb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),nw(t,n)}function Lb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),nw(t,n)}var rw;rw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||un.current)ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ln=!1,Tb(t,e,n);ln=!!(t.flags&131072)}else ln=!1,Ke&&e.flags&1048576&&a_(e,ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lu(t,e),t=e.pendingProps;var s=Ji(e,Gt.current);$i(e,n),s=Zf(null,e,r,t,s,n);var i=ep();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,cn(r)?(i=!0,qu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gf(e),s.updater=kc,e.stateNode=s,s._reactInternals=e,Ch(e,r,t,n),e=Ph(null,e,r,!0,i,n)):(e.tag=0,Ke&&i&&Ff(e),Zt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(lu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Ub(r),t=Bn(r,t),s){case 0:e=qh(null,e,r,t,n);break e;case 1:e=ny(null,e,r,t,n);break e;case 11:e=ey(null,e,r,t,n);break e;case 14:e=ty(null,e,r,Bn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bn(r,s),qh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bn(r,s),ny(t,e,r,s,n);case 3:e:{if(U_(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,f_(t,e),Mu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=no(Error(K(423)),e),e=ry(t,e,r,n,s);break e}else if(r!==s){s=no(Error(K(424)),e),e=ry(t,e,r,n,s);break e}else for(xn=ds(e.stateNode.containerInfo.firstChild),bn=e,Ke=!0,Wn=null,n=d_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zi(),r===s){e=Lr(t,e,n);break e}Zt(t,e,r,n)}e=e.child}return e;case 5:return p_(e),t===null&&Ah(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Eh(r,s)?o=null:i!==null&&Eh(r,i)&&(e.flags|=32),V_(t,e),Zt(t,e,o,n),e.child;case 6:return t===null&&Ah(e),null;case 13:return F_(t,e,n);case 4:return Qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=eo(e,null,r,n):Zt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bn(r,s),ey(t,e,r,s,n);case 7:return Zt(t,e,e.pendingProps,n),e.child;case 8:return Zt(t,e,e.pendingProps.children,n),e.child;case 12:return Zt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ve(Du,r._currentValue),r._currentValue=o,i!==null)if(Yn(i.value,o)){if(i.children===s.children&&!un.current){e=Lr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qr(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Sh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Sh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Zt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,$i(e,n),s=Mn(s),r=r(s),e.flags|=1,Zt(t,e,r,n),e.child;case 14:return r=e.type,s=Bn(r,e.pendingProps),s=Bn(r.type,s),ty(t,e,r,s,n);case 15:return M_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bn(r,s),lu(t,e),e.tag=1,cn(r)?(t=!0,qu(e)):t=!1,$i(e,n),j_(e,r,s),Ch(e,r,s,n),Ph(null,e,r,!0,t,n);case 19:return z_(t,e,n);case 22:return L_(t,e,n)}throw Error(K(156,e.tag))};function sw(t,e){return Rv(t,e)}function Vb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new Vb(t,e,n,r)}function cp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ub(t){if(typeof t=="function")return cp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nf)return 11;if(t===Cf)return 14}return 2}function ms(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function du(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")cp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Si:return Ks(n.children,s,i,e);case Sf:o=8,s|=8;break;case eh:return t=Pn(12,n,e,s|2),t.elementType=eh,t.lanes=i,t;case th:return t=Pn(13,n,e,s),t.elementType=th,t.lanes=i,t;case nh:return t=Pn(19,n,e,s),t.elementType=nh,t.lanes=i,t;case pv:return Ic(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hv:o=10;break e;case fv:o=9;break e;case Nf:o=11;break e;case Cf:o=14;break e;case Xr:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Pn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ks(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function Ic(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=pv,t.lanes=n,t.stateNode={isHidden:!1},t}function jd(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function Dd(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Fb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=md(0),this.expirationTimes=md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=md(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dp(t,e,n,r,s,i,o,l,c){return t=new Fb(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gf(i),t}function zb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ai,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iw(t){if(!t)return ws;t=t._reactInternals;e:{if(hi(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(cn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(cn(n))return i_(t,n,e)}return e}function ow(t,e,n,r,s,i,o,l,c){return t=dp(n,r,!0,t,s,i,o,l,c),t.context=iw(null),n=t.current,r=en(),s=ps(n),i=qr(r,s),i.callback=e??null,hs(n,i,s),t.current.lanes=s,Ha(t,s,r),dn(t,r),t}function Ac(t,e,n,r){var s=e.current,i=en(),o=ps(s);return n=iw(n),e.context===null?e.context=n:e.pendingContext=n,e=qr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(s,e,o),t!==null&&(Gn(t,s,o,i),iu(t,s,o)),o}function Wu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hp(t,e){fy(t,e),(t=t.alternate)&&fy(t,e)}function Bb(){return null}var aw=typeof reportError=="function"?reportError:function(t){console.error(t)};function fp(t){this._internalRoot=t}Sc.prototype.render=fp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Ac(t,e,null,null)};Sc.prototype.unmount=fp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ei(function(){Ac(null,t,null,null)}),e[Or]=null}};function Sc(t){this._internalRoot=t}Sc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Lv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&Uv(t)}};function pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function py(){}function $b(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Wu(o);i.call(h)}}var o=ow(e,r,t,0,null,!1,!1,"",py);return t._reactRootContainer=o,t[Or]=o.current,Ea(t.nodeType===8?t.parentNode:t),ei(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Wu(c);l.call(h)}}var c=dp(t,0,!1,null,null,!1,!1,"",py);return t._reactRootContainer=c,t[Or]=c.current,Ea(t.nodeType===8?t.parentNode:t),ei(function(){Ac(e,c,n,r)}),c}function Cc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Wu(o);l.call(c)}}Ac(e,o,t,s)}else o=$b(n,e,t,s,r);return Wu(o)}Ov=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bo(e.pendingLanes);n!==0&&(Pf(e,n|1),dn(e,at()),!(ke&6)&&(ro=at()+500,As()))}break;case 13:ei(function(){var r=Mr(t,1);if(r!==null){var s=en();Gn(r,t,1,s)}}),hp(t,1)}};jf=function(t){if(t.tag===13){var e=Mr(t,134217728);if(e!==null){var n=en();Gn(e,t,134217728,n)}hp(t,134217728)}};Mv=function(t){if(t.tag===13){var e=ps(t),n=Mr(t,e);if(n!==null){var r=en();Gn(n,t,e,r)}hp(t,e)}};Lv=function(){return Re};Vv=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};hh=function(t,e,n){switch(e){case"input":if(ih(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=wc(r);if(!s)throw Error(K(90));gv(r),ih(r,s)}}}break;case"textarea":vv(t,n);break;case"select":e=n.value,e!=null&&Ui(t,!!n.multiple,e,!1)}};Tv=ap;Iv=ei;var Wb={usingClientEntryPoint:!1,Events:[Ga,qi,wc,kv,bv,ap]},Lo={findFiberByHostInstance:Fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Hb={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Br.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Nv(t),t===null?null:t.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||Bb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bl.isDisabled&&Bl.supportsFiber)try{gc=Bl.inject(Hb),lr=Bl}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wb;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pp(e))throw Error(K(200));return zb(t,e,null,n)};An.createRoot=function(t,e){if(!pp(t))throw Error(K(299));var n=!1,r="",s=aw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dp(t,1,!1,null,null,n,!1,r,s),t[Or]=e.current,Ea(t.nodeType===8?t.parentNode:t),new fp(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Nv(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return ei(t)};An.hydrate=function(t,e,n){if(!Nc(e))throw Error(K(200));return Cc(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!pp(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=aw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ow(e,null,t,1,n??null,s,!1,i,o),t[Or]=e.current,Ea(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Sc(e)};An.render=function(t,e,n){if(!Nc(e))throw Error(K(200));return Cc(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!Nc(t))throw Error(K(40));return t._reactRootContainer?(ei(function(){Cc(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};An.unstable_batchedUpdates=ap;An.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nc(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Cc(t,e,n,!1,r)};An.version="18.3.1-next-f1338f8080-20240426";function lw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lw)}catch(t){console.error(t)}}lw(),lv.exports=An;var Kb=lv.exports,my=Kb;Jd.createRoot=my.createRoot,Jd.hydrateRoot=my.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...h},p)=>O.createElement("svg",{ref:p,...Gb,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Qb(t)}`,l].join(" "),...h},[...e.map(([m,g])=>O.createElement(m,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=Z("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=Z("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mp=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=Z("BookOpenCheck",[["path",{d:"M8 3H2v15h7c1.7 0 3 1.3 3 3V7c0-2.2-1.8-4-4-4Z",key:"1i8u0n"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V3h-6c-2.2 0-4 1.8-4 4v14c0-1.7 1.3-3 3-3h7v-2.3",key:"jb5l51"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=Z("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=Z("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Z("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eT=Z("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Z("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Z("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nT=Z("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=Z("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oT=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=Z("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Z("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=Z("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Z("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=Z("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=Z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Z("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=Z("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Z("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=Z("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=Z("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=Z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=Z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Us=(t=>(t.LIGHT="light",t.DARK="dark",t))(Us||{}),by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,S=h&63;c||(S=64,o||(g=64)),r.push(n[p],n[m],n[g],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_w(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new _T;const g=i<<2|l>>4;if(r.push(g),h!==64){const S=l<<4&240|h>>2;if(r.push(S),m!==64){const R=h<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _T extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wT=function(t){const e=_w(t);return ww.encodeByteArray(e,!0)},Ju=function(t){return wT(t).replace(/\./g,"")},xw=function(t){try{return ww.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET=()=>xT().__FIREBASE_DEFAULTS__,kT=()=>{if(typeof process>"u"||typeof by>"u")return;const t=by.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xw(t[1]);return e&&JSON.parse(e)},Rc=()=>{try{return ET()||kT()||bT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ew=t=>{var e,n;return(n=(e=Rc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kw=t=>{const e=Ew(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bw=()=>{var t;return(t=Rc())===null||t===void 0?void 0:t.config},Tw=t=>{var e;return(e=Rc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ju(JSON.stringify(n)),Ju(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function AT(){var t;const e=(t=Rc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ST(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function CT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RT(){const t=Qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qT(){return!AT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function PT(){try{return typeof indexedDB=="object"}catch{return!1}}function jT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="FirebaseError";class gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=DT,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xa.prototype.create)}}class Xa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?OT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new gr(s,l,r)}}function OT(t,e){return t.replace(MT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const MT=/\{\$([^}]+)}/g;function LT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ty(i)&&Ty(o)){if(!Zu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ty(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ho(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VT(t,e){const n=new UT(t,e);return n.subscribe.bind(n)}class UT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");FT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Md),s.error===void 0&&(s.error=Md),s.complete===void 0&&(s.complete=Md);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Md(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class xs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($T(e))try{this.getOrInitializeService({instanceIdentifier:Vs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Vs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vs){return this.instances.has(e)}getOptions(e=Vs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vs){return this.component?this.component.multipleInstances?e:Vs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BT(t){return t===Vs?void 0:t}function $T(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const HT={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},KT=xe.INFO,GT={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},QT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=GT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yp{constructor(e){this.name=e,this._logLevel=KT,this._logHandler=QT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const YT=(t,e)=>e.some(n=>t instanceof n);let Iy,Ay;function XT(){return Iy||(Iy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JT(){return Ay||(Ay=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Aw=new WeakMap,Gh=new WeakMap,Sw=new WeakMap,Ld=new WeakMap,vp=new WeakMap;function ZT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Aw.set(n,t)}).catch(()=>{}),vp.set(e,t),e}function eI(t){if(Gh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Gh.set(t,e)}let Qh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Sw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tI(t){Qh=t(Qh)}function nI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vd(this),e,...n);return Sw.set(r,e.sort?e.sort():[e]),gs(r)}:JT().includes(t)?function(...e){return t.apply(Vd(this),e),gs(Aw.get(this))}:function(...e){return gs(t.apply(Vd(this),e))}}function rI(t){return typeof t=="function"?nI(t):(t instanceof IDBTransaction&&eI(t),YT(t,XT())?new Proxy(t,Qh):t)}function gs(t){if(t instanceof IDBRequest)return ZT(t);if(Ld.has(t))return Ld.get(t);const e=rI(t);return e!==t&&(Ld.set(t,e),vp.set(e,t)),e}const Vd=t=>vp.get(t);function sI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=gs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(gs(o.result),c.oldVersion,c.newVersion,gs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const iI=["get","getKey","getAll","getAllKeys","count"],oI=["put","add","delete","clear"],Ud=new Map;function Sy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ud.get(e))return Ud.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=oI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||iI.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return Ud.set(e,i),i}tI(t=>({...t,get:(e,n,r)=>Sy(e,n)||t.get(e,n,r),has:(e,n)=>!!Sy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yh="@firebase/app",Ny="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr=new yp("@firebase/app"),uI="@firebase/app-compat",cI="@firebase/analytics-compat",dI="@firebase/analytics",hI="@firebase/app-check-compat",fI="@firebase/app-check",pI="@firebase/auth",mI="@firebase/auth-compat",gI="@firebase/database",yI="@firebase/data-connect",vI="@firebase/database-compat",_I="@firebase/functions",wI="@firebase/functions-compat",xI="@firebase/installations",EI="@firebase/installations-compat",kI="@firebase/messaging",bI="@firebase/messaging-compat",TI="@firebase/performance",II="@firebase/performance-compat",AI="@firebase/remote-config",SI="@firebase/remote-config-compat",NI="@firebase/storage",CI="@firebase/storage-compat",RI="@firebase/firestore",qI="@firebase/vertexai-preview",PI="@firebase/firestore-compat",jI="firebase",DI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh="[DEFAULT]",OI={[Yh]:"fire-core",[uI]:"fire-core-compat",[dI]:"fire-analytics",[cI]:"fire-analytics-compat",[fI]:"fire-app-check",[hI]:"fire-app-check-compat",[pI]:"fire-auth",[mI]:"fire-auth-compat",[gI]:"fire-rtdb",[yI]:"fire-data-connect",[vI]:"fire-rtdb-compat",[_I]:"fire-fn",[wI]:"fire-fn-compat",[xI]:"fire-iid",[EI]:"fire-iid-compat",[kI]:"fire-fcm",[bI]:"fire-fcm-compat",[TI]:"fire-perf",[II]:"fire-perf-compat",[AI]:"fire-rc",[SI]:"fire-rc-compat",[NI]:"fire-gcs",[CI]:"fire-gcs-compat",[RI]:"fire-fst",[PI]:"fire-fst-compat",[qI]:"fire-vertex","fire-js":"fire-js",[jI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new Map,MI=new Map,Jh=new Map;function Cy(t,e){try{t.container.addComponent(e)}catch(n){Vr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ti(t){const e=t.name;if(Jh.has(e))return Vr.debug(`There were multiple attempts to register component ${e}.`),!1;Jh.set(e,t);for(const n of ec.values())Cy(n,t);for(const n of MI.values())Cy(n,t);return!0}function qc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Xa("app","Firebase",LI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=DI;function Nw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Xh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ys.create("bad-app-name",{appName:String(s)});if(n||(n=bw()),!n)throw ys.create("no-options");const i=ec.get(s);if(i){if(Zu(n,i.options)&&Zu(r,i.config))return i;throw ys.create("duplicate-app",{appName:s})}const o=new WT(s);for(const c of Jh.values())o.addComponent(c);const l=new VI(n,r,o);return ec.set(s,l),l}function _p(t=Xh){const e=ec.get(t);if(!e&&t===Xh&&bw())return Nw();if(!e)throw ys.create("no-app",{appName:t});return e}function cr(t,e,n){var r;let s=(r=OI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vr.warn(l.join(" "));return}ti(new xs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="firebase-heartbeat-database",FI=1,Pa="firebase-heartbeat-store";let Fd=null;function Cw(){return Fd||(Fd=sI(UI,FI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw ys.create("idb-open",{originalErrorMessage:t.message})})),Fd}async function zI(t){try{const n=(await Cw()).transaction(Pa),r=await n.objectStore(Pa).get(Rw(t));return await n.done,r}catch(e){if(e instanceof gr)Vr.warn(e.message);else{const n=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vr.warn(n.message)}}}async function Ry(t,e){try{const r=(await Cw()).transaction(Pa,"readwrite");await r.objectStore(Pa).put(e,Rw(t)),await r.done}catch(n){if(n instanceof gr)Vr.warn(n.message);else{const r=ys.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vr.warn(r.message)}}}function Rw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=1024,$I=30*24*60*60*1e3;class WI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=$I}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Vr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qy(),{heartbeatsToSend:r,unsentEntries:s}=HI(this._heartbeatsCache.heartbeats),i=Ju(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Vr.warn(n),""}}}function qy(){return new Date().toISOString().substring(0,10)}function HI(t,e=BI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Py(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Py(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PT()?jT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Py(t){return Ju(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t){ti(new xs("platform-logger",e=>new aI(e),"PRIVATE")),ti(new xs("heartbeat",e=>new WI(e),"PRIVATE")),cr(Yh,Ny,t),cr(Yh,Ny,"esm2017"),cr("fire-js","")}GI("");var QI="firebase",YI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(QI,YI,"app");var jy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gs,qw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(b,N,C){for(var T=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)T[Ue-2]=arguments[Ue];return v.prototype[N].apply(b,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,v,E){E||(E=0);var b=Array(16);if(typeof v=="string")for(var N=0;16>N;++N)b[N]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(N=0;16>N;++N)b[N]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],N=w.g[2];var C=w.g[3],T=v+(C^E&(N^C))+b[0]+3614090360&4294967295;v=E+(T<<7&4294967295|T>>>25),T=C+(N^v&(E^N))+b[1]+3905402710&4294967295,C=v+(T<<12&4294967295|T>>>20),T=N+(E^C&(v^E))+b[2]+606105819&4294967295,N=C+(T<<17&4294967295|T>>>15),T=E+(v^N&(C^v))+b[3]+3250441966&4294967295,E=N+(T<<22&4294967295|T>>>10),T=v+(C^E&(N^C))+b[4]+4118548399&4294967295,v=E+(T<<7&4294967295|T>>>25),T=C+(N^v&(E^N))+b[5]+1200080426&4294967295,C=v+(T<<12&4294967295|T>>>20),T=N+(E^C&(v^E))+b[6]+2821735955&4294967295,N=C+(T<<17&4294967295|T>>>15),T=E+(v^N&(C^v))+b[7]+4249261313&4294967295,E=N+(T<<22&4294967295|T>>>10),T=v+(C^E&(N^C))+b[8]+1770035416&4294967295,v=E+(T<<7&4294967295|T>>>25),T=C+(N^v&(E^N))+b[9]+2336552879&4294967295,C=v+(T<<12&4294967295|T>>>20),T=N+(E^C&(v^E))+b[10]+4294925233&4294967295,N=C+(T<<17&4294967295|T>>>15),T=E+(v^N&(C^v))+b[11]+2304563134&4294967295,E=N+(T<<22&4294967295|T>>>10),T=v+(C^E&(N^C))+b[12]+1804603682&4294967295,v=E+(T<<7&4294967295|T>>>25),T=C+(N^v&(E^N))+b[13]+4254626195&4294967295,C=v+(T<<12&4294967295|T>>>20),T=N+(E^C&(v^E))+b[14]+2792965006&4294967295,N=C+(T<<17&4294967295|T>>>15),T=E+(v^N&(C^v))+b[15]+1236535329&4294967295,E=N+(T<<22&4294967295|T>>>10),T=v+(N^C&(E^N))+b[1]+4129170786&4294967295,v=E+(T<<5&4294967295|T>>>27),T=C+(E^N&(v^E))+b[6]+3225465664&4294967295,C=v+(T<<9&4294967295|T>>>23),T=N+(v^E&(C^v))+b[11]+643717713&4294967295,N=C+(T<<14&4294967295|T>>>18),T=E+(C^v&(N^C))+b[0]+3921069994&4294967295,E=N+(T<<20&4294967295|T>>>12),T=v+(N^C&(E^N))+b[5]+3593408605&4294967295,v=E+(T<<5&4294967295|T>>>27),T=C+(E^N&(v^E))+b[10]+38016083&4294967295,C=v+(T<<9&4294967295|T>>>23),T=N+(v^E&(C^v))+b[15]+3634488961&4294967295,N=C+(T<<14&4294967295|T>>>18),T=E+(C^v&(N^C))+b[4]+3889429448&4294967295,E=N+(T<<20&4294967295|T>>>12),T=v+(N^C&(E^N))+b[9]+568446438&4294967295,v=E+(T<<5&4294967295|T>>>27),T=C+(E^N&(v^E))+b[14]+3275163606&4294967295,C=v+(T<<9&4294967295|T>>>23),T=N+(v^E&(C^v))+b[3]+4107603335&4294967295,N=C+(T<<14&4294967295|T>>>18),T=E+(C^v&(N^C))+b[8]+1163531501&4294967295,E=N+(T<<20&4294967295|T>>>12),T=v+(N^C&(E^N))+b[13]+2850285829&4294967295,v=E+(T<<5&4294967295|T>>>27),T=C+(E^N&(v^E))+b[2]+4243563512&4294967295,C=v+(T<<9&4294967295|T>>>23),T=N+(v^E&(C^v))+b[7]+1735328473&4294967295,N=C+(T<<14&4294967295|T>>>18),T=E+(C^v&(N^C))+b[12]+2368359562&4294967295,E=N+(T<<20&4294967295|T>>>12),T=v+(E^N^C)+b[5]+4294588738&4294967295,v=E+(T<<4&4294967295|T>>>28),T=C+(v^E^N)+b[8]+2272392833&4294967295,C=v+(T<<11&4294967295|T>>>21),T=N+(C^v^E)+b[11]+1839030562&4294967295,N=C+(T<<16&4294967295|T>>>16),T=E+(N^C^v)+b[14]+4259657740&4294967295,E=N+(T<<23&4294967295|T>>>9),T=v+(E^N^C)+b[1]+2763975236&4294967295,v=E+(T<<4&4294967295|T>>>28),T=C+(v^E^N)+b[4]+1272893353&4294967295,C=v+(T<<11&4294967295|T>>>21),T=N+(C^v^E)+b[7]+4139469664&4294967295,N=C+(T<<16&4294967295|T>>>16),T=E+(N^C^v)+b[10]+3200236656&4294967295,E=N+(T<<23&4294967295|T>>>9),T=v+(E^N^C)+b[13]+681279174&4294967295,v=E+(T<<4&4294967295|T>>>28),T=C+(v^E^N)+b[0]+3936430074&4294967295,C=v+(T<<11&4294967295|T>>>21),T=N+(C^v^E)+b[3]+3572445317&4294967295,N=C+(T<<16&4294967295|T>>>16),T=E+(N^C^v)+b[6]+76029189&4294967295,E=N+(T<<23&4294967295|T>>>9),T=v+(E^N^C)+b[9]+3654602809&4294967295,v=E+(T<<4&4294967295|T>>>28),T=C+(v^E^N)+b[12]+3873151461&4294967295,C=v+(T<<11&4294967295|T>>>21),T=N+(C^v^E)+b[15]+530742520&4294967295,N=C+(T<<16&4294967295|T>>>16),T=E+(N^C^v)+b[2]+3299628645&4294967295,E=N+(T<<23&4294967295|T>>>9),T=v+(N^(E|~C))+b[0]+4096336452&4294967295,v=E+(T<<6&4294967295|T>>>26),T=C+(E^(v|~N))+b[7]+1126891415&4294967295,C=v+(T<<10&4294967295|T>>>22),T=N+(v^(C|~E))+b[14]+2878612391&4294967295,N=C+(T<<15&4294967295|T>>>17),T=E+(C^(N|~v))+b[5]+4237533241&4294967295,E=N+(T<<21&4294967295|T>>>11),T=v+(N^(E|~C))+b[12]+1700485571&4294967295,v=E+(T<<6&4294967295|T>>>26),T=C+(E^(v|~N))+b[3]+2399980690&4294967295,C=v+(T<<10&4294967295|T>>>22),T=N+(v^(C|~E))+b[10]+4293915773&4294967295,N=C+(T<<15&4294967295|T>>>17),T=E+(C^(N|~v))+b[1]+2240044497&4294967295,E=N+(T<<21&4294967295|T>>>11),T=v+(N^(E|~C))+b[8]+1873313359&4294967295,v=E+(T<<6&4294967295|T>>>26),T=C+(E^(v|~N))+b[15]+4264355552&4294967295,C=v+(T<<10&4294967295|T>>>22),T=N+(v^(C|~E))+b[6]+2734768916&4294967295,N=C+(T<<15&4294967295|T>>>17),T=E+(C^(N|~v))+b[13]+1309151649&4294967295,E=N+(T<<21&4294967295|T>>>11),T=v+(N^(E|~C))+b[4]+4149444226&4294967295,v=E+(T<<6&4294967295|T>>>26),T=C+(E^(v|~N))+b[11]+3174756917&4294967295,C=v+(T<<10&4294967295|T>>>22),T=N+(v^(C|~E))+b[2]+718787259&4294967295,N=C+(T<<15&4294967295|T>>>17),T=E+(C^(N|~v))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(N+(T<<21&4294967295|T>>>11))&4294967295,w.g[2]=w.g[2]+N&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,b=this.B,N=this.h,C=0;C<v;){if(N==0)for(;C<=E;)s(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(b[N++]=w.charCodeAt(C++),N==this.blockSize){s(this,b),N=0;break}}else for(;C<v;)if(b[N++]=w[C++],N==this.blockSize){s(this,b),N=0;break}}this.h=N,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var b=0;32>b;b+=8)w[E++]=this.g[v]>>>b&255;return w};function i(w,v){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function o(w,v){this.h=v;for(var E=[],b=!0,N=w.length-1;0<=N;N--){var C=w[N]|0;b&&C==v||(E[N]=C,b=!1)}this.g=E}var l={};function c(w){return-128<=w&&128>w?i(w,function(v){return new o([v|0],0>v?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return I(h(-w));for(var v=[],E=1,b=0;w>=E;b++)v[b]=w/E|0,E*=4294967296;return new o(v,0)}function p(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return I(p(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(v,8)),b=m,N=0;N<w.length;N+=8){var C=Math.min(8,w.length-N),T=parseInt(w.substring(N,N+C),v);8>C?(C=h(Math.pow(v,C)),b=b.j(C).add(h(T))):(b=b.j(E),b=b.add(h(T)))}return b}var m=c(0),g=c(1),S=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-I(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var b=this.i(E);w+=(0<=b?b:4294967296+b)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(D(this))return"-"+I(this).toString(w);for(var v=h(Math.pow(w,6)),E=this,b="";;){var N=P(E,v).g;E=x(E,N.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=N,R(E))return C+b;for(;6>C.length;)C="0"+C;b=C+b}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function D(w){return w.h==-1}t.l=function(w){return w=x(this,w),D(w)?-1:R(w)?0:1};function I(w){for(var v=w.g.length,E=[],b=0;b<v;b++)E[b]=~w.g[b];return new o(E,~w.h).add(g)}t.abs=function(){return D(this)?I(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],b=0,N=0;N<=v;N++){var C=b+(this.i(N)&65535)+(w.i(N)&65535),T=(C>>>16)+(this.i(N)>>>16)+(w.i(N)>>>16);b=T>>>16,C&=65535,T&=65535,E[N]=T<<16|C}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(w,v){return w.add(I(v))}t.j=function(w){if(R(this)||R(w))return m;if(D(this))return D(w)?I(this).j(I(w)):I(I(this).j(w));if(D(w))return I(this.j(I(w)));if(0>this.l(S)&&0>w.l(S))return h(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],b=0;b<2*v;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var N=0;N<w.g.length;N++){var C=this.i(b)>>>16,T=this.i(b)&65535,Ue=w.i(N)>>>16,lt=w.i(N)&65535;E[2*b+2*N]+=T*lt,_(E,2*b+2*N),E[2*b+2*N+1]+=C*lt,_(E,2*b+2*N+1),E[2*b+2*N+1]+=T*Ue,_(E,2*b+2*N+1),E[2*b+2*N+2]+=C*Ue,_(E,2*b+2*N+2)}for(b=0;b<v;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=v;b<2*v;b++)E[b]=0;return new o(E,0)};function _(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function k(w,v){this.g=w,this.h=v}function P(w,v){if(R(v))throw Error("division by zero");if(R(w))return new k(m,m);if(D(w))return v=P(I(w),v),new k(I(v.g),I(v.h));if(D(v))return v=P(w,I(v)),new k(I(v.g),v.h);if(30<w.g.length){if(D(w)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,b=v;0>=b.l(w);)E=W(E),b=W(b);var N=z(E,1),C=z(b,1);for(b=z(b,2),E=z(E,2);!R(b);){var T=C.add(b);0>=T.l(w)&&(N=N.add(E),C=T),b=z(b,1),E=z(E,1)}return v=x(w,N.j(v)),new k(N,v)}for(N=m;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),C=h(E),T=C.j(v);D(T)||0<T.l(w);)E-=b,C=h(E),T=C.j(v);R(C)&&(C=g),N=N.add(C),w=x(w,T)}return new k(N,w)}t.A=function(w){return P(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],b=0;b<v;b++)E[b]=this.i(b)&w.i(b);return new o(E,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],b=0;b<v;b++)E[b]=this.i(b)|w.i(b);return new o(E,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],b=0;b<v;b++)E[b]=this.i(b)^w.i(b);return new o(E,this.h^w.h)};function W(w){for(var v=w.g.length+1,E=[],b=0;b<v;b++)E[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(E,w.h)}function z(w,v){var E=v>>5;v%=32;for(var b=w.g.length-E,N=[],C=0;C<b;C++)N[C]=0<v?w.i(C+E)>>>v|w.i(C+E+1)<<32-v:w.i(C+E);return new o(N,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,Gs=o}).apply(typeof jy<"u"?jy:typeof self<"u"?self:typeof window<"u"?window:{});var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Pw,Ko,jw,fu,Zh,Dw,Ow,Mw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var j=a[y];if(!(j in f))break e;f=f[j]}a=a[a.length-1],y=f[a],d=d(y),d!=y&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,y=!1,j={next:function(){if(!y&&f<a.length){var M=f++;return{value:d(M,a[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,y),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function S(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function R(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,j,M){for(var Q=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Q[Oe-2]=arguments[Oe];return d.prototype[j].apply(y,Q)}}function D(a){const d=a.length;if(0<d){const f=Array(d);for(let y=0;y<d;y++)f[y]=a[y];return f}return[]}function I(a,d){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(c(y)){const j=a.length||0,M=y.length||0;a.length=j+M;for(let Q=0;Q<M;Q++)a[j+Q]=y[Q]}else a.push(y)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var W=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function z(a,d,f){for(const y in a)d.call(f,a[y],y,a)}function w(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,d){let f,y;for(let j=1;j<arguments.length;j++){y=arguments[j];for(f in y)a[f]=y[f];for(let M=0;M<E.length;M++)f=E[M],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function N(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){l.setTimeout(()=>{throw a},0)}function T(){var a=ee;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ue{constructor(){this.h=this.g=null}add(d,f){const y=lt.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var lt=new x(()=>new Mt,a=>a.reset());class Mt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,G=!1,ee=new Ue,se=()=>{const a=l.Promise.resolve(void 0);Se=()=>{a.then(ge)}};var ge=()=>{for(var a;a=T();){try{a.h.call(a.g)}catch(f){C(f)}var d=lt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}G=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var it=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function At(a,d){if(be.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(W){e:{try{P(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Je[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&At.aa.h.call(this)}}R(At,be);var Je={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),hn=0;function mt(a,d,f,y,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=j,this.key=++hn,this.da=this.fa=!1}function ut(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function gt(a){this.src=a,this.g={},this.h=0}gt.prototype.add=function(a,d,f,y,j){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var Q=De(a,d,y,j);return-1<Q?(d=a[Q],f||(d.fa=!1)):(d=new mt(d,this.src,M,!!y,j),d.fa=f,a.push(d)),d};function Yt(a,d){var f=d.type;if(f in a.g){var y=a.g[f],j=Array.prototype.indexOf.call(y,d,void 0),M;(M=0<=j)&&Array.prototype.splice.call(y,j,1),M&&(ut(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function De(a,d,f,y){for(var j=0;j<a.length;++j){var M=a[j];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==y)return j}return-1}var fn="closure_lm_"+(1e6*Math.random()|0),Le={};function Lt(a,d,f,y,j){if(Array.isArray(d)){for(var M=0;M<d.length;M++)Lt(a,d[M],f,y,j);return null}return f=vr(f),a&&a[pt]?a.K(d,f,h(y)?!!y.capture:!1,j):Ze(a,d,f,!1,y,j)}function Ze(a,d,f,y,j,M){if(!d)throw Error("Invalid event type");var Q=h(j)?!!j.capture:!!j,Oe=Un(a);if(Oe||(a[fn]=Oe=new gt(a)),f=Oe.add(d,f,y,Q,M),f.proxy)return f;if(y=q(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)it||(j=Q),j===void 0&&(j=!1),a.addEventListener(d.toString(),y,j);else if(a.attachEvent)a.attachEvent(Ne(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function q(){function a(f){return d.call(a.src,a.listener,f)}const d=St;return a}function fe(a,d,f,y,j){if(Array.isArray(d))for(var M=0;M<d.length;M++)fe(a,d[M],f,y,j);else y=h(y)?!!y.capture:!!y,f=vr(f),a&&a[pt]?(a=a.i,d=String(d).toString(),d in a.g&&(M=a.g[d],f=De(M,f,y,j),-1<f&&(ut(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete a.g[d],a.h--)))):a&&(a=Un(a))&&(d=a.g[d.toString()],a=-1,d&&(a=De(d,f,y,j)),(f=-1<a?d[a]:null)&&ue(f))}function ue(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[pt])Yt(d.i,a);else{var f=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(f,y,a.capture):d.detachEvent?d.detachEvent(Ne(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=Un(d))?(Yt(f,a),f.h==0&&(f.src=null,d[fn]=null)):ut(a)}}}function Ne(a){return a in Le?Le[a]:Le[a]="on"+a}function St(a,d){if(a.da)a=!0;else{d=new At(d,this);var f=a.listener,y=a.ha||a.src;a.fa&&ue(a),a=f.call(y,d)}return a}function Un(a){return a=a[fn],a instanceof gt?a:null}var Zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function vr(a){return typeof a=="function"?a:(a[Zn]||(a[Zn]=function(d){return a.handleEvent(d)}),a[Zn])}function He(){me.call(this),this.i=new gt(this),this.M=this,this.F=null}R(He,me),He.prototype[pt]=!0,He.prototype.removeEventListener=function(a,d,f,y){fe(this,a,d,f,y)};function Ce(a,d){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new be(d,a);else if(d instanceof be)d.target=d.target||a;else{var j=d;d=new be(y,a),b(d,j)}if(j=!0,f)for(var M=f.length-1;0<=M;M--){var Q=d.g=f[M];j=er(Q,y,!0,d)&&j}if(Q=d.g=a,j=er(Q,y,!0,d)&&j,j=er(Q,y,!1,d)&&j,f)for(M=0;M<f.length;M++)Q=d.g=f[M],j=er(Q,y,!1,d)&&j}He.prototype.N=function(){if(He.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],y=0;y<f.length;y++)ut(f[y]);delete a.g[d],a.h--}}this.F=null},He.prototype.K=function(a,d,f,y){return this.i.add(String(a),d,!1,f,y)},He.prototype.L=function(a,d,f,y){return this.i.add(String(a),d,!0,f,y)};function er(a,d,f,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,M=0;M<d.length;++M){var Q=d[M];if(Q&&!Q.da&&Q.capture==f){var Oe=Q.listener,Nt=Q.ha||Q.src;Q.fa&&Yt(a.i,Q),j=Oe.call(Nt,y)!==!1&&j}}return j&&!y.defaultPrevented}function tr(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Nn(a){a.g=tr(()=>{a.g=null,a.i&&(a.i=!1,Nn(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Rs extends me{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Nn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cn(a){me.call(this),this.h=a,this.g={}}R(Cn,me);var U=[];function ye(a){z(a.g,function(d,f){this.g.hasOwnProperty(f)&&ue(d)},a),a.g={}}Cn.prototype.N=function(){Cn.aa.N.call(this),ye(this)},Cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pe=l.JSON.stringify,Et=l.JSON.parse,pn=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function mn(){}mn.prototype.h=null;function kt(a){return a.h||(a.h=a.i())}function _r(){}var nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function L(){be.call(this,"d")}R(L,be);function $(){be.call(this,"c")}R($,be);var X={},B=null;function te(){return B=B||new He}X.La="serverreachability";function oe(a){be.call(this,X.La,a)}R(oe,be);function pe(a){const d=te();Ce(d,new oe(d))}X.STAT_EVENT="statevent";function je(a,d){be.call(this,X.STAT_EVENT,a),this.stat=d}R(je,be);function A(a){const d=te();Ce(d,new je(d,a))}X.Ma="timingevent";function re(a,d){be.call(this,X.Ma,a),this.size=d}R(re,be);function he(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Ae(){this.g=!0}Ae.prototype.xa=function(){this.g=!1};function Xt(a,d,f,y,j,M){a.info(function(){if(a.g)if(M)for(var Q="",Oe=M.split("&"),Nt=0;Nt<Oe.length;Nt++){var Te=Oe[Nt].split("=");if(1<Te.length){var Vt=Te[0];Te=Te[1];var Ut=Vt.split("_");Q=2<=Ut.length&&Ut[1]=="type"?Q+(Vt+"="+Te+"&"):Q+(Vt+"=redacted&")}}else Q=null;else Q=M;return"XMLHTTP REQ ("+y+") [attempt "+j+"]: "+d+`
`+f+`
`+Q})}function gn(a,d,f,y,j,M,Q){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+j+"]: "+d+`
`+f+`
`+M+" "+Q})}function yt(a,d,f,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+yn(a,f)+(y?" "+y:"")})}function wr(a,d){a.info(function(){return"TIMEOUT: "+d})}Ae.prototype.info=function(){};function yn(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var j=y[1];if(Array.isArray(j)&&!(1>j.length)){var M=j[0];if(M!="noop"&&M!="stop"&&M!="close")for(var Q=1;Q<j.length;Q++)j[Q]=""}}}}return Pe(f)}catch{return d}}var qs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gi;function Ps(){}R(Ps,mn),Ps.prototype.g=function(){return new XMLHttpRequest},Ps.prototype.i=function(){return{}},gi=new Ps;function rr(a,d,f,y){this.j=a,this.i=d,this.l=f,this.R=y||1,this.U=new Cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new km}function km(){this.i=null,this.g="",this.h=!1}var bm={},Zc={};function ed(a,d,f){a.L=1,a.v=vl(xr(d)),a.m=f,a.P=!0,Tm(a,null)}function Tm(a,d){a.F=Date.now(),ml(a),a.A=xr(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Vm(f.i,"t",y),a.C=0,f=a.j.J,a.h=new km,a.g=rg(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Rs(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,y=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(U[0]=j.toString()),j=U);for(var M=0;M<j.length;M++){var Q=Lt(f,j[M],y||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),pe(),Xt(a.i,a.u,a.A,a.l,a.R,a.m)}rr.prototype.ca=function(a){a=a.target;const d=this.M;d&&Er(a)==3?d.j():this.Y(a)},rr.prototype.Y=function(a){try{if(a==this.g)e:{const Ut=Er(this.g);var d=this.g.Ba();const _i=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Hm(this.g)))){this.J||Ut!=4||d==7||(d==8||0>=_i?pe(3):pe(2)),td(this);var f=this.g.Z();this.X=f;t:if(Im(this)){var y=Hm(this.g);a="";var j=y.length,M=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){js(this),ko(this);var Q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(M&&d==j-1)});y.length=0,this.h.g+=a,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=f==200,gn(this.i,this.u,this.A,this.l,this.R,Ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,Nt=this.g;if((Oe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Oe)){var Te=Oe;break t}}Te=null}if(f=Te)yt(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nd(this,f);else{this.o=!1,this.s=3,A(12),js(this),ko(this);break e}}if(this.P){f=!0;let Fn;for(;!this.J&&this.C<Q.length;)if(Fn=tE(this,Q),Fn==Zc){Ut==4&&(this.s=4,A(14),f=!1),yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Fn==bm){this.s=4,A(15),yt(this.i,this.l,Q,"[Invalid Chunk]"),f=!1;break}else yt(this.i,this.l,Fn,null),nd(this,Fn);if(Im(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||Q.length!=0||this.h.h||(this.s=1,A(16),f=!1),this.o=this.o&&f,!f)yt(this.i,this.l,Q,"[Invalid Chunked Response]"),js(this),ko(this);else if(0<Q.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),ld(Vt),Vt.M=!0,A(11))}}else yt(this.i,this.l,Q,null),nd(this,Q);Ut==4&&js(this),this.o&&!this.J&&(Ut==4?Zm(this.j,this):(this.o=!1,ml(this)))}else vE(this.g),f==400&&0<Q.indexOf("Unknown SID")?(this.s=3,A(12)):(this.s=0,A(13)),js(this),ko(this)}}}catch{}finally{}};function Im(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function tE(a,d){var f=a.C,y=d.indexOf(`
`,f);return y==-1?Zc:(f=Number(d.substring(f,y)),isNaN(f)?bm:(y+=1,y+f>d.length?Zc:(d=d.slice(y,y+f),a.C=y+f,d)))}rr.prototype.cancel=function(){this.J=!0,js(this)};function ml(a){a.S=Date.now()+a.I,Am(a,a.I)}function Am(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=he(g(a.ba,a),d)}function td(a){a.B&&(l.clearTimeout(a.B),a.B=null)}rr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(wr(this.i,this.A),this.L!=2&&(pe(),A(17)),js(this),this.s=2,ko(this)):Am(this,this.S-a)};function ko(a){a.j.G==0||a.J||Zm(a.j,a)}function js(a){td(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,ye(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function nd(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||rd(f.h,a))){if(!a.K&&rd(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var j=y;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)bl(f),El(f);else break e;ad(f),A(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=he(g(f.Za,f),6e3));if(1>=Cm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Os(f,11)}else if((a.K||f.g==a)&&bl(f),!_(d))for(j=f.Da.g.parse(d),d=0;d<j.length;d++){let Te=j[d];if(f.T=Te[0],Te=Te[1],f.G==2)if(Te[0]=="c"){f.K=Te[1],f.ia=Te[2];const Vt=Te[3];Vt!=null&&(f.la=Vt,f.j.info("VER="+f.la));const Ut=Te[4];Ut!=null&&(f.Aa=Ut,f.j.info("SVER="+f.Aa));const _i=Te[5];_i!=null&&typeof _i=="number"&&0<_i&&(y=1.5*_i,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Fn=a.g;if(Fn){const Il=Fn.g?Fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var M=y.h;M.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(sd(M,M.h),M.h=null))}if(y.D){const ud=Fn.g?Fn.g.getResponseHeader("X-HTTP-Session-Id"):null;ud&&(y.ya=ud,Fe(y.I,y.D,ud))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var Q=a;if(y.qa=ng(y,y.J?y.ia:null,y.W),Q.K){Rm(y.h,Q);var Oe=Q,Nt=y.L;Nt&&(Oe.I=Nt),Oe.B&&(td(Oe),ml(Oe)),y.g=Q}else Xm(y);0<f.i.length&&kl(f)}else Te[0]!="stop"&&Te[0]!="close"||Os(f,7);else f.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Os(f,7):od(f):Te[0]!="noop"&&f.l&&f.l.ta(Te),f.v=0)}}pe(4)}catch{}}var nE=class{constructor(a,d){this.g=a,this.map=d}};function Sm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Nm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Cm(a){return a.h?1:a.g?a.g.size:0}function rd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function sd(a,d){a.g?a.g.add(d):a.h=d}function Rm(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Sm.prototype.cancel=function(){if(this.i=qm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function qm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return D(a.i)}function rE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,y=0;y<f;y++)d.push(a[y]);return d}d=[],f=0;for(y in a)d[f++]=a[y];return d}function sE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const y in a)d[f++]=y;return d}}}function Pm(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=sE(a),y=rE(a),j=y.length,M=0;M<j;M++)d.call(void 0,y[M],f&&f[M],a)}var jm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iE(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),j=null;if(0<=y){var M=a[f].substring(0,y);j=a[f].substring(y+1)}else M=a[f];d(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Ds(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ds){this.h=a.h,gl(this,a.j),this.o=a.o,this.g=a.g,yl(this,a.s),this.l=a.l;var d=a.i,f=new Io;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Dm(this,f),this.m=a.m}else a&&(d=String(a).match(jm))?(this.h=!1,gl(this,d[1]||"",!0),this.o=bo(d[2]||""),this.g=bo(d[3]||"",!0),yl(this,d[4]),this.l=bo(d[5]||"",!0),Dm(this,d[6]||"",!0),this.m=bo(d[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}Ds.prototype.toString=function(){var a=[],d=this.j;d&&a.push(To(d,Om,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(To(d,Om,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(To(f,f.charAt(0)=="/"?lE:aE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",To(f,cE)),a.join("")};function xr(a){return new Ds(a)}function gl(a,d,f){a.j=f?bo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function yl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Dm(a,d,f){d instanceof Io?(a.i=d,dE(a.i,a.h)):(f||(d=To(d,uE)),a.i=new Io(d,a.h))}function Fe(a,d,f){a.i.set(d,f)}function vl(a){return Fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function bo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function To(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,oE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function oE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Om=/[#\/\?@]/g,aE=/[#\?:]/g,lE=/[#\?]/g,uE=/[#\?@]/g,cE=/#/g;function Io(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Kr(a){a.g||(a.g=new Map,a.h=0,a.i&&iE(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Io.prototype,t.add=function(a,d){Kr(this),this.i=null,a=yi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Mm(a,d){Kr(a),d=yi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Lm(a,d){return Kr(a),d=yi(a,d),a.g.has(d)}t.forEach=function(a,d){Kr(this),this.g.forEach(function(f,y){f.forEach(function(j){a.call(d,j,y,this)},this)},this)},t.na=function(){Kr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){const j=a[y];for(let M=0;M<j.length;M++)f.push(d[y])}return f},t.V=function(a){Kr(this);let d=[];if(typeof a=="string")Lm(this,a)&&(d=d.concat(this.g.get(yi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Kr(this),this.i=null,a=yi(this,a),Lm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Vm(a,d,f){Mm(a,d),0<f.length&&(a.i=null,a.g.set(yi(a,d),D(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];const M=encodeURIComponent(String(y)),Q=this.V(y);for(y=0;y<Q.length;y++){var j=M;Q[y]!==""&&(j+="="+encodeURIComponent(String(Q[y]))),a.push(j)}}return this.i=a.join("&")};function yi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function dE(a,d){d&&!a.j&&(Kr(a),a.i=null,a.g.forEach(function(f,y){var j=y.toLowerCase();y!=j&&(Mm(this,y),Vm(this,j,f))},a)),a.j=d}function hE(a,d){const f=new Ae;if(l.Image){const y=new Image;y.onload=S(Gr,f,"TestLoadImage: loaded",!0,d,y),y.onerror=S(Gr,f,"TestLoadImage: error",!1,d,y),y.onabort=S(Gr,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=S(Gr,f,"TestLoadImage: timeout",!1,d,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function fE(a,d){const f=new Ae,y=new AbortController,j=setTimeout(()=>{y.abort(),Gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(M=>{clearTimeout(j),M.ok?Gr(f,"TestPingServer: ok",!0,d):Gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Gr(f,"TestPingServer: error",!1,d)})}function Gr(a,d,f,y,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),y(f)}catch{}}function pE(){this.g=new pn}function mE(a,d,f){const y=f||"";try{Pm(a,function(j,M){let Q=j;h(j)&&(Q=Pe(j)),d.push(y+M+"="+encodeURIComponent(Q))})}catch(j){throw d.push(y+"type="+encodeURIComponent("_badmap")),j}}function _l(a){this.l=a.Ub||null,this.j=a.eb||!1}R(_l,mn),_l.prototype.g=function(){return new wl(this.l,this.j)},_l.prototype.i=function(a){return function(){return a}}({});function wl(a,d){He.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(wl,He),t=wl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,So(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,So(this)),this.g&&(this.readyState=3,So(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Um(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Um(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Ao(this):So(this),this.readyState==3&&Um(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ao(this))},t.Qa=function(a){this.g&&(this.response=a,Ao(this))},t.ga=function(){this.g&&Ao(this)};function Ao(a){a.readyState=4,a.l=null,a.j=null,a.v=null,So(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function So(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Fm(a){let d="";return z(a,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function id(a,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=Fm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Fe(a,d,f))}function et(a){He.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(et,He);var gE=/^https?$/i,yE=["POST","PUT"];t=et.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gi.g(),this.v=this.o?kt(this.o):kt(gi),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(M){zm(this,M);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var j in y)f.set(j,y[j]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const M of y.keys())f.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(yE,d,void 0))||y||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,Q]of f)this.g.setRequestHeader(M,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wm(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){zm(this,M)}};function zm(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Bm(a),xl(a)}function Bm(a){a.A||(a.A=!0,Ce(a,"complete"),Ce(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ce(this,"complete"),Ce(this,"abort"),xl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xl(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$m(this):this.bb())},t.bb=function(){$m(this)};function $m(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Er(a)!=4||a.Z()!=2)){if(a.u&&Er(a)==4)tr(a.Ea,0,a);else if(Ce(a,"readystatechange"),Er(a)==4){a.h=!1;try{const Q=a.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=Q===0){var j=String(a.D).match(jm)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),y=!gE.test(j?j.toLowerCase():"")}f=y}if(f)Ce(a,"complete"),Ce(a,"success");else{a.m=6;try{var M=2<Er(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",Bm(a)}}finally{xl(a)}}}}function xl(a,d){if(a.g){Wm(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Ce(a,"ready");try{f.onreadystatechange=y}catch{}}}function Wm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Er(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Et(d)}};function Hm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function vE(a){const d={};a=(a.g&&2<=Er(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var f=N(a[y]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const M=d[j]||[];d[j]=M,M.push(f)}w(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function No(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Km(a){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=No("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=No("baseRetryDelayMs",5e3,a),this.cb=No("retryDelaySeedMs",1e4,a),this.Wa=No("forwardChannelMaxRetries",2,a),this.wa=No("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Sm(a&&a.concurrentRequestLimit),this.Da=new pE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Km.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,y){A(0),this.W=a,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=ng(this,null,this.W),kl(this)};function od(a){if(Gm(a),a.G==3){var d=a.U++,f=xr(a.I);if(Fe(f,"SID",a.K),Fe(f,"RID",d),Fe(f,"TYPE","terminate"),Co(a,f),d=new rr(a,a.j,d),d.L=2,d.v=vl(xr(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=rg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ml(d)}tg(a)}function El(a){a.g&&(ld(a),a.g.cancel(),a.g=null)}function Gm(a){El(a),a.u&&(l.clearTimeout(a.u),a.u=null),bl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function kl(a){if(!Nm(a.h)&&!a.s){a.s=!0;var d=a.Ga;Se||se(),G||(Se(),G=!0),ee.add(d,a),a.B=0}}function _E(a,d){return Cm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=he(g(a.Ga,a,d),eg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new rr(this,this.j,a);let M=this.o;if(this.S&&(M?(M=v(M),b(M,this.S)):M=this.S),this.m!==null||this.O||(j.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Ym(this,j,d),f=xr(this.I),Fe(f,"RID",a),Fe(f,"CVER",22),this.D&&Fe(f,"X-HTTP-Session-Id",this.D),Co(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(Fm(M)))+"&"+d:this.m&&id(f,this.m,M)),sd(this.h,j),this.Ua&&Fe(f,"TYPE","init"),this.P?(Fe(f,"$req",d),Fe(f,"SID","null"),j.T=!0,ed(j,f,null)):ed(j,f,d),this.G=2}}else this.G==3&&(a?Qm(this,a):this.i.length==0||Nm(this.h)||Qm(this))};function Qm(a,d){var f;d?f=d.l:f=a.U++;const y=xr(a.I);Fe(y,"SID",a.K),Fe(y,"RID",f),Fe(y,"AID",a.T),Co(a,y),a.m&&a.o&&id(y,a.m,a.o),f=new rr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Ym(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),sd(a.h,f),ed(f,y,d)}function Co(a,d){a.H&&z(a.H,function(f,y){Fe(d,y,f)}),a.l&&Pm({},function(f,y){Fe(d,y,f)})}function Ym(a,d,f){f=Math.min(a.i.length,f);var y=a.l?g(a.l.Na,a.l,a):null;e:{var j=a.i;let M=-1;for(;;){const Q=["count="+f];M==-1?0<f?(M=j[0].g,Q.push("ofs="+M)):M=0:Q.push("ofs="+M);let Oe=!0;for(let Nt=0;Nt<f;Nt++){let Te=j[Nt].g;const Vt=j[Nt].map;if(Te-=M,0>Te)M=Math.max(0,j[Nt].g-100),Oe=!1;else try{mE(Vt,Q,"req"+Te+"_")}catch{y&&y(Vt)}}if(Oe){y=Q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,y}function Xm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Se||se(),G||(Se(),G=!0),ee.add(d,a),a.v=0}}function ad(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=he(g(a.Fa,a),eg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Jm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=he(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,A(10),El(this),Jm(this))};function ld(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Jm(a){a.g=new rr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=xr(a.qa);Fe(d,"RID","rpc"),Fe(d,"SID",a.K),Fe(d,"AID",a.T),Fe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Fe(d,"TO",a.ja),Fe(d,"TYPE","xmlhttp"),Co(a,d),a.m&&a.o&&id(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=vl(xr(d)),f.m=null,f.P=!0,Tm(f,a)}t.Za=function(){this.C!=null&&(this.C=null,El(this),ad(this),A(19))};function bl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Zm(a,d){var f=null;if(a.g==d){bl(a),ld(a),a.g=null;var y=2}else if(rd(a.h,d))f=d.D,Rm(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;y=te(),Ce(y,new re(y,f)),kl(a)}else Xm(a);else if(j=d.s,j==3||j==0&&0<d.X||!(y==1&&_E(a,d)||y==2&&ad(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),j){case 1:Os(a,5);break;case 4:Os(a,10);break;case 3:Os(a,6);break;default:Os(a,2)}}}function eg(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Os(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),y=a.Xa;const j=!y;y=new Ds(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||gl(y,"https"),vl(y),j?hE(y.toString(),f):fE(y.toString(),f)}else A(2);a.G=0,a.l&&a.l.sa(d),tg(a),Gm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),A(2)):(this.j.info("Failed to ping google.com"),A(1))};function tg(a){if(a.G=0,a.ka=[],a.l){const d=qm(a.h);(d.length!=0||a.i.length!=0)&&(I(a.ka,d),I(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function ng(a,d,f){var y=f instanceof Ds?xr(f):new Ds(f);if(y.g!="")d&&(y.g=d+"."+y.g),yl(y,y.s);else{var j=l.location;y=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var M=new Ds(null);y&&gl(M,y),d&&(M.g=d),j&&yl(M,j),f&&(M.l=f),y=M}return f=a.D,d=a.ya,f&&d&&Fe(y,f,d),Fe(y,"VER",a.la),Co(a,y),y}function rg(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new et(new _l({eb:f})):new et(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function sg(){}t=sg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(a,d){return new _n(a,d)};function _n(a,d){He.call(this),this.g=new Km(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new vi(this)}R(_n,He),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){od(this.g)},_n.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Pe(a),a=f);d.i.push(new nE(d.Ya++,a)),d.G==3&&kl(d)},_n.prototype.N=function(){this.g.l=null,delete this.j,od(this.g),delete this.g,_n.aa.N.call(this)};function ig(a){L.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}R(ig,L);function og(){$.call(this),this.status=1}R(og,$);function vi(a){this.g=a}R(vi,sg),vi.prototype.ua=function(){Ce(this.g,"a")},vi.prototype.ta=function(a){Ce(this.g,new ig(a))},vi.prototype.sa=function(a){Ce(this.g,new og)},vi.prototype.ra=function(){Ce(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,Mw=function(){return new Tl},Ow=function(){return te()},Dw=X,Zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qs.NO_ERROR=0,qs.TIMEOUT=8,qs.HTTP_ERROR=6,fu=qs,vn.COMPLETE="complete",jw=vn,_r.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",He.prototype.listen=He.prototype.K,Ko=_r,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,Pw=et}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});const Dy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new yp("@firebase/firestore");function Vo(){return ni.logLevel}function ne(t,...e){if(ni.logLevel<=xe.DEBUG){const n=e.map(wp);ni.debug(`Firestore (${go}): ${t}`,...n)}}function Ur(t,...e){if(ni.logLevel<=xe.ERROR){const n=e.map(wp);ni.error(`Firestore (${go}): ${t}`,...n)}}function so(t,...e){if(ni.logLevel<=xe.WARN){const n=e.map(wp);ni.warn(`Firestore (${go}): ${t}`,...n)}}function wp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+t;throw Ur(e),new Error(e)}function qe(t,e){t||le()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class JI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZI{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string"),new Lw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new $t(e)}}class e2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class t2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new e2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){qe(this.o===void 0);const r=i=>{i.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.R=n.token,new n2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=s2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function io(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new wt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new wt(0,0))}static max(){return new ce(new wt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends ja{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const i2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends ja{construct(e,n,r){return new qt(e,n,r)}static isValidIdentifier(e){return i2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Y(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Be.fromString(e))}static fromName(e){return new ie(Be.fromString(e).popFirst(5))}static empty(){return new ie(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Be(e.slice()))}}function o2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new wt(n+1,0):new wt(n,r));return new Es(s,ie.empty(),e)}function a2(t){return new Es(t.readTime,t.key,-1)}class Es{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Es(ce.min(),ie.empty(),-1)}static max(){return new Es(ce.max(),ie.empty(),-1)}}function l2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==u2)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(s=>s?H.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new H((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new H((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function d2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function el(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}xp.oe=-1;function Pc(t){return t==null}function tc(t){return t===0&&1/t==-1/0}function h2(t){return typeof t=="number"&&Number.isInteger(t)&&!tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Uw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hl(this.root,e,this.comparator,!0)}}class Hl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=s??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new My(this.data.getIterator())}getIteratorFrom(e){return new My(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class My{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new En([])}unionWith(e){let n=new jt(qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new En(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Fw("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const f2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(qe(!!t),typeof t=="string"){let e=0;const n=f2.exec(t);if(qe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ri(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kp(t){const e=t.mapValue.fields.__previous_value__;return Ep(e)?kp(e):e}function Da(t){const e=ks(t.mapValue.fields.__local_write_time__.timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r,s,i,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class Oa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl={mapValue:{}};function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ep(t)?4:g2(t)?9007199254740991:m2(t)?10:11:le()}function pr(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Da(t).isEqual(Da(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ks(s.timestampValue),l=ks(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ri(s.bytesValue).isEqual(ri(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ot(s.geoPointValue.latitude)===ot(i.geoPointValue.latitude)&&ot(s.geoPointValue.longitude)===ot(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ot(s.integerValue)===ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ot(s.doubleValue),l=ot(i.doubleValue);return o===l?tc(o)===tc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return io(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Oy(o)!==Oy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!pr(o[c],l[c])))return!1;return!0}(t,e);default:return le()}}function Ma(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function oo(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=ot(i.integerValue||i.doubleValue),c=ot(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Ly(t.timestampValue,e.timestampValue);case 4:return Ly(Da(t),Da(e));case 5:return Ie(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ri(i),c=ri(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=Ie(l[h],c[h]);if(p!==0)return p}return Ie(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ie(ot(i.latitude),ot(o.latitude));return l!==0?l:Ie(ot(i.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Vy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,h,p;const m=i.fields||{},g=o.fields||{},S=(l=m.value)===null||l===void 0?void 0:l.arrayValue,R=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=Ie(((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0,((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0);return D!==0?D:Vy(S,R)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Kl.mapValue&&o===Kl.mapValue)return 0;if(i===Kl.mapValue)return 1;if(o===Kl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const g=Ie(c[m],p[m]);if(g!==0)return g;const S=oo(l[c[m]],h[p[m]]);if(S!==0)return S}return Ie(c.length,p.length)}(t.mapValue,e.mapValue);default:throw le()}}function Ly(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=ks(t),r=ks(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function Vy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=oo(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function ao(t){return ef(t)}function ef(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ef(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ef(n.fields[o])}`;return s+"}"}(t.mapValue):le()}function Uy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tf(t){return!!t&&"integerValue"in t}function bp(t){return!!t&&"arrayValue"in t}function Fy(t){return!!t&&"nullValue"in t}function zy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pu(t){return!!t&&"mapValue"in t}function m2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function la(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=la(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=la(t.arrayValue.values[n]);return e}return Object.assign({},t)}function g2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=la(n)}setAll(e){let n=qt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=la(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){pi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new an(la(this.value))}}function zw(t){const e=[];return pi(t.fields,(n,r)=>{const s=new qt([n]);if(pu(r)){const i=zw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new En(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ht(e,0,ce.min(),ce.min(),ce.min(),an.empty(),0)}static newFoundDocument(e,n,r,s){return new Ht(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ht(e,2,n,ce.min(),ce.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,ce.min(),ce.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){this.position=e,this.inclusive=n}}function By(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=oo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function $y(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n="asc"){this.field=e,this.dir=n}}function y2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{}class ht extends Bw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new _2(e,n,r):n==="array-contains"?new E2(e,r):n==="in"?new k2(e,r):n==="not-in"?new b2(e,r):n==="array-contains-any"?new T2(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new w2(e,r):new x2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(oo(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(oo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends Bw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Xn(e,n)}matches(e){return $w(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function $w(t){return t.op==="and"}function Ww(t){return v2(t)&&$w(t)}function v2(t){for(const e of t.filters)if(e instanceof Xn)return!1;return!0}function nf(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+ao(t.value);if(Ww(t))return t.filters.map(e=>nf(e)).join(",");{const e=t.filters.map(n=>nf(n)).join(",");return`${t.op}(${e})`}}function Hw(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&pr(r.value,s.value)}(t,e):t instanceof Xn?function(r,s){return s instanceof Xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Hw(o,s.filters[l]),!0):!1}(t,e):void le()}function Kw(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${ao(n.value)}`}(t):t instanceof Xn?function(n){return n.op.toString()+" {"+n.getFilters().map(Kw).join(" ,")+"}"}(t):"Filter"}class _2 extends ht{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class w2 extends ht{constructor(e,n){super(e,"in",n),this.keys=Gw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class x2 extends ht{constructor(e,n){super(e,"not-in",n),this.keys=Gw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Gw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class E2 extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bp(n)&&Ma(n.arrayValue,this.value)}}class k2 extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ma(this.value.arrayValue,n)}}class b2 extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ma(this.value.arrayValue,n)}}class T2 extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ma(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Wy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new I2(t,e,n,r,s,i,o)}function Tp(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ao(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ao(r)).join(",")),e.ue=n}return e.ue}function Ip(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!y2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Hw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$y(t.startAt,e.startAt)&&$y(t.endAt,e.endAt)}function rf(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function A2(t,e,n,r,s,i,o,l){return new yo(t,e,n,r,s,i,o,l)}function jc(t){return new yo(t)}function Hy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Qw(t){return t.collectionGroup!==null}function ua(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new jt(qt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new La(i,r))}),n.has(qt.keyField().canonicalString())||e.ce.push(new La(qt.keyField(),r))}return e.ce}function dr(t){const e=de(t);return e.le||(e.le=S2(e,ua(t))),e.le}function S2(t,e){if(t.limitType==="F")return Wy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new La(s.field,i)});const n=t.endAt?new nc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nc(t.startAt.position,t.startAt.inclusive):null;return Wy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sf(t,e){const n=t.filters.concat([e]);return new yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rc(t,e,n){return new yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dc(t,e){return Ip(dr(t),dr(e))&&t.limitType===e.limitType}function Yw(t){return`${Tp(dr(t))}|lt:${t.limitType}`}function bi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Kw(s)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ao(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ao(s)).join(",")),`Target(${r})`}(dr(t))}; limitType=${t.limitType})`}function Oc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ua(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const h=By(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,ua(r),s)||r.endAt&&!function(o,l,c){const h=By(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,ua(r),s))}(t,e)}function N2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Xw(t){return(e,n)=>{let r=!1;for(const s of ua(t)){const i=C2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function C2(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?oo(c,h):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Uw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new Xe(ie.comparator);function Fr(){return R2}const Jw=new Xe(ie.comparator);function Go(...t){let e=Jw;for(const n of t)e=e.insert(n.key,n);return e}function Zw(t){let e=Jw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $s(){return ca()}function ex(){return ca()}function ca(){return new vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const q2=new Xe(ie.comparator),P2=new jt(ie.comparator);function we(...t){let e=P2;for(const n of t)e=e.add(n);return e}const j2=new jt(Ie);function D2(){return j2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function tx(t){return{integerValue:""+t}}function O2(t,e){return h2(e)?tx(e):Ap(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(){this._=void 0}}function M2(t,e,n){return t instanceof Va?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ep(i)&&(i=kp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ua?rx(t,e):t instanceof Fa?sx(t,e):function(s,i){const o=nx(s,i),l=Ky(o)+Ky(s.Pe);return tf(o)&&tf(s.Pe)?tx(l):Ap(s.serializer,l)}(t,e)}function L2(t,e,n){return t instanceof Ua?rx(t,e):t instanceof Fa?sx(t,e):n}function nx(t,e){return t instanceof sc?function(r){return tf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Va extends Mc{}class Ua extends Mc{constructor(e){super(),this.elements=e}}function rx(t,e){const n=ix(e);for(const r of t.elements)n.some(s=>pr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fa extends Mc{constructor(e){super(),this.elements=e}}function sx(t,e){let n=ix(e);for(const r of t.elements)n=n.filter(s=>!pr(s,r));return{arrayValue:{values:n}}}class sc extends Mc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ky(t){return ot(t.integerValue||t.doubleValue)}function ix(t){return bp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.field=e,this.transform=n}}function U2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ua&&s instanceof Ua||r instanceof Fa&&s instanceof Fa?io(r.elements,s.elements,pr):r instanceof sc&&s instanceof sc?pr(r.Pe,s.Pe):r instanceof Va&&s instanceof Va}(t.transform,e.transform)}class F2{constructor(e,n){this.version=e,this.transformResults=n}}class tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Lc{}function ox(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vc(t.key,tn.none()):new tl(t.key,t.data,tn.none());{const n=t.data,r=an.empty();let s=new jt(qt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ss(t.key,r,new En(s.toArray()),tn.none())}}function z2(t,e,n){t instanceof tl?function(s,i,o){const l=s.value.clone(),c=Qy(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ss?function(s,i,o){if(!mu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Qy(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ax(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function da(t,e,n,r){return t instanceof tl?function(i,o,l,c){if(!mu(i.precondition,o))return l;const h=i.value.clone(),p=Yy(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ss?function(i,o,l,c){if(!mu(i.precondition,o))return l;const h=Yy(i.fieldTransforms,c,o),p=o.data;return p.setAll(ax(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return mu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function B2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=nx(r.transform,s||null);i!=null&&(n===null&&(n=an.empty()),n.set(r.field,i))}return n||null}function Gy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&io(r,s,(i,o)=>U2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tl extends Lc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends Lc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ax(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Qy(t,e,n){const r=new Map;qe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,L2(o,l,n[s]))}return r}function Yy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,M2(i,o,e))}return r}class Vc extends Lc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $2 extends Lc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&z2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=da(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=da(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ex();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=ox(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,(n,r)=>Gy(n,r))&&io(this.baseMutations,e.baseMutations,(n,r)=>Gy(n,r))}}class Sp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){qe(e.mutations.length===r.length);let s=function(){return q2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Sp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ee;function G2(t){switch(t){default:return le();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function lx(t){if(t===void 0)return Ur("GRPC error has no .code"),F.UNKNOWN;switch(t){case ct.OK:return F.OK;case ct.CANCELLED:return F.CANCELLED;case ct.UNKNOWN:return F.UNKNOWN;case ct.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ct.INTERNAL:return F.INTERNAL;case ct.UNAVAILABLE:return F.UNAVAILABLE;case ct.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ct.NOT_FOUND:return F.NOT_FOUND;case ct.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ct.ABORTED:return F.ABORTED;case ct.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ct.DATA_LOSS:return F.DATA_LOSS;default:return le()}}(Ee=ct||(ct={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=new Gs([4294967295,4294967295],0);function Xy(t){const e=Q2().encode(t),n=new qw;return n.update(e),new Uint8Array(n.digest())}function Jy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gs([n,r],0),new Gs([s,i],0)]}class Np{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qo(`Invalid padding: ${n}`);if(r<0)throw new Qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Gs.fromNumber(r)));return s.compare(Y2)===1&&(s=new Gs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Xy(e),[r,s]=Jy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Np(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Xy(e),[r,s]=Jy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,nl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uc(ce.min(),s,new Xe(Ie),Fr(),we())}}class nl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nl(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class ux{constructor(e,n){this.targetId=e,this.me=n}}class cx{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Zy{constructor(){this.fe=0,this.ge=t0(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),r=we();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:le()}}),new nl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=t0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class X2{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fr(),this.qe=e0(),this.Qe=new Xe(Ie)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(rf(i))if(r===0){const o=new ie(i.path);this.Ue(n,o,Ht.newNoDocument(o,ce.min()))}else qe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ri(r).toUint8Array()}catch(c){if(c instanceof Fw)return so("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Np(o,s,i)}catch(c){return so(c instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&rf(l.target)){const c=new ie(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ht.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=we();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Uc(e,n,this.Qe,this.ke,r);return this.ke=Fr(),this.qe=e0(),this.Qe=new Xe(Ie),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Zy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new jt(Ie),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function e0(){return new Xe(ie.comparator)}function t0(){return new Xe(ie.comparator)}const J2={asc:"ASCENDING",desc:"DESCENDING"},Z2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eA={and:"AND",or:"OR"};class tA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function of(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function ic(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nA(t,e){return ic(t,e.toTimestamp())}function hr(t){return qe(!!t),ce.fromTimestamp(function(n){const r=ks(n);return new wt(r.seconds,r.nanos)}(t))}function Cp(t,e){return af(t,e).canonicalString()}function af(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hx(t){const e=Be.fromString(t);return qe(yx(e)),e}function lf(t,e){return Cp(t.databaseId,e.path)}function zd(t,e){const n=hx(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(px(n))}function fx(t,e){return Cp(t.databaseId,e)}function rA(t){const e=hx(t);return e.length===4?Be.emptyPath():px(e)}function uf(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function px(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function n0(t,e,n){return{name:lf(t,e),fields:n.value.mapValue.fields}}function sA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(qe(p===void 0||typeof p=="string"),Ot.fromBase64String(p||"")):(qe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ot.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?F.UNKNOWN:lx(h.code);return new Y(p,h.message||"")}(o);n=new cx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=zd(t,r.document.name),i=hr(r.document.updateTime),o=r.document.createTime?hr(r.document.createTime):ce.min(),l=new an({mapValue:{fields:r.document.fields}}),c=Ht.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new gu(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=zd(t,r.document),i=r.readTime?hr(r.readTime):ce.min(),o=Ht.newNoDocument(s,i),l=r.removedTargetIds||[];n=new gu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=zd(t,r.document),i=r.removedTargetIds||[];n=new gu([],i,s,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new K2(s,i),l=r.targetId;n=new ux(l,o)}}return n}function iA(t,e){let n;if(e instanceof tl)n={update:n0(t,e.key,e.value)};else if(e instanceof Vc)n={delete:lf(t,e.key)};else if(e instanceof Ss)n={update:n0(t,e.key,e.data),updateMask:pA(e.fieldMask)};else{if(!(e instanceof $2))return le();n={verify:lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Va)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ua)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Fa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof sc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:nA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le()}(t,e.precondition)),n}function oA(t,e){return t&&t.length>0?(qe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?hr(s.updateTime):hr(i);return o.isEqual(ce.min())&&(o=hr(i)),new F2(o,s.transformResults||[])}(n,e))):[]}function aA(t,e){return{documents:[fx(t,e.path)]}}function lA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fx(t,s);const i=function(h){if(h.length!==0)return gx(Xn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:Ti(g.field),direction:dA(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=of(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function uA(t){let e=rA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){qe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=mx(m);return g instanceof Xn&&Ww(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(R){return new La(Ii(R.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Pc(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,S=m.values||[];return new nc(S,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,S=m.values||[];return new nc(S,g)}(n.endAt)),A2(e,s,o,i,l,"F",c,h)}function cA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ii(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ii(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ii(n.unaryFilter.field);return ht.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ii(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(Ii(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xn.create(n.compositeFilter.filters.map(r=>mx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function dA(t){return J2[t]}function hA(t){return Z2[t]}function fA(t){return eA[t]}function Ti(t){return{fieldPath:t.canonicalString()}}function Ii(t){return qt.fromServerFormat(t.fieldPath)}function gx(t){return t instanceof ht?function(n){if(n.op==="=="){if(zy(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NAN"}};if(Fy(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zy(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NAN"}};if(Fy(n.value))return{unaryFilter:{field:Ti(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ti(n.field),op:hA(n.op),value:n.value}}}(t):t instanceof Xn?function(n){const r=n.getFilters().map(s=>gx(s));return r.length===1?r[0]:{compositeFilter:{op:fA(n.op),filters:r}}}(t):le()}function pA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n,r,s,i=ce.min(),o=ce.min(),l=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.ct=e}}function gA(t){const e=uA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.un=new vA}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Es.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class vA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new jt(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new lo(0)}static kn(){return new lo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&da(r.mutation,s,En.empty(),wt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const s=$s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Go();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Fr();const o=ca(),l=function(){return ca()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Ss)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),da(p.mutation,h,p.mutation.getFieldMask(),wt.now())):o.set(h.key,En.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new wA(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ca();let s=new Xe((o,l)=>o-l),i=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||En.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(s.get(l.batchId)||we()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=ex();p.forEach(g=>{if(!i.has(g)){const S=ox(n.get(g),r.get(g));S!==null&&m.set(g,S),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Qw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):H.resolve($s());let l=-1,c=i;return o.next(h=>H.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?H.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{c=c.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,we())).next(p=>({batchId:l,changes:Zw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=Go();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Go();return this.indexManager.getCollectionParents(e,i).next(l=>H.forEach(l,c=>{const h=function(m,g){return new yo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Ht.newInvalidDocument(p)))});let l=Go();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&da(p.mutation,h,En.empty(),wt.now()),Oc(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:hr(s.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:gA(s.bundledQuery),readTime:hr(s.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.overlays=new Xe(ie.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$s();return H.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const s=$s(),i=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return H.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Xe((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=$s(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=$s(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return H.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new H2(n,r));let i=this.Ir.get(n);i===void 0&&(i=we(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this.Tr=new jt(bt.Er),this.dr=new jt(bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new bt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new bt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Be([])),r=new bt(n,e),s=new bt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Be([])),r=new bt(n,e),s=new bt(n,e+1);let i=we();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new bt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ie(e.wr,n.wr)}static Ar(e,n){return Ie(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new jt(bt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new W2(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new bt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new bt(n,0),s=new bt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(Ie);return n.forEach(s=>{const i=new bt(s,0),o=new bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new bt(new ie(i),0);let l=new jt(Ie);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},o),H.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){qe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,s=>{const i=new bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new bt(n,0),s=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.Mr=e,this.docs=function(){return new Xe(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=Fr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ht.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fr();const o=n.path,l=new ie(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||l2(a2(p),r)<=0||(s.has(p.key)||Oc(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,r,s){le()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AA(this)}getSize(e){return H.resolve(this.size)}}class AA extends _A{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.persistence=e,this.Nr=new vo(n=>Tp(n),Ip),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rp,this.targetCount=0,this.kr=lo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new lo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new xp(0),this.Kr=!1,this.Kr=!0,this.$r=new bA,this.referenceDelegate=e(this),this.Ur=new SA(this),this.indexManager=new yA,this.remoteDocumentCache=function(s){return new IA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new mA(n),this.Gr=new EA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new TA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new CA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class CA extends c2{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Jr=new Rp,this.Yr=null}static Zr(e){return new qp(e)}get Xr(){if(this.Yr)return this.Yr;throw le()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=we(),s=we();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Pp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qT()?8:d2(Qt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new RA;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Vo()<=xe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",bi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Vo()<=xe.DEBUG&&ne("QueryEngine","Query:",bi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Vo()<=xe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",bi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):H.resolve())}Yi(e,n){if(Hy(n))return H.resolve(null);let r=dr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rc(n,null,"F"),r=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=we(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,rc(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return Hy(n)||s.isEqual(ce.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?H.resolve(null):(Vo()<=xe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bi(n)),this.rs(e,o,n,o2(s,-1)).next(l=>l))})}ts(e,n){let r=new jt(Xw(e));return n.forEach((s,i)=>{Oc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Vo()<=xe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",bi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Es.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Xe(Ie),this._s=new vo(i=>Tp(i),Ip),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function jA(t,e,n,r){return new PA(t,e,n,r)}async function vx(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=we();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function DA(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,g=m.keys();let S=H.resolve();return g.forEach(R=>{S=S.next(()=>p.getEntry(c,R)).next(D=>{const I=h.docVersions.get(R);qe(I!==null),D.version.compareTo(I)<0&&(m.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),p.addEntry(D)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=we();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function _x(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function OA(t,e){const n=de(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let S=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(Ot.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),s=s.insert(m,S),function(D,I,x){return D.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,S,p)&&l.push(n.Ur.updateTargetData(i,S))});let c=Fr(),h=we();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(MA(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(ce.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return H.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function MA(t,e,n){let r=we(),s=we();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Fr();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ne("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function LA(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function VA(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new as(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function cf(t,e,n){const r=de(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!el(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function r0(t,e,n){const r=de(t);let s=ce.min(),i=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=de(c),g=m._s.get(p);return g!==void 0?H.resolve(m.os.get(g)):m.Ur.getTargetData(h,p)}(r,o,dr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?i:we())).next(l=>(UA(r,N2(e),l),{documents:l,Ts:i})))}function UA(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class s0{constructor(){this.activeTargetIds=D2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FA{constructor(){this.so=new s0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new s0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl=null;function Bd(){return Gl===null?Gl=function(){return 268435456+Math.round(2147483648*Math.random())}():Gl++,"0x"+Gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class WA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Bd(),c=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(ne("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw so("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=BA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Bd();return new Promise((o,l)=>{const c=new Pw;c.setWithCredentials(!0),c.listenOnce(jw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fu.NO_ERROR:const p=c.getResponseJson();ne(Bt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case fu.TIMEOUT:ne(Bt,`RPC '${e}' ${i} timed out`),l(new Y(F.DEADLINE_EXCEEDED,"Request time out"));break;case fu.HTTP_ERROR:const m=c.getStatus();if(ne(Bt,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const S=g==null?void 0:g.error;if(S&&S.status&&S.message){const R=function(I){const x=I.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(x)>=0?x:F.UNKNOWN}(S.status);l(new Y(R,S.message))}else l(new Y(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y(F.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{ne(Bt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);ne(Bt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Bd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Mw(),l=Ow(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");ne(Bt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let g=!1,S=!1;const R=new $A({Io:I=>{S?ne(Bt,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(g||(ne(Bt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),ne(Bt,`RPC '${e}' stream ${s} sending:`,I),m.send(I))},To:()=>m.close()}),D=(I,x,_)=>{I.listen(x,k=>{try{_(k)}catch(P){setTimeout(()=>{throw P},0)}})};return D(m,Ko.EventType.OPEN,()=>{S||(ne(Bt,`RPC '${e}' stream ${s} transport opened.`),R.yo())}),D(m,Ko.EventType.CLOSE,()=>{S||(S=!0,ne(Bt,`RPC '${e}' stream ${s} transport closed`),R.So())}),D(m,Ko.EventType.ERROR,I=>{S||(S=!0,so(Bt,`RPC '${e}' stream ${s} transport errored:`,I),R.So(new Y(F.UNAVAILABLE,"The operation could not be completed")))}),D(m,Ko.EventType.MESSAGE,I=>{var x;if(!S){const _=I.data[0];qe(!!_);const k=_,P=k.error||((x=k[0])===null||x===void 0?void 0:x.error);if(P){ne(Bt,`RPC '${e}' stream ${s} received error:`,P);const W=P.status;let z=function(E){const b=ct[E];if(b!==void 0)return lx(b)}(W),w=P.message;z===void 0&&(z=F.INTERNAL,w="Unknown error status: "+W+" with message "+P.message),S=!0,R.So(new Y(z,w)),m.close()}else ne(Bt,`RPC '${e}' stream ${s} received:`,_),R.bo(_)}}),D(l,Dw.STAT_EVENT,I=>{I.stat===Zh.PROXY?ne(Bt,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Zh.NOPROXY&&ne(Bt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function $d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){return new tA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HA extends xx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=sA(this.serializer,e),r=function(i){if(!("targetChange"in i))return ce.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?hr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=uf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=rf(c)?{documents:aA(i,c)}:{query:lA(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=dx(i,o.resumeToken);const h=of(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ce.min())>0){l.readTime=ic(i,o.snapshotVersion.toTimestamp());const h=of(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=cA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=uf(this.serializer),n.removeTarget=e,this.a_(n)}}class KA extends xx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return qe(!!e.streamToken),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=oA(e.writeResults,e.commitTime),r=hr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=uf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>iA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,af(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,af(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class QA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ur(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{mi(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=de(c);h.L_.add(4),await rl(h),h.q_.set("Unknown"),h.L_.delete(4),await zc(h)}(this))})}),this.q_=new QA(r,s)}}async function zc(t){if(mi(t))for(const e of t.B_)await e(!0)}async function rl(t){for(const e of t.B_)await e(!1)}function Ex(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Mp(n)?Op(n):_o(n).r_()&&Dp(n,e))}function jp(t,e){const n=de(t),r=_o(n);n.N_.delete(e),r.r_()&&kx(n,e),n.N_.size===0&&(r.r_()?r.o_():mi(n)&&n.q_.set("Unknown"))}function Dp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_o(t).A_(e)}function kx(t,e){t.Q_.xe(e),_o(t).R_(e)}function Op(t){t.Q_=new X2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),_o(t).start(),t.q_.v_()}function Mp(t){return mi(t)&&!_o(t).n_()&&t.N_.size>0}function mi(t){return de(t).L_.size===0}function bx(t){t.Q_=void 0}async function XA(t){t.q_.set("Online")}async function JA(t){t.N_.forEach((e,n)=>{Dp(t,e)})}async function ZA(t,e){bx(t),Mp(t)?(t.q_.M_(e),Op(t)):t.q_.set("Unknown")}async function eS(t,e,n){if(t.q_.set("Online"),e instanceof cx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await oc(t,r)}else if(e instanceof gu?t.Q_.Ke(e):e instanceof ux?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await _x(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(Ot.EMPTY_BYTE_STRING,p.snapshotVersion)),kx(i,c);const m=new as(p.target,c,h,p.sequenceNumber);Dp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await oc(t,r)}}async function oc(t,e,n){if(!el(e))throw e;t.L_.add(1),await rl(t),t.q_.set("Offline"),n||(n=()=>_x(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await zc(t)})}function Tx(t,e){return e().catch(n=>oc(t,n,e))}async function Bc(t){const e=de(t),n=bs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tS(e);)try{const s=await LA(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,nS(e,s)}catch(s){await oc(e,s)}Ix(e)&&Ax(e)}function tS(t){return mi(t)&&t.O_.length<10}function nS(t,e){t.O_.push(e);const n=bs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Ix(t){return mi(t)&&!bs(t).n_()&&t.O_.length>0}function Ax(t){bs(t).start()}async function rS(t){bs(t).p_()}async function sS(t){const e=bs(t);for(const n of t.O_)e.m_(n.mutations)}async function iS(t,e,n){const r=t.O_.shift(),s=Sp.from(r,e,n);await Tx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bc(t)}async function oS(t,e){e&&bs(t).V_&&await async function(r,s){if(function(o){return G2(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();bs(r).s_(),await Tx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bc(r)}}(t,e),Ix(t)&&Ax(t)}async function o0(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=mi(n);n.L_.add(3),await rl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await zc(n)}async function aS(t,e){const n=de(t);e?(n.L_.delete(2),await zc(n)):e||(n.L_.add(2),await rl(n),n.q_.set("Unknown"))}function _o(t){return t.K_||(t.K_=function(n,r,s){const i=de(n);return i.w_(),new HA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:XA.bind(null,t),Ro:JA.bind(null,t),mo:ZA.bind(null,t),d_:eS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Mp(t)?Op(t):t.q_.set("Unknown")):(await t.K_.stop(),bx(t))})),t.K_}function bs(t){return t.U_||(t.U_=function(n,r,s){const i=de(n);return i.w_(),new KA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rS.bind(null,t),mo:oS.bind(null,t),f_:sS.bind(null,t),g_:iS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bc(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Lp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vp(t,e){if(Ur("AsyncQueue",`${e}: ${t}`),el(t))return new Y(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=Go(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Ki(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.W_=new Xe(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):le():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class uo{constructor(e,n,r,s,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new uo(e,n,Ki.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class uS{constructor(){this.queries=l0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=de(n),i=s.queries;s.queries=l0(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new Y(F.ABORTED,"Firestore shutting down"))}}function l0(){return new vo(t=>Yw(t),Dc)}async function Up(t,e){const n=de(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new lS,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Vp(o,`Initialization of query '${bi(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&zp(n)}async function Fp(t,e){const n=de(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cS(t,e){const n=de(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&zp(n)}function dS(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function zp(t){t.Y_.forEach(e=>{e.next()})}var df,u0;(u0=df||(df={})).ea="default",u0.Cache="cache";class Bp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.key=e}}class Nx{constructor(e){this.key=e}}class hS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=we(),this.mutatedKeys=we(),this.Aa=Xw(e),this.Ra=new Ki(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new a0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),S=Oc(this.query,m)?m:null,R=!!g&&this.mutatedKeys.has(g.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let I=!1;g&&S?g.data.isEqual(S.data)?R!==D&&(r.track({type:3,doc:S}),I=!0):this.ga(g,S)||(r.track({type:2,doc:S}),I=!0,(c&&this.Aa(S,c)>0||h&&this.Aa(S,h)<0)&&(l=!0)):!g&&S?(r.track({type:0,doc:S}),I=!0):g&&!S&&(r.track({type:1,doc:g}),I=!0,(c||h)&&(l=!0)),I&&(S?(o=o.add(S),i=D?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(S,R){const D=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return D(S)-D(R)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new uo(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new a0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=we(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Nx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Sx(r))}),n}ba(e){this.Ta=e.Ts,this.da=we();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return uo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class fS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pS{constructor(e){this.key=e,this.va=!1}}class mS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new vo(l=>Yw(l),Dc),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(ie.comparator),this.Na=new Map,this.La=new Rp,this.Ba={},this.ka=new Map,this.qa=lo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function gS(t,e,n=!0){const r=Dx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Cx(r,e,n,!0),s}async function yS(t,e){const n=Dx(t);await Cx(n,e,!0,!1)}async function Cx(t,e,n,r){const s=await VA(t.localStore,dr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await vS(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ex(t.remoteStore,s),l}async function vS(t,e,n,r,s){t.Ka=(m,g,S)=>async function(D,I,x,_){let k=I.view.ma(x);k.ns&&(k=await r0(D.localStore,I.query,!1).then(({documents:w})=>I.view.ma(w,k)));const P=_&&_.targetChanges.get(I.targetId),W=_&&_.targetMismatches.get(I.targetId)!=null,z=I.view.applyChanges(k,D.isPrimaryClient,P,W);return d0(D,I.targetId,z.wa),z.snapshot}(t,m,g,S);const i=await r0(t.localStore,e,!0),o=new hS(e,i.Ts),l=o.ma(i.documents),c=nl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,c);d0(t,n,h.wa);const p=new fS(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function _S(t,e,n){const r=de(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Dc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&jp(r.remoteStore,s.targetId),hf(r,s.targetId)}).catch(Za)):(hf(r,s.targetId),await cf(r.localStore,s.targetId,!0))}async function wS(t,e){const n=de(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),jp(n.remoteStore,r.targetId))}async function xS(t,e,n){const r=SS(t);try{const s=await function(o,l){const c=de(o),h=wt.now(),p=l.reduce((S,R)=>S.add(R.key),we());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",S=>{let R=Fr(),D=we();return c.cs.getEntries(S,p).next(I=>{R=I,R.forEach((x,_)=>{_.isValidDocument()||(D=D.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(S,R)).next(I=>{m=I;const x=[];for(const _ of l){const k=B2(_,m.get(_.key).overlayedDocument);k!=null&&x.push(new Ss(_.key,k,zw(k.value.mapValue),tn.exists(!0)))}return c.mutationQueue.addMutationBatch(S,h,x,l)}).next(I=>{g=I;const x=I.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(S,I.batchId,x)})}).then(()=>({batchId:g.batchId,changes:Zw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Xe(Ie)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await sl(r,s.changes),await Bc(r.remoteStore)}catch(s){const i=Vp(s,"Failed to persist write");n.reject(i)}}async function Rx(t,e){const n=de(t);try{const r=await OA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?qe(o.va):s.removedDocuments.size>0&&(qe(o.va),o.va=!1))}),await sl(n,r,e)}catch(r){await Za(r)}}function c0(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=de(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const g of m.j_)g.Z_(l)&&(h=!0)}),h&&zp(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ES(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Xe(ie.comparator);o=o.insert(i,Ht.newNoDocument(i,ce.min()));const l=we().add(i),c=new Uc(ce.min(),new Map,new Xe(Ie),o,l);await Rx(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),$p(r)}else await cf(r.localStore,e,!1).then(()=>hf(r,e,n)).catch(Za)}async function kS(t,e){const n=de(t),r=e.batch.batchId;try{const s=await DA(n.localStore,e);Px(n,r,null),qx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sl(n,s)}catch(s){await Za(s)}}async function bS(t,e,n){const r=de(t);try{const s=await function(o,l){const c=de(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(qe(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);Px(r,e,n),qx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sl(r,s)}catch(s){await Za(s)}}function qx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Px(t,e,n){const r=de(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function hf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||jx(t,r)})}function jx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(jp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),$p(t))}function d0(t,e,n){for(const r of n)r instanceof Sx?(t.La.addReference(r.key,e),TS(t,r)):r instanceof Nx?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||jx(t,r.key)):le()}function TS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),$p(t))}function $p(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Be.fromString(e)),r=t.qa.next();t.Na.set(r,new pS(n)),t.Oa=t.Oa.insert(n,r),Ex(t.remoteStore,new as(dr(jc(n.path)),r,"TargetPurposeLimboResolution",xp.oe))}}async function sl(t,e,n){const r=de(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Pp.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=de(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(h,g=>H.forEach(g.$i,S=>p.persistence.referenceDelegate.addReference(m,g.targetId,S)).next(()=>H.forEach(g.Ui,S=>p.persistence.referenceDelegate.removeReference(m,g.targetId,S)))))}catch(m){if(!el(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const S=p.os.get(g),R=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(R);p.os=p.os.insert(g,D)}}}(r.localStore,i))}async function IS(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await vx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new Y(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sl(n,r.hs)}}function AS(t,e){const n=de(t),r=n.Na.get(e);if(r&&r.va)return we().add(r.key);{let s=we();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function Dx(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ES.bind(null,e),e.Ca.d_=cS.bind(null,e.eventManager),e.Ca.$a=dS.bind(null,e.eventManager),e}function SS(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bS.bind(null,e),e}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return jA(this.persistence,new qA,e.initialUser,this.serializer)}Ga(e){return new NA(qp.Zr,this.serializer)}Wa(e){return new FA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class ff{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>c0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IS.bind(null,this.syncEngine),await aS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uS}()}createDatastore(e){const n=Fc(e.databaseInfo.databaseId),r=function(i){return new WA(i)}(e.databaseInfo);return function(i,o,l,c){return new GA(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new YA(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>c0(this.syncEngine,n,0),function(){return i0.D()?new i0:new zA}())}createSyncEngine(e,n){return function(s,i,o,l,c,h,p){const m=new mS(s,i,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=de(s);ne("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await rl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ff.provider={build:()=>new ff};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ur("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=$t.UNAUTHENTICATED,this.clientId=Vw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Vp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wd(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await vx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function h0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CS(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>o0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>o0(e.remoteStore,s)),t._onlineComponents=e}async function CS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),await Wd(t,new ac)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await Wd(t,new ac);return t._offlineComponents}async function Ox(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await h0(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await h0(t,new ff))),t._onlineComponents}function RS(t){return Ox(t).then(e=>e.syncEngine)}async function lc(t){const e=await Ox(t),n=e.eventManager;return n.onListen=gS.bind(null,e.syncEngine),n.onUnlisten=_S.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wS.bind(null,e.syncEngine),n}function qS(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new Wp({next:g=>{p.Za(),o.enqueueAndForget(()=>Fp(i,m));const S=g.docs.has(l);!S&&g.fromCache?h.reject(new Y(F.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&g.fromCache&&c&&c.source==="server"?h.reject(new Y(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Bp(jc(l.path),p,{includeMetadataChanges:!0,_a:!0});return Up(i,m)}(await lc(t),t.asyncQueue,e,n,r)),r.promise}function PS(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new Wp({next:g=>{p.Za(),o.enqueueAndForget(()=>Fp(i,m)),g.fromCache&&c.source==="server"?h.reject(new Y(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Bp(l,p,{includeMetadataChanges:!0,_a:!0});return Up(i,m)}(await lc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e,n){if(!n)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jS(t,e,n,r){if(e===!0&&r===!0)throw new Y(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p0(t){if(!ie.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m0(t){if(ie.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $c(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le()}function nn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$c(t);throw new Y(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function DS(t,e){if(e<=0)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new g0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new g0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XI;switch(r.type){case"firstParty":return new t2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=f0.get(n);r&&(ne("ComponentProvider","Removing Datastore"),f0.delete(n),r.terminate())}(this),Promise.resolve()}}function OS(t,e,n,r={}){var s;const i=(t=nn(t,Wc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=$t.MOCK_USER;else{l=Iw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Y(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new $t(h)}t._authCredentials=new JI(new Lw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $r(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class vs extends $r{constructor(e,n,r){super(e,n,jc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ie(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function We(t,e,...n){if(t=Me(t),Lx("collection","path",e),t instanceof Wc){const r=Be.fromString(e,...n);return m0(r),new vs(t,null,r)}{if(!(t instanceof Kt||t instanceof vs))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return m0(r),new vs(t.firestore,null,r)}}function ve(t,e,...n){if(t=Me(t),arguments.length===1&&(e=Vw.newId()),Lx("doc","path",e),t instanceof Wc){const r=Be.fromString(e,...n);return p0(r),new Kt(t,null,new ie(r))}{if(!(t instanceof Kt||t instanceof vs))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return p0(r),new Kt(t.firestore,t instanceof vs?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wx(this,"async_queue_retry"),this.Vu=()=>{const r=$d();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=$d();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=$d();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!el(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Ur("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Lp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&le()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function v0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class mr extends Wc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new y0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y0(e),this._firestoreClient=void 0,await e}}}function MS(t,e){const n=typeof t=="object"?t:_p(),r=typeof t=="string"?t:"(default)",s=qc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=kw("firestore");i&&OS(s,...i)}return s}function il(t){if(t._terminated)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LS(t),t._firestoreClient}function LS(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,p){return new p2(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Mx(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new NS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new co(Ot.fromBase64String(e))}catch(n){throw new Y(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new co(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=/^__.*__$/;class US{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms):new tl(e,this.data,n,this.fieldTransforms)}}class Vx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ux(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Gp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ux(this.Cu)&&VS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class FS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Fc(e)}Qu(e,n,r,s=!1){return new Gp({Cu:e,methodName:n,qu:r,path:qt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function al(t){const e=t._freezeSettings(),n=Fc(t._databaseId);return new FS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Qp(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Xp("Data must be an object, but it was:",o,r);const l=Bx(r,o);let c,h;if(i.merge)c=new En(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=pf(e,m,n);if(!o.contains(g))throw new Y(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Wx(p,g)||p.push(g)}c=new En(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new US(new an(l),c,h)}class Kc extends Hc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kc}}class Yp extends Hc{_toFieldTransform(e){return new V2(e.path,new Va)}isEqual(e){return e instanceof Yp}}function Fx(t,e,n,r){const s=t.Qu(1,e,n);Xp("Data must be an object, but it was:",s,r);const i=[],o=an.empty();pi(r,(c,h)=>{const p=Jp(e,c,n);h=Me(h);const m=s.Nu(p);if(h instanceof Kc)i.push(p);else{const g=ll(h,m);g!=null&&(i.push(p),o.set(p,g))}});const l=new En(i);return new Vx(o,l,s.fieldTransforms)}function zx(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[pf(e,r,n)],c=[s];if(i.length%2!=0)throw new Y(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(pf(e,i[g])),c.push(i[g+1]);const h=[],p=an.empty();for(let g=l.length-1;g>=0;--g)if(!Wx(h,l[g])){const S=l[g];let R=c[g];R=Me(R);const D=o.Nu(S);if(R instanceof Kc)h.push(S);else{const I=ll(R,D);I!=null&&(h.push(S),p.set(S,I))}}const m=new En(h);return new Vx(p,m,o.fieldTransforms)}function zS(t,e,n,r=!1){return ll(n,t.Qu(r?4:3,e))}function ll(t,e){if($x(t=Me(t)))return Xp("Unsupported field value:",e,t),Bx(t,e);if(t instanceof Hc)return function(r,s){if(!Ux(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=ll(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return O2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=wt.fromDate(r);return{timestampValue:ic(s.serializer,i)}}if(r instanceof wt){const i=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ic(s.serializer,i)}}if(r instanceof Hp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof co)return{bytesValue:dx(s.serializer,r._byteString)};if(r instanceof Kt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Cp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Kp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Ap(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${$c(r)}`)}(t,e)}function Bx(t,e){const n={};return Uw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(t,(r,s)=>{const i=ll(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $x(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof wt||t instanceof Hp||t instanceof co||t instanceof Kt||t instanceof Hc||t instanceof Kp)}function Xp(t,e,n){if(!$x(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=$c(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function pf(t,e,n){if((e=Me(e))instanceof ol)return e._internalPath;if(typeof e=="string")return Jp(t,e);throw uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const BS=new RegExp("[~\\*/\\[\\]]");function Jp(t,e,n){if(e.search(BS)>=0)throw uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ol(...e.split("."))._internalPath}catch{throw uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(F.INVALID_ARGUMENT,l+t+c)}function Wx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $S(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $S extends Hx{data(){return super.data()}}function Gc(t,e){return typeof e=="string"?Jp(t,e):e instanceof ol?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zp{}class em extends Zp{}function xt(t,e,...n){let r=[];e instanceof Zp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof tm).length,l=i.filter(c=>c instanceof Qc).length;if(o>1||o>0&&l>0)throw new Y(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Qc extends em{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Qc(e,n,r)}_apply(e){const n=this._parse(e);return Gx(e._query,n),new $r(e.firestore,e.converter,sf(e._query,n))}_parse(e){const n=al(e.firestore);return function(i,o,l,c,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Y(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){w0(m,p);const S=[];for(const R of m)S.push(_0(c,i,R));g={arrayValue:{values:S}}}else g=_0(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||w0(m,p),g=zS(l,o,m,p==="in"||p==="not-in");return ht.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ii(t,e,n){const r=e,s=Gc("where",t);return Qc._create(s,r,n)}class tm extends Zp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Gx(o,c),o=sf(o,c)}(e._query,n),new $r(e.firestore,e.converter,sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class nm extends em{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new La(i,o)}(e._query,this._field,this._direction);return new $r(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new yo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function oi(t,e="asc"){const n=e,r=Gc("orderBy",t);return nm._create(r,n)}class rm extends em{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new rm(e,n,r)}_apply(e){return new $r(e.firestore,e.converter,rc(e._query,this._limit,this._limitType))}}function ai(t){return DS("limit",t),rm._create("limit",t,"F")}function _0(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new Y(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qw(e)&&n.indexOf("/")!==-1)throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!ie.isDocumentKey(r))throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uy(t,new ie(r))}if(n instanceof Kt)return Uy(t,n._key);throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$c(n)}.`)}function w0(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Gx(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class WS{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ot(o.doubleValue));return new Kp(i)}convertGeoPoint(e){return new Hp(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){const n=ks(e);return new wt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);qe(yx(r));const s=new Oa(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||Ur(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qx extends Hx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Gc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yu extends Qx{data(e={}){return super.data(e)}}class Yx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yu(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new yu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Yo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new yu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Yo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:HS(l.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t){t=nn(t,Kt);const e=nn(t.firestore,mr);return qS(il(e),t._key).then(n=>Xx(e,t,n))}class im extends WS{constructor(e){super(),this.firestore=e}convertBytes(e){return new co(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function Jn(t){t=nn(t,$r);const e=nn(t.firestore,mr),n=il(e),r=new im(e);return Kx(t._query),PS(n,t._query).then(s=>new Yx(e,r,t,s))}function Wr(t,e,n){t=nn(t,Kt);const r=nn(t.firestore,mr),s=sm(t.converter,e,n);return cl(r,[Qp(al(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,tn.none())])}function ft(t,e,n,...r){t=nn(t,Kt);const s=nn(t.firestore,mr),i=al(s);let o;return o=typeof(e=Me(e))=="string"||e instanceof ol?zx(i,"updateDoc",t._key,e,n,r):Fx(i,"updateDoc",t._key,e),cl(s,[o.toMutation(t._key,tn.exists(!0))])}function wo(t){return cl(nn(t.firestore,mr),[new Vc(t._key,tn.none())])}function xo(t,e){const n=nn(t.firestore,mr),r=ve(t),s=sm(t.converter,e);return cl(n,[Qp(al(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function yr(t,...e){var n,r,s;t=Me(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||v0(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(v0(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof Kt)h=nn(t.firestore,mr),p=jc(t._key.path),c={next:m=>{e[o]&&e[o](Xx(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=nn(t,$r);h=nn(m.firestore,mr),p=m._query;const g=new im(h);c={next:S=>{e[o]&&e[o](new Yx(h,g,m,S))},error:e[o+1],complete:e[o+2]},Kx(t._query)}return function(g,S,R,D){const I=new Wp(D),x=new Bp(S,I,R);return g.asyncQueue.enqueueAndForget(async()=>Up(await lc(g),x)),()=>{I.Za(),g.asyncQueue.enqueueAndForget(async()=>Fp(await lc(g),x))}}(il(h),p,l,c)}function cl(t,e){return function(r,s){const i=new Pr;return r.asyncQueue.enqueueAndForget(async()=>xS(await RS(r),s,i)),i.promise}(il(t),e)}function Xx(t,e,n){const r=n.docs.get(e._key),s=new im(t);return new Qx(t,s,e._key,r,new Yo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=al(e)}set(e,n,r){this._verifyNotCommitted();const s=Hd(e,this._firestore),i=sm(s.converter,n,r),o=Qp(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,tn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Hd(e,this._firestore);let o;return o=typeof(n=Me(n))=="string"||n instanceof ol?zx(this._dataReader,"WriteBatch.update",i._key,n,r,s):Fx(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Hd(e,this._firestore);return this._mutations=this._mutations.concat(new Vc(n._key,tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hd(t,e){if((t=Me(t)).firestore!==e)throw new Y(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function nt(){return new Yp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(t){return il(t=nn(t,mr)),new KS(t,e=>cl(t,e))}(function(e,n=!0){(function(s){go=s})(fi),ti(new xs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new mr(new ZI(r.getProvider("auth-internal")),new r2(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),cr(Dy,"4.7.3",e),cr(Dy,"4.7.3","esm2017")})();function om(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Jx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GS=Jx,Zx=new Xa("auth","Firebase",Jx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new yp("@firebase/auth");function QS(t,...e){cc.logLevel<=xe.WARN&&cc.warn(`Auth (${fi}): ${t}`,...e)}function vu(t,...e){cc.logLevel<=xe.ERROR&&cc.error(`Auth (${fi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,...e){throw lm(t,...e)}function Qn(t,...e){return lm(t,...e)}function am(t,e,n){const r=Object.assign(Object.assign({},GS()),{[e]:n});return new Xa("auth","Firebase",r).create(e,{appName:t.name})}function jr(t){return am(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vn(t,"argument-error"),am(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Zx.create(t,...e)}function ae(t,e,...n){if(!t)throw lm(e,...n)}function Nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vu(e),new Error(e)}function zr(t,e){t||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XS(){return x0()==="http:"||x0()==="https:"}function x0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XS()||NT()||"connection"in navigator)?navigator.onLine:!0}function ZS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,zr(n>e,"Short delay should be less than long delay!"),this.isMobile=IT()||CT()}get(){return JS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t,e){zr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new dl(3e4,6e4);function Ns(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Hr(t,e,n,r,s={}){return t1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ja(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return ST()||(h.referrerPolicy="no-referrer"),e1.fetch()(n1(t,t.config.apiHost,n,l),h)})}async function t1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},eN),e);try{const s=new rN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ql(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ql(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ql(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ql(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw am(t,p,h);Vn(t,p)}}catch(s){if(s instanceof gr)throw s;Vn(t,"network-request-failed",{message:String(s)})}}async function hl(t,e,n,r,s={}){const i=await Hr(t,e,n,r,s);return"mfaPendingCredential"in i&&Vn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function n1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?um(t.config,s):`${t.config.apiScheme}://${s}`}function nN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qn(this.auth,"network-request-failed")),tN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ql(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Qn(t,e,r);return s.customData._tokenResponse=n,s}function E0(t){return t!==void 0&&t.enterprise!==void 0}class sN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return nN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function iN(t,e){return Hr(t,"GET","/v2/recaptchaConfig",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(t,e){return Hr(t,"POST","/v1/accounts:delete",e)}async function r1(t,e){return Hr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aN(t,e=!1){const n=Me(t),r=await n.getIdToken(e),s=cm(r);ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ha(Kd(s.auth_time)),issuedAtTime:ha(Kd(s.iat)),expirationTime:ha(Kd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Kd(t){return Number(t)*1e3}function cm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vu("JWT malformed, contained fewer than 3 sections"),null;try{const s=xw(n);return s?JSON.parse(s):(vu("Failed to decode base64 JWT payload"),null)}catch(s){return vu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function k0(t){const e=cm(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof gr&&lN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function lN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ha(this.lastLoginAt),this.creationTime=ha(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ho(t,r1(n,{idToken:r}));ae(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?s1(i.providerUserInfo):[],l=dN(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new gf(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function cN(t){const e=Me(t);await dc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function s1(t){return t.map(e=>{var{providerId:n}=e,r=om(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(t,e){const n=await t1(t,{},async()=>{const r=Ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=n1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",e1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function fN(t,e){return Hr(t,"POST","/v2/accounts:revokeToken",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=k0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await hN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Gi;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ae(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ae(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gi,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=om(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new gf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ho(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aN(this,e)}reload(){return cN(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(jr(this.auth));const e=await this.getIdToken();return await ho(this,oN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,S=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,D=(l=n.tenantId)!==null&&l!==void 0?l:void 0,I=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:k,emailVerified:P,isAnonymous:W,providerData:z,stsTokenManager:w}=n;ae(k&&w,e,"internal-error");const v=Gi.fromJSON(this.name,w);ae(typeof k=="string",e,"internal-error"),Yr(m,e.name),Yr(g,e.name),ae(typeof P=="boolean",e,"internal-error"),ae(typeof W=="boolean",e,"internal-error"),Yr(S,e.name),Yr(R,e.name),Yr(D,e.name),Yr(I,e.name),Yr(x,e.name),Yr(_,e.name);const E=new Cr({uid:k,auth:e,email:g,emailVerified:P,displayName:m,isAnonymous:W,photoURL:R,phoneNumber:S,tenantId:D,stsTokenManager:v,createdAt:x,lastLoginAt:_});return z&&Array.isArray(z)&&(E.providerData=z.map(b=>Object.assign({},b))),I&&(E._redirectEventId=I),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Gi;s.updateFromServerResponse(n);const i=new Cr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await dc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ae(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?s1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Gi;l.updateFromIdToken(r);const c=new Cr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new gf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;function Rr(t){zr(t instanceof Function,"Expected a class definition");let e=b0.get(t);return e?(zr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,b0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}i1.type="NONE";const T0=i1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t,e,n){return`firebase:${t}:${e}:${n}`}class Qi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=_u(this.userKey,s.apiKey,i),this.fullPersistenceKey=_u("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qi(Rr(T0),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Rr(T0);const o=_u(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Cr._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Qi(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Qi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d1(e))return"Blackberry";if(h1(e))return"Webos";if(a1(e))return"Safari";if((e.includes("chrome/")||l1(e))&&!e.includes("edge/"))return"Chrome";if(c1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function o1(t=Qt()){return/firefox\//i.test(t)}function a1(t=Qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l1(t=Qt()){return/crios\//i.test(t)}function u1(t=Qt()){return/iemobile/i.test(t)}function c1(t=Qt()){return/android/i.test(t)}function d1(t=Qt()){return/blackberry/i.test(t)}function h1(t=Qt()){return/webos/i.test(t)}function dm(t=Qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pN(t=Qt()){var e;return dm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mN(){return RT()&&document.documentMode===10}function f1(t=Qt()){return dm(t)||c1(t)||h1(t)||d1(t)||/windows phone/i.test(t)||u1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t,e=[]){let n;switch(t){case"Browser":n=I0(Qt());break;case"Worker":n=`${I0(Qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e={}){return Hr(t,"GET","/v2/passwordPolicy",Ns(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=6;class _N{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:vN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new A0(this),this.idTokenSubscription=new A0(this),this.beforeStateQueue=new gN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Qi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await r1(this,{idToken:e}),r=await Cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(jr(this));const n=e?Me(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(jr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(jr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yN(this),n=new _N(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await fN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Qi.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Cs(t){return Me(t)}class A0{constructor(e){this.auth=e,this.observer=null,this.addObserver=VT(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xN(t){Yc=t}function m1(t){return Yc.loadJS(t)}function EN(){return Yc.recaptchaEnterpriseScript}function kN(){return Yc.gapiScript}function bN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const TN="recaptcha-enterprise",IN="NO_RECAPTCHA";class AN{constructor(e){this.type=TN,this.auth=Cs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{iN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new sN(c);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;E0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(IN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&E0(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=EN();c.length!==0&&(c+=l),m1(c).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function S0(t,e,n,r=!1){const s=new AN(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function yf(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await S0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await S0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t,e){const n=qc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Zu(i,e??{}))return s;Vn(s,"already-initialized")}return n.initialize({options:e})}function NN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CN(t,e,n){const r=Cs(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=g1(e),{host:o,port:l}=RN(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),qN()}function g1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RN(t){const e=g1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:N0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:N0(o)}}}function N0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function PN(t,e){return Hr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e){return hl(t,"POST","/v1/accounts:signInWithPassword",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}async function ON(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba extends hm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ba(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ba(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yf(e,n,"signInWithPassword",jN);case"emailLink":return DN(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yf(e,r,"signUpPassword",PN);case"emailLink":return ON(e,{idToken:n,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t,e){return hl(t,"POST","/v1/accounts:signInWithIdp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="http://localhost";class li extends hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new li(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=om(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new li(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Yi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yi(e,n)}buildRequest(){const e={requestUri:MN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ja(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VN(t){const e=Wo(Ho(t)).link,n=e?Wo(Ho(e)).deep_link_id:null,r=Wo(Ho(t)).deep_link_id;return(r?Wo(Ho(r)).link:null)||r||n||e||t}class fm{constructor(e){var n,r,s,i,o,l;const c=Wo(Ho(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=LN((s=c.mode)!==null&&s!==void 0?s:null);ae(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=VN(e);try{return new fm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.providerId=Eo.PROVIDER_ID}static credential(e,n){return Ba._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fm.parseLink(n);return ae(r,"argument-error"),Ba._fromEmailAndCode(e,r.code,r.tenantId)}}Eo.PROVIDER_ID="password";Eo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Eo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends pm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends fl{constructor(){super("facebook.com")}static credential(e){return li._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return li._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends fl{constructor(){super("github.com")}static credential(e){return li._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends fl{constructor(){super("twitter.com")}static credential(e,n){return li._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e){return hl(t,"POST","/v1/accounts:signUp",Ns(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Cr._fromIdTokenResponse(e,r,s),o=C0(r);return new ui({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=C0(r);return new ui({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function C0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends gr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,hc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new hc(e,n,r,s)}}function y1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?hc._fromErrorAndOperation(t,i,e,r):i})}async function FN(t,e,n=!1){const r=await ho(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ui._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e,n=!1){const{auth:r}=t;if(Hn(r.app))return Promise.reject(jr(r));const s="reauthenticate";try{const i=await ho(t,y1(r,s,e,t),n);ae(i.idToken,r,"internal-error");const o=cm(i.idToken);ae(o,r,"internal-error");const{sub:l}=o;return ae(t.uid===l,r,"user-mismatch"),ui._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Vn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(t,e,n=!1){if(Hn(t.app))return Promise.reject(jr(t));const r="signIn",s=await y1(t,r,e),i=await ui._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function BN(t,e){return v1(Cs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(t){const e=Cs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $N(t,e,n){if(Hn(t.app))return Promise.reject(jr(t));const r=Cs(t),o=await yf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&_1(t),c}),l=await ui._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function WN(t,e,n){return Hn(t.app)?Promise.reject(jr(t)):BN(Me(t),Eo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(t,e){return Hr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Me(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ho(r,HN(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e){return Me(t).setPersistence(e)}function QN(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function YN(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function XN(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}function JN(t){return Me(t).signOut()}const fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fc,"1"),this.storage.removeItem(fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=1e3,eC=10;class x1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);mN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},ZN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}x1.type="LOCAL";const E1=x1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}k1.type="SESSION";const b1=k1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Xc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await tC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=mm("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}function rC(t){fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){return typeof fr().WorkerGlobalScope<"u"&&typeof fr().importScripts=="function"}async function sC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function oC(){return T1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="firebaseLocalStorageDb",aC=1,pc="firebaseLocalStorage",A1="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jc(t,e){return t.transaction([pc],e?"readwrite":"readonly").objectStore(pc)}function lC(){const t=indexedDB.deleteDatabase(I1);return new pl(t).toPromise()}function vf(){const t=indexedDB.open(I1,aC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pc,{keyPath:A1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pc)?e(r):(r.close(),await lC(),e(await vf()))})})}async function R0(t,e,n){const r=Jc(t,!0).put({[A1]:e,value:n});return new pl(r).toPromise()}async function uC(t,e){const n=Jc(t,!1).get(e),r=await new pl(n).toPromise();return r===void 0?null:r.value}function q0(t,e){const n=Jc(t,!0).delete(e);return new pl(n).toPromise()}const cC=800,dC=3;class S1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>dC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(oC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sC(),!this.activeServiceWorker)return;this.sender=new nC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await R0(e,fc,"1"),await q0(e,fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>R0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>q0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Jc(s,!1).getAll();return new pl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S1.type="LOCAL";const hC=S1;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e){return e?Rr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm extends hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fC(t){return v1(t.auth,new gm(t),t.bypassAuthState)}function pC(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),zN(n,new gm(t),t.bypassAuthState)}async function mC(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),FN(n,new gm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fC;case"linkViaPopup":case"linkViaRedirect":return mC;case"reauthViaPopup":case"reauthViaRedirect":return pC;default:Vn(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new dl(2e3,1e4);async function yC(t,e,n){if(Hn(t.app))return Promise.reject(Qn(t,"operation-not-supported-in-this-environment"));const r=Cs(t);YS(t,e,pm);const s=N1(r,n);return new Ws(r,"signInViaPopup",e,s).executeNotNull()}class Ws extends C1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=mm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gC.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="pendingRedirect",wu=new Map;class _C extends C1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wu.get(this.auth._key());if(!e){try{const r=await wC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wu.set(this.auth._key(),e)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function wC(t,e){const n=kC(e),r=EC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function xC(t,e){wu.set(t._key(),e)}function EC(t){return Rr(t._redirectPersistence)}function kC(t){return _u(vC,t.config.apiKey,t.name)}async function bC(t,e,n=!1){if(Hn(t.app))return Promise.reject(jr(t));const r=Cs(t),s=N1(r,e),o=await new _C(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=10*60*1e3;class IC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!R1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TC&&this.cachedEventUids.clear(),this.cachedEventUids.has(P0(e))}saveEventToCache(e){this.cachedEventUids.add(P0(e)),this.lastProcessedEventTime=Date.now()}}function P0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function R1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(t,e={}){return Hr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CC=/^https?/;async function RC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SC(t);for(const n of e)try{if(qC(n))return}catch{}Vn(t,"unauthorized-domain")}function qC(t){const e=mf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!CC.test(n))return!1;if(NC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=new dl(3e4,6e4);function j0(){const t=fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jC(t){return new Promise((e,n)=>{var r,s,i;function o(){j0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j0(),n(Qn(t,"network-request-failed"))},timeout:PC.get()})}if(!((s=(r=fr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=fr().gapi)===null||i===void 0)&&i.load)o();else{const l=bN("iframefcb");return fr()[l]=()=>{gapi.load?o():n(Qn(t,"network-request-failed"))},m1(`${kN()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw xu=null,e})}let xu=null;function DC(t){return xu=xu||jC(t),xu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new dl(5e3,15e3),MC="__/auth/iframe",LC="emulator/auth/iframe",VC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FC(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?um(e,LC):`https://${t.config.authDomain}/${MC}`,r={apiKey:e.apiKey,appName:t.name,v:fi},s=UC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ja(r).slice(1)}`}async function zC(t){const e=await DC(t),n=fr().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:FC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Qn(t,"network-request-failed"),l=fr().setTimeout(()=>{i(o)},OC.get());function c(){fr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$C=500,WC=600,HC="_blank",KC="http://localhost";class D0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GC(t,e,n,r=$C,s=WC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},BC),{width:r.toString(),height:s.toString(),top:i,left:o}),h=Qt().toLowerCase();n&&(l=l1(h)?HC:n),o1(h)&&(e=e||KC,c.scrollbars="yes");const p=Object.entries(c).reduce((g,[S,R])=>`${g}${S}=${R},`,"");if(pN(h)&&l!=="_self")return QC(e||"",l),new D0(null);const m=window.open(e||"",l,p);ae(m,t,"popup-blocked");try{m.focus()}catch{}return new D0(m)}function QC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="__/auth/handler",XC="emulator/auth/handler",JC=encodeURIComponent("fac");async function O0(t,e,n,r,s,i){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fi,eventId:s};if(e instanceof pm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",LT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof fl){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${JC}=${encodeURIComponent(c)}`:"";return`${ZC(t)}?${Ja(l).slice(1)}${h}`}function ZC({config:t}){return t.emulator?um(t,XC):`https://${t.authDomain}/${YC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="webStorageSupport";class eR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b1,this._completeRedirectFn=bC,this._overrideRedirectResult=xC}async _openPopup(e,n,r,s){var i;zr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await O0(e,n,r,mf(),s);return GC(e,o,mm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await O0(e,n,r,mf(),s);return rC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(zr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zC(e),r=new IC(e);return n.register("authEvent",s=>(ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gd,{type:Gd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Gd];o!==void 0&&n(!!o),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f1()||a1()||dm()}}const tR=eR;var M0="@firebase/auth",L0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sR(t){ti(new xs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p1(t)},h=new wN(r,s,i,c);return NN(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ti(new xs("auth-internal",e=>{const n=Cs(e.getProvider("auth").getImmediate());return(r=>new nR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(M0,L0,rR(t)),cr(M0,L0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=5*60,oR=Tw("authIdTokenMaxAge")||iR;let V0=null;const aR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oR)return;const s=n==null?void 0:n.token;V0!==s&&(V0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lR(t=_p()){const e=qc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SN(t,{popupRedirectResolver:tR,persistence:[hC,E1,b1]}),r=Tw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=aR(i.toString());YN(n,o,()=>o(n.currentUser)),QN(n,l=>o(l))}}const s=Ew("auth");return s&&CN(n,`http://${s}`),n}function uR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}xN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",uR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sR("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="firebasestorage.googleapis.com",P1="storageBucket",cR=2*60*1e3,dR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st extends gr{constructor(e,n,r=0){super(Qd(e),`Firebase Storage: ${n} (${Qd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,st.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rt||(rt={}));function Qd(t){return"storage/"+t}function ym(){const t="An unknown error occurred, please check the error payload for server response.";return new st(rt.UNKNOWN,t)}function hR(t){return new st(rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function fR(t){return new st(rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pR(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new st(rt.UNAUTHENTICATED,t)}function mR(){return new st(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function gR(t){return new st(rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function yR(){return new st(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vR(){return new st(rt.CANCELED,"User canceled the upload/download.")}function _R(t){return new st(rt.INVALID_URL,"Invalid URL '"+t+"'.")}function wR(t){return new st(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function xR(){return new st(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+P1+"' property when initializing the app?")}function ER(){return new st(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kR(){return new st(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bR(t){return new st(rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _f(t){return new st(rt.INVALID_ARGUMENT,t)}function j1(){return new st(rt.APP_DELETED,"The Firebase app was deleted.")}function TR(t){return new st(rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fa(t,e){return new st(rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Uo(t){throw new st(rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=kn.makeFromUrl(e,n)}catch{return new kn(e,"")}if(r.path==="")return r;throw wR(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function h(P){P.path_=decodeURIComponent(P.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",S=new RegExp(`^https?://${m}/${p}/b/${s}/o${g}`,"i"),R={bucket:1,path:3},D=n===q1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",x=new RegExp(`^https?://${D}/${s}/${I}`,"i"),k=[{regex:l,indices:c,postModify:i},{regex:S,indices:R,postModify:h},{regex:x,indices:{bucket:1,path:2},postModify:h}];for(let P=0;P<k.length;P++){const W=k[P],z=W.regex.exec(e);if(z){const w=z[W.indices.bucket];let v=z[W.indices.path];v||(v=""),r=new kn(w,v),W.postModify(r);break}}if(r==null)throw _R(e);return r}}class IR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let h=!1;function p(...I){h||(h=!0,e.apply(null,I))}function m(I){s=setTimeout(()=>{s=null,t(S,c())},I)}function g(){i&&clearTimeout(i)}function S(I,...x){if(h){g();return}if(I){g(),p.call(null,I,...x);return}if(c()||o){g(),p.call(null,I,...x);return}r<64&&(r*=2);let k;l===1?(l=2,k=0):k=(r+Math.random())*1e3,m(k)}let R=!1;function D(I){R||(R=!0,g(),!h&&(s!==null?(I||(l=2),clearTimeout(s),m(0)):I||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,D(!0)},n),D}function SR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){return t!==void 0}function CR(t){return typeof t=="object"&&!Array.isArray(t)}function vm(t){return typeof t=="string"||t instanceof String}function U0(t){return _m()&&t instanceof Blob}function _m(){return typeof Blob<"u"}function F0(t,e,n,r){if(r<e)throw _f(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw _f(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function D1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Qs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Qs||(Qs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,s,i,o,l,c,h,p,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,R)=>{this.resolve_=S,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Yl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Qs.NO_ERROR,c=i.getStatus();if(!l||RR(c,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Qs.ABORT;r(!1,new Yl(!1,null,p));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new Yl(h,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());NR(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=ym();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?j1():vR();o(c)}else{const c=yR();o(c)}};this.canceled_?n(!1,new Yl(!1,null,!0)):this.backoffId_=AR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&SR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function PR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function DR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function OR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function MR(t,e,n,r,s,i,o=!0){const l=D1(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return DR(h,e),PR(h,n),jR(h,i),OR(h,r),new qR(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function VR(...t){const e=LR();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(_m())return new Blob(t);throw new st(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function UR(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){if(typeof atob>"u")throw bR("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Yd{constructor(e,n){this.data=e,this.contentType=n||null}}function zR(t,e){switch(t){case ar.RAW:return new Yd(O1(e));case ar.BASE64:case ar.BASE64URL:return new Yd(M1(t,e));case ar.DATA_URL:return new Yd($R(e),WR(e))}throw ym()}function O1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function BR(t){let e;try{e=decodeURIComponent(t)}catch{throw fa(ar.DATA_URL,"Malformed data URL.")}return O1(e)}function M1(t,e){switch(t){case ar.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw fa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case ar.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw fa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=FR(e)}catch(s){throw s.message.includes("polyfill")?s:fa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class L1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw fa(ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=HR(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $R(t){const e=new L1(t);return e.base64?M1(ar.BASE64,e.rest):BR(e.rest)}function WR(t){return new L1(t).contentType}function HR(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){let r=0,s="";U0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(U0(this.data_)){const r=this.data_,s=UR(r,e,n);return s===null?null:new ss(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ss(r,!0)}}static getBlob(...e){if(_m()){const n=e.map(r=>r instanceof ss?r.data_:r);return new ss(VR.apply(null,n))}else{const n=e.map(o=>vm(o)?zR(ar.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new ss(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t){let e;try{e=JSON.parse(t)}catch{return null}return CR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GR(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function U1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t,e){return e}class Jt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||QR}}let Xl=null;function YR(t){return!vm(t)||t.length<2?t:U1(t)}function F1(){if(Xl)return Xl;const t=[];t.push(new Jt("bucket")),t.push(new Jt("generation")),t.push(new Jt("metageneration")),t.push(new Jt("name","fullPath",!0));function e(i,o){return YR(o)}const n=new Jt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Jt("size");return s.xform=r,t.push(s),t.push(new Jt("timeCreated")),t.push(new Jt("updated")),t.push(new Jt("md5Hash",null,!0)),t.push(new Jt("cacheControl",null,!0)),t.push(new Jt("contentDisposition",null,!0)),t.push(new Jt("contentEncoding",null,!0)),t.push(new Jt("contentLanguage",null,!0)),t.push(new Jt("contentType",null,!0)),t.push(new Jt("metadata","customMetadata",!0)),Xl=t,Xl}function XR(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new kn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function JR(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return XR(r,t),r}function z1(t,e,n){const r=V1(e);return r===null?null:JR(t,r,n)}function ZR(t,e,n,r){const s=V1(e);if(s===null||!vm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,g="/b/"+o(p)+"/o/"+o(m),S=wm(g,n,r),R=D1({alt:"media",token:h});return S+R})[0]}function eq(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class B1{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){if(!t)throw ym()}function tq(t,e){function n(r,s){const i=z1(t,s,e);return $1(i!==null),i}return n}function nq(t,e){function n(r,s){const i=z1(t,s,e);return $1(i!==null),ZR(i,s,t.host,t._protocol)}return n}function W1(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=mR():s=pR():n.getStatus()===402?s=fR(t.bucket):n.getStatus()===403?s=gR(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function rq(t){const e=W1(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=hR(t.path)),i.serverResponse=s.serverResponse,i}return n}function sq(t,e,n){const r=e.fullServerUrl(),s=wm(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new B1(s,i,nq(t,n),o);return l.errorHandler=rq(e),l}function iq(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function oq(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=iq(null,e)),r}function aq(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let k="";for(let P=0;P<2;P++)k=k+Math.random().toString().slice(2);return k}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const h=oq(e,r,s),p=eq(h,n),m="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,g=`\r
--`+c+"--",S=ss.getBlob(m,r,g);if(S===null)throw ER();const R={name:h.fullPath},D=wm(i,t.host,t._protocol),I="POST",x=t.maxUploadRetryTime,_=new B1(D,I,tq(t,n),x);return _.urlParams=R,_.headers=o,_.body=S.uploadData(),_.errorHandler=W1(e),_}class lq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Uo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class uq extends lq{initXhr(){this.xhr_.responseType="text"}}function H1(){return new uq}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,n){this._service=e,n instanceof kn?this._location=n:this._location=kn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ci(e,n)}get root(){const e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return U1(this._location.path)}get storage(){return this._service}get parent(){const e=KR(this._location.path);if(e===null)return null;const n=new kn(this._location.bucket,e);return new ci(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TR(e)}}function cq(t,e,n){t._throwIfRoot("uploadBytes");const r=aq(t.storage,t._location,F1(),new ss(e,!0),n);return t.storage.makeRequestWithTokens(r,H1).then(s=>({metadata:s,ref:t}))}function dq(t){t._throwIfRoot("getDownloadURL");const e=sq(t.storage,t._location,F1());return t.storage.makeRequestWithTokens(e,H1).then(n=>{if(n===null)throw kR();return n})}function hq(t,e){const n=GR(t._location.path,e),r=new kn(t._location.bucket,n);return new ci(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fq(t){return/^[A-Za-z]+:\/\//.test(t)}function pq(t,e){return new ci(t,e)}function K1(t,e){if(t instanceof xm){const n=t;if(n._bucket==null)throw xR();const r=new ci(n,n._bucket);return e!=null?K1(r,e):r}else return e!==void 0?hq(t,e):t}function mq(t,e){if(e&&fq(e)){if(t instanceof xm)return pq(t,e);throw _f("To use ref(service, url), the first argument must be a Storage instance.")}else return K1(t,e)}function z0(t,e){const n=e==null?void 0:e[P1];return n==null?null:kn.makeFromBucketSpec(n,t)}function gq(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Iw(s,t.app.options.projectId))}class xm{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=q1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=cR,this._maxUploadRetryTime=dR,this._requests=new Set,s!=null?this._bucket=kn.makeFromBucketSpec(s,this._host):this._bucket=z0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=z0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){F0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){F0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ci(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new IR(j1());{const o=MR(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const B0="@firebase/storage",$0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="storage";function yq(t,e,n){return t=Me(t),cq(t,e,n)}function vq(t){return t=Me(t),dq(t)}function _q(t,e){return t=Me(t),mq(t,e)}function wq(t=_p(),e){t=Me(t);const r=qc(t,G1).getImmediate({identifier:e}),s=kw("storage");return s&&xq(r,...s),r}function xq(t,e,n,r={}){gq(t,e,n,r)}function Eq(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new xm(n,r,s,e,fi)}function kq(){ti(new xs(G1,Eq,"PUBLIC").setMultipleInstances(!0)),cr(B0,$0,""),cr(B0,$0,"esm2017")}kq();const bq={apiKey:"AIzaSyCiTAiDphBPNjd4dKwEYArGY8pXWf55sZQ",authDomain:"irangram-79830.firebaseapp.com",projectId:"irangram-79830",storageBucket:"irangram-79830.firebasestorage.app",messagingSenderId:"355877653612",appId:"1:355877653612:web:5512841c0ab55b6b011c49",measurementId:"G-RZWEBR7XJ7"};let Jl,V=null,In=null,$a=null;try{Jl=Nw(bq),V=MS(Jl),In=lR(Jl);try{$a=wq(Jl)}catch(t){console.warn("Firebase Storage not available. File uploads will be disabled.",t),$a=null}GN(In,E1).catch(t=>{console.error("Firebase Persistence Error:",t)}),console.log("Firebase Connected Successfully")}catch(t){console.error("Firebase Initialization Error:",t)}var W0={};const Dn={USE_REAL_SERVER:!1,API_BASE_URL:W0.REACT_APP_API_URL||"http://localhost:5000/api",SOCKET_URL:W0.REACT_APP_SOCKET_URL||"http://localhost:5000",APP_NAME:"",VERSION:"1.7.0",OWNER_EMAIL:"amirrezaveisi45@gmail.com"},Tq=t=>In?XN(In,t):()=>{},Iq=async(t,e,n,r)=>{if(!In)throw new Error("Auth not initialized");const i=(await $N(In,t,e)).user,o=t===Dn.OWNER_EMAIL?"owner":"user";return await KN(i,{displayName:n}),V&&await Wr(ve(V,"users",i.uid),{name:n,email:t,phone:r,username:t.split("@")[0],bio:"  ",avatar:`https://ui-avatars.com/api/?name=${n}&background=random&color=fff&size=128`,role:o,isBanned:!1,createdAt:nt(),lastSeen:nt(),status:"online"}),i},Aq=async(t,e)=>{if(!In)throw new Error("Auth not initialized");const n=await WN(In,t,e);if(V&&n.user){const r=ve(V,"users",n.user.uid),s={status:"online",lastSeen:nt()};t===Dn.OWNER_EMAIL&&(s.role="owner"),ft(r,s).catch(i=>console.log("Status update error",i))}return n.user},Sq=async()=>{if(!In)throw new Error("Auth not initialized");const t=new Ir;try{const n=(await yC(In,t)).user,r=n.email||"",s=r===Dn.OWNER_EMAIL?"owner":"user";if(V){const i=ve(V,"users",n.uid);if(!(await ul(i)).exists())await Wr(i,{name:n.displayName||" ",email:r,phone:"",username:r.split("@")[0]||"user",bio:"  ",avatar:n.photoURL||`https://ui-avatars.com/api/?name=${n.displayName}&background=random&color=fff&size=128`,role:s,isBanned:!1,createdAt:nt(),lastSeen:nt(),status:"online"});else{const l={status:"online",lastSeen:nt()};r===Dn.OWNER_EMAIL&&(l.role="owner"),await ft(i,l).catch(c=>console.log("Status update error",c))}}return n}catch(e){throw console.error("Google Sign-In Error",e),e}},Xd=async t=>{In&&(t&&V&&await ft(ve(V,"users",t),{status:"offline",lastSeen:nt()}).catch(()=>{}),await JN(In))},wf=async t=>{if(!V)return null;try{const e=ve(V,"users",t),n=await ul(e);if(n.exists())return n.data()}catch(e){console.error("Error fetching profile",e)}return null},Nq=(t,e)=>{if(!V)return()=>{};const n=ve(V,"users",t);return yr(n,r=>{r.exists()&&e({uid:r.id,...r.data()})})},Cq=async(t,e)=>{if(!V)return;const n=ve(V,"users",t),r={};Object.keys(e).forEach(s=>{e[s]!==void 0&&(r[s]=e[s])}),await ft(n,r)},H0=async t=>{if(!V)return null;let e=xt(We(V,"users"),ii("username","==",t.replace("@",""))),n=await Jn(e);if(!n.empty){const r=n.docs[0];return{uid:r.id,...r.data()}}if(e=xt(We(V,"users"),ii("phone","==",t)),n=await Jn(e),!n.empty){const r=n.docs[0];return{uid:r.id,...r.data()}}return null},Rq=async t=>{if(!V||t.length===0)return[];const e=[],n=10;for(let r=0;r<t.length;r+=n){const i=t.slice(r,r+n).map(o=>o.replace(/\s+/g,""));try{const o=xt(We(V,"users"),ii("phone","in",i));(await Jn(o)).forEach(c=>{e.push({uid:c.id,...c.data()})})}catch(o){console.error("Error syncing batch",o)}}return e},qq=async(t,e,n,r,s)=>{if(!V)return null;let i=`https://ui-avatars.com/api/?name=${t}&background=random&color=fff&size=128`;if(n&&$a)try{const c=`groups/${Date.now()}_${n.name}`;i=await Em(n,c)}catch(c){console.error("Group image upload failed",c)}const o=[...new Set([...r,s])],l=await xo(We(V,"groups"),{name:t,description:e,creatorId:s,avatar:i,members:o,createdAt:nt(),type:"group"});return await Wr(ve(V,"chats",l.id),{participants:o,updatedAt:nt(),lastMessage:"  ",type:"group",name:t,avatar:i,description:e}),{id:l.id,name:t,avatar:i,type:"group"}},Zl=async(t,e)=>{if(!V)return;const n=ve(V,"users",t);try{await ft(n,{status:e,lastSeen:nt()})}catch(r){console.error("Heartbeat error",r)}},Pq=async(t,e)=>{if(!V)return;const n=ve(V,"users",t);try{await ft(n,{status:e?"typing...":"online"})}catch(r){console.error("Typing status error",r)}},jq=t=>{if(!V)return()=>{};const e=xt(We(V,"users"));return yr(e,n=>{const r=n.docs.map(s=>({uid:s.id,status:s.data().status,lastSeen:s.data().lastSeen?s.data().lastSeen.toMillis():Date.now(),name:s.data().name,avatar:s.data().avatar}));t(r)})},Em=async(t,e)=>{if(!$a)throw new Error("   (Storage)       .");const n=_q($a,e),r=await yq(n,t);return await vq(r.ref)},Dq=async(t,e,n)=>{V&&await xo(We(V,"appeals"),{userId:t,userName:e,message:n,status:"pending",createdAt:nt()})},Oq=t=>{if(!V)return()=>{};const e=xt(We(V,"appeals"),oi("createdAt","desc"));return yr(e,n=>{const r=n.docs.map(s=>{const i=s.data();return{id:s.id,...i,createdAt:i.createdAt?i.createdAt.toMillis():Date.now()}});t(r)})},K0=async(t,e)=>{V&&(e?await ft(ve(V,"appeals",t),{status:"approved"}):await ft(ve(V,"appeals",t),{status:"rejected"}))},Mq=async t=>{V&&await wo(ve(V,"appeals",t))},Lq=async(t,e,n,r,s,i)=>{V&&await xo(We(V,"reports"),{messageId:t,messageContent:e,reportedUserId:n,reportedUserName:r,reporterId:s,reason:i,status:"pending",createdAt:nt()})},Vq=t=>{if(!V)return()=>{};const e=xt(We(V,"reports"),oi("createdAt","desc"));return yr(e,n=>{const r=n.docs.map(s=>{const i=s.data();return{id:s.id,...i,createdAt:i.createdAt?i.createdAt.toMillis():Date.now(),handledAt:i.handledAt?i.handledAt.toMillis():void 0}});t(r)})},Uq=async(t,e)=>{if(!V)return;const n=ve(V,"reports",t);await ft(n,{status:"handled",handledBy:e,handledAt:nt()})},G0=async t=>{if(!V)return;const e=ve(V,"reports",t);await wo(e)},Fq=async()=>{if(!V)return[];try{const t=xt(We(V,"users"),oi("createdAt","desc"));return(await Jn(t)).docs.map(n=>({uid:n.id,...n.data()}))}catch(t){return console.error("Error fetching users",t),[]}},zq=async(t,e)=>{if(!V)return;const n=ve(V,"users",t);await ft(n,{role:e})},Bq=async(t,e)=>{if(!V)return;const n=ve(V,"users",t);e?await ft(n,{isBanned:!1,banExpiresAt:null}):await ft(n,{isBanned:!0})},$q=async(t,e)=>{if(!V)return;const n=ve(V,"users",t),r=Date.now()+e*60*60*1e3;await ft(n,{isBanned:!0,banExpiresAt:r})},Wq=async(t,e)=>{if(!(!V||!e.isBanned||!e.banExpiresAt)&&Date.now()>e.banExpiresAt){console.log("Ban expired, lifting ban for user:",t);const n=ve(V,"users",t);await ft(n,{isBanned:!1,banExpiresAt:null})}},Q1=async t=>{if(V)try{await wo(ve(V,"global_chat",t))}catch(e){console.error("Error deleting global message",e)}},Hq=async(t,e)=>{if(V)try{await wo(ve(V,"chats",t,"messages",e))}catch(n){console.error("Error deleting private message",n)}},Kq=async t=>{if(V)try{await wo(ve(V,"chats",t))}catch(e){console.error("Error deleting chat",e)}},Q0=async t=>{if(V)try{const e=xt(We(V,"chats",t,"messages"),ai(500)),n=await Jn(e),r=za(V);n.docs.forEach(s=>{r.delete(s.ref)}),await r.commit()}catch(e){console.error("Error clearing chat history",e)}},Gq=async(t,e)=>{if(V)try{await Wr(ve(V,"users",t,"blocked",e),{blockedAt:nt(),uid:e})}catch(n){console.error("Error blocking user",n)}},Y1=async(t,e)=>{if(!V)return;const n=ve(V,"global_chat",t);try{await ft(n,{text:e,edited:!0})}catch(r){console.error("Error editing global message",r)}},X1=async()=>{if(V)try{const t=xt(We(V,"global_chat")),e=await Jn(t),n=za(V);let r=0;e.forEach(s=>{n.delete(s.ref),r++,r>=490}),await n.commit(),console.log(`Cleared ${r} messages.`)}catch(t){console.error("Error clearing chat",t)}},J1=async()=>{if(!V)return[];const t=ve(V,"settings","wordFilters"),e=await ul(t);return e.exists()?e.data().bannedWords||[]:[]},Y0=async t=>{if(!V)return;const e=ve(V,"settings","wordFilters");await Wr(e,{bannedWords:t},{merge:!0})},Qq=async t=>{if(!V)return[];const e=[{id:"global_chat",name:"  ",avatar:"https://cdn-icons-png.flaticon.com/512/921/921490.png",status:"online",bio:"Surveillance View",username:"@global_world",phone:"",type:"group",isGlobal:!0}];try{const n=xt(We(V,"chats"),ii("participants","array-contains",t)),s=(await Jn(n)).docs.map(async l=>{const p=(l.data().participants||[]).find(m=>m!==t);if(p){const m=await wf(p);return{id:l.id,name:m?` : ${m.name}`:`User: ${p}`,avatar:(m==null?void 0:m.avatar)||"https://via.placeholder.com/150",status:"offline",bio:"Private Chat",username:(m==null?void 0:m.username)||"",phone:"",type:"user",isGlobal:!1}}return null}),o=(await Promise.all(s)).filter(l=>l!==null);return[...e,...o]}catch(n){return console.error("Error fetching spy chats",n),e}},Yq=async(t,e)=>{if(!V)return[];try{let n;return e==="global_chat"?n=xt(We(V,"global_chat"),oi("createdAt","desc"),ai(100)):n=xt(We(V,"chats",e,"messages"),oi("createdAt","desc"),ai(100)),(await Jn(n)).docs.map(s=>{const i=s.data();return{id:s.id,...i,timestamp:i.createdAt?i.createdAt.toMillis():Date.now()}}).reverse()}catch(n){return console.error("Error fetching spy messages",n),[]}},Xq=async(t,e,n)=>{if(V)try{await xo(We(V,"users",t,"notifications"),{title:e,message:n,type:"alert",read:!1,createdAt:nt()})}catch(r){console.error("Error sending notification",r)}},Jq=(t,e)=>{if(!V)return()=>{};const n=xt(We(V,"users",t,"notifications"),ii("read","==",!1));return yr(n,r=>{const s=r.docs.map(o=>{const l=o.data();return{id:o.id,...l,createdAt:l.createdAt?l.createdAt.toMillis():Date.now()}});s.sort((o,l)=>l.createdAt-o.createdAt);const i=s.slice(0,10);e(i)})},Zq=async(t,e)=>{V&&await ft(ve(V,"users",t,"notifications",e),{read:!0})},eP=async(t,e)=>{if(!V)return;const n=ve(V,"chat_metadata",t);await Wr(n,{pinnedMessage:e,updatedAt:nt()},{merge:!0})},tP=async t=>{if(!V)return;const e=ve(V,"chat_metadata",t);await ft(e,{pinnedMessage:null})},nP=(t,e)=>{if(!V)return()=>{};const n=ve(V,"chat_metadata",t);return yr(n,r=>{r.exists()?e(r.data().pinnedMessage):e(null)})},xi=(t,e)=>e==="saved"?`saved_${t}`:[t,e].sort().join("_"),rP=t=>{if(!V)return()=>{};const e=xt(We(V,"global_chat"),oi("createdAt","desc"),ai(50));return yr(e,r=>{const s=[];r.forEach(i=>{const o=i.data();s.push({id:i.id,text:o.text,senderId:o.senderId,senderName:o.senderName,senderAvatar:o.senderAvatar,senderRole:o.senderRole||"user",timestamp:o.createdAt?o.createdAt.toMillis():Date.now(),status:"read",type:o.type||"text",imageUrl:o.imageUrl,fileUrl:o.fileUrl,fileName:o.fileName,fileSize:o.fileSize,audioDuration:o.audioDuration,isSticker:o.isSticker,replyToId:o.replyToId,edited:o.edited,reactions:o.reactions||{}})}),t(s.reverse())})},sP=async(t,e)=>{if(!V){console.error("Database not initialized");return}try{let n=t.text||"";n&&t.type==="text"&&(await J1()).forEach(s=>{const i=new RegExp(s,"gi");n=n.replace(i,"*".repeat(s.length))}),await xo(We(V,"global_chat"),{text:n,senderId:t.senderId,senderName:e.name,senderAvatar:e.avatar||"",senderRole:e.role||"user",type:t.type||"text",imageUrl:t.imageUrl||null,fileUrl:t.fileUrl||null,fileName:t.fileName||null,fileSize:t.fileSize||null,audioDuration:t.audioDuration||null,isSticker:t.isSticker||!1,replyToId:t.replyToId||null,createdAt:nt(),edited:!1,reactions:{}})}catch(n){console.error("Error adding document: ",n)}},iP=(t,e)=>{if(!V)return()=>{};const n=xt(We(V,"chats",t,"messages"),oi("createdAt","desc"),ai(50));return yr(n,r=>{const s=[];r.forEach(i=>{const o=i.data();s.push({id:i.id,text:o.text,senderId:o.senderId,senderName:o.senderName,senderAvatar:o.senderAvatar,timestamp:o.createdAt?o.createdAt.toMillis():Date.now(),status:"read",type:o.type||"text",imageUrl:o.imageUrl,fileUrl:o.fileUrl,fileName:o.fileName,fileSize:o.fileSize,audioDuration:o.audioDuration,isSticker:o.isSticker,replyToId:o.replyToId,edited:o.edited,reactions:o.reactions||{}})}),e(s.reverse())})},Z1=async(t,e,n)=>{if(!V)return;const r=ve(V,"chats",t,"messages",e);try{await ft(r,{text:n,edited:!0})}catch(s){console.error("Error editing private message",s)}},oP=(t,e)=>{if(!V)return()=>{};const n=xt(We(V,"chats"),ii("participants","array-contains",t));return yr(n,r=>{const s=r.docs.map(i=>{const o=i.data();return{id:i.id,...o,updatedAt:o.updatedAt?o.updatedAt.toMillis():Date.now()}});s.sort((i,o)=>o.updatedAt-i.updatedAt),e(s)})},aP=async(t,e,n,r)=>{if(!V)return;const s=ve(V,"chats",t),i=In.currentUser,o=e==="saved"?[i==null?void 0:i.uid]:[i==null?void 0:i.uid,e];await Wr(s,{participants:o,updatedAt:nt(),lastMessage:n.text||(n.type==="image"?"":n.type==="audio"?"":""),lastSenderId:i==null?void 0:i.uid},{merge:!0}),await xo(We(V,"chats",t,"messages"),{text:n.text||"",senderId:n.senderId,senderName:r.name,senderAvatar:r.avatar||"",type:n.type||"text",imageUrl:n.imageUrl||null,fileUrl:n.fileUrl||null,fileName:n.fileName||null,fileSize:n.fileSize||null,audioDuration:n.audioDuration||null,isSticker:n.isSticker||!1,replyToId:n.replyToId||null,createdAt:nt(),reactions:{}})},lP=async(t,e,n)=>{if(!V)return;const r=ve(V,"global_chat",t);try{const s=await ul(r);if(s.exists()){const o=s.data().reactions||{},l=o[e]||[];let c={...o};l.includes(n)?(c[e]=l.filter(h=>h!==n),c[e].length===0&&delete c[e]):c[e]=[...l,n],await ft(r,{reactions:c})}}catch(s){console.error("Error toggling reaction:",s)}},uP=t=>{if(!V)return()=>{};const e=ve(V,"system","info");return yr(e,n=>{if(n.exists()){const r=n.data();t({currentVersion:r.currentVersion||Dn.VERSION,lastCleanup:r.lastCleanup?r.lastCleanup.toMillis():0,forceUpdate:r.forceUpdate?r.forceUpdate.toMillis():0})}else Wr(e,{currentVersion:Dn.VERSION,lastCleanup:nt()})})},cP=async()=>{if(V)try{const t=ve(V,"system","info"),e=await ul(t);if(e.exists()){const n=e.data(),r=n.lastCleanup?n.lastCleanup.toMillis():0,s=Date.now();if(s-r>864e5){console.log("Triggering 24h cleanup..."),await ft(t,{lastCleanup:nt()});const i=new Date(s-864e5),o=xt(We(V,"global_chat"),ii("createdAt","<",i)),l=await Jn(o),c=za(V);let h=0;l.forEach(p=>{c.delete(p.ref),h++}),h>0&&(await c.commit(),console.log(`Cleanup: Deleted ${h} old messages.`))}}}catch(t){console.error("Error in auto cleanup:",t)}},dP=async()=>{V&&await Wr(ve(V,"system","info"),{forceUpdate:nt()},{merge:!0})},hP=async()=>{if(V){await X1();try{const t=xt(We(V,"chats"),ai(500)),e=await Jn(t),n=za(V);e.forEach(r=>n.delete(r.ref)),await n.commit()}catch(t){console.error("Wipe chats error",t)}try{const t=xt(We(V,"groups"),ai(500)),e=await Jn(t),n=za(V);e.forEach(r=>n.delete(r.ref)),await n.commit()}catch(t){console.error("Wipe groups error",t)}}},fP=async t=>{if(V)try{await wo(ve(V,"users",t))}catch(e){console.error("Delete user error",e)}},pP=({contacts:t,sessions:e,activeContactId:n,onSelectContact:r,toggleTheme:s,theme:i,userProfile:o,onOpenSettings:l,onOpenAdminPanel:c,onAddContact:h,showInstallButton:p,onInstall:m,storedAccounts:g,onAddAccount:S,onSwitchAccount:R,onCreateGroup:D,onDeleteChat:I})=>{var Cn;const[x,_]=O.useState(""),[k,P]=O.useState(!1),[W,z]=O.useState(!1),[w,v]=O.useState("all"),[E,b]=O.useState(!1),[N,C]=O.useState(!1),[T,Ue]=O.useState(""),[lt,Mt]=O.useState(!1),[Se,G]=O.useState(null),[ee,se]=O.useState(""),[ge,me]=O.useState(""),[be,it]=O.useState(""),[At,Je]=O.useState(null),[pt,hn]=O.useState(null),[mt,ut]=O.useState([]),[gt,Yt]=O.useState(!1),De=O.useRef(null),[fn,Le]=O.useState(!1),[Lt,Ze]=O.useState([]),[q,fe]=O.useState(!1),ue=O.useRef(null);O.useEffect(()=>{const U=ye=>{ue.current&&!ue.current.contains(ye.target)&&P(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]),O.useEffect(()=>{const U=setTimeout(async()=>{if(x.trim().length>2){fe(!0);try{const ye=await H0(x);ye&&ye.username!==o.username?Ze([ye]):Ze([])}catch{Ze([])}fe(!1)}else Ze([]),fe(!1)},800);return()=>clearTimeout(U)},[x,o.username]);const Ne=async()=>{if(!T.trim())return;Mt(!0),se(""),G(null);const U=await H0(T);U?U.username===o.username?se("     ."):G(U):se("     ."),Mt(!1)},St=()=>{if(Se){const U={id:Se.uid,name:Se.name,avatar:Se.avatar,bio:Se.bio,username:"@"+Se.username,phone:Se.phone,status:Se.status||"offline",type:"user"};h(U),b(!1),G(null),Ue("")}},Un=U=>{if(U.target.files&&U.target.files[0]){const ye=U.target.files[0];Je(ye);const Pe=new FileReader;Pe.onload=Et=>{var pn;hn((pn=Et.target)==null?void 0:pn.result)},Pe.readAsDataURL(ye)}},Zn=U=>{ut(ye=>ye.includes(U)?ye.filter(Pe=>Pe!==U):[...ye,U])},vr=async()=>{if(ge.trim()){Yt(!0);try{await D(ge,be,At,mt),me(""),it(""),Je(null),hn(null),ut([]),C(!1)}catch(U){console.error(U)}finally{Yt(!1)}}},He=async()=>{if(!("contacts"in navigator&&"ContactsManager"in window)){alert("       .      .");return}Le(!0);try{const U=["name","tel"],ye={multiple:!0},Pe=await navigator.contacts.select(U,ye);if(Pe.length>0){const Et=Pe.map(kt=>kt.tel[0]).filter(Boolean),pn=await Rq(Et);let mn=0;pn.forEach(kt=>{const _r={id:kt.uid,name:kt.name,avatar:kt.avatar,bio:kt.bio,username:"@"+kt.username,phone:kt.phone,status:kt.status,type:"user"};h(_r),mn++}),alert(`${mn}      .`)}}catch(U){console.error(U)}finally{Le(!1),P(!1)}},Ce=U=>{const ye={id:U.uid,name:U.name,avatar:U.avatar,bio:U.bio,username:"@"+U.username,phone:U.phone,status:U.status||"offline",type:"user"};h(ye),_(""),Ze([])},er=()=>{window.history.back()},tr=t.filter(U=>{const ye=U.name.toLowerCase().includes(x.toLowerCase())||U.username.toLowerCase().includes(x.toLowerCase());let Pe=!0;return w==="personal"?Pe=U.type==="user":w==="groups"&&(Pe=U.type==="group"||U.type==="channel"),ye&&Pe}),Nn=U=>{if(!U)return"";const ye=new Date(U);return Date.now()-U>24*60*60*1e3?ye.toLocaleDateString("fa-IR"):ye.toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"})},Rs=U=>U.type!=="user"||U.id==="saved"?!1:U.status==="online"?!0:U.lastSeen?Date.now()-new Date(U.lastSeen).getTime()<9e4:!1;return u.jsxs("div",{className:"h-full flex flex-col bg-telegram-bg dark:bg-telegram-bgDark border-l border-telegram-border dark:border-telegram-borderDark relative",children:[u.jsxs("div",{className:`absolute top-0 right-0 h-full w-72 bg-white dark:bg-telegram-secondaryDark z-30 shadow-2xl transform transition-transform duration-300 ease-in-out ${k?"translate-x-0":"translate-x-full"}`,ref:ue,children:[u.jsxs("div",{className:"bg-telegram-primary p-5 flex flex-col justify-end text-white relative overflow-hidden transition-all duration-300",children:[u.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-white/10 rounded-full"}),u.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[u.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center text-telegram-primary mb-3 text-2xl font-bold shadow-md uppercase overflow-hidden",children:o.avatar?u.jsx("img",{src:o.avatar,className:"w-full h-full object-cover"}):((Cn=o.name)==null?void 0:Cn.charAt(0))||"U"}),u.jsx("button",{onClick:s,className:"p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors",children:i===Us.DARK?u.jsx(yT,{size:20}):u.jsx(lT,{size:20})})]}),u.jsxs("div",{className:"relative z-10 cursor-pointer",onClick:()=>z(!W),children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"font-bold text-lg truncate flex items-center gap-2",children:[o.name,o.role==="owner"&&u.jsx("span",{className:"bg-yellow-400 text-black text-[10px] px-1.5 rounded-full",children:"Owner"})]}),u.jsx(Wh,{size:18,className:`transition-transform duration-300 ${W?"rotate-180":""}`})]}),u.jsx("div",{className:"text-sm opacity-80 font-mono dir-ltr text-right",children:o.phone||o.username})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto",children:W?u.jsxs("div",{className:"py-2 animate-fade-in",children:[g.filter(U=>U.username!==o.username).map(U=>u.jsxs("button",{onClick:()=>{R(U.uid),P(!1),z(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx("img",{src:U.avatar,className:"w-9 h-9 rounded-full bg-gray-200"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"font-bold text-sm",children:U.name}),u.jsxs("div",{className:"text-xs opacity-60",children:["@",U.username]})]})]},U.uid)),u.jsxs("button",{onClick:()=>{S(),P(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx("div",{className:"w-9 h-9 rounded-full border-2 border-dashed border-gray-400 flex items-center justify-center",children:u.jsx(yw,{size:18})}),u.jsx("span",{className:"font-medium",children:"  "})]})]}):u.jsxs("div",{className:"py-2 flex flex-col animate-fade-in",children:[u.jsxs("button",{onClick:()=>{C(!0),P(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(Xu,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:()=>{b(!0),P(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(ky,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:He,className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[fn?u.jsx(Vi,{size:22,className:"animate-spin text-gray-500"}):u.jsx(Gu,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:()=>{r("saved"),P(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(yy,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:"  "})]}),u.jsxs("button",{onClick:()=>{l(),P(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(vw,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:""})]}),p&&u.jsxs("button",{onClick:()=>{m(),P(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(gp,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),(o.role==="owner"||o.role==="admin")&&u.jsxs("button",{onClick:()=>{c(),P(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-red-50 dark:hover:bg-red-900/10 text-red-600 dark:text-red-400 transition-colors border-t border-gray-100 dark:border-gray-700 mt-2",children:[u.jsx(Yu,{size:22}),u.jsx("span",{className:"font-bold",children:" "})]}),u.jsxs("button",{onClick:er,className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-red-50 dark:hover:bg-red-900/10 text-red-600 dark:text-red-400 transition-colors border-t border-gray-100 dark:border-gray-700 mt-1",children:[u.jsx(Ku,{size:22}),u.jsx("span",{className:"font-bold",children:"  "})]})]})})]}),k&&u.jsx("div",{className:"absolute inset-0 bg-black/50 z-20 backdrop-blur-sm transition-opacity",onClick:()=>P(!1)}),E&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-2xl shadow-2xl p-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"  "}),u.jsx("button",{onClick:()=>b(!1),children:u.jsx(jn,{size:20,className:"text-gray-500"})})]}),u.jsxs("div",{className:"mb-4",children:[u.jsx("label",{className:"text-sm text-gray-500 block mb-2",children:"    "}),u.jsx("input",{value:T,onChange:U=>Ue(U.target.value),placeholder:"@username  0912...",className:"w-full bg-gray-100 dark:bg-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white"})]}),ee&&u.jsx("p",{className:"text-red-500 text-sm mb-4",children:ee}),Se&&u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl flex items-center gap-3 mb-4 border border-green-200 dark:border-green-800",children:[u.jsx("img",{src:Se.avatar,className:"w-10 h-10 rounded-full"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:Se.name}),u.jsx("p",{className:"text-xs text-gray-500",children:Se.username})]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:Ne,disabled:lt,className:"flex-1 bg-telegram-secondary dark:bg-gray-700 text-telegram-primary font-bold py-3 rounded-xl",children:lt?u.jsx(Vi,{className:"animate-spin mx-auto"}):""}),Se&&u.jsx("button",{onClick:St,className:"flex-1 bg-telegram-primary text-white font-bold py-3 rounded-xl hover:bg-blue-600 transition-colors",children:""})]})]})}),N&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl shadow-2xl p-6 max-h-[90vh] overflow-y-auto",children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:" "}),u.jsx("button",{onClick:()=>C(!1),children:u.jsx(jn,{size:20,className:"text-gray-500"})})]}),u.jsxs("div",{className:"flex justify-center mb-6",children:[u.jsxs("div",{onClick:()=>{var U;return(U=De.current)==null?void 0:U.click()},className:"relative w-24 h-24 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center border-2 border-dashed border-telegram-primary/50 cursor-pointer overflow-hidden group",children:[pt?u.jsx("img",{src:pt,className:"w-full h-full object-cover"}):u.jsx(dw,{size:32,className:"text-telegram-primary opacity-50 group-hover:opacity-100 transition-opacity"}),u.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("span",{className:"text-white text-xs font-bold",children:""})})]}),u.jsx("input",{type:"file",ref:De,className:"hidden",accept:"image/*",onChange:Un})]}),u.jsxs("div",{className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 block mb-1",children:"  ()"}),u.jsx("input",{value:ge,onChange:U=>me(U.target.value),placeholder:" ...",className:"w-full bg-gray-100 dark:bg-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm text-gray-500 block mb-1",children:" ()"}),u.jsx("input",{value:be,onChange:U=>it(U.target.value),placeholder:" ...",className:"w-full bg-gray-100 dark:bg-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white"})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:["  (",mt.length,")"]}),u.jsx("div",{className:"max-h-48 overflow-y-auto bg-gray-50 dark:bg-black/20 rounded-xl p-2 custom-scrollbar",children:t.filter(U=>U.type==="user"&&U.id!=="saved").length===0?u.jsx("p",{className:"text-center text-gray-400 text-xs py-4",children:"    "}):t.filter(U=>U.type==="user"&&U.id!=="saved").map(U=>u.jsxs("div",{onClick:()=>Zn(U.id),className:"flex items-center gap-3 p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg cursor-pointer transition-colors",children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:U.avatar,className:"w-10 h-10 rounded-full bg-gray-200"}),mt.includes(U.id)&&u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-telegram-primary text-white rounded-full p-0.5 border-2 border-white dark:border-gray-800",children:u.jsx(vy,{size:12,fill:"white"})})]}),u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:U.name})}),mt.includes(U.id)?u.jsx(vy,{className:"text-telegram-primary",size:20}):u.jsx(gT,{className:"text-gray-400",size:20})]},U.id))})]}),u.jsx("button",{onClick:vr,disabled:!ge.trim()||gt,className:"w-full bg-telegram-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl transition-colors flex justify-center items-center gap-2",children:gt?u.jsx(Vi,{className:"animate-spin"}):" "})]})}),u.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 shrink-0",children:[u.jsx("button",{onClick:()=>{P(!0),z(!1)},className:"p-2 hover:bg-telegram-secondary dark:hover:bg-telegram-secondaryDark rounded-full text-gray-500 dark:text-gray-400",children:u.jsx(oT,{size:24})}),u.jsxs("div",{className:"relative flex-1",children:[u.jsx("input",{type:"text",placeholder:" (   )...",value:x,onChange:U=>_(U.target.value),className:"w-full bg-telegram-secondary dark:bg-telegram-secondaryDark text-gray-900 dark:text-white rounded-full py-2 pr-9 pl-4 focus:outline-none focus:ring-1 focus:ring-telegram-primary/50 text-sm transition-all"}),q?u.jsx(Vi,{className:"absolute right-3 top-2.5 text-telegram-primary w-4 h-4 animate-spin"}):u.jsx(Kh,{className:"absolute right-3 top-2.5 text-gray-500 w-4 h-4"})]})]}),u.jsx("div",{className:"flex px-2 pb-1 shrink-0 border-b border-telegram-border dark:border-telegram-borderDark",children:["all","personal","groups"].map(U=>u.jsx("button",{onClick:()=>v(U),className:`flex-1 text-center py-2 border-b-2 font-medium text-sm transition-colors ${w===U?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500"}`,children:U==="all"?"":U==="personal"?"":""},U))}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[x&&Lt.length>0&&u.jsxs("div",{className:"mb-2",children:[u.jsxs("div",{className:"px-4 py-2 text-xs font-bold text-telegram-primary bg-blue-50 dark:bg-blue-900/10 flex items-center gap-1",children:[u.jsx(hw,{size:12}),"  "]}),Lt.map(U=>u.jsxs("div",{onClick:()=>Ce(U),className:"flex items-center gap-3 p-2.5 mx-2 my-1 rounded-xl cursor-pointer hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:[u.jsx("img",{src:U.avatar,className:"w-12 h-12 rounded-full object-cover bg-gray-200"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold text-base truncate text-gray-900 dark:text-gray-100",children:U.name}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",U.username]})]}),u.jsx(qa,{size:16,className:"text-telegram-primary"})]},"global-"+U.uid))]}),tr.map(U=>{const ye=e[U.id],Pe=ye==null?void 0:ye.messages[ye.messages.length-1],Et=n===U.id,pn=Rs(U);return u.jsxs("div",{onClick:()=>r(U.id),className:`group relative flex items-center gap-3 p-2.5 mx-2 my-1 rounded-xl cursor-pointer transition-colors ${Et?"bg-telegram-primary text-white":"hover:bg-gray-100 dark:hover:bg-white/5"}`,children:[u.jsxs("div",{className:"relative shrink-0",children:[U.id==="saved"?u.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center text-white",children:u.jsx(yy,{size:24,fill:"currentColor"})}):u.jsx("img",{src:U.avatar,alt:U.name,className:"w-12 h-12 rounded-full object-cover bg-gray-200"}),U.id!=="saved"&&pn&&u.jsx("div",{className:`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 ${Et?"bg-white border-telegram-primary":"bg-green-500 border-white dark:border-black"}`})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[u.jsx("h3",{className:`font-semibold text-base truncate ${Et?"text-white":"text-gray-900 dark:text-gray-100"}`,children:U.name}),Pe&&u.jsx("span",{className:`text-[10px] ${Et?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:Nn(Pe.timestamp)})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:`text-sm truncate ${Et?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:U.status==="typing..."?u.jsx("span",{className:"text-telegram-primary animate-pulse",children:"  ..."}):Pe?u.jsxs("span",{className:"flex items-center gap-1",children:[Pe.senderId==="me"&&u.jsx("span",{className:"opacity-80",children:":"}),Pe.type==="image"?" ":Pe.type==="audio"?" ":Pe.text]}):u.jsx("span",{className:"text-xs opacity-70 italic",children:U.id!=="saved"&&U.type==="user"?pn?"":"":U.type==="group"?"":""})}),(ye==null?void 0:ye.unreadCount)>0&&u.jsx("span",{className:`min-w-[1.25rem] h-5 px-1 rounded-full text-xs font-bold flex items-center justify-center ${Et?"bg-white text-telegram-primary":"bg-telegram-primary text-white"}`,children:ye.unreadCount})]})]}),U.id!=="saved"&&U.id!=="global_chat"&&u.jsx("button",{onClick:mn=>{mn.stopPropagation(),I&&I(U.id)},className:`absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-red-500 text-white opacity-0 group-hover:opacity-100 transition-opacity shadow-md ${Et?"hidden":""}`,title:" ",children:u.jsx(Tr,{size:16})})]},U.id)})]}),u.jsxs("div",{className:"absolute bottom-6 left-6 flex flex-col gap-3 z-10",children:[u.jsx("button",{onClick:()=>{C(!0)},className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full shadow-lg flex items-center justify-center hover:scale-105 transition-transform",title:" ",children:u.jsx(Xu,{size:20})}),u.jsx("button",{onClick:()=>{b(!0)},className:"w-14 h-14 bg-telegram-primary text-white rounded-full shadow-lg flex items-center justify-center hover:scale-105 transition-transform",title:" ",children:u.jsx(ky,{size:24})})]})]})},mP=({imageUrl:t,onClose:e})=>u.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/95 flex items-center justify-center animate-fade-in backdrop-blur-sm",onClick:e,children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors z-50 backdrop-blur-md",children:u.jsx(jn,{size:24})}),u.jsx("a",{href:t,download:!0,onClick:n=>n.stopPropagation(),className:"absolute top-4 left-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors z-50 backdrop-blur-md",title:" ",children:u.jsx(gp,{size:24})}),u.jsx("div",{className:"w-full h-full p-4 flex items-center justify-center",children:u.jsx("img",{src:t,alt:"Full view",className:"max-w-full max-h-full object-contain select-none shadow-2xl rounded-md",onClick:n=>n.stopPropagation()})})]}),gP=["","","","","","","","","","","","","",""],yP=["https://cdn-icons-png.flaticon.com/512/742/742751.png","https://cdn-icons-png.flaticon.com/512/742/742752.png","https://cdn-icons-png.flaticon.com/512/742/742822.png","https://cdn-icons-png.flaticon.com/512/742/742760.png","https://cdn-icons-png.flaticon.com/512/742/742920.png","https://cdn-icons-png.flaticon.com/512/742/742786.png","https://cdn-icons-png.flaticon.com/512/166/166538.png","https://cdn-icons-png.flaticon.com/512/190/190623.png","https://cdn-icons-png.flaticon.com/512/417/417779.png"],vP=t=>{if(!t)return"#3390ec";const e=["#df3f4c","#4a9e56","#e08e0b","#8c52ff","#ff5ca8","#31b5d6","#3390ec"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]},_P=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),wP=({contact:t,messages:e,myId:n,myRole:r,pinnedMessage:s,onSendMessage:i,onEditMessage:o,onDeleteMessage:l,onPinMessage:c,onUnpinMessage:h,onReaction:p,onBack:m,isMobile:g,onProfileClick:S,onAvatarClick:R,wallpaper:D,onCall:I,onClearHistory:x,onDeleteChat:_,onBlockUser:k,onTyping:P})=>{const[W,z]=O.useState(""),[w,v]=O.useState(null),[E,b]=O.useState(null),[N,C]=O.useState(null),[T,Ue]=O.useState(!1),[lt,Mt]=O.useState("emoji"),[Se,G]=O.useState(!1),[ee,se]=O.useState(!1),[ge,me]=O.useState(0),[be,it]=O.useState(null),[At,Je]=O.useState(!1),[pt,hn]=O.useState(!1),[mt,ut]=O.useState(!1),[gt,Yt]=O.useState(!1),[De,fn]=O.useState(""),[Le,Lt]=O.useState([]),[Ze,q]=O.useState(-1),[fe,ue]=O.useState(0),Ne=O.useRef(null),St=O.useRef(null),Un=O.useRef(null),Zn=O.useRef(null),vr=O.useRef(null),He=O.useRef(null),Ce=O.useRef(null),er=t.type==="group",tr=t.id==="global_chat",Nn=`draft_${n}_${t.id}`;O.useEffect(()=>{const A=localStorage.getItem(Nn);A&&z(A)},[Nn]),O.useEffect(()=>{E||(W?localStorage.setItem(Nn,W):localStorage.removeItem(Nn))},[W,Nn,E]),O.useEffect(()=>()=>{Ce.current&&clearTimeout(Ce.current),t.id!=="saved"&&t.id!=="global_chat"&&P&&P(!1)},[t.id,n,P]),O.useEffect(()=>{var A;gt||(A=Ne.current)==null||A.scrollIntoView({behavior:"auto"})},[e.length,w,gt]),O.useEffect(()=>{const A=()=>{var gn;const Ae=((gn=navigator.connection)==null?void 0:gn.rtt)||45,Xt=Math.floor(Math.random()*20)-10;ue(Math.max(10,Ae+Xt))};A();const re=setInterval(A,5e3);return()=>clearInterval(re)},[]),O.useEffect(()=>{if(!De.trim()){Lt([]),q(-1);return}const A=e.filter(re=>re.type==="text"&&re.text.toLowerCase().includes(De.toLowerCase())).map(re=>re.id);Lt(A),A.length>0?q(A.length-1):q(-1)},[De,e]),O.useEffect(()=>{if(Ze>=0&&Ze<Le.length){const A=Le[Ze],re=document.getElementById(`msg-${A}`);re&&re.scrollIntoView({behavior:"smooth",block:"center"})}},[Ze,Le]),O.useEffect(()=>{gt&&He.current?He.current.focus():(fn(""),Lt([]))},[gt]),O.useEffect(()=>{const A=()=>{C(null),Ue(!1),G(!1),ut(!1)};return window.addEventListener("click",A),()=>window.removeEventListener("click",A)},[]);const Rs=()=>{Le.length!==0&&q(A=>A<Le.length-1?A+1:0)},Cn=()=>{Le.length!==0&&q(A=>A>0?A-1:Le.length-1)},U=()=>{if(!s)return;const A=document.getElementById(`msg-${s.id}`);A?(A.scrollIntoView({behavior:"smooth",block:"center"}),A.classList.add("bg-blue-100","dark:bg-blue-900/40"),setTimeout(()=>A.classList.remove("bg-blue-100","dark:bg-blue-900/40"),2e3)):alert("       .")},ye=A=>{z(A.target.value),t.id!=="saved"&&t.id!=="global_chat"&&P&&(Ce.current||P(!0),Ce.current&&clearTimeout(Ce.current),Ce.current=setTimeout(()=>{P(!1),Ce.current=null},2e3))},Pe=()=>{W.trim()&&(Ce.current&&(clearTimeout(Ce.current),Ce.current=null,t.id!=="saved"&&t.id!=="global_chat"&&P&&P(!1)),E?(o(E.id,W),b(null)):(i({text:W,type:"text"},w==null?void 0:w.id),v(null)),z(""))},Et=A=>{i({imageUrl:A,type:"image",isSticker:!0},w==null?void 0:w.id),v(null),Ue(!1)},pn=()=>{alert("  ")},mn=A=>{se(!1),me(0)},kt=(A,re="image")=>{if(A){const he=(A.size/1024/1024).toFixed(2)+" MB";i({type:re,file:A,fileName:A.name,fileSize:he,text:re==="image"?"":A.name},w==null?void 0:w.id),v(null),G(!1)}},_r=A=>{A.preventDefault(),A.stopPropagation(),Je(!1);const re=A.dataTransfer.files;if(re&&re.length>0){const he=re[0],Ae=he.type.startsWith("image/");kt(he,Ae?"image":"file")}},nr=async()=>{tr&&r==="owner"&&confirm("              .")&&await X1()},L=async A=>{const re=prompt("    ");if(re)try{await Lq(A.id,A.text||(A.type==="image"?"":""),A.senderId,A.senderName||"",n,re),alert("           .")}catch(he){console.error(he),alert("   .")}C(null)},$=(A,re,he)=>{A.preventDefault(),A.stopPropagation();const Ae=192,Xt=240;let gn=A.clientX,yt=A.clientY;gn+Ae>window.innerWidth&&(gn=window.innerWidth-Ae-20),yt+Xt>window.innerHeight&&(yt=window.innerHeight-Xt-20),C({x:gn,y:yt,message:re,isMe:he})},X=A=>new Date(A).toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"}),B=A=>{if(!A)return"";const re=new Date(A),he=Date.now()-re.getTime();return he<9e4?"":he<36e5?`  ${Math.floor(he/6e4)}  `:he<864e5?`  ${Math.floor(he/36e5)}  `:"  "},te=()=>D==="default"?{}:D.startsWith("http")||D.startsWith("data")?{backgroundImage:`url(${D})`,backgroundSize:"cover",backgroundPosition:"center"}:{backgroundColor:D},oe=A=>{if(!De||!A)return A;const re=new RegExp(`(${_P(De)})`,"gi");return A.split(re).map((Ae,Xt)=>Ae.toLowerCase()===De.toLowerCase()?u.jsx("span",{className:"bg-yellow-300 text-black rounded px-0.5",children:Ae},Xt):Ae)},pe=t.id==="saved"||r==="admin"||r==="owner",je=r==="admin"||r==="owner";return u.jsxs("div",{className:"h-full flex flex-col relative bg-telegram-bg dark:bg-telegram-bgDark overflow-hidden",onDragOver:A=>{A.preventDefault(),Je(!0)},onDragLeave:A=>{A.preventDefault(),A.currentTarget.contains(A.relatedTarget)||Je(!1)},onDrop:_r,children:[At&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-telegram-primary/80 backdrop-blur-sm flex flex-col items-center justify-center text-white animate-fade-in",children:[u.jsx(xy,{size:64,className:"mb-4 animate-bounce"}),u.jsx("h2",{className:"text-2xl font-bold",children:"    "})]}),be&&u.jsx(mP,{imageUrl:be,onClose:()=>it(null)}),u.jsx("input",{type:"file",ref:Zn,className:"hidden",accept:"image/*",onChange:A=>{var re;return kt((re=A.target.files)==null?void 0:re[0],"image")}}),u.jsx("input",{type:"file",ref:vr,className:"hidden",onChange:A=>{var re;return kt((re=A.target.files)==null?void 0:re[0],"file")}}),u.jsx("div",{className:"absolute inset-0 z-0",style:te(),children:D==="default"&&u.jsx("div",{className:"absolute inset-0 chat-bg-pattern opacity-100"})}),t.status==="connecting"&&u.jsx("div",{className:"absolute top-16 left-0 right-0 bg-red-500/90 text-white text-xs py-1 text-center z-20",children:"  ..."}),u.jsxs("div",{className:"relative z-50 flex flex-col shrink-0 bg-white/95 dark:bg-telegram-bgDark/95 backdrop-blur-md border-b border-telegram-border dark:border-telegram-borderDark shadow-sm",children:[u.jsx("div",{className:"flex items-center justify-between px-2 py-2 h-16",children:gt?u.jsxs("div",{className:"flex-1 flex items-center gap-2 animate-fade-in w-full",children:[u.jsx("button",{onClick:()=>Yt(!1),className:"p-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:u.jsx(jn,{size:24})}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{ref:He,value:De,onChange:A=>fn(A.target.value),placeholder:"   ...",className:"w-full bg-gray-100 dark:bg-white/10 text-gray-900 dark:text-white rounded-lg pl-3 pr-10 py-2 text-sm outline-none focus:ring-2 focus:ring-telegram-primary"}),u.jsx(Kh,{size:16,className:"absolute right-3 top-3 text-gray-400"})]}),u.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-500 font-mono w-16 justify-center",children:Le.length>0?u.jsxs("span",{children:[Ze+1," / ",Le.length]}):u.jsx("span",{children:"0 / 0"})}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:Cn,disabled:Le.length===0,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full disabled:opacity-30",children:u.jsx(Jb,{size:20})}),u.jsx("button",{onClick:Rs,disabled:Le.length===0,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full disabled:opacity-30",children:u.jsx(Wh,{size:20})})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden cursor-pointer flex-1",onClick:S,children:[g&&u.jsx("button",{onClick:A=>{A.stopPropagation(),m()},className:"p-2 -mr-2 text-gray-500 dark:text-gray-300",children:u.jsx(Hu,{size:22})}),u.jsx("img",{src:t.avatar||"",alt:"",className:"w-10 h-10 rounded-full bg-gray-200 object-cover shrink-0"}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("h2",{className:"font-bold text-gray-900 dark:text-white truncate text-base",children:t.name}),u.jsx("span",{className:`text-xs truncate ${t.status==="online"?"text-telegram-primary":"text-gray-500"}`,children:t.id==="saved"?"  ":t.status==="online"?"":B(t.lastSeen)})]})]}),u.jsxs("div",{className:"hidden md:flex items-center gap-1 text-[10px] text-gray-400 font-mono mr-2 px-2 py-1 bg-gray-100 dark:bg-white/5 rounded-full",title:"  (Ping)",children:[u.jsx(fT,{size:12,className:fe<100?"text-green-500":"text-yellow-500"}),u.jsxs("span",{children:[fe,"ms"]})]}),u.jsxs("div",{className:"flex items-center text-gray-500 gap-1 relative",children:[u.jsx("button",{onClick:A=>{A.stopPropagation(),Yt(!0)},className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-500",title:"  ",children:u.jsx(Kh,{size:20})}),u.jsx("button",{onClick:A=>{A.stopPropagation(),I()},className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-telegram-primary",children:u.jsx(Ya,{size:20})}),u.jsx("button",{onClick:A=>{A.stopPropagation(),ut(!mt)},className:`p-2 rounded-full transition-colors ${mt?"bg-gray-100 dark:bg-white/10 text-telegram-primary":"hover:bg-gray-100 dark:hover:bg-white/10"}`,children:u.jsx(uT,{size:20})}),mt&&u.jsxs("div",{className:"absolute top-12 left-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-xl border dark:border-gray-700 py-1 z-[100] animate-fade-in origin-top-left",children:[tr&&r==="owner"&&u.jsxs("button",{onClick:A=>{A.stopPropagation(),nr(),ut(!1)},className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2",children:[u.jsx(Tr,{size:16}),"   "]}),!tr&&t.id!=="saved"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:A=>{A.stopPropagation(),x&&x(),ut(!1)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[u.jsx(_y,{size:16}),"   "]}),u.jsxs("button",{onClick:A=>{A.stopPropagation(),_&&_(),ut(!1)},className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2",children:[u.jsx(Tr,{size:16}),"  "]}),u.jsxs("button",{onClick:A=>{A.stopPropagation(),k&&k(),ut(!1)},className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2 border-t border-gray-100 dark:border-gray-700 mt-1",children:[u.jsx(Ei,{size:16}),"   "]})]}),t.id==="saved"&&u.jsxs("button",{onClick:A=>{A.stopPropagation(),x&&x(),ut(!1)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[u.jsx(_y,{size:16}),"   "]})]})]})]})}),s&&u.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-gray-50 dark:bg-black/20 border-t border-gray-100 dark:border-white/5 cursor-pointer hover:bg-gray-100 dark:hover:bg-black/30 transition-colors",onClick:U,children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"w-1 self-stretch bg-telegram-primary rounded-full"}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("span",{className:"text-xs font-bold text-telegram-primary truncate",children:"  "}),u.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:s.text||(s.type==="image"?"":"")})]})]}),pe&&u.jsx("button",{onClick:A=>{A.stopPropagation(),h()},className:"p-1 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full text-gray-500",children:u.jsx(jn,{size:16})})]})]}),u.jsxs("div",{ref:St,className:"relative z-10 flex-1 overflow-y-auto p-2 sm:p-4 flex flex-col gap-1.5 scroll-smooth",onScroll:A=>hn(A.currentTarget.scrollHeight-A.currentTarget.scrollTop-A.currentTarget.clientHeight>200),children:[e.map((A,re)=>{var qs;const he=A.senderId==="me",Ae=er&&!he&&(!e[re-1]||e[re-1].senderId!==A.senderId),Xt=Le.includes(A.id),gn=Le[Ze]===A.id,yt=A.senderRole==="owner",wr=A.senderRole==="admin";let yn="px-3 py-2 rounded-2xl shadow-sm text-base break-words border min-w-[4rem] relative transition-all ";return gn?yn+="ring-4 ring-yellow-400 dark:ring-yellow-500/50 ":Xt&&(yn+="ring-2 ring-yellow-200 dark:ring-yellow-500/20 "),yt?yn+="bg-gradient-to-br from-amber-50 to-yellow-100 dark:from-yellow-900/40 dark:to-amber-800/40 text-gray-900 dark:text-white border-amber-400 dark:border-amber-600 shadow-[0_0_15px_rgba(251,191,36,0.3)] ring-1 ring-amber-300 dark:ring-amber-700 ":wr?yn+="bg-gradient-to-br from-red-50 to-rose-100 dark:from-red-900/40 dark:to-rose-800/40 text-gray-900 dark:text-white border-red-400 dark:border-red-600 shadow-[0_0_10px_rgba(244,63,94,0.3)] ring-1 ring-red-300 dark:ring-red-700 ":he?yn+="bg-telegram-chatOut dark:bg-telegram-chatOutDark border-telegram-chatOut dark:border-telegram-chatOutDark text-gray-900 dark:text-white ":yn+="bg-white dark:bg-telegram-chatInDark border-white dark:border-telegram-chatInDark text-gray-900 dark:text-white ",he?yn+="rounded-tr-2xl rounded-tl-none ":yn+="rounded-tl-2xl rounded-tr-none ",u.jsxs("div",{id:`msg-${A.id}`,className:`flex flex-col ${he?"items-end self-end":"items-start self-start"} group max-w-[85%] sm:max-w-[75%] animate-slide-in`,onContextMenu:vn=>$(vn,A,he),children:[Ae&&u.jsxs("div",{className:"flex items-center gap-1 mb-1 pr-2",children:[yt&&u.jsx(eT,{size:12,className:"text-amber-500 fill-amber-500"}),wr&&u.jsx(hT,{size:12,className:"text-red-500 fill-red-500"}),u.jsx("span",{className:`text-xs font-bold cursor-pointer hover:underline ${yt?"text-amber-600 dark:text-amber-400":wr?"text-red-600 dark:text-red-400":"text-telegram-primary"}`,onClick:()=>R&&A.senderId!=="me"&&R({id:A.senderId,name:A.senderName,avatar:A.senderAvatar}),style:{color:!yt&&!wr?vP(A.senderId):void 0},children:A.senderName||""})]}),u.jsxs("div",{className:yn,children:[A.replyToId&&u.jsxs("div",{className:"mb-1 pl-2 border-l-2 border-telegram-primary/50 text-xs opacity-70 cursor-pointer",onClick:()=>{const vn=document.getElementById(`msg-${A.replyToId}`);vn&&vn.scrollIntoView({behavior:"smooth",block:"center"})},children:[u.jsx("div",{className:"font-bold",children:"  "}),u.jsx("div",{className:"truncate",children:((qs=e.find(vn=>vn.id===A.replyToId))==null?void 0:qs.text)||"..."})]}),A.type==="image"&&A.imageUrl&&u.jsx("div",{className:"mb-1 cursor-pointer",onClick:()=>it(A.imageUrl||""),children:u.jsx("img",{src:A.imageUrl,alt:"Shared",className:`rounded-lg max-h-80 object-cover ${A.isSticker?"max-w-[150px] bg-transparent shadow-none border-none":"w-full min-w-[200px]"}`})}),A.type==="file"&&u.jsxs("div",{className:"flex items-center gap-3 bg-black/5 dark:bg-white/10 p-2 rounded-lg mb-1",children:[u.jsx("div",{className:"p-2 bg-telegram-primary rounded-full text-white",children:u.jsx(Hh,{size:20})}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("span",{className:"font-bold text-sm truncate max-w-[150px]",children:A.fileName||"File"}),u.jsx("span",{className:"text-xs opacity-70",children:A.fileSize||"Unknown size"})]}),u.jsx("a",{href:A.fileUrl,download:!0,className:"p-2 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx(gp,{size:18})})]}),!A.isSticker&&A.type!=="image"&&A.type!=="file"&&u.jsx("p",{className:"leading-relaxed whitespace-pre-wrap dir-auto",dir:"auto",children:oe(A.text)}),u.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 select-none ${he?"text-telegram-primaryDark dark:text-blue-200":"text-gray-500 dark:text-gray-400"}`,children:[A.edited&&u.jsx("span",{className:"text-[10px] italic opacity-70",children:" "}),u.jsx("span",{className:"text-[10px] opacity-80",children:X(A.timestamp)}),he&&(A.status==="read"?u.jsx(Xb,{size:14}):A.status==="sent"?u.jsx(Ra,{size:14}):u.jsx("div",{className:"w-2 h-2 rounded-full border border-current opacity-60"}))]}),A.reactions&&Object.keys(A.reactions).length>0&&u.jsx("div",{className:"absolute -bottom-3 left-2 flex gap-1 z-10",children:Object.entries(A.reactions).map(([vn,gi])=>{const Ps=Array.isArray(gi)?gi:[];return u.jsxs("button",{onClick:rr=>{rr.stopPropagation(),p(A.id,vn)},className:`text-xs px-1.5 py-0.5 rounded-full border shadow-sm flex items-center gap-1 transition-transform hover:scale-110 ${Ps.includes("me")?"bg-telegram-primary text-white border-telegram-primary":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200"}`,children:[u.jsx("span",{children:vn}),u.jsx("span",{className:"font-bold",children:Ps.length})]},vn)})})]})]},A.id)}),u.jsx("div",{ref:Ne})]}),pt&&u.jsx("button",{onClick:()=>{var A;return(A=Ne.current)==null?void 0:A.scrollIntoView({behavior:"smooth"})},className:"absolute bottom-20 right-4 p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg text-gray-500 hover:text-telegram-primary transition-colors z-20 animate-fade-in border dark:border-gray-700",children:u.jsx(Wh,{size:24})}),w&&u.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-gray-50 dark:bg-black/20 border-t border-telegram-primary/20 animate-slide-in",children:[u.jsx(Ey,{size:20,className:"text-telegram-primary"}),u.jsxs("div",{className:"flex-1 overflow-hidden",children:[u.jsxs("div",{className:"text-xs font-bold text-telegram-primary",children:["  ",w.senderName||""]}),u.jsx("div",{className:"text-sm truncate text-gray-500",children:w.text})]}),u.jsx("button",{onClick:()=>v(null),children:u.jsx(jn,{size:18,className:"text-gray-400"})})]}),u.jsxs("div",{className:"p-2 sm:p-3 bg-white dark:bg-telegram-bgDark border-t border-telegram-border dark:border-telegram-borderDark relative z-20",children:[u.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto",children:[u.jsx("button",{className:"p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",onClick:()=>G(!Se),children:u.jsx(xy,{size:24,className:"transform rotate-45"})}),Se&&u.jsxs("div",{className:"absolute bottom-16 right-4 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border dark:border-gray-700 p-2 flex flex-col gap-1 animate-fade-in z-50",children:[u.jsxs("button",{onClick:()=>{var A;return(A=Zn.current)==null?void 0:A.click()},className:"flex items-center gap-3 px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg text-gray-700 dark:text-gray-200",children:[u.jsx(fw,{size:20,className:"text-blue-500"})," "]}),u.jsxs("button",{onClick:()=>{var A;return(A=vr.current)==null?void 0:A.click()},className:"flex items-center gap-3 px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg text-gray-700 dark:text-gray-200",children:[u.jsx(Hh,{size:20,className:"text-orange-500"})," "]})]}),u.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-black/20 rounded-2xl flex items-center relative transition-shadow focus-within:ring-1 focus-within:ring-telegram-primary/50",children:[u.jsx("textarea",{ref:Un,value:W,onChange:ye,onKeyDown:A=>{A.key==="Enter"&&!A.shiftKey&&!g&&(A.preventDefault(),Pe())},placeholder:"   ...",className:"w-full bg-transparent border-none focus:ring-0 resize-none py-3 px-4 max-h-32 min-h-[48px] text-gray-900 dark:text-white placeholder-gray-500 custom-scrollbar",rows:1,style:{height:"auto",minHeight:"48px"}}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-yellow-500 transition-colors mr-1",onClick:()=>Ue(!T),children:u.jsx(mT,{size:24})})]}),W.trim()||E?u.jsx("button",{onClick:Pe,className:"p-3 bg-telegram-primary text-white rounded-full shadow-lg hover:bg-telegram-primaryDark hover:scale-105 transition-all",children:E?u.jsx(Ra,{size:24}):u.jsx(Qu,{size:24,className:g?"":"ml-0.5"})}):u.jsx("button",{onMouseDown:pn,onMouseUp:()=>mn(),onMouseLeave:()=>ee&&mn(),className:`p-3 rounded-full shadow-lg transition-all ${ee?"bg-red-500 scale-110 animate-pulse":"bg-telegram-primary hover:bg-telegram-primaryDark"} text-white`,children:u.jsx(mw,{size:24})})]}),T&&u.jsxs("div",{className:"absolute bottom-20 left-4 sm:left-auto sm:right-16 z-50 bg-white dark:bg-gray-800 rounded-xl shadow-2xl border dark:border-gray-700 w-80 h-72 flex flex-col overflow-hidden animate-fade-in",children:[u.jsxs("div",{className:"flex border-b dark:border-gray-700",children:[u.jsx("button",{onClick:()=>Mt("emoji"),className:`flex-1 py-2 text-sm font-bold ${lt==="emoji"?"text-telegram-primary border-b-2 border-telegram-primary":"text-gray-500"}`,children:""}),u.jsx("button",{onClick:()=>Mt("sticker"),className:`flex-1 py-2 text-sm font-bold ${lt==="sticker"?"text-telegram-primary border-b-2 border-telegram-primary":"text-gray-500"}`,children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-2 grid grid-cols-5 gap-2 content-start custom-scrollbar",children:lt==="emoji"?gP.map(A=>u.jsx("button",{onClick:()=>{z(re=>re+A)},className:"text-2xl p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors",children:A},A)):yP.map((A,re)=>u.jsx("button",{onClick:()=>Et(A),className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg transition-colors",children:u.jsx("img",{src:A,className:"w-12 h-12 object-contain"})},re))})]})]}),N&&u.jsxs("div",{className:"fixed z-[200] bg-white dark:bg-gray-800 rounded-lg shadow-2xl border dark:border-gray-700 py-1 w-48 animate-fade-in overflow-hidden",style:{top:N.y,left:N.x},onClick:A=>A.stopPropagation(),children:[u.jsxs("button",{onClick:()=>{var A;v(N.message),C(null),(A=Un.current)==null||A.focus()},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[u.jsx(Ey,{size:16})," "]}),N.message.type==="text"&&u.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(N.message.text),C(null)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[u.jsx(Zb,{size:16})," "]}),pe&&u.jsxs("button",{onClick:()=>{c(N.message),C(null)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[u.jsx(dT,{size:16}),"  "]}),N.isMe&&Date.now()-N.message.timestamp<864e5&&u.jsxs("button",{onClick:()=>{var A;b(N.message),z(N.message.text),C(null),(A=Un.current)==null||A.focus()},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[u.jsx(gw,{size:16})," "]}),(N.isMe||je)&&u.jsxs("button",{onClick:()=>{confirm("  ")&&l(N.message.id),C(null)},className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2",children:[u.jsx(Tr,{size:16})," "]}),!N.isMe&&u.jsxs("button",{onClick:()=>L(N.message),className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2 border-t dark:border-gray-700",children:[u.jsx(hu,{size:16})," "]})]})]})},xP=({contact:t,onClose:e,onStartChat:n})=>{const r=t.id==="global_chat",s=t.id==="saved";return u.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-telegram-secondaryDark border-l border-telegram-border dark:border-telegram-borderDark overflow-y-auto animate-slide-in",children:[u.jsxs("div",{className:"flex items-center gap-4 p-4 sticky top-0 bg-white/80 dark:bg-telegram-secondaryDark/80 backdrop-blur-md z-10",children:[u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 dark:hover:text-gray-200",children:u.jsx(jn,{size:24})}),u.jsx("span",{className:"font-semibold text-lg",children:r?"  ":" "})]}),u.jsxs("div",{className:"px-6 py-4 flex flex-col items-center border-b-8 border-gray-100 dark:border-black/20",children:[u.jsx("img",{src:t.avatar,alt:t.name,className:`w-28 h-28 object-cover mb-4 shadow-lg ${r||s?"rounded-2xl p-2 bg-telegram-primary/10":"rounded-full"}`}),u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1 text-center",children:t.name}),u.jsx("p",{className:"text-gray-500 text-sm",children:r?u.jsx("span",{className:"text-telegram-primary",children:"  "}):t.status==="online"?u.jsx("span",{className:"text-telegram-primary",children:""}):`  ${t.lastSeen||" "}`}),n&&!r&&!s&&u.jsxs("button",{onClick:()=>n(t),className:"mt-4 flex items-center gap-2 bg-telegram-primary hover:bg-telegram-primaryDark text-white px-6 py-2 rounded-full font-medium transition-colors",children:[u.jsx(qa,{size:18})," "]})]}),u.jsxs("div",{className:"p-4 space-y-5 border-b-8 border-gray-100 dark:border-black/20",children:[r?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"mt-1 text-gray-500",children:u.jsx(hw,{size:22})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base",children:" (Public)"}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:" "})]})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"mt-1 text-gray-500",children:u.jsx(Xu,{size:22})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base",children:"  "}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:""})]})]})]}):u.jsxs(u.Fragment,{children:[t.phone&&u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"mt-1 text-gray-500",children:u.jsx(Ya,{size:22})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base",children:t.phone}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:""})]})]}),t.username&&u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"mt-1 text-gray-500",children:u.jsx(cw,{size:22})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base",children:t.username}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:" "})]})]})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"mt-1 text-gray-500",children:u.jsx(mp,{size:22})}),u.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base",children:""}),u.jsx("div",{className:"w-10 h-5 bg-telegram-primary rounded-full relative cursor-pointer",children:u.jsx("div",{className:"absolute left-1 top-1 w-3 h-3 bg-white rounded-full"})})]})]}),u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"mt-1 text-gray-500",children:u.jsx(Hh,{size:22})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base leading-snug",children:t.bio||" "}),u.jsx("p",{className:"text-gray-500 text-xs mt-1",children:" (Bio)"})]})]})]}),u.jsxs("div",{className:"p-2",children:[u.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-2",children:[u.jsx("button",{className:"flex-1 py-2 text-telegram-primary border-b-2 border-telegram-primary font-medium text-sm",children:""}),u.jsx("button",{className:"flex-1 py-2 text-gray-500 font-medium text-sm hover:text-gray-700 dark:hover:text-gray-300",children:""}),u.jsx("button",{className:"flex-1 py-2 text-gray-500 font-medium text-sm hover:text-gray-700 dark:hover:text-gray-300",children:""})]}),u.jsx("div",{className:"grid grid-cols-3 gap-1",children:[1,2,3,4,5,6].map(i=>u.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-800 cursor-pointer hover:opacity-80 transition-opacity",children:u.jsx("img",{src:`https://picsum.photos/200/200?random=${i+10}`,className:"w-full h-full object-cover",alt:"media"})},i))})]})]})},EP=[{id:"default",name:"",value:"default",color:"#8db5d0"},{id:"blue",name:" ",value:"#dbeafe",color:"#dbeafe"},{id:"green",name:" ",value:"#dcfce7",color:"#dcfce7"},{id:"dark",name:"",value:"#18181b",color:"#18181b"},{id:"pink",name:"",value:"#fce7f3",color:"#fce7f3"},{id:"pattern1",name:" ",value:"https://img.freepik.com/free-vector/hand-drawn-contact-sheet-template_23-2150937449.jpg",color:"#e5e7eb"},{id:"pattern2",name:" ",value:"https://img.freepik.com/free-vector/seamless-pattern-with-cute-cats_23-2147665476.jpg",color:"#e5e7eb"}],kP=({isOpen:t,onClose:e,userProfile:n,onSave:r,wallpaper:s,onSaveWallpaper:i})=>{const[o,l]=O.useState(n),[c,h]=O.useState("profile"),[p,m]=O.useState(s),[g,S]=O.useState(""),[R,D]=O.useState(!1),I=O.useRef(null);if(O.useEffect(()=>{l(n),m(s)},[n,s,t]),!t)return null;const x=()=>{r(o),i(p),e()},_=async k=>{var W;const P=(W=k.target.files)==null?void 0:W[0];if(P){D(!0);try{const z=`avatars/${n.uid}/${Date.now()}_${P.name}`,w=await Em(P,z);l(v=>({...v,avatar:w}))}catch(z){console.error("Storage failed, attempting base64 fallback",z);try{if(P.size>1024*1024)alert("  :             .");else{const w=new FileReader;w.onloadend=()=>{const v=w.result;l(E=>({...E,avatar:v}))},w.readAsDataURL(P)}}catch{alert("    .")}}finally{D(!1)}}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-telegram-secondaryDark w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex flex-col border-b border-gray-100 dark:border-white/10",children:[u.jsxs("div",{className:"flex items-center justify-between p-4",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:""}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx(jn,{size:24,className:"text-gray-500 dark:text-gray-300"})})]}),u.jsxs("div",{className:"flex px-4",children:[u.jsx("button",{onClick:()=>h("profile"),className:`flex-1 pb-3 text-sm font-medium border-b-2 transition-colors ${c==="profile"?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(Hi,{size:18}),""]})}),u.jsx("button",{onClick:()=>h("chat"),className:`flex-1 pb-3 text-sm font-medium border-b-2 transition-colors ${c==="chat"?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(fw,{size:18})," "]})})]})]}),u.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:c==="profile"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"relative bg-telegram-secondary dark:bg-black/20 p-6 flex flex-col items-center justify-center gap-4",children:[u.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:_}),u.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var k;return!R&&((k=I.current)==null?void 0:k.click())},children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-telegram-primary text-white flex items-center justify-center text-3xl font-bold shadow-lg overflow-hidden border-4 border-white dark:border-gray-700",children:R?u.jsx(Vi,{className:"animate-spin",size:32}):o.avatar?u.jsx("img",{src:o.avatar,alt:"Profile",className:"w-full h-full object-cover"}):o.name.charAt(0)}),u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(dw,{size:24,className:"text-white"})})]}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"     "})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(Hi,{size:20})}),u.jsx("input",{type:"text",value:o.name,onChange:k=>l({...o,name:k.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white",placeholder:" "}),u.jsx("label",{className:"text-xs text-telegram-primary mt-1 block",children:" ()"})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(rT,{size:20})}),u.jsx("input",{type:"text",value:o.bio,onChange:k=>l({...o,bio:k.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white",placeholder:""}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"   "})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(cw,{size:20})}),u.jsx("input",{type:"text",value:o.username,onChange:k=>l({...o,username:k.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white dir-ltr text-right",placeholder:" "}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"  "})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(Ya,{size:20})}),u.jsx("input",{type:"tel",value:o.phone,onChange:k=>l({...o,phone:k.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white dir-ltr text-right",placeholder:" "}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:" "})]})]})]}):u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"       ."}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:EP.map(k=>u.jsxs("div",{onClick:()=>m(k.value),className:`
                                    relative aspect-[3/4] rounded-lg cursor-pointer overflow-hidden border-2 transition-all shadow-sm
                                    ${p===k.value?"border-telegram-primary scale-105":"border-transparent hover:scale-105"}
                                `,children:[u.jsx("div",{className:"w-full h-full",style:{backgroundColor:k.color,backgroundImage:k.value.startsWith("http")?`url(${k.value})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:k.value==="default"&&u.jsx("div",{className:"w-full h-full opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7z' fill='%23ffffff' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E")`}})}),u.jsx("div",{className:"absolute bottom-0 w-full bg-black/40 text-white text-[10px] text-center py-1",children:k.name}),p===k.value&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:u.jsx(Ra,{className:"text-white drop-shadow-md",size:32})})]},k.id))}),u.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-white/10",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"  "}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:g,onChange:k=>S(k.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 bg-gray-100 dark:bg-white/5 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-telegram-primary"}),u.jsx("button",{onClick:()=>{g&&m(g)},className:"bg-telegram-secondary dark:bg-white/10 text-telegram-primary rounded-lg px-4 py-2 text-sm font-medium hover:bg-gray-200 dark:hover:bg-white/20",children:""})]})]})]})}),u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-black/20 flex justify-end gap-3",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-telegram-primary hover:bg-telegram-primary/10 rounded-lg transition-colors font-medium",children:""}),u.jsxs("button",{onClick:x,disabled:R,className:"px-6 py-2 bg-telegram-primary hover:bg-telegram-primaryDark disabled:opacity-50 text-white rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[u.jsx(Ra,{size:18})," "]})]})]})})},bP=({onClose:t,currentUserEmail:e,currentUserRole:n,onStartChat:r})=>{const[s,i]=O.useState("users"),[o,l]=O.useState([]),[c,h]=O.useState([]),[p,m]=O.useState([]),[g,S]=O.useState(!0),[R,D]=O.useState({isOpen:!1,targetUid:null}),[I,x]=O.useState({isOpen:!1,report:null}),[_,k]=O.useState({isOpen:!1,targetUid:null,targetName:""}),[P,W]=O.useState([]),[z,w]=O.useState(null),[v,E]=O.useState([]),[b,N]=O.useState(""),[C,T]=O.useState([]),[Ue,lt]=O.useState("");O.useEffect(()=>{Mt(),Se();const q=Vq(h),fe=Oq(m);return()=>{q(),fe()}},[]);const Mt=async()=>{S(!0);const q=await Fq();l(q),S(!1)},Se=async()=>{const q=await J1();T(q)},G=async(q,fe,ue)=>{if(n!=="owner"){alert("       .");return}const Ne=o.find(St=>St.uid===q);if((Ne==null?void 0:Ne.email)===Dn.OWNER_EMAIL){alert("       .");return}await zq(q,ue),l(o.map(St=>St.uid===q?{...St,role:ue}:St))},ee=async(q,fe)=>{const ue=o.find(Ne=>Ne.uid===q);if((ue==null?void 0:ue.role)==="owner"){alert("     .");return}if((ue==null?void 0:ue.role)==="admin"&&n!=="owner"){alert("      .");return}await Bq(q,fe||!1),l(o.map(Ne=>Ne.uid===q?{...Ne,isBanned:!fe,banExpiresAt:void 0}:Ne))},se=async q=>{if(n!=="owner"){alert("       .");return}confirm("             .")&&(await fP(q),l(fe=>fe.filter(ue=>ue.uid!==q)),alert("   ."))},ge=async(q,fe)=>{const ue=o.find(Ne=>Ne.uid===q);if((ue==null?void 0:ue.role)==="owner"||(ue==null?void 0:ue.role)==="admin"&&n!=="owner"){alert("     .");return}await $q(q,fe),alert(`   ${fe}   .`),Mt()},me=async(q,fe)=>{const ue=q||R.targetUid,Ne=fe||b;!ue||!Ne.trim()||(await Xq(ue,"  ",Ne),fe||(D({isOpen:!1,targetUid:null}),N(""),alert("  .")))},be=async()=>{if(!Ue.trim())return;const q=[...C,Ue.trim()];T(q),lt(""),await Y0(q)},it=async q=>{const fe=C.filter(ue=>ue!==q);T(fe),await Y0(fe)},At=async q=>{if(q.role==="owner"||q.role==="admin"&&n!=="owner")return;k({isOpen:!0,targetUid:q.uid,targetName:q.name}),W([]),w(null),E([]);const fe=await Qq(q.uid);W(fe)},Je=async q=>{if(!_.targetUid)return;w(q);const fe=await Yq(_.targetUid,q);E(fe)},pt=async q=>{z&&confirm(" ")&&(z==="global_chat"?await Q1(q):await Hq(z,q),E(fe=>fe.filter(ue=>ue.id!==q)))},hn=async(q,fe)=>{if(!z)return;const ue=prompt(" :",fe);ue&&ue!==fe&&(z==="global_chat"?await Y1(q,ue):await Z1(z,q,ue),E(Ne=>Ne.map(St=>St.id===q?{...St,text:ue,edited:!0}:St)))},mt=async q=>{confirm("    ")&&await Uq(q,n==="owner"?" ":"")},ut=async q=>{confirm("          .")&&(await G0(q),x({isOpen:!1,report:null}))},gt=async q=>{confirm(`    ${q.userName}  `)&&(await ee(q.userId,!0),await K0(q.id,!0),alert("       ."))},Yt=async q=>{confirm("   ")&&await K0(q,!1)},De=async q=>{confirm(" ")&&await Mq(q)},fn=async()=>{confirm("         ")&&(await dP(),alert("   ."))},Le=async()=>{n==="owner"&&confirm("!            .     .   ")&&confirm("   .    ")&&(await hP(),alert("     ."))},Lt=c.filter(q=>n==="owner"?!0:q.status==="pending"),Ze=p.filter(q=>q.status==="pending");return u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 flex justify-between items-center border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Yu,{className:"text-red-600",size:24}),u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"  "})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:u.jsx(jn,{size:24})})]}),u.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:[u.jsx("button",{onClick:()=>i("users"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="users"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(Hi,{size:18})," "]})}),u.jsx("button",{onClick:()=>i("reports"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="reports"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(hu,{size:18})," ",c.filter(q=>q.status==="pending").length>0&&u.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 rounded-full",children:c.filter(q=>q.status==="pending").length})]})}),u.jsx("button",{onClick:()=>i("appeals"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="appeals"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(gy,{size:18})," ",Ze.length>0&&u.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-1.5 rounded-full",children:Ze.length})]})}),u.jsx("button",{onClick:()=>i("filters"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="filters"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(vw,{size:18}),"  "]})}),n==="owner"&&u.jsx("button",{onClick:()=>i("maintenance"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="maintenance"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(tT,{size:18})," "]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s==="users"?g?u.jsx("div",{className:"text-center py-10 text-gray-500",children:"    ..."}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-right",children:[u.jsx("thead",{className:"text-xs text-gray-500 bg-gray-50 dark:bg-gray-800 uppercase",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:" / "}),u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:""})]})}),u.jsx("tbody",{children:o.map(q=>u.jsxs("tr",{className:"bg-white dark:bg-gray-900 border-b dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[u.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[u.jsx("img",{src:q.avatar,className:"w-8 h-8 rounded-full"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:q.name}),q.email===Dn.OWNER_EMAIL&&u.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full w-fit",children:"Owner"})]})]}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{children:q.email}),u.jsx("span",{className:"text-xs",children:q.phone}),u.jsx("span",{className:"text-[10px] opacity-50",children:q.uid})]})}),u.jsx("td",{className:"px-6 py-4",children:n==="owner"&&q.email!==Dn.OWNER_EMAIL?u.jsxs("select",{value:q.role,onChange:fe=>G(q.uid,q.role,fe.target.value),className:"bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",children:[u.jsx("option",{value:"user",children:""}),u.jsx("option",{value:"admin",children:""}),u.jsx("option",{value:"owner",children:" "})]}):u.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${q.role==="owner"?"bg-yellow-100 text-yellow-800":q.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:q.role==="owner"?" ":q.role==="admin"?"":""})}),u.jsx("td",{className:"px-6 py-4",children:q.isBanned?u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-red-600 font-bold flex items-center gap-1",children:[u.jsx(Ei,{size:14})," "]}),q.banExpiresAt&&u.jsx("span",{className:"text-xs text-orange-500",children:" "})]}):u.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-1",children:[u.jsx($l,{size:14})," "]})}),u.jsxs("td",{className:"px-6 py-4 flex items-center gap-2",children:[q.email!==Dn.OWNER_EMAIL&&(n==="owner"||n==="admin"&&q.role==="user")&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>ee(q.uid,q.isBanned||!1),title:q.isBanned?" ":" ",className:`p-2 rounded-lg text-white ${q.isBanned?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:u.jsx(Ei,{size:16})}),n==="owner"&&u.jsx("button",{onClick:()=>se(q.uid),title:"   ",className:"p-2 rounded-lg bg-gray-600 hover:bg-gray-700 text-white",children:u.jsx(Tr,{size:16})})]}),u.jsx("button",{onClick:()=>D({isOpen:!0,targetUid:q.uid}),title:"  ",className:"p-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white",children:u.jsx(mp,{size:16})}),u.jsx("button",{onClick:()=>{r(q),t()},title:"",className:"p-2 rounded-lg bg-teal-500 hover:bg-teal-600 text-white",children:u.jsx(qa,{size:16})}),(n==="owner"||n==="admin"&&q.role==="user")&&u.jsx("button",{onClick:()=>At(q),title:"  (Ghost Mode)",className:"p-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white",children:u.jsx(wy,{size:16})})]})]},q.uid))})]})}):s==="appeals"?u.jsxs("div",{className:"space-y-4",children:[Ze.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-10 opacity-50",children:[u.jsx(gy,{size:48,className:"mb-2"}),u.jsx("p",{children:"      ."})]}):Ze.map(q=>u.jsxs("div",{className:"p-4 rounded-xl border border-orange-200 bg-orange-50 dark:bg-orange-900/10 dark:border-orange-800 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[u.jsx(Hi,{size:16})," ",q.userName]}),u.jsx("span",{className:"text-xs text-gray-500 font-mono",children:q.userId})]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(q.createdAt).toLocaleString("fa-IR")})]}),u.jsx("div",{className:"bg-white dark:bg-black/20 p-3 rounded-lg text-sm leading-relaxed text-gray-800 dark:text-gray-200",children:q.message}),u.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[u.jsx("button",{onClick:()=>Yt(q.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm hover:bg-red-200",children:" "}),u.jsxs("button",{onClick:()=>gt(q),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 flex items-center gap-2 shadow-sm",children:[u.jsx($l,{size:16}),"   "]})]})]},q.id)),p.filter(q=>q.status!=="pending").length>0&&u.jsxs("div",{className:"mt-8 border-t pt-4 dark:border-gray-700",children:[u.jsx("h4",{className:"text-sm font-bold text-gray-500 mb-4",children:" "}),p.filter(q=>q.status!=="pending").map(q=>u.jsxs("div",{className:"p-3 mb-2 rounded border dark:border-gray-700 opacity-60 hover:opacity-100 transition-opacity bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-sm",children:q.userName}),u.jsx("span",{className:`mx-2 text-xs px-2 py-0.5 rounded-full ${q.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:q.status==="approved"?" ":" "})]}),u.jsx("button",{onClick:()=>De(q.id),className:"text-red-400 hover:text-red-600",children:u.jsx(Tr,{size:16})})]},q.id))]})]}):s==="reports"?u.jsx("div",{className:"space-y-4",children:Lt.length===0?u.jsx("p",{className:"text-center text-gray-500 py-10",children:"   ."}):Lt.map(q=>u.jsxs("div",{className:`p-4 rounded-xl border flex flex-col md:flex-row gap-4 ${q.status==="handled"?"bg-green-50 border-green-200 dark:bg-green-900/10":"bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[q.status==="pending"?u.jsxs("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[u.jsx(hu,{size:10})," "]}):u.jsxs("span",{className:"bg-green-100 text-green-600 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[u.jsx(Ra,{size:10}),"    ",q.handledBy]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(q.createdAt).toLocaleString("fa-IR")})]}),u.jsxs("div",{className:"mb-2",children:[u.jsxs("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:[": ",u.jsx("span",{className:"font-mono text-xs opacity-70",children:q.reporterId})]}),u.jsxs("p",{className:"text-sm font-bold text-red-500",children:[": ",q.reportedUserName," ",u.jsxs("span",{className:"font-mono text-xs opacity-70 text-gray-400",children:["(",q.reportedUserId,")"]})]})]}),u.jsxs("div",{className:"bg-gray-100 dark:bg-black/20 p-2 rounded text-sm mb-2",children:[u.jsx("span",{className:"text-xs opacity-50 block mb-1",children:" :"}),q.messageContent]}),u.jsxs("div",{className:"text-xs text-red-500 bg-red-50 dark:bg-red-900/20 p-2 rounded inline-block",children:[": ",q.reason]})]}),u.jsxs("div",{className:"flex flex-row md:flex-col gap-2 justify-center border-t md:border-t-0 md:border-r border-gray-100 dark:border-gray-700 pt-2 md:pt-0 md:pr-4",children:[q.status==="pending"&&u.jsxs("button",{onClick:()=>x({isOpen:!0,report:q}),className:"flex items-center justify-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm",children:[u.jsx(sT,{size:16}),"  "]}),n==="owner"&&q.status==="handled"&&u.jsxs("button",{onClick:()=>ut(q.id),className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm",children:[u.jsx($l,{size:16}),"   "]})]})]},q.id))}):s==="maintenance"?u.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 py-6",children:[u.jsx("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-xl",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(Gu,{size:32,className:"text-blue-600 mt-1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"                           ."}),u.jsx("button",{onClick:fn,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:"  "})]})]})}),u.jsx("div",{className:"p-6 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-xl",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(Tr,{size:32,className:"text-red-600 mt-1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-red-800 dark:text-red-300 mb-2",children:"   ()"}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["           . ",u.jsx("br",{}),u.jsx("strong",{children:":"}),"   (Users)   .     ."]}),u.jsx("button",{onClick:Le,className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors shadow-sm",children:"  "})]})]})})]}):u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-sm text-yellow-800 flex items-start gap-3",children:[u.jsx(Od,{className:"shrink-0"}),u.jsx("p",{children:"               (***)   ."})]}),u.jsxs("div",{className:"flex gap-2 mb-6",children:[u.jsx("input",{type:"text",value:Ue,onChange:q=>lt(q.target.value),placeholder:"  ...",className:"flex-1 p-3 rounded-xl border bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-white"}),u.jsx("button",{onClick:be,className:"bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 transition-colors",children:""})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:C.map((q,fe)=>u.jsxs("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full flex items-center gap-2",children:[u.jsx("span",{children:q}),u.jsx("button",{onClick:()=>it(q),className:"hover:text-red-900",children:u.jsx(jn,{size:14})})]},fe))})]})}),R.isOpen&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/70 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md shadow-2xl",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"    "}),u.jsx("textarea",{value:b,onChange:q=>N(q.target.value),placeholder:"   ...",className:"w-full h-32 p-3 border rounded-lg mb-4 bg-gray-50 dark:bg-gray-700 dark:border-gray-600 resize-none"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>D({isOpen:!1,targetUid:null}),className:"px-4 py-2 text-gray-500",children:""}),u.jsxs("button",{onClick:()=>me(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2",children:[u.jsx(Qu,{size:16})," "]})]})]})}),I.isOpen&&I.report&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/80 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 text-red-600",children:[u.jsx(Yu,{}),"   "]}),u.jsx("button",{onClick:()=>x({isOpen:!1,report:null}),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:u.jsx(jn,{})})]}),u.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-200",children:[u.jsx(Od,{size:24,className:"text-red-600"}),u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-sm block",children:"  (  )"}),u.jsx("span",{className:"text-xs opacity-80",children:"          ."})]})]}),u.jsx("button",{onClick:()=>{confirm("        (  )   ")&&(ee(I.report.reportedUserId,!1),ee(I.report.reporterId,!1),alert("      ."))},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm whitespace-nowrap",children:"  "})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{className:"border border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/10 rounded-xl p-4",children:[u.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-3 flex items-center gap-2",children:[u.jsx(Hi,{size:18})," : ",I.report.reportedUserName]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>ee(I.report.reportedUserId,!1),className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Ei,{size:16}),"  "]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("button",{onClick:()=>ge(I.report.reportedUserId,24),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(ki,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>ge(I.report.reportedUserId,72),className:"bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(ki,{size:14}),"   "]})]}),u.jsxs("button",{onClick:()=>ge(I.report.reportedUserId,168),className:"w-full bg-orange-700 hover:bg-orange-800 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(ki,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>{const q=prompt("    :");q&&me(I.report.reportedUserId,` : ${q}`)},className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Od,{size:16}),"  "]})]})]}),u.jsxs("div",{className:"border border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/10 rounded-xl p-4",children:[u.jsxs("h4",{className:"font-bold text-blue-700 dark:text-blue-400 mb-3 flex items-center gap-2",children:[u.jsx(hu,{size:18})," : ",I.report.reporterId]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>{const q=prompt("    ( ):");q&&me(I.report.reporterId,` : ${q}`)},className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(uw,{size:16}),"   "]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("button",{onClick:()=>ge(I.report.reporterId,24),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(ki,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>ge(I.report.reporterId,72),className:"bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(ki,{size:14}),"   "]})]}),u.jsxs("button",{onClick:()=>ee(I.report.reporterId,!1),className:"w-full bg-gray-800 hover:bg-gray-900 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Ei,{size:16}),"  ( )"]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-200 dark:border-blue-800",children:[u.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"   :"}),u.jsxs("button",{onClick:()=>{mt(I.report.id),x({isOpen:!1,report:null})},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx($l,{size:16}),"    "]}),u.jsxs("button",{onClick:()=>{G0(I.report.id),x({isOpen:!1,report:null})},className:"w-full mt-2 bg-red-100 hover:bg-red-200 text-red-600 py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Tr,{size:16}),"   "]})]})]})]})]})}),_.isOpen&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/70 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-6xl h-[80vh] shadow-2xl flex flex-col overflow-hidden border border-gray-300 dark:border-gray-700",children:[u.jsxs("div",{className:"p-4 bg-purple-700 text-white flex justify-between items-center shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(wy,{size:24,className:"animate-pulse"}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold",children:["  : ",_.targetName]}),u.jsx("p",{className:"text-xs opacity-80",children:"Ghost Mode: Viewing chats as user"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>ee(_.targetUid,!0),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm flex items-center gap-1",children:[u.jsx(Ei,{size:14}),"   "]}),u.jsx("button",{onClick:()=>k({isOpen:!1,targetUid:null,targetName:""}),className:"bg-white/10 hover:bg-white/20 p-2 rounded-full",children:u.jsx(jn,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsxs("div",{className:"w-1/3 border-l border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:[u.jsx("h4",{className:"p-3 font-bold text-gray-500 text-sm border-b dark:border-gray-700",children:" "}),P.map(q=>u.jsxs("div",{onClick:()=>Je(q.id),className:`flex items-center gap-3 p-3 cursor-pointer transition-colors border-b dark:border-gray-800 ${z===q.id?"bg-purple-100 dark:bg-purple-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[u.jsx("img",{src:q.avatar,className:"w-10 h-10 rounded-full bg-gray-300"}),u.jsxs("div",{className:"overflow-hidden",children:[u.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100 truncate",children:q.name}),u.jsx("div",{className:"text-xs text-gray-500",children:q.type==="group"?"":""})]}),z===q.id&&u.jsx(Yb,{size:16,className:"mr-auto text-purple-500"})]},q.id)),P.length===0&&u.jsx("p",{className:"text-center p-4 text-sm text-gray-500",children:"  ."})]}),u.jsx("div",{className:"flex-1 bg-white dark:bg-black/20 overflow-y-auto p-4 flex flex-col",children:z?v.length>0?v.map(q=>u.jsxs("div",{className:`mb-2 p-3 rounded-lg max-w-[80%] border group relative ${q.senderId===_.targetUid?"self-end bg-purple-50 border-purple-200 dark:bg-purple-900/20 dark:border-purple-800":"self-start bg-gray-50 border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-600 dark:text-gray-400",children:q.senderName||q.senderId}),u.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(q.timestamp).toLocaleTimeString("fa-IR")})]}),u.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-200 whitespace-pre-wrap",children:q.text}),u.jsxs("div",{className:"absolute top-1 left-1 hidden group-hover:flex gap-1 bg-white dark:bg-gray-800 p-1 rounded shadow-md border dark:border-gray-600",children:[u.jsx("button",{onClick:()=>hn(q.id,q.text),className:"p-1 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded",title:"",children:u.jsx(gw,{size:12})}),u.jsx("button",{onClick:()=>pt(q.id),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"",children:u.jsx(Tr,{size:12})})]})]},q.id)):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[u.jsx(qa,{size:40,className:"mb-2 opacity-50"}),u.jsx("p",{children:"     ."})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[u.jsx(Hu,{size:40,className:"mb-2 opacity-50"}),u.jsx("p",{children:"      ."})]})})]})]})})]})})},TP=({onSuccess:t,storedAccounts:e=[],initialEmail:n=""})=>{const[r,s]=O.useState(!0),[i,o]=O.useState(!1),[l,c]=O.useState(""),[h,p]=O.useState(e.length>0&&!n),[m,g]=O.useState({name:"",email:n||"",phone:"",password:""});O.useEffect(()=>{n&&(g(x=>({...x,email:n})),p(!1))},[n]);const S=async x=>{x.preventDefault(),c(""),o(!0);try{if(r){if(!m.email||!m.password)throw new Error("       ");await Aq(m.email,m.password)}else{if(!m.name||!m.email||!m.password||!m.phone)throw new Error("     ");if(m.password.length<6)throw new Error("      ");await Iq(m.email,m.password,m.name,m.phone)}}catch(_){console.error(_),_.code==="auth/invalid-email"?c("   "):_.code==="auth/user-not-found"||_.code==="auth/wrong-password"||_.code==="auth/invalid-credential"?c("     "):_.code==="auth/email-already-in-use"?c("     "):c(_.message||"  .    .")}finally{o(!1)}},R=async()=>{c(""),o(!0);try{await Sq()}catch(x){if(console.error("Google Login Error:",x),x.code==="auth/unauthorized-domain"){const _=window.location.hostname;c(` "${_}"  .      Authentication > Settings > Authorized domains    .`)}else x.code==="auth/popup-closed-by-user"?c("     ."):c(x.message||"    ")}finally{o(!1)}},D=x=>{g(_=>({..._,email:x.email})),p(!1),s(!0)},I=()=>u.jsx("div",{className:"absolute bottom-6 left-0 right-0 z-20 flex justify-center animate-fade-in pointer-events-none",children:u.jsxs("div",{className:"pointer-events-auto bg-white/10 dark:bg-black/40 backdrop-blur-md border border-white/20 dark:border-white/10 px-6 py-2.5 rounded-full shadow-2xl flex items-center gap-4 transition-transform hover:-translate-y-1 duration-300",children:[u.jsxs("a",{href:"https://github.com/mrv006",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-telegram-primary dark:hover:text-telegram-primary transition-colors group",children:[u.jsx("div",{className:"p-1.5 bg-white/20 rounded-full group-hover:bg-white/40 transition-colors",children:u.jsx(nT,{size:18})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] opacity-60 font-medium leading-none mb-0.5",children:"Designed & Developed by"}),u.jsx("span",{className:"text-sm font-bold leading-none tracking-wide font-mono",children:"Mr.V"})]})]}),u.jsx("div",{className:"w-px h-8 bg-gray-400/30 dark:bg-white/20"}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[u.jsx(pT,{size:16,className:"opacity-70"}),u.jsx("span",{className:"text-xs font-mono font-bold tracking-wider opacity-90",children:"09902076468"})]})]})});return h&&e.length>0?u.jsxs("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark p-4 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 chat-bg-pattern pointer-events-none"}),u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-telegram-secondaryDark rounded-3xl shadow-2xl p-8 relative z-10 animate-fade-in",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-lg shadow-telegram-primary/30 p-2 overflow-hidden border-4 border-telegram-primary",children:u.jsx("img",{src:"https://www.tarhbama.com/cities-vector/147566",alt:"Logo",className:"w-full h-full object-cover"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"  "}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"         "})]}),u.jsxs("div",{className:"space-y-3 mb-6",children:[e.map(x=>u.jsxs("button",{onClick:()=>D(x),className:"w-full bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 p-3 rounded-xl flex items-center gap-4 transition-colors border border-gray-100 dark:border-gray-700",children:[u.jsx("img",{src:x.avatar,className:"w-12 h-12 rounded-full object-cover"}),u.jsxs("div",{className:"text-right flex-1",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:x.name}),u.jsx("p",{className:"text-sm text-gray-500",children:x.email})]}),u.jsx(Hu,{size:20,className:"text-gray-400 rotate-180"})]},x.uid)),u.jsxs("button",{onClick:()=>p(!1),className:"w-full bg-transparent hover:bg-gray-50 dark:hover:bg-white/5 p-3 rounded-xl flex items-center gap-4 transition-colors border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:text-telegram-primary",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-white/5 flex items-center justify-center",children:u.jsx(yw,{size:24})}),u.jsx("div",{className:"text-right flex-1",children:u.jsx("h3",{className:"font-bold",children:"   "})})]})]})]}),I()]}):u.jsxs("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark p-4 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 chat-bg-pattern pointer-events-none"}),u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-telegram-secondaryDark rounded-3xl shadow-2xl p-8 relative z-10 animate-fade-in border border-white/50 dark:border-white/5",children:[u.jsxs("div",{className:"text-center mb-8 relative",children:[e.length>0&&u.jsx("button",{onClick:()=>p(!0),className:"absolute top-0 right-0 p-2 text-gray-400 hover:text-gray-600",title:"   ",children:u.jsx(Xu,{size:20})}),u.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-xl shadow-telegram-primary/30 ring-4 ring-telegram-primary dark:ring-telegram-secondaryDark p-2 overflow-hidden transform hover:scale-105 transition-transform duration-500",children:u.jsx("img",{src:"https://www.tarhbama.com/cities-vector/147566",alt:"Logo",className:"w-full h-full object-cover"})}),u.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:r?"  ":"  "}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:r?"   ":"     "})]}),l&&u.jsxs("div",{className:"mb-6 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-start gap-2 text-right dir-rtl",dir:"rtl",children:[u.jsx(uw,{size:16,className:"mt-0.5 shrink-0"}),u.jsx("span",{children:l})]}),u.jsxs("form",{onSubmit:S,className:"space-y-4",children:[!r&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"relative group",children:[u.jsx(Hi,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"text",name:"name",autoComplete:"name",placeholder:"   ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white font-medium placeholder:font-normal",value:m.name,onChange:x=>g({...m,name:x.target.value})})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(Ya,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"tel",name:"phone",autoComplete:"tel",placeholder:" ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.phone,onChange:x=>g({...m,phone:x.target.value})})]})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(iT,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"email",name:"email",autoComplete:"username",placeholder:"",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.email,onChange:x=>g({...m,email:x.target.value})})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(pw,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"password",name:"password",autoComplete:r?"current-password":"new-password",placeholder:" ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.password,onChange:x=>g({...m,password:x.target.value})})]}),u.jsx("button",{type:"submit",disabled:i,className:"w-full bg-telegram-primary hover:bg-telegram-primaryDark text-white font-bold py-3 rounded-xl shadow-lg shadow-telegram-primary/30 flex items-center justify-center gap-2 transition-transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed mt-6",children:i?u.jsx(Vi,{className:"animate-spin"}):u.jsxs(u.Fragment,{children:[r?"":" ",u.jsx(Hu,{size:20,className:"rotate-180"})]})})]}),u.jsxs("div",{className:"relative my-6",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-200 dark:border-white/10"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white dark:bg-telegram-secondaryDark text-gray-500",children:""})})]}),u.jsxs("button",{type:"button",onClick:R,disabled:i,className:"w-full bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/10 text-gray-700 dark:text-white font-medium py-3 rounded-xl flex items-center justify-center gap-3 transition-colors",children:[u.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"Google"}),"   "]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsx("button",{onClick:()=>{s(!r),c("")},className:"text-telegram-primary hover:underline text-sm font-medium",children:r?"     ":"     "})})]}),I()]})},IP=({currentUser:t,onLogout:e,banExpiresAt:n})=>{const[r,s]=O.useState(""),[i,o]=O.useState(!1),[l,c]=O.useState(!1),[h,p]=O.useState("");O.useEffect(()=>{if(n){const g=setInterval(()=>{const R=Date.now(),D=n-R;if(D<=0)p("   .     ."),clearInterval(g);else{const I=Math.floor(D/36e5),x=Math.floor(D%(1e3*60*60)/(1e3*60));p(`${I}   ${x}  `)}},6e4),S=n-Date.now();if(S>0){const R=Math.floor(S/36e5),D=Math.floor(S%(1e3*60*60)/(1e3*60));p(`${R}   ${D}  `)}return()=>clearInterval(g)}},[n]);const m=async()=>{if(r.trim()){o(!0);try{await Dq(t.uid,t.name,r),c(!0),s("")}catch(g){console.error("Error sending appeal",g),alert("   .    .")}finally{o(!1)}}};return u.jsx("div",{className:"fixed inset-0 z-[200] bg-gray-100 dark:bg-black flex flex-col items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-800",children:[u.jsxs("div",{className:"bg-red-600 p-8 flex flex-col items-center text-center text-white",children:[u.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mb-4 backdrop-blur-sm animate-pulse",children:u.jsx(Yu,{size:40})}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"   "}),n?u.jsxs("div",{className:"bg-red-800/50 px-4 py-2 rounded-lg mt-2 flex items-center gap-2",children:[u.jsx(ki,{size:16}),u.jsx("span",{className:"font-mono text-sm",children:h||"  ..."})]}):u.jsx("p",{className:"opacity-90 text-sm leading-relaxed",children:"           ."})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-start gap-3 bg-red-50 dark:bg-red-900/20 p-4 rounded-xl text-red-800 dark:text-red-200 text-sm border border-red-100 dark:border-red-800",children:[u.jsx(pw,{className:"shrink-0 mt-1",size:18}),u.jsxs("p",{className:"leading-relaxed",children:["        . ",n?"        .":"               ."]})]}),l?u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 p-6 rounded-xl text-center animate-fade-in",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-800 text-green-600 dark:text-green-200 rounded-full flex items-center justify-center mx-auto mb-3",children:u.jsx(Qu,{size:24,className:"rotate-180"})}),u.jsx("h3",{className:"font-bold text-green-700 dark:text-green-300 mb-1",children:"  "}),u.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"      .    ."}),u.jsx("button",{onClick:()=>c(!1),className:"text-xs text-gray-400 underline mt-4 hover:text-gray-600 dark:hover:text-gray-200",children:"  "})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300",children:[u.jsx(qa,{size:16}),"    /"]}),u.jsx("textarea",{value:r,onChange:g=>s(g.target.value),placeholder:"       ...",className:"w-full h-32 p-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-black/20 focus:ring-2 focus:ring-red-500 outline-none resize-none text-gray-900 dark:text-white transition-all"}),u.jsx("button",{onClick:m,disabled:i||!r.trim(),className:"w-full bg-telegram-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg",children:i?"  ...":u.jsxs(u.Fragment,{children:[u.jsx(Qu,{size:18,className:"rotate-180"})," "]})})]}),u.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800 pt-4",children:u.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 text-gray-500 hover:text-red-500 transition-colors py-2 text-sm",children:[u.jsx(Ku,{size:16}),"   "]})})]})]})})},AP="data:audio/mpeg;base64,//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",Xo=[{id:"global_chat",name:"   ",avatar:"https://cdn-icons-png.flaticon.com/512/921/921490.png",status:"online",bio:"        (   )",username:"@global_world",phone:"",type:"group",isGlobal:!0},{id:"saved",name:"  ",avatar:"",status:"online",bio:"       ",username:"@saved_messages",phone:"",type:"user"}],Jo={};Xo.forEach(t=>{Jo[t.id]={contactId:t.id,messages:[],unreadCount:0,draft:""}});const SP={uid:"",name:" ",email:"",bio:"...",username:"@guest",phone:"",role:"user",isBanned:!1,avatar:"",createdAt:Date.now(),lastSeen:Date.now(),status:"offline"},NP=()=>{var _r,nr;const[t,e]=O.useState(null),[n,r]=O.useState(!0),[s,i]=O.useState(Xo),[o,l]=O.useState(Jo),[c,h]=O.useState(SP),[p,m]=O.useState([]),[g,S]=O.useState(""),[R,D]=O.useState("default"),[I,x]=O.useState(null),[_,k]=O.useState(()=>localStorage.getItem("irangram_theme")||Us.LIGHT),[P,W]=O.useState(window.innerWidth<768),[z,w]=O.useState(!1),[v,E]=O.useState(null),[b,N]=O.useState(!1),[C,T]=O.useState(!1),[Ue,lt]=O.useState(!1),[Mt,Se]=O.useState(""),[G,ee]=O.useState(null),[se,ge]=O.useState(!1),[me,be]=O.useState(0),[it,At]=O.useState(!1),[Je,pt]=O.useState(null),[hn,mt]=O.useState(!1),ut=O.useRef(!1),gt=O.useRef(null),Yt=O.useRef(null),De=O.useRef(null),fn=O.useRef(new Audio(AP)),Le=O.useRef(new Set),Lt=O.useRef(s),Ze=O.useRef({activeContactId:I,isSettingsOpen:b,isAdminPanelOpen:C,showProfile:z,viewingContact:v,isCalling:se,showExitConfirm:hn});O.useEffect(()=>{Lt.current=s},[s]),O.useEffect(()=>{Ze.current={activeContactId:I,isSettingsOpen:b,isAdminPanelOpen:C,showProfile:z,viewingContact:v,isCalling:se,showExitConfirm:hn}},[I,b,C,z,v,se,hn]),O.useEffect(()=>{const L=X=>{X.preventDefault(),X.returnValue=""};window.addEventListener("beforeunload",L),window.history.pushState({app:!0},"",window.location.href);const $=X=>{if(ut.current)return;window.history.pushState({app:!0},"",window.location.href);const B=Ze.current;if(B.showExitConfirm){mt(!1);return}if(B.isCalling){ge(!1);return}if(B.isAdminPanelOpen){T(!1);return}if(B.isSettingsOpen){N(!1);return}if(B.showProfile||B.viewingContact){w(!1),E(null);return}if(B.activeContactId){x(null);return}mt(!0)};return window.addEventListener("popstate",$),()=>{window.removeEventListener("beforeunload",L),window.removeEventListener("popstate",$)}},[]),O.useEffect(()=>{_===Us.DARK?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[_]),O.useEffect(()=>{i(L=>{if(!L)return[];const $=new Map;return L.forEach(X=>$.set(X.id,X)),$.size!==L.length?Array.from($.values()):L})},[]),O.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),O.useEffect(()=>{const L=$=>{$.preventDefault(),ee($)};return window.addEventListener("beforeinstallprompt",L),()=>{window.removeEventListener("beforeinstallprompt",L)}},[]);const q=async()=>{if(!G)return;G.prompt();const{outcome:L}=await G.userChoice;L==="accepted"&&ee(null)};O.useEffect(()=>{const L=localStorage.getItem("irangram_accounts");L&&m(JSON.parse(L))},[]),O.useEffect(()=>{const L=Tq(async $=>{var X;if($){e($);const B=await wf($.uid);h({uid:$.uid,name:(B==null?void 0:B.name)||$.displayName||"",email:$.email||"",bio:(B==null?void 0:B.bio)||"",username:(B==null?void 0:B.username)||((X=$.email)==null?void 0:X.split("@")[0])||"",phone:(B==null?void 0:B.phone)||"",role:(B==null?void 0:B.role)||"user",isBanned:(B==null?void 0:B.isBanned)||!1,banExpiresAt:B==null?void 0:B.banExpiresAt,avatar:(B==null?void 0:B.avatar)||$.photoURL||`https://ui-avatars.com/api/?name=${$.email}`,createdAt:B==null?void 0:B.createdAt,lastSeen:B==null?void 0:B.lastSeen,status:(B==null?void 0:B.status)||"online"});const te=$.uid,oe=localStorage.getItem(`irangram_contacts_${te}`);let pe=oe?JSON.parse(oe):Xo;pe.find(Ae=>Ae.id==="global_chat")||(pe=[...Xo,...pe]);const je=Array.from(new Map(pe.map(Ae=>[Ae.id,Ae])).values());i(je);const A=localStorage.getItem(`irangram_sessions_${te}`);let re=JSON.parse(A||JSON.stringify(Jo));re.global_chat||(re.global_chat=Jo.global_chat),l(re);const he=localStorage.getItem(`irangram_wallpaper_${te}`);D(he||"default"),m(Ae=>{var wr;const Xt={uid:$.uid,name:(B==null?void 0:B.name)||$.displayName||"",avatar:(B==null?void 0:B.avatar)||`https://ui-avatars.com/api/?name=${$.email}`,email:$.email||"",username:(B==null?void 0:B.username)||((wr=$.email)==null?void 0:wr.split("@")[0])||"",role:(B==null?void 0:B.role)||"user"},gn=Ae.filter(yn=>yn.uid!==$.uid),yt=[Xt,...gn];return localStorage.setItem("irangram_accounts",JSON.stringify(yt)),yt})}else e(null),i(Xo),l(Jo);r(!1)});return()=>L()},[]),O.useEffect(()=>{if(!t)return;const L=Nq(t.uid,te=>{te.isBanned&&te.banExpiresAt&&Wq(t.uid,te),h(oe=>({...oe,...te}))});Zl(t.uid,"online");const $=setInterval(()=>{Zl(t.uid,"online")},3e4),X=()=>Zl(t.uid,"offline");window.addEventListener("beforeunload",X);const B=jq(te=>{i(oe=>{const pe=oe.map(je=>{const A=te.find(re=>re.uid===je.id);return A?{...je,status:A.status,lastSeen:new Date(A.lastSeen).toISOString(),avatar:A.avatar||je.avatar}:je});return JSON.stringify(pe)!==JSON.stringify(oe)?pe:oe})});return()=>{L(),B(),clearInterval($),window.removeEventListener("beforeunload",X),Zl(t.uid,"offline")}},[t]),O.useEffect(()=>{if(t){localStorage.setItem(`irangram_sessions_${t.uid}`,JSON.stringify(o));const L=Array.from(new Map(s.map($=>[$.id,$])).values());localStorage.setItem(`irangram_contacts_${t.uid}`,JSON.stringify(L)),localStorage.setItem(`irangram_wallpaper_${t.uid}`,R)}},[o,s,R,t]),O.useEffect(()=>{localStorage.setItem("irangram_theme",_)},[_]),O.useEffect(()=>{if(!t||c.isBanned)return;const L=uP(B=>{B.currentVersion>Dn.VERSION&&lt(!0),B.forceUpdate&&B.forceUpdate>Date.now()-6e4&&(Se("     .     ."),lt(!0))}),$=Jq(t.uid,B=>{if(B.length>0){const te=B[0];pt({title:te.title,message:te.message}),Zq(t.uid,te.id)}}),X=oP(t.uid,async B=>{for(const te of B){te.type==="group"&&(Lt.current.some(A=>A.id===te.id)||i(A=>[...A,{id:te.id,name:te.name,avatar:te.avatar,bio:te.description||"",username:"",phone:"",status:"online",type:"group"}]));const oe=te.participants.find(je=>je!==t.uid);!oe||te.type==="group"||te.id.includes("saved")?te.id.includes("saved"):!Lt.current.some(A=>A.id===oe)&&!Le.current.has(oe)&&(Le.current.add(oe),wf(oe).then(A=>{A&&i(re=>{if(!re)return[];const he=new Map(re.map(Ae=>[Ae.id,Ae]));return he.has(A.uid)?re:(he.set(A.uid,{id:A.uid,name:A.name,avatar:A.avatar,bio:A.bio,username:"@"+A.username,phone:A.phone,status:A.status,type:"user"}),Array.from(he.values()))}),Le.current.delete(oe)}));const pe=te.type==="group"?te.id:oe||"saved";l(je=>{const A=je[pe]||{contactId:pe,messages:[],unreadCount:0,draft:""};let re=A.messages;re.length===0&&te.lastMessage&&(re=[{id:"preview-"+Date.now(),text:te.lastMessage,senderId:te.lastSenderId||"them",timestamp:te.updatedAt,status:"read",type:"text",reactions:{}}]);let he=A.unreadCount;return te.lastSenderId&&te.lastSenderId!==t.uid&&I!==pe&&he===0&&(he=1),{...je,[pe]:{...A,messages:re,unreadCount:I===pe?0:he}}})}});return cP(),()=>{L(),$(),X()}},[t,c.isBanned,I]),O.useEffect(()=>{if(!t||c.isBanned)return;const L=$=>{const X=$.map(B=>({...B,senderId:B.senderId===t.uid?"me":B.senderId,reactions:B.reactions||{}}));l(B=>{var je,A,re,he,Ae,Xt;const te=(A=(je=B.global_chat)==null?void 0:je.messages.slice(-1)[0])==null?void 0:A.id,oe=(re=X.slice(-1)[0])==null?void 0:re.id;let pe=((he=B.global_chat)==null?void 0:he.unreadCount)||0;if(te!==oe&&X.length>0&&X[X.length-1].senderId!=="me"){I!=="global_chat"&&(pe+=1);try{fn.current.currentTime=0,fn.current.play().catch(()=>{})}catch{}}return{...B,global_chat:{contactId:"global_chat",messages:X,unreadCount:I==="global_chat"?0:pe,draft:((Ae=B.global_chat)==null?void 0:Ae.draft)||"",pinnedMessage:(Xt=B.global_chat)==null?void 0:Xt.pinnedMessage}}})};return gt.current=rP(L),Yt.current=nP("global_chat",$=>{l(X=>({...X,global_chat:{...X.global_chat,pinnedMessage:$}}))}),()=>{gt.current&&gt.current(),Yt.current&&Yt.current()}},[t,I,c.isBanned]),O.useEffect(()=>{if(!t||!I){De.current&&De.current();return}const L=I==="global_chat",$=s.find(X=>X.id===I);if($==null||$.type,L)De.current&&(De.current(),De.current=null);else{De.current&&De.current();const X=xi(t.uid,I);De.current=iP(X,B=>{const te=B.map(oe=>({...oe,senderId:oe.senderId===t.uid?"me":oe.senderId,reactions:oe.reactions||{}}));l(oe=>{var pe;return{...oe,[I]:{contactId:I,messages:te,unreadCount:0,draft:((pe=oe[I])==null?void 0:pe.draft)||""}}})})}return()=>{De.current&&De.current()}},[I,t,s]),O.useEffect(()=>{let L;return se?L=setInterval(()=>{be($=>$+1)},1e3):be(0),()=>clearInterval(L)},[se]);const fe=()=>k(L=>L===Us.LIGHT?Us.DARK:Us.LIGHT),ue=L=>{x(L),w(!1),E(null),l($=>({...$,[L]:{...$[L],unreadCount:0}}))},Ne=L=>{i($=>$.some(X=>X.id===L.id)?$:[...$,L]),l($=>$[L.id]?$:{...$,[L.id]:{contactId:L.id,messages:[],unreadCount:0,draft:""}}),ue(L.id)},St=async(L,$,X,B)=>{if(t)try{const te=await qq(L,$,X,B,t.uid);if(te){const oe={id:te.id,name:te.name,avatar:te.avatar,bio:$||" ",username:"",phone:"",status:"online",type:"group"};Ne(oe)}}catch(te){console.error("Error creating group",te),alert("   ")}},Un=O.useCallback(async(L,$)=>{!I||!t||(I==="global_chat"?await lP(L,$,t.uid):l(X=>{const B=X[I];if(!B)return X;const te=B.messages.map(oe=>{if(oe.id!==L)return oe;const pe={...oe.reactions},je=pe[$]||[];return je.includes("me")?(pe[$]=je.filter(A=>A!=="me"),pe[$].length===0&&delete pe[$]):pe[$]=[...je,"me"],{...oe,reactions:pe}});return{...X,[I]:{...B,messages:te}}}))},[I,t]),Zn=O.useCallback(async L=>{I&&(I==="global_chat"?await Q1(L):l($=>({...$,[I]:{...$[I],messages:$[I].messages.filter(X=>X.id!==L)}})))},[I]),vr=O.useCallback(async L=>{if(!I)return;const $={id:L.id,text:L.type==="text"?L.text.substring(0,50):L.type==="image"?"":"",sender:L.senderName||"",type:L.type};I==="global_chat"?(c.role==="admin"||c.role==="owner")&&await eP("global_chat",$):l(X=>({...X,[I]:{...X[I],pinnedMessage:$}}))},[I,c]),He=O.useCallback(async()=>{I&&(I==="global_chat"?(c.role==="admin"||c.role==="owner")&&await tP("global_chat"):l(L=>({...L,[I]:{...L[I],pinnedMessage:null}})))},[I,c]),Ce=O.useCallback(async(L,$)=>{if(!I||!t)return;if(I==="global_chat"){await Y1(L,$);return}if(!(I==="global_chat")){const B=xi(t.uid,I);await Z1(B,L,$);return}l(B=>{const te=B[I];if(!te)return B;const oe=te.messages.map(pe=>pe.id===L?{...pe,text:$,edited:!0}:pe);return{...B,[I]:{...te,messages:oe}}})},[I,t,s]),er=O.useCallback(async(L,$)=>{if(!I||!t)return;let X=L.imageUrl,B=L.fileUrl;if(L.file)try{const oe=L.type==="audio"?"audios":L.type==="image"?"images":"files",pe=`uploads/${t.uid}/${oe}/${Date.now()}_${L.fileName||"file"}`,je=await Em(L.file,pe);L.type==="image"?X=je:B=je}catch(oe){console.error("Upload failed",oe),alert("     .");return}if(I==="global_chat"){const oe=c.name?`https://ui-avatars.com/api/?name=${c.name}&background=random&color=fff&size=64`:"";await sP({text:L.text,type:L.type,imageUrl:X,fileUrl:B,fileName:L.fileName,fileSize:L.fileSize,audioDuration:L.audioDuration,isSticker:L.isSticker,replyToId:$,senderId:t.uid},{name:c.name,avatar:oe,role:c.role});return}if(!(I==="global_chat")){const oe=xi(t.uid,I);await aP(oe,I,{text:L.text,type:L.type,senderId:t.uid,imageUrl:X,fileUrl:B,fileName:L.fileName,fileSize:L.fileSize,audioDuration:L.audioDuration,isSticker:L.isSticker,replyToId:$},{name:c.name,avatar:c.avatar});return}},[I,t,c,s]),tr=async L=>{const $={...c,...L};if(h($),t){await Cq(t.uid,$),m(B=>B.map(te=>te.uid===t.uid?{...te,name:$.name,username:$.username}:te));const X=p.map(B=>B.uid===t.uid?{...B,name:$.name,username:$.username}:B);localStorage.setItem("irangram_accounts",JSON.stringify(X))}},Nn=async()=>{mt(!0)},Rs=async()=>{mt(!1),S(""),await Xd(t==null?void 0:t.uid),e(null)},Cn=async()=>{S(""),await Xd(t==null?void 0:t.uid),e(null)},U=async L=>{const $=p.find(X=>X.uid===L);$&&S($.email),await Xd(t==null?void 0:t.uid),e(null)},ye=L=>{const $={id:L.uid,name:L.name,avatar:L.avatar,bio:L.bio,username:"@"+L.username,phone:L.phone,status:"offline",type:"user"};Ne($)},Pe=L=>{L.id==="me"||L.id===(t==null?void 0:t.uid)?N(!0):E({id:L.id,name:L.name||"",avatar:L.avatar||"",username:"",phone:"",bio:" ",type:"user",status:"offline"})},Et=async L=>{const $=L||I;if($&&confirm("           ."))try{if($!=="saved"&&$!=="global_chat"){const X=xi(t.uid,$);await Kq(X)}i(X=>X.filter(B=>B.id!==$)),l(X=>{const B={...X};return delete B[$],B}),I===$&&x(null)}catch(X){console.error("Delete chat failed",X)}},pn=async()=>{if(I&&confirm("       "))try{if(I==="saved"){const L=xi(t.uid,"saved");await Q0(L)}else if(I!=="global_chat"){const L=xi(t.uid,I);await Q0(L)}}catch(L){console.error("Clear history failed",L)}},mn=async()=>{if(I&&confirm("       "))try{await Gq(t.uid,I),i(L=>L.filter($=>$.id!==I)),x(null),alert("  .")}catch(L){console.error("Block user failed",L)}},kt=L=>{t&&Pq(t.uid,L)};return n?u.jsx("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-white dark:bg-black text-telegram-primary",children:u.jsx(Gu,{className:"animate-spin w-10 h-10"})}):t?c.isBanned?u.jsx(IP,{currentUser:{uid:t.uid,name:c.name},onLogout:()=>mt(!0),banExpiresAt:c.banExpiresAt}):u.jsxs("div",{className:"flex flex-col h-[100dvh] w-full overflow-hidden bg-white dark:bg-black font-sans relative",children:[hn&&u.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full border border-gray-200 dark:border-gray-700 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Ku,{size:32})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"  "}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-sm",children:"            ."}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>mt(!1),className:"flex-1 py-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:""}),u.jsx("button",{onClick:()=>{I===null?Rs():(ut.current=!0,window.history.back())},className:"flex-1 py-3 rounded-xl bg-red-600 text-white font-bold hover:bg-red-700 transition-colors",children:" "})]})]})}),Je&&u.jsx("div",{className:"fixed inset-0 z-[120] bg-black/60 flex items-center justify-center p-6 animate-fade-in backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full border-t-4 border-blue-500",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-600 dark:text-blue-400",children:[u.jsx(mp,{size:28}),u.jsx("h3",{className:"text-xl font-bold",children:Je.title})]}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:Je.message}),u.jsx("button",{onClick:()=>pt(null),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-xl transition-colors",children:" "})]})}),Ue&&u.jsxs("div",{onClick:()=>window.location.reload(),className:"fixed bottom-6 left-6 z-[100] bg-telegram-primary text-white p-4 rounded-2xl shadow-2xl shadow-blue-500/30 flex items-center gap-4 cursor-pointer hover:scale-105 transition-transform animate-slide-in",children:[u.jsx("div",{className:"bg-white/20 p-2.5 rounded-full",children:u.jsx(Gu,{size:24,className:"animate-spin"})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"font-bold text-sm",children:" "}),u.jsx("p",{className:"text-xs opacity-90 mt-0.5",children:Mt||"    "})]})]}),se&&u.jsxs("div",{className:"fixed inset-0 z-[90] bg-gray-900/95 backdrop-blur-md flex flex-col items-center justify-between py-12 text-white animate-fade-in",children:[u.jsxs("div",{className:"flex flex-col items-center mt-10",children:[u.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white/20 mb-4 shadow-2xl",children:u.jsx("img",{src:((_r=s.find(L=>L.id===I))==null?void 0:_r.avatar)||"https://via.placeholder.com/150",className:"w-full h-full object-cover"})}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:((nr=s.find(L=>L.id===I))==null?void 0:nr.name)||" "}),u.jsx("p",{className:"text-white/60 text-lg animate-pulse",children:me>0?`${Math.floor(me/60)}:${(me%60).toString().padStart(2,"0")}`:"  ..."})]}),u.jsxs("div",{className:"flex items-center gap-8 mb-10",children:[u.jsx("button",{onClick:()=>At(!it),className:`p-4 rounded-full transition-all ${it?"bg-white text-gray-900":"bg-white/10 hover:bg-white/20"}`,children:it?u.jsx(aT,{size:32}):u.jsx(mw,{size:32})}),u.jsx("button",{onClick:()=>{ge(!1)},className:"p-6 bg-red-500 rounded-full shadow-lg hover:bg-red-600 hover:scale-110 transition-all",children:u.jsx(cT,{size:40})}),u.jsx("button",{className:"p-4 bg-white/10 hover:bg-white/20 rounded-full transition-all",children:u.jsx(Ya,{size:32,className:"rotate-180"})})]})]}),C&&u.jsx(bP,{onClose:()=>T(!1),currentUserEmail:t.email,currentUserRole:c.role||"user",onStartChat:ye}),u.jsx(kP,{isOpen:b,onClose:()=>N(!1),userProfile:c,onSave:tr,wallpaper:R,onSaveWallpaper:D}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("div",{className:`
            ${P&&I?"hidden":"flex"}
            ${P?"w-full":"w-80 lg:w-96"} 
            flex-col h-full z-20 transition-all duration-300 shadow-xl bg-white dark:bg-telegram-bgDark
          `,children:[u.jsx("div",{className:"flex-1 overflow-hidden",children:u.jsx(pP,{contacts:s,sessions:o,activeContactId:I,onSelectContact:ue,toggleTheme:fe,theme:_,userProfile:c,onOpenSettings:()=>N(!0),onOpenAdminPanel:()=>T(!0),onAddContact:Ne,showInstallButton:!!G,onInstall:q,storedAccounts:p,onAddAccount:Cn,onSwitchAccount:U,onCreateGroup:St,onDeleteChat:Et})}),u.jsxs("div",{className:"p-2 border-t border-telegram-border dark:border-telegram-borderDark flex justify-between items-center bg-gray-50 dark:bg-telegram-bgDark",children:[u.jsxs("span",{className:"text-xs text-gray-400 px-2",children:["v",Dn.VERSION]}),u.jsx("button",{onClick:Nn,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-white/5 rounded-lg",title:" ",children:u.jsx(Ku,{size:18})})]})]}),u.jsxs("div",{className:`
            ${P&&!I?"hidden":"flex"}
            flex-1 h-full relative flex-col min-w-0
          `,children:[u.jsx("div",{className:"flex-1 h-full relative flex flex-col min-w-0",children:I?u.jsx(wP,{contact:s.find(L=>L.id===I),messages:o[I].messages,pinnedMessage:o[I].pinnedMessage,myId:"me",myRole:c.role||"user",onSendMessage:er,onEditMessage:Ce,onDeleteMessage:Zn,onPinMessage:vr,onUnpinMessage:He,onReaction:Un,onBack:()=>{window.history.back()},isMobile:P,onProfileClick:()=>w(!0),onAvatarClick:Pe,wallpaper:R,onCall:()=>ge(!0),onDeleteChat:()=>Et(),onClearHistory:pn,onBlockUser:mn,onTyping:kt},I):u.jsx("div",{className:"h-full w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark text-gray-400 dark:text-gray-600 pattern-bg",children:u.jsxs("div",{className:"text-center p-6 bg-white/50 dark:bg-black/50 backdrop-blur-sm rounded-2xl",children:[u.jsx("span",{className:"text-4xl block mb-4",children:""}),u.jsx("h3",{className:"font-bold mb-2",children:"   "}),u.jsx("p",{className:"text-sm",children:"    "})]})})}),(z||v)&&u.jsx("div",{className:`
                    absolute inset-y-0 right-0 z-50 bg-white dark:bg-telegram-secondaryDark shadow-2xl transition-transform duration-300
                    ${P?"w-full":"w-80 border-l border-telegram-border dark:border-telegram-borderDark"}
                `,children:u.jsx(xP,{contact:v||s.find(L=>L.id===I),onClose:()=>{w(!1),E(null)},onStartChat:v?L=>{Ne(L),E(null)}:void 0})})]})]})]}):u.jsx(TP,{onSuccess:e,storedAccounts:p,initialEmail:g})},eE=document.getElementById("root");if(!eE)throw new Error("Could not find root element to mount to");const CP=Jd.createRoot(eE);CP.render(u.jsx(OE.StrictMode,{children:u.jsx(NP,{})}));
