(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function AE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ev={exports:{}},gc={},tv={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ha=Symbol.for("react.element"),SE=Symbol.for("react.portal"),NE=Symbol.for("react.fragment"),CE=Symbol.for("react.strict_mode"),RE=Symbol.for("react.profiler"),PE=Symbol.for("react.provider"),qE=Symbol.for("react.context"),jE=Symbol.for("react.forward_ref"),DE=Symbol.for("react.suspense"),OE=Symbol.for("react.memo"),ME=Symbol.for("react.lazy"),lg=Symbol.iterator;function LE(t){return t===null||typeof t!="object"?null:(t=lg&&t[lg]||t["@@iterator"],typeof t=="function"?t:null)}var nv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rv=Object.assign,sv={};function mo(t,e,n){this.props=t,this.context=e,this.refs=sv,this.updater=n||nv}mo.prototype.isReactComponent={};mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iv(){}iv.prototype=mo.prototype;function Ef(t,e,n){this.props=t,this.context=e,this.refs=sv,this.updater=n||nv}var bf=Ef.prototype=new iv;bf.constructor=Ef;rv(bf,mo.prototype);bf.isPureReactComponent=!0;var ug=Array.isArray,ov=Object.prototype.hasOwnProperty,kf={current:null},av={key:!0,ref:!0,__self:!0,__source:!0};function lv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ov.call(e,r)&&!av.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ha,type:t,key:i,ref:o,props:s,_owner:kf.current}}function VE(t,e){return{$$typeof:Ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function If(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ha}function UE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cg=/\/+/g;function hd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UE(""+t.key):e.toString(36)}function tu(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ha:case SE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+hd(o,0):r,ug(s)?(n="",t!=null&&(n=t.replace(cg,"$&/")+"/"),tu(s,e,n,"",function(h){return h})):s!=null&&(If(s)&&(s=VE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(cg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ug(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+hd(i,l);o+=tu(i,e,n,c,s)}else if(c=LE(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+hd(i,l++),o+=tu(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Sl(t,e,n){if(t==null)return t;var r=[],s=0;return tu(t,r,"","",function(i){return e.call(n,i,s++)}),r}function FE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},nu={transition:null},zE={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:nu,ReactCurrentOwner:kf};function uv(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:Sl,forEach:function(t,e,n){Sl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sl(t,function(){e++}),e},toArray:function(t){return Sl(t,function(e){return e})||[]},only:function(t){if(!If(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=mo;_e.Fragment=NE;_e.Profiler=RE;_e.PureComponent=Ef;_e.StrictMode=CE;_e.Suspense=DE;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE;_e.act=uv;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=kf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ov.call(e,c)&&!av.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ha,type:t.type,key:s,ref:i,props:r,_owner:o}};_e.createContext=function(t){return t={$$typeof:qE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PE,_context:t},t.Consumer=t};_e.createElement=lv;_e.createFactory=function(t){var e=lv.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:jE,render:t}};_e.isValidElement=If;_e.lazy=function(t){return{$$typeof:ME,_payload:{_status:-1,_result:t},_init:FE}};_e.memo=function(t,e){return{$$typeof:OE,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=nu.transition;nu.transition={};try{t()}finally{nu.transition=e}};_e.unstable_act=uv;_e.useCallback=function(t,e){return on.current.useCallback(t,e)};_e.useContext=function(t){return on.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return on.current.useDeferredValue(t)};_e.useEffect=function(t,e){return on.current.useEffect(t,e)};_e.useId=function(){return on.current.useId()};_e.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return on.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};_e.useRef=function(t){return on.current.useRef(t)};_e.useState=function(t){return on.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return on.current.useTransition()};_e.version="18.3.1";tv.exports=_e;var O=tv.exports;const Zd=AE(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE=O,$E=Symbol.for("react.element"),WE=Symbol.for("react.fragment"),HE=Object.prototype.hasOwnProperty,KE=BE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GE={key:!0,ref:!0,__self:!0,__source:!0};function cv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HE.call(e,r)&&!GE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$E,type:t,key:i,ref:o,props:s,_owner:KE.current}}gc.Fragment=WE;gc.jsx=cv;gc.jsxs=cv;ev.exports=gc;var u=ev.exports,eh={},dv={exports:{}},In={},hv={exports:{}},fv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ee){var oe=G.length;G.push(ee);e:for(;0<oe;){var ye=oe-1>>>1,pe=G[ye];if(0<s(pe,ee))G[ye]=ee,G[oe]=pe,oe=ye;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ee=G[0],oe=G.pop();if(oe!==ee){G[0]=oe;e:for(var ye=0,pe=G.length,ve=pe>>>1;ye<ve;){var Ve=2*(ye+1)-1,gt=G[Ve],dt=Ve+1,It=G[dt];if(0>s(gt,oe))dt<pe&&0>s(It,gt)?(G[ye]=It,G[dt]=oe,ye=dt):(G[ye]=gt,G[Ve]=oe,ye=Ve);else if(dt<pe&&0>s(It,oe))G[ye]=It,G[dt]=oe,ye=dt;else break e}}return ee}function s(G,ee){var oe=G.sortIndex-ee.sortIndex;return oe!==0?oe:G.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,y=3,A=!1,P=!1,D=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(G){for(var ee=n(h);ee!==null;){if(ee.callback===null)r(h);else if(ee.startTime<=G)r(h),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(h)}}function q(G){if(D=!1,I(G),!P)if(n(c)!==null)P=!0,kt(W);else{var ee=n(h);ee!==null&&ct(q,ee.startTime-G)}}function W(G,ee){P=!1,D&&(D=!1,x(g),g=-1),A=!0;var oe=y;try{for(I(ee),m=n(c);m!==null&&(!(m.expirationTime>ee)||G&&!T());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,y=m.priorityLevel;var pe=ye(m.expirationTime<=ee);ee=t.unstable_now(),typeof pe=="function"?m.callback=pe:m===n(c)&&r(c),I(ee)}else r(c);m=n(c)}if(m!==null)var ve=!0;else{var Ve=n(h);Ve!==null&&ct(q,Ve.startTime-ee),ve=!1}return ve}finally{m=null,y=oe,A=!1}}var $=!1,w=null,g=-1,E=5,k=-1;function T(){return!(t.unstable_now()-k<E)}function C(){if(w!==null){var G=t.unstable_now();k=G;var ee=!0;try{ee=w(!0,G)}finally{ee?b():($=!1,w=null)}}else $=!1}var b;if(typeof _=="function")b=function(){_(C)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Ze=Te.port2;Te.port1.onmessage=C,b=function(){Ze.postMessage(null)}}else b=function(){S(C,0)};function kt(G){w=G,$||($=!0,b())}function ct(G,ee){g=S(function(){G(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){P||A||(P=!0,kt(W))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var oe=y;y=ee;try{return G()}finally{y=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ee){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var oe=y;y=G;try{return ee()}finally{y=oe}},t.unstable_scheduleCallback=function(G,ee,oe){var ye=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ye+oe:ye):oe=ye,G){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=oe+pe,G={id:p++,callback:ee,priorityLevel:G,startTime:oe,expirationTime:pe,sortIndex:-1},oe>ye?(G.sortIndex=oe,e(h,G),n(c)===null&&G===n(h)&&(D?(x(g),g=-1):D=!0,ct(q,oe-ye))):(G.sortIndex=pe,e(c,G),P||A||(P=!0,kt(W))),G},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(G){var ee=y;return function(){var oe=y;y=ee;try{return G.apply(this,arguments)}finally{y=oe}}}})(fv);hv.exports=fv;var QE=hv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE=O,bn=QE;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pv=new Set,ma={};function mi(t,e){Zi(t,e),Zi(t+"Capture",e)}function Zi(t,e){for(ma[t]=e,t=0;t<e.length;t++)pv.add(e[t])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),th=Object.prototype.hasOwnProperty,XE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dg={},hg={};function JE(t){return th.call(hg,t)?!0:th.call(dg,t)?!1:XE.test(t)?hg[t]=!0:(dg[t]=!0,!1)}function ZE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eb(t,e,n,r){if(e===null||typeof e>"u"||ZE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var Tf=/[\-:]([a-z])/g;function Af(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Tf,Af);Dt[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Tf,Af);Dt[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Tf,Af);Dt[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sf(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eb(e,n,s,r)&&(n=null),r||s===null?JE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ur=YE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nl=Symbol.for("react.element"),Ci=Symbol.for("react.portal"),Ri=Symbol.for("react.fragment"),Nf=Symbol.for("react.strict_mode"),nh=Symbol.for("react.profiler"),mv=Symbol.for("react.provider"),gv=Symbol.for("react.context"),Cf=Symbol.for("react.forward_ref"),rh=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),Rf=Symbol.for("react.memo"),Xr=Symbol.for("react.lazy"),yv=Symbol.for("react.offscreen"),fg=Symbol.iterator;function Po(t){return t===null||typeof t!="object"?null:(t=fg&&t[fg]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,fd;function zo(t){if(fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fd=e&&e[1]||""}return`
`+fd+t}var pd=!1;function md(t,e){if(!t||pd)return"";pd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{pd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function tb(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=md(t.type,!1),t;case 11:return t=md(t.type.render,!1),t;case 1:return t=md(t.type,!0),t;default:return""}}function ih(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ri:return"Fragment";case Ci:return"Portal";case nh:return"Profiler";case Nf:return"StrictMode";case rh:return"Suspense";case sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gv:return(t.displayName||"Context")+".Consumer";case mv:return(t._context.displayName||"Context")+".Provider";case Cf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rf:return e=t.displayName||null,e!==null?e:ih(t.type)||"Memo";case Xr:e=t._payload,t=t._init;try{return ih(t(e))}catch{}}return null}function nb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ih(e);case 8:return e===Nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rb(t){var e=vv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=rb(t))}function _v(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ku(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oh(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wv(t,e){e=e.checked,e!=null&&Sf(t,"checked",e,!1)}function ah(t,e){wv(t,e);var n=xs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lh(t,e.type,n):e.hasOwnProperty("defaultValue")&&lh(t,e.type,xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lh(t,e,n){(e!=="number"||ku(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bo=Array.isArray;function Bi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function uh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Bo(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xs(n)}}function xv(t,e){var n=xs(e.value),r=xs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function yg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ev(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ch(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ev(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Rl,bv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Rl=Rl||document.createElement("div"),Rl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Rl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ga(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ea={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sb=["Webkit","ms","Moz","O"];Object.keys(ea).forEach(function(t){sb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ea[e]=ea[t]})});function kv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ea.hasOwnProperty(t)&&ea[t]?(""+e).trim():e+"px"}function Iv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ib=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dh(t,e){if(e){if(ib[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function hh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fh=null;function Pf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ph=null,$i=null,Wi=null;function vg(t){if(t=Qa(t)){if(typeof ph!="function")throw Error(K(280));var e=t.stateNode;e&&(e=xc(e),ph(t.stateNode,t.type,e))}}function Tv(t){$i?Wi?Wi.push(t):Wi=[t]:$i=t}function Av(){if($i){var t=$i,e=Wi;if(Wi=$i=null,vg(t),e)for(t=0;t<e.length;t++)vg(e[t])}}function Sv(t,e){return t(e)}function Nv(){}var gd=!1;function Cv(t,e,n){if(gd)return t(e,n);gd=!0;try{return Sv(t,e,n)}finally{gd=!1,($i!==null||Wi!==null)&&(Nv(),Av())}}function ya(t,e){var n=t.stateNode;if(n===null)return null;var r=xc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var mh=!1;if(Pr)try{var qo={};Object.defineProperty(qo,"passive",{get:function(){mh=!0}}),window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{mh=!1}function ob(t,e,n,r,s,i,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var ta=!1,Iu=null,Tu=!1,gh=null,ab={onError:function(t){ta=!0,Iu=t}};function lb(t,e,n,r,s,i,o,l,c){ta=!1,Iu=null,ob.apply(ab,arguments)}function ub(t,e,n,r,s,i,o,l,c){if(lb.apply(this,arguments),ta){if(ta){var h=Iu;ta=!1,Iu=null}else throw Error(K(198));Tu||(Tu=!0,gh=h)}}function gi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _g(t){if(gi(t)!==t)throw Error(K(188))}function cb(t){var e=t.alternate;if(!e){if(e=gi(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return _g(s),t;if(i===r)return _g(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Pv(t){return t=cb(t),t!==null?qv(t):null}function qv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qv(t);if(e!==null)return e;t=t.sibling}return null}var jv=bn.unstable_scheduleCallback,wg=bn.unstable_cancelCallback,db=bn.unstable_shouldYield,hb=bn.unstable_requestPaint,at=bn.unstable_now,fb=bn.unstable_getCurrentPriorityLevel,qf=bn.unstable_ImmediatePriority,Dv=bn.unstable_UserBlockingPriority,Au=bn.unstable_NormalPriority,pb=bn.unstable_LowPriority,Ov=bn.unstable_IdlePriority,yc=null,ur=null;function mb(t){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(yc,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:vb,gb=Math.log,yb=Math.LN2;function vb(t){return t>>>=0,t===0?32:31-(gb(t)/yb|0)|0}var Pl=64,ql=4194304;function $o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Su(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=$o(l):(i&=o,i!==0&&(r=$o(i)))}else o=n&~s,o!==0?r=$o(o):i!==0&&(r=$o(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yn(e),s=1<<n,r|=t[n],e&=~s;return r}function _b(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Yn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=_b(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function yh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mv(){var t=Pl;return Pl<<=1,!(Pl&4194240)&&(Pl=64),t}function yd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ka(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function xb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Pe=0;function Lv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vv,Df,Uv,Fv,zv,vh=!1,jl=[],cs=null,ds=null,hs=null,va=new Map,_a=new Map,Zr=[],Eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xg(t,e){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":hs=null;break;case"pointerover":case"pointerout":va.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(e.pointerId)}}function jo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Qa(e),e!==null&&Df(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function bb(t,e,n,r,s){switch(e){case"focusin":return cs=jo(cs,t,e,n,r,s),!0;case"dragenter":return ds=jo(ds,t,e,n,r,s),!0;case"mouseover":return hs=jo(hs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return va.set(i,jo(va.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,_a.set(i,jo(_a.get(i)||null,t,e,n,r,s)),!0}return!1}function Bv(t){var e=Ks(t.target);if(e!==null){var n=gi(e);if(n!==null){if(e=n.tag,e===13){if(e=Rv(n),e!==null){t.blockedOn=e,zv(t.priority,function(){Uv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ru(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fh=r,n.target.dispatchEvent(r),fh=null}else return e=Qa(n),e!==null&&Df(e),t.blockedOn=n,!1;e.shift()}return!0}function Eg(t,e,n){ru(t)&&n.delete(e)}function kb(){vh=!1,cs!==null&&ru(cs)&&(cs=null),ds!==null&&ru(ds)&&(ds=null),hs!==null&&ru(hs)&&(hs=null),va.forEach(Eg),_a.forEach(Eg)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,vh||(vh=!0,bn.unstable_scheduleCallback(bn.unstable_NormalPriority,kb)))}function wa(t){function e(s){return Do(s,t)}if(0<jl.length){Do(jl[0],t);for(var n=1;n<jl.length;n++){var r=jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(cs!==null&&Do(cs,t),ds!==null&&Do(ds,t),hs!==null&&Do(hs,t),va.forEach(e),_a.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)Bv(n),n.blockedOn===null&&Zr.shift()}var Hi=Ur.ReactCurrentBatchConfig,Nu=!0;function Ib(t,e,n,r){var s=Pe,i=Hi.transition;Hi.transition=null;try{Pe=1,Of(t,e,n,r)}finally{Pe=s,Hi.transition=i}}function Tb(t,e,n,r){var s=Pe,i=Hi.transition;Hi.transition=null;try{Pe=4,Of(t,e,n,r)}finally{Pe=s,Hi.transition=i}}function Of(t,e,n,r){if(Nu){var s=_h(t,e,n,r);if(s===null)Ad(t,e,r,Cu,n),xg(t,r);else if(bb(s,t,e,n,r))r.stopPropagation();else if(xg(t,r),e&4&&-1<Eb.indexOf(t)){for(;s!==null;){var i=Qa(s);if(i!==null&&Vv(i),i=_h(t,e,n,r),i===null&&Ad(t,e,r,Cu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ad(t,e,r,null,n)}}var Cu=null;function _h(t,e,n,r){if(Cu=null,t=Pf(r),t=Ks(t),t!==null)if(e=gi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cu=t,null}function $v(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fb()){case qf:return 1;case Dv:return 4;case Au:case pb:return 16;case Ov:return 536870912;default:return 16}default:return 16}}var os=null,Mf=null,su=null;function Wv(){if(su)return su;var t,e=Mf,n=e.length,r,s="value"in os?os.value:os.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return su=s.slice(t,1<r?1-r:void 0)}function iu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dl(){return!0}function bg(){return!1}function Tn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dl:bg,this.isPropagationStopped=bg,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),e}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lf=Tn(go),Ga=Xe({},go,{view:0,detail:0}),Ab=Tn(Ga),vd,_d,Oo,vc=Xe({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(vd=t.screenX-Oo.screenX,_d=t.screenY-Oo.screenY):_d=vd=0,Oo=t),vd)},movementY:function(t){return"movementY"in t?t.movementY:_d}}),kg=Tn(vc),Sb=Xe({},vc,{dataTransfer:0}),Nb=Tn(Sb),Cb=Xe({},Ga,{relatedTarget:0}),wd=Tn(Cb),Rb=Xe({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),Pb=Tn(Rb),qb=Xe({},go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jb=Tn(qb),Db=Xe({},go,{data:0}),Ig=Tn(Db),Ob={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lb[t])?!!e[t]:!1}function Vf(){return Vb}var Ub=Xe({},Ga,{key:function(t){if(t.key){var e=Ob[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=iu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(t){return t.type==="keypress"?iu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?iu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fb=Tn(Ub),zb=Xe({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tg=Tn(zb),Bb=Xe({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),$b=Tn(Bb),Wb=Xe({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hb=Tn(Wb),Kb=Xe({},vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gb=Tn(Kb),Qb=[9,13,27,32],Uf=Pr&&"CompositionEvent"in window,na=null;Pr&&"documentMode"in document&&(na=document.documentMode);var Yb=Pr&&"TextEvent"in window&&!na,Hv=Pr&&(!Uf||na&&8<na&&11>=na),Ag=" ",Sg=!1;function Kv(t,e){switch(t){case"keyup":return Qb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pi=!1;function Xb(t,e){switch(t){case"compositionend":return Gv(e);case"keypress":return e.which!==32?null:(Sg=!0,Ag);case"textInput":return t=e.data,t===Ag&&Sg?null:t;default:return null}}function Jb(t,e){if(Pi)return t==="compositionend"||!Uf&&Kv(t,e)?(t=Wv(),su=Mf=os=null,Pi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Hv&&e.locale!=="ko"?null:e.data;default:return null}}var Zb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zb[t.type]:e==="textarea"}function Qv(t,e,n,r){Tv(r),e=Ru(e,"onChange"),0<e.length&&(n=new Lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ra=null,xa=null;function ek(t){o_(t,0)}function _c(t){var e=Di(t);if(_v(e))return t}function tk(t,e){if(t==="change")return e}var Yv=!1;if(Pr){var xd;if(Pr){var Ed="oninput"in document;if(!Ed){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),Ed=typeof Cg.oninput=="function"}xd=Ed}else xd=!1;Yv=xd&&(!document.documentMode||9<document.documentMode)}function Rg(){ra&&(ra.detachEvent("onpropertychange",Xv),xa=ra=null)}function Xv(t){if(t.propertyName==="value"&&_c(xa)){var e=[];Qv(e,xa,t,Pf(t)),Cv(ek,e)}}function nk(t,e,n){t==="focusin"?(Rg(),ra=e,xa=n,ra.attachEvent("onpropertychange",Xv)):t==="focusout"&&Rg()}function rk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _c(xa)}function sk(t,e){if(t==="click")return _c(e)}function ik(t,e){if(t==="input"||t==="change")return _c(e)}function ok(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zn=typeof Object.is=="function"?Object.is:ok;function Ea(t,e){if(Zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!th.call(e,s)||!Zn(t[s],e[s]))return!1}return!0}function Pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,e){var n=Pg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pg(n)}}function Jv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zv(){for(var t=window,e=ku();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ku(t.document)}return e}function Ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ak(t){var e=Zv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jv(n.ownerDocument.documentElement,n)){if(r!==null&&Ff(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qg(n,i);var o=qg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lk=Pr&&"documentMode"in document&&11>=document.documentMode,qi=null,wh=null,sa=null,xh=!1;function jg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xh||qi==null||qi!==ku(r)||(r=qi,"selectionStart"in r&&Ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&Ea(sa,r)||(sa=r,r=Ru(wh,"onSelect"),0<r.length&&(e=new Lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qi)))}function Ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ji={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},bd={},e_={};Pr&&(e_=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function wc(t){if(bd[t])return bd[t];if(!ji[t])return t;var e=ji[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in e_)return bd[t]=e[n];return t}var t_=wc("animationend"),n_=wc("animationiteration"),r_=wc("animationstart"),s_=wc("transitionend"),i_=new Map,Dg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(t,e){i_.set(t,e),mi(e,[t])}for(var kd=0;kd<Dg.length;kd++){var Id=Dg[kd],uk=Id.toLowerCase(),ck=Id[0].toUpperCase()+Id.slice(1);Ns(uk,"on"+ck)}Ns(t_,"onAnimationEnd");Ns(n_,"onAnimationIteration");Ns(r_,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(s_,"onTransitionEnd");Zi("onMouseEnter",["mouseout","mouseover"]);Zi("onMouseLeave",["mouseout","mouseover"]);Zi("onPointerEnter",["pointerout","pointerover"]);Zi("onPointerLeave",["pointerout","pointerover"]);mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mi("onBeforeInput",["compositionend","keypress","textInput","paste"]);mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wo));function Og(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ub(r,e,void 0,t),t.currentTarget=null}function o_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Og(s,l,h),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Og(s,l,h),i=c}}}if(Tu)throw t=gh,Tu=!1,gh=null,t}function Be(t,e){var n=e[Th];n===void 0&&(n=e[Th]=new Set);var r=t+"__bubble";n.has(r)||(a_(e,t,2,!1),n.add(r))}function Td(t,e,n){var r=0;e&&(r|=4),a_(n,t,r,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function ba(t){if(!t[Ml]){t[Ml]=!0,pv.forEach(function(n){n!=="selectionchange"&&(dk.has(n)||Td(n,!1,t),Td(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,Td("selectionchange",!1,e))}}function a_(t,e,n,r){switch($v(e)){case 1:var s=Ib;break;case 4:s=Tb;break;default:s=Of}n=s.bind(null,e,n,t),s=void 0,!mh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ad(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ks(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Cv(function(){var h=i,p=Pf(n),m=[];e:{var y=i_.get(t);if(y!==void 0){var A=Lf,P=t;switch(t){case"keypress":if(iu(n)===0)break e;case"keydown":case"keyup":A=Fb;break;case"focusin":P="focus",A=wd;break;case"focusout":P="blur",A=wd;break;case"beforeblur":case"afterblur":A=wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Nb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=$b;break;case t_:case n_:case r_:A=Pb;break;case s_:A=Hb;break;case"scroll":A=Ab;break;case"wheel":A=Gb;break;case"copy":case"cut":case"paste":A=jb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Tg}var D=(e&4)!==0,S=!D&&t==="scroll",x=D?y!==null?y+"Capture":null:y;D=[];for(var _=h,I;_!==null;){I=_;var q=I.stateNode;if(I.tag===5&&q!==null&&(I=q,x!==null&&(q=ya(_,x),q!=null&&D.push(ka(_,q,I)))),S)break;_=_.return}0<D.length&&(y=new A(y,P,null,n,p),m.push({event:y,listeners:D}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",A=t==="mouseout"||t==="pointerout",y&&n!==fh&&(P=n.relatedTarget||n.fromElement)&&(Ks(P)||P[qr]))break e;if((A||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,A?(P=n.relatedTarget||n.toElement,A=h,P=P?Ks(P):null,P!==null&&(S=gi(P),P!==S||P.tag!==5&&P.tag!==6)&&(P=null)):(A=null,P=h),A!==P)){if(D=kg,q="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(D=Tg,q="onPointerLeave",x="onPointerEnter",_="pointer"),S=A==null?y:Di(A),I=P==null?y:Di(P),y=new D(q,_+"leave",A,n,p),y.target=S,y.relatedTarget=I,q=null,Ks(p)===h&&(D=new D(x,_+"enter",P,n,p),D.target=I,D.relatedTarget=S,q=D),S=q,A&&P)t:{for(D=A,x=P,_=0,I=D;I;I=ki(I))_++;for(I=0,q=x;q;q=ki(q))I++;for(;0<_-I;)D=ki(D),_--;for(;0<I-_;)x=ki(x),I--;for(;_--;){if(D===x||x!==null&&D===x.alternate)break t;D=ki(D),x=ki(x)}D=null}else D=null;A!==null&&Mg(m,y,A,D,!1),P!==null&&S!==null&&Mg(m,S,P,D,!0)}}e:{if(y=h?Di(h):window,A=y.nodeName&&y.nodeName.toLowerCase(),A==="select"||A==="input"&&y.type==="file")var W=tk;else if(Ng(y))if(Yv)W=ik;else{W=rk;var $=nk}else(A=y.nodeName)&&A.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(W=sk);if(W&&(W=W(t,h))){Qv(m,W,n,p);break e}$&&$(t,y,h),t==="focusout"&&($=y._wrapperState)&&$.controlled&&y.type==="number"&&lh(y,"number",y.value)}switch($=h?Di(h):window,t){case"focusin":(Ng($)||$.contentEditable==="true")&&(qi=$,wh=h,sa=null);break;case"focusout":sa=wh=qi=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,jg(m,n,p);break;case"selectionchange":if(lk)break;case"keydown":case"keyup":jg(m,n,p)}var w;if(Uf)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Pi?Kv(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Hv&&n.locale!=="ko"&&(Pi||g!=="onCompositionStart"?g==="onCompositionEnd"&&Pi&&(w=Wv()):(os=p,Mf="value"in os?os.value:os.textContent,Pi=!0)),$=Ru(h,g),0<$.length&&(g=new Ig(g,t,null,n,p),m.push({event:g,listeners:$}),w?g.data=w:(w=Gv(n),w!==null&&(g.data=w)))),(w=Yb?Xb(t,n):Jb(t,n))&&(h=Ru(h,"onBeforeInput"),0<h.length&&(p=new Ig("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=w))}o_(m,e)})}function ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ru(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ya(t,n),i!=null&&r.unshift(ka(t,i,s)),i=ya(t,e),i!=null&&r.push(ka(t,i,s))),t=t.return}return r}function ki(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Mg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=ya(n,i),c!=null&&o.unshift(ka(n,c,l))):s||(c=ya(n,i),c!=null&&o.push(ka(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hk=/\r\n?/g,fk=/\u0000|\uFFFD/g;function Lg(t){return(typeof t=="string"?t:""+t).replace(hk,`
`).replace(fk,"")}function Ll(t,e,n){if(e=Lg(e),Lg(t)!==e&&n)throw Error(K(425))}function Pu(){}var Eh=null,bh=null;function kh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ih=typeof setTimeout=="function"?setTimeout:void 0,pk=typeof clearTimeout=="function"?clearTimeout:void 0,Vg=typeof Promise=="function"?Promise:void 0,mk=typeof queueMicrotask=="function"?queueMicrotask:typeof Vg<"u"?function(t){return Vg.resolve(null).then(t).catch(gk)}:Ih;function gk(t){setTimeout(function(){throw t})}function Sd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wa(e)}function fs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ug(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yo=Math.random().toString(36).slice(2),ar="__reactFiber$"+yo,Ia="__reactProps$"+yo,qr="__reactContainer$"+yo,Th="__reactEvents$"+yo,yk="__reactListeners$"+yo,vk="__reactHandles$"+yo;function Ks(t){var e=t[ar];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qr]||n[ar]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ug(t);t!==null;){if(n=t[ar])return n;t=Ug(t)}return e}t=n,n=t.parentNode}return null}function Qa(t){return t=t[ar]||t[qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function xc(t){return t[Ia]||null}var Ah=[],Oi=-1;function Cs(t){return{current:t}}function We(t){0>Oi||(t.current=Ah[Oi],Ah[Oi]=null,Oi--)}function Le(t,e){Oi++,Ah[Oi]=t.current,t.current=e}var Es={},Yt=Cs(Es),hn=Cs(!1),ni=Es;function eo(t,e){var n=t.type.contextTypes;if(!n)return Es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function fn(t){return t=t.childContextTypes,t!=null}function qu(){We(hn),We(Yt)}function Fg(t,e,n){if(Yt.current!==Es)throw Error(K(168));Le(Yt,e),Le(hn,n)}function l_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,nb(t)||"Unknown",s));return Xe({},n,r)}function ju(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Es,ni=Yt.current,Le(Yt,t),Le(hn,hn.current),!0}function zg(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=l_(t,e,ni),r.__reactInternalMemoizedMergedChildContext=t,We(hn),We(Yt),Le(Yt,t)):We(hn),Le(hn,n)}var Er=null,Ec=!1,Nd=!1;function u_(t){Er===null?Er=[t]:Er.push(t)}function _k(t){Ec=!0,u_(t)}function Rs(){if(!Nd&&Er!==null){Nd=!0;var t=0,e=Pe;try{var n=Er;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Er=null,Ec=!1}catch(s){throw Er!==null&&(Er=Er.slice(t+1)),jv(qf,Rs),s}finally{Pe=e,Nd=!1}}return null}var Mi=[],Li=0,Du=null,Ou=0,Rn=[],Pn=0,ri=null,kr=1,Ir="";function Bs(t,e){Mi[Li++]=Ou,Mi[Li++]=Du,Du=t,Ou=e}function c_(t,e,n){Rn[Pn++]=kr,Rn[Pn++]=Ir,Rn[Pn++]=ri,ri=t;var r=kr;t=Ir;var s=32-Yn(r)-1;r&=~(1<<s),n+=1;var i=32-Yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kr=1<<32-Yn(e)+s|n<<s|r,Ir=i+t}else kr=1<<i|n<<s|r,Ir=t}function zf(t){t.return!==null&&(Bs(t,1),c_(t,1,0))}function Bf(t){for(;t===Du;)Du=Mi[--Li],Mi[Li]=null,Ou=Mi[--Li],Mi[Li]=null;for(;t===ri;)ri=Rn[--Pn],Rn[Pn]=null,Ir=Rn[--Pn],Rn[Pn]=null,kr=Rn[--Pn],Rn[Pn]=null}var En=null,_n=null,He=!1,Kn=null;function d_(t,e){var n=qn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Bg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,En=t,_n=fs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,En=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ri!==null?{id:kr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,En=t,_n=null,!0):!1;default:return!1}}function Sh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nh(t){if(He){var e=_n;if(e){var n=e;if(!Bg(t,e)){if(Sh(t))throw Error(K(418));e=fs(n.nextSibling);var r=En;e&&Bg(t,e)?d_(r,n):(t.flags=t.flags&-4097|2,He=!1,En=t)}}else{if(Sh(t))throw Error(K(418));t.flags=t.flags&-4097|2,He=!1,En=t}}}function $g(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;En=t}function Vl(t){if(t!==En)return!1;if(!He)return $g(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kh(t.type,t.memoizedProps)),e&&(e=_n)){if(Sh(t))throw h_(),Error(K(418));for(;e;)d_(t,e),e=fs(e.nextSibling)}if($g(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=fs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=En?fs(t.stateNode.nextSibling):null;return!0}function h_(){for(var t=_n;t;)t=fs(t.nextSibling)}function to(){_n=En=null,He=!1}function $f(t){Kn===null?Kn=[t]:Kn.push(t)}var wk=Ur.ReactCurrentBatchConfig;function Mo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Ul(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wg(t){var e=t._init;return e(t._payload)}function f_(t){function e(x,_){if(t){var I=x.deletions;I===null?(x.deletions=[_],x.flags|=16):I.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=ys(x,_),x.index=0,x.sibling=null,x}function i(x,_,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<_?(x.flags|=2,_):I):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,_,I,q){return _===null||_.tag!==6?(_=Od(I,x.mode,q),_.return=x,_):(_=s(_,I),_.return=x,_)}function c(x,_,I,q){var W=I.type;return W===Ri?p(x,_,I.props.children,q,I.key):_!==null&&(_.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xr&&Wg(W)===_.type)?(q=s(_,I.props),q.ref=Mo(x,_,I),q.return=x,q):(q=hu(I.type,I.key,I.props,null,x.mode,q),q.ref=Mo(x,_,I),q.return=x,q)}function h(x,_,I,q){return _===null||_.tag!==4||_.stateNode.containerInfo!==I.containerInfo||_.stateNode.implementation!==I.implementation?(_=Md(I,x.mode,q),_.return=x,_):(_=s(_,I.children||[]),_.return=x,_)}function p(x,_,I,q,W){return _===null||_.tag!==7?(_=Zs(I,x.mode,q,W),_.return=x,_):(_=s(_,I),_.return=x,_)}function m(x,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Od(""+_,x.mode,I),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nl:return I=hu(_.type,_.key,_.props,null,x.mode,I),I.ref=Mo(x,null,_),I.return=x,I;case Ci:return _=Md(_,x.mode,I),_.return=x,_;case Xr:var q=_._init;return m(x,q(_._payload),I)}if(Bo(_)||Po(_))return _=Zs(_,x.mode,I,null),_.return=x,_;Ul(x,_)}return null}function y(x,_,I,q){var W=_!==null?_.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return W!==null?null:l(x,_,""+I,q);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Nl:return I.key===W?c(x,_,I,q):null;case Ci:return I.key===W?h(x,_,I,q):null;case Xr:return W=I._init,y(x,_,W(I._payload),q)}if(Bo(I)||Po(I))return W!==null?null:p(x,_,I,q,null);Ul(x,I)}return null}function A(x,_,I,q,W){if(typeof q=="string"&&q!==""||typeof q=="number")return x=x.get(I)||null,l(_,x,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Nl:return x=x.get(q.key===null?I:q.key)||null,c(_,x,q,W);case Ci:return x=x.get(q.key===null?I:q.key)||null,h(_,x,q,W);case Xr:var $=q._init;return A(x,_,I,$(q._payload),W)}if(Bo(q)||Po(q))return x=x.get(I)||null,p(_,x,q,W,null);Ul(_,q)}return null}function P(x,_,I,q){for(var W=null,$=null,w=_,g=_=0,E=null;w!==null&&g<I.length;g++){w.index>g?(E=w,w=null):E=w.sibling;var k=y(x,w,I[g],q);if(k===null){w===null&&(w=E);break}t&&w&&k.alternate===null&&e(x,w),_=i(k,_,g),$===null?W=k:$.sibling=k,$=k,w=E}if(g===I.length)return n(x,w),He&&Bs(x,g),W;if(w===null){for(;g<I.length;g++)w=m(x,I[g],q),w!==null&&(_=i(w,_,g),$===null?W=w:$.sibling=w,$=w);return He&&Bs(x,g),W}for(w=r(x,w);g<I.length;g++)E=A(w,x,g,I[g],q),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?g:E.key),_=i(E,_,g),$===null?W=E:$.sibling=E,$=E);return t&&w.forEach(function(T){return e(x,T)}),He&&Bs(x,g),W}function D(x,_,I,q){var W=Po(I);if(typeof W!="function")throw Error(K(150));if(I=W.call(I),I==null)throw Error(K(151));for(var $=W=null,w=_,g=_=0,E=null,k=I.next();w!==null&&!k.done;g++,k=I.next()){w.index>g?(E=w,w=null):E=w.sibling;var T=y(x,w,k.value,q);if(T===null){w===null&&(w=E);break}t&&w&&T.alternate===null&&e(x,w),_=i(T,_,g),$===null?W=T:$.sibling=T,$=T,w=E}if(k.done)return n(x,w),He&&Bs(x,g),W;if(w===null){for(;!k.done;g++,k=I.next())k=m(x,k.value,q),k!==null&&(_=i(k,_,g),$===null?W=k:$.sibling=k,$=k);return He&&Bs(x,g),W}for(w=r(x,w);!k.done;g++,k=I.next())k=A(w,x,g,k.value,q),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?g:k.key),_=i(k,_,g),$===null?W=k:$.sibling=k,$=k);return t&&w.forEach(function(C){return e(x,C)}),He&&Bs(x,g),W}function S(x,_,I,q){if(typeof I=="object"&&I!==null&&I.type===Ri&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case Nl:e:{for(var W=I.key,$=_;$!==null;){if($.key===W){if(W=I.type,W===Ri){if($.tag===7){n(x,$.sibling),_=s($,I.props.children),_.return=x,x=_;break e}}else if($.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Xr&&Wg(W)===$.type){n(x,$.sibling),_=s($,I.props),_.ref=Mo(x,$,I),_.return=x,x=_;break e}n(x,$);break}else e(x,$);$=$.sibling}I.type===Ri?(_=Zs(I.props.children,x.mode,q,I.key),_.return=x,x=_):(q=hu(I.type,I.key,I.props,null,x.mode,q),q.ref=Mo(x,_,I),q.return=x,x=q)}return o(x);case Ci:e:{for($=I.key;_!==null;){if(_.key===$)if(_.tag===4&&_.stateNode.containerInfo===I.containerInfo&&_.stateNode.implementation===I.implementation){n(x,_.sibling),_=s(_,I.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Md(I,x.mode,q),_.return=x,x=_}return o(x);case Xr:return $=I._init,S(x,_,$(I._payload),q)}if(Bo(I))return P(x,_,I,q);if(Po(I))return D(x,_,I,q);Ul(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,I),_.return=x,x=_):(n(x,_),_=Od(I,x.mode,q),_.return=x,x=_),o(x)):n(x,_)}return S}var no=f_(!0),p_=f_(!1),Mu=Cs(null),Lu=null,Vi=null,Wf=null;function Hf(){Wf=Vi=Lu=null}function Kf(t){var e=Mu.current;We(Mu),t._currentValue=e}function Ch(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ki(t,e){Lu=t,Wf=Vi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(dn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(Wf!==t)if(t={context:t,memoizedValue:e,next:null},Vi===null){if(Lu===null)throw Error(K(308));Vi=t,Lu.dependencies={lanes:0,firstContext:t}}else Vi=Vi.next=t;return e}var Gs=null;function Gf(t){Gs===null?Gs=[t]:Gs.push(t)}function m_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gf(e)):(n.next=s.next,s.next=n),e.interleaved=n,jr(t,r)}function jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jr=!1;function Qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,jr(t,n)}return s=r.interleaved,s===null?(e.next=e,Gf(r)):(e.next=s.next,s.next=e),r.interleaved=e,jr(t,n)}function ou(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jf(t,n)}}function Hg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vu(t,e,n,r){var s=t.updateQueue;Jr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,l=i;do{var y=l.lane,A=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:A,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,D=l;switch(y=e,A=n,D.tag){case 1:if(P=D.payload,typeof P=="function"){m=P.call(A,m,y);break e}m=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=D.payload,y=typeof P=="function"?P.call(A,m,y):P,y==null)break e;m=Xe({},m,y);break e;case 2:Jr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else A={eventTime:A,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=A,c=m):p=p.next=A,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ii|=o,t.lanes=o,t.memoizedState=m}}function Kg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var Ya={},cr=Cs(Ya),Ta=Cs(Ya),Aa=Cs(Ya);function Qs(t){if(t===Ya)throw Error(K(174));return t}function Yf(t,e){switch(Le(Aa,e),Le(Ta,t),Le(cr,Ya),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ch(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ch(e,t)}We(cr),Le(cr,e)}function ro(){We(cr),We(Ta),We(Aa)}function y_(t){Qs(Aa.current);var e=Qs(cr.current),n=ch(e,t.type);e!==n&&(Le(Ta,t),Le(cr,n))}function Xf(t){Ta.current===t&&(We(cr),We(Ta))}var Qe=Cs(0);function Uu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cd=[];function Jf(){for(var t=0;t<Cd.length;t++)Cd[t]._workInProgressVersionPrimary=null;Cd.length=0}var au=Ur.ReactCurrentDispatcher,Rd=Ur.ReactCurrentBatchConfig,si=0,Ye=null,yt=null,Et=null,Fu=!1,ia=!1,Sa=0,xk=0;function Bt(){throw Error(K(321))}function Zf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zn(t[n],e[n]))return!1;return!0}function ep(t,e,n,r,s,i){if(si=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,au.current=t===null||t.memoizedState===null?Ik:Tk,t=n(r,s),ia){i=0;do{if(ia=!1,Sa=0,25<=i)throw Error(K(301));i+=1,Et=yt=null,e.updateQueue=null,au.current=Ak,t=n(r,s)}while(ia)}if(au.current=zu,e=yt!==null&&yt.next!==null,si=0,Et=yt=Ye=null,Fu=!1,e)throw Error(K(300));return t}function tp(){var t=Sa!==0;return Sa=0,t}function or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Ye.memoizedState=Et=t:Et=Et.next=t,Et}function Ln(){if(yt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=Et===null?Ye.memoizedState:Et.next;if(e!==null)Et=e,yt=t;else{if(t===null)throw Error(K(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Et===null?Ye.memoizedState=Et=t:Et=Et.next=t}return Et}function Na(t,e){return typeof e=="function"?e(t):e}function Pd(t){var e=Ln(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=yt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,h=i;do{var p=h.lane;if((si&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Ye.lanes|=p,ii|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=l,Zn(r,e.memoizedState)||(dn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ye.lanes|=i,ii|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qd(t){var e=Ln(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Zn(i,e.memoizedState)||(dn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function v_(){}function __(t,e){var n=Ye,r=Ln(),s=e(),i=!Zn(r.memoizedState,s);if(i&&(r.memoizedState=s,dn=!0),r=r.queue,np(E_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,Ca(9,x_.bind(null,n,r,s,e),void 0,null),bt===null)throw Error(K(349));si&30||w_(n,e,s)}return s}function w_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function x_(t,e,n,r){e.value=n,e.getSnapshot=r,b_(e)&&k_(t)}function E_(t,e,n){return n(function(){b_(e)&&k_(t)})}function b_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zn(t,n)}catch{return!0}}function k_(t){var e=jr(t,1);e!==null&&Xn(e,t,1,-1)}function Gg(t){var e=or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},e.queue=t,t=t.dispatch=kk.bind(null,Ye,t),[e.memoizedState,t]}function Ca(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function I_(){return Ln().memoizedState}function lu(t,e,n,r){var s=or();Ye.flags|=t,s.memoizedState=Ca(1|e,n,void 0,r===void 0?null:r)}function bc(t,e,n,r){var s=Ln();r=r===void 0?null:r;var i=void 0;if(yt!==null){var o=yt.memoizedState;if(i=o.destroy,r!==null&&Zf(r,o.deps)){s.memoizedState=Ca(e,n,i,r);return}}Ye.flags|=t,s.memoizedState=Ca(1|e,n,i,r)}function Qg(t,e){return lu(8390656,8,t,e)}function np(t,e){return bc(2048,8,t,e)}function T_(t,e){return bc(4,2,t,e)}function A_(t,e){return bc(4,4,t,e)}function S_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function N_(t,e,n){return n=n!=null?n.concat([t]):null,bc(4,4,S_.bind(null,e,t),n)}function rp(){}function C_(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function R_(t,e){var n=Ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function P_(t,e,n){return si&21?(Zn(n,e)||(n=Mv(),Ye.lanes|=n,ii|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,dn=!0),t.memoizedState=n)}function Ek(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=Rd.transition;Rd.transition={};try{t(!1),e()}finally{Pe=n,Rd.transition=r}}function q_(){return Ln().memoizedState}function bk(t,e,n){var r=gs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},j_(t))D_(e,n);else if(n=m_(t,e,n,r),n!==null){var s=nn();Xn(n,t,r,s),O_(n,e,r)}}function kk(t,e,n){var r=gs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(j_(t))D_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Zn(l,o)){var c=e.interleaved;c===null?(s.next=s,Gf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=m_(t,e,s,r),n!==null&&(s=nn(),Xn(n,t,r,s),O_(n,e,r))}}function j_(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function D_(t,e){ia=Fu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function O_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jf(t,n)}}var zu={readContext:Mn,useCallback:Bt,useContext:Bt,useEffect:Bt,useImperativeHandle:Bt,useInsertionEffect:Bt,useLayoutEffect:Bt,useMemo:Bt,useReducer:Bt,useRef:Bt,useState:Bt,useDebugValue:Bt,useDeferredValue:Bt,useTransition:Bt,useMutableSource:Bt,useSyncExternalStore:Bt,useId:Bt,unstable_isNewReconciler:!1},Ik={readContext:Mn,useCallback:function(t,e){return or().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:Qg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lu(4194308,4,S_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lu(4194308,4,t,e)},useInsertionEffect:function(t,e){return lu(4,2,t,e)},useMemo:function(t,e){var n=or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=bk.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=or();return t={current:t},e.memoizedState=t},useState:Gg,useDebugValue:rp,useDeferredValue:function(t){return or().memoizedState=t},useTransition:function(){var t=Gg(!1),e=t[0];return t=Ek.bind(null,t[1]),or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,s=or();if(He){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),bt===null)throw Error(K(349));si&30||w_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Qg(E_.bind(null,r,i,t),[t]),r.flags|=2048,Ca(9,x_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=or(),e=bt.identifierPrefix;if(He){var n=Ir,r=kr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tk={readContext:Mn,useCallback:C_,useContext:Mn,useEffect:np,useImperativeHandle:N_,useInsertionEffect:T_,useLayoutEffect:A_,useMemo:R_,useReducer:Pd,useRef:I_,useState:function(){return Pd(Na)},useDebugValue:rp,useDeferredValue:function(t){var e=Ln();return P_(e,yt.memoizedState,t)},useTransition:function(){var t=Pd(Na)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:v_,useSyncExternalStore:__,useId:q_,unstable_isNewReconciler:!1},Ak={readContext:Mn,useCallback:C_,useContext:Mn,useEffect:np,useImperativeHandle:N_,useInsertionEffect:T_,useLayoutEffect:A_,useMemo:R_,useReducer:qd,useRef:I_,useState:function(){return qd(Na)},useDebugValue:rp,useDeferredValue:function(t){var e=Ln();return yt===null?e.memoizedState=t:P_(e,yt.memoizedState,t)},useTransition:function(){var t=qd(Na)[0],e=Ln().memoizedState;return[t,e]},useMutableSource:v_,useSyncExternalStore:__,useId:q_,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kc={isMounted:function(t){return(t=t._reactInternals)?gi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=nn(),s=gs(t),i=Nr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&(Xn(e,t,s,r),ou(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=nn(),s=gs(t),i=Nr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&(Xn(e,t,s,r),ou(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=nn(),r=gs(t),s=Nr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ps(t,s,r),e!==null&&(Xn(e,t,r,n),ou(e,t,r))}};function Yg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ea(n,r)||!Ea(s,i):!0}function M_(t,e,n){var r=!1,s=Es,i=e.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(s=fn(e)?ni:Yt.current,r=e.contextTypes,i=(r=r!=null)?eo(t,s):Es),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Xg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kc.enqueueReplaceState(e,e.state,null)}function Ph(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Qf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mn(i):(i=fn(e)?ni:Yt.current,s.context=eo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Rh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&kc.enqueueReplaceState(s,s.state,null),Vu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function so(t,e){try{var n="",r=e;do n+=tb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sk=typeof WeakMap=="function"?WeakMap:Map;function L_(t,e,n){n=Nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$u||($u=!0,Bh=r),qh(t,e)},n}function V_(t,e,n){n=Nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qh(t,e),typeof r!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Jg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zk.bind(null,t,e,n),e.then(t,t))}function Zg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ey(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nr(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var Nk=Ur.ReactCurrentOwner,dn=!1;function tn(t,e,n,r){e.child=t===null?p_(e,null,n,r):no(e,t.child,n,r)}function ty(t,e,n,r,s){n=n.render;var i=e.ref;return Ki(e,s),r=ep(t,e,n,r,i,s),n=tp(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):(He&&n&&zf(e),e.flags|=1,tn(t,e,r,s),e.child)}function ny(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!dp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,U_(t,e,i,r,s)):(t=hu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ea,n(o,r)&&t.ref===e.ref)return Dr(t,e,s)}return e.flags|=1,t=ys(i,r),t.ref=e.ref,t.return=e,e.child=t}function U_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ea(i,r)&&t.ref===e.ref)if(dn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(dn=!0);else return e.lanes=t.lanes,Dr(t,e,s)}return jh(t,e,n,r,s)}function F_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Fi,vn),vn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Fi,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(Fi,vn),vn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Le(Fi,vn),vn|=r;return tn(t,e,s,n),e.child}function z_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function jh(t,e,n,r,s){var i=fn(n)?ni:Yt.current;return i=eo(e,i),Ki(e,s),n=ep(t,e,n,r,i,s),r=tp(),t!==null&&!dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Dr(t,e,s)):(He&&r&&zf(e),e.flags|=1,tn(t,e,n,s),e.child)}function ry(t,e,n,r,s){if(fn(n)){var i=!0;ju(e)}else i=!1;if(Ki(e,s),e.stateNode===null)uu(t,e),M_(e,n,r),Ph(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Mn(h):(h=fn(n)?ni:Yt.current,h=eo(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&Xg(e,o,r,h),Jr=!1;var y=e.memoizedState;o.state=y,Vu(e,r,o,s),c=e.memoizedState,l!==r||y!==c||hn.current||Jr?(typeof p=="function"&&(Rh(e,n,p,r),c=e.memoizedState),(l=Jr||Yg(e,n,l,r,y,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,g_(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Wn(e.type,l),o.props=h,m=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mn(c):(c=fn(n)?ni:Yt.current,c=eo(e,c));var A=n.getDerivedStateFromProps;(p=typeof A=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||y!==c)&&Xg(e,o,r,c),Jr=!1,y=e.memoizedState,o.state=y,Vu(e,r,o,s);var P=e.memoizedState;l!==m||y!==P||hn.current||Jr?(typeof A=="function"&&(Rh(e,n,A,r),P=e.memoizedState),(h=Jr||Yg(e,n,h,r,y,P,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Dh(t,e,n,r,i,s)}function Dh(t,e,n,r,s,i){z_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&zg(e,n,!1),Dr(t,e,i);r=e.stateNode,Nk.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=no(e,t.child,null,i),e.child=no(e,null,l,i)):tn(t,e,l,i),e.memoizedState=r.state,s&&zg(e,n,!0),e.child}function B_(t){var e=t.stateNode;e.pendingContext?Fg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fg(t,e.context,!1),Yf(t,e.containerInfo)}function sy(t,e,n,r,s){return to(),$f(s),e.flags|=256,tn(t,e,n,r),e.child}var Oh={dehydrated:null,treeContext:null,retryLane:0};function Mh(t){return{baseLanes:t,cachePool:null,transitions:null}}function $_(t,e,n){var r=e.pendingProps,s=Qe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Le(Qe,s&1),t===null)return Nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ac(o,r,0,null),t=Zs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Mh(n),e.memoizedState=Oh,t):sp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Ck(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ys(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ys(l,i):(i=Zs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Mh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Oh,r}return i=t.child,t=i.sibling,r=ys(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function sp(t,e){return e=Ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&$f(r),no(e,t.child,null,n),t=sp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ck(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jd(Error(K(422))),Fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ac({mode:"visible",children:r.children},s,0,null),i=Zs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&no(e,t.child,null,o),e.child.memoizedState=Mh(o),e.memoizedState=Oh,i);if(!(e.mode&1))return Fl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(K(419)),r=jd(i,r,void 0),Fl(t,e,o,r)}if(l=(o&t.childLanes)!==0,dn||l){if(r=bt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,jr(t,s),Xn(r,t,s,-1))}return cp(),r=jd(Error(K(421))),Fl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Bk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,_n=fs(s.nextSibling),En=e,He=!0,Kn=null,t!==null&&(Rn[Pn++]=kr,Rn[Pn++]=Ir,Rn[Pn++]=ri,kr=t.id,Ir=t.overflow,ri=e),e=sp(e,r.children),e.flags|=4096,e)}function iy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ch(t.return,e,n)}function Dd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function W_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(tn(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iy(t,n,e);else if(t.tag===19)iy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Uu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Dd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Uu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Dd(e,!0,n,null,i);break;case"together":Dd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ii|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rk(t,e,n){switch(e.tag){case 3:B_(e),to();break;case 5:y_(e);break;case 1:fn(e.type)&&ju(e);break;case 4:Yf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Le(Mu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?$_(t,e,n):(Le(Qe,Qe.current&1),t=Dr(t,e,n),t!==null?t.sibling:null);Le(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return W_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,F_(t,e,n)}return Dr(t,e,n)}var H_,Lh,K_,G_;H_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lh=function(){};K_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Qs(cr.current);var i=null;switch(n){case"input":s=oh(t,s),r=oh(t,r),i=[];break;case"select":s=Xe({},s,{value:void 0}),r=Xe({},r,{value:void 0}),i=[];break;case"textarea":s=uh(t,s),r=uh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pu)}dh(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ma.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ma.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Be("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};G_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Lo(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Pk(t,e,n){var r=e.pendingProps;switch(Bf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return fn(e.type)&&qu(),$t(e),null;case 3:return r=e.stateNode,ro(),We(hn),We(Yt),Jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kn!==null&&(Hh(Kn),Kn=null))),Lh(t,e),$t(e),null;case 5:Xf(e);var s=Qs(Aa.current);if(n=e.type,t!==null&&e.stateNode!=null)K_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return $t(e),null}if(t=Qs(cr.current),Vl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ar]=e,r[Ia]=i,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(s=0;s<Wo.length;s++)Be(Wo[s],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":pg(r,i),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Be("invalid",r);break;case"textarea":gg(r,i),Be("invalid",r)}dh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,l,t),s=["children",""+l]):ma.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":Cl(r),mg(r,i,!0);break;case"textarea":Cl(r),yg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ev(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ar]=e,t[Ia]=r,H_(t,e,!1,!1),e.stateNode=t;e:{switch(o=hh(n,r),n){case"dialog":Be("cancel",t),Be("close",t),s=r;break;case"iframe":case"object":case"embed":Be("load",t),s=r;break;case"video":case"audio":for(s=0;s<Wo.length;s++)Be(Wo[s],t);s=r;break;case"source":Be("error",t),s=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),s=r;break;case"details":Be("toggle",t),s=r;break;case"input":pg(t,r),s=oh(t,r),Be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Xe({},r,{value:void 0}),Be("invalid",t);break;case"textarea":gg(t,r),s=uh(t,r),Be("invalid",t);break;default:s=r}dh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Iv(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&bv(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ga(t,c):typeof c=="number"&&ga(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ma.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Be("scroll",t):c!=null&&Sf(t,i,c,o))}switch(n){case"input":Cl(t),mg(t,r,!1);break;case"textarea":Cl(t),yg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Bi(t,!!r.multiple,i,!1):r.defaultValue!=null&&Bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)G_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Qs(Aa.current),Qs(cr.current),Vl(e)){if(r=e.stateNode,n=e.memoizedProps,r[ar]=e,(i=r.nodeValue!==n)&&(t=En,t!==null))switch(t.tag){case 3:Ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ar]=e,e.stateNode=r}return $t(e),null;case 13:if(We(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&_n!==null&&e.mode&1&&!(e.flags&128))h_(),to(),e.flags|=98560,i=!1;else if(i=Vl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[ar]=e}else to(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),i=!1}else Kn!==null&&(Hh(Kn),Kn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?vt===0&&(vt=3):cp())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return ro(),Lh(t,e),t===null&&ba(e.stateNode.containerInfo),$t(e),null;case 10:return Kf(e.type._context),$t(e),null;case 17:return fn(e.type)&&qu(),$t(e),null;case 19:if(We(Qe),i=e.memoizedState,i===null)return $t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Lo(i,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Uu(t),o!==null){for(e.flags|=128,Lo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Qe,Qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&at()>io&&(e.flags|=128,r=!0,Lo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Uu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Lo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!He)return $t(e),null}else 2*at()-i.renderingStartTime>io&&n!==1073741824&&(e.flags|=128,r=!0,Lo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=at(),e.sibling=null,n=Qe.current,Le(Qe,r?n&1|2:n&1),e):($t(e),null);case 22:case 23:return up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function qk(t,e){switch(Bf(e),e.tag){case 1:return fn(e.type)&&qu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ro(),We(hn),We(Yt),Jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xf(e),null;case 13:if(We(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));to()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Qe),null;case 4:return ro(),null;case 10:return Kf(e.type._context),null;case 22:case 23:return up(),null;case 24:return null;default:return null}}var zl=!1,Kt=!1,jk=typeof WeakSet=="function"?WeakSet:Set,J=null;function Ui(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function Vh(t,e,n){try{n()}catch(r){nt(t,e,r)}}var oy=!1;function Dk(t,e){if(Eh=Nu,t=Zv(),Ff(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var A;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(A=m.firstChild)!==null;)y=m,m=A;for(;;){if(m===t)break t;if(y===n&&++h===s&&(l=o),y===i&&++p===r&&(c=o),(A=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=A}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(bh={focusedElem:t,selectionRange:n},Nu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var D=P.memoizedProps,S=P.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?D:Wn(e.type,D),S);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(q){nt(e,e.return,q)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return P=oy,oy=!1,P}function oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vh(e,n,i)}s=s.next}while(s!==r)}}function Ic(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Uh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Q_(t){var e=t.alternate;e!==null&&(t.alternate=null,Q_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ar],delete e[Ia],delete e[Th],delete e[yk],delete e[vk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Y_(t){return t.tag===5||t.tag===3||t.tag===4}function ay(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Y_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pu));else if(r!==4&&(t=t.child,t!==null))for(Fh(t,e,n),t=t.sibling;t!==null;)Fh(t,e,n),t=t.sibling}function zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zh(t,e,n),t=t.sibling;t!==null;)zh(t,e,n),t=t.sibling}var Ct=null,Hn=!1;function Qr(t,e,n){for(n=n.child;n!==null;)X_(t,e,n),n=n.sibling}function X_(t,e,n){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(yc,n)}catch{}switch(n.tag){case 5:Kt||Ui(n,e);case 6:var r=Ct,s=Hn;Ct=null,Qr(t,e,n),Ct=r,Hn=s,Ct!==null&&(Hn?(t=Ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ct.removeChild(n.stateNode));break;case 18:Ct!==null&&(Hn?(t=Ct,n=n.stateNode,t.nodeType===8?Sd(t.parentNode,n):t.nodeType===1&&Sd(t,n),wa(t)):Sd(Ct,n.stateNode));break;case 4:r=Ct,s=Hn,Ct=n.stateNode.containerInfo,Hn=!0,Qr(t,e,n),Ct=r,Hn=s;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Vh(n,e,o),s=s.next}while(s!==r)}Qr(t,e,n);break;case 1:if(!Kt&&(Ui(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){nt(n,e,l)}Qr(t,e,n);break;case 21:Qr(t,e,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,Qr(t,e,n),Kt=r):Qr(t,e,n);break;default:Qr(t,e,n)}}function ly(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jk),e.forEach(function(r){var s=$k.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $n(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ct=l.stateNode,Hn=!1;break e;case 3:Ct=l.stateNode.containerInfo,Hn=!0;break e;case 4:Ct=l.stateNode.containerInfo,Hn=!0;break e}l=l.return}if(Ct===null)throw Error(K(160));X_(i,o,s),Ct=null,Hn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){nt(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)J_(e,t),e=e.sibling}function J_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($n(e,t),ir(t),r&4){try{oa(3,t,t.return),Ic(3,t)}catch(D){nt(t,t.return,D)}try{oa(5,t,t.return)}catch(D){nt(t,t.return,D)}}break;case 1:$n(e,t),ir(t),r&512&&n!==null&&Ui(n,n.return);break;case 5:if($n(e,t),ir(t),r&512&&n!==null&&Ui(n,n.return),t.flags&32){var s=t.stateNode;try{ga(s,"")}catch(D){nt(t,t.return,D)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&wv(s,i),hh(l,o);var h=hh(l,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Iv(s,m):p==="dangerouslySetInnerHTML"?bv(s,m):p==="children"?ga(s,m):Sf(s,p,m,h)}switch(l){case"input":ah(s,i);break;case"textarea":xv(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var A=i.value;A!=null?Bi(s,!!i.multiple,A,!1):y!==!!i.multiple&&(i.defaultValue!=null?Bi(s,!!i.multiple,i.defaultValue,!0):Bi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ia]=i}catch(D){nt(t,t.return,D)}}break;case 6:if($n(e,t),ir(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(D){nt(t,t.return,D)}}break;case 3:if($n(e,t),ir(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wa(e.containerInfo)}catch(D){nt(t,t.return,D)}break;case 4:$n(e,t),ir(t);break;case 13:$n(e,t),ir(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ap=at())),r&4&&ly(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Kt=(h=Kt)||p,$n(e,t),Kt=h):$n(e,t),ir(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(J=t,p=t.child;p!==null;){for(m=J=p;J!==null;){switch(y=J,A=y.child,y.tag){case 0:case 11:case 14:case 15:oa(4,y,y.return);break;case 1:Ui(y,y.return);var P=y.stateNode;if(typeof P.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(D){nt(r,n,D)}}break;case 5:Ui(y,y.return);break;case 22:if(y.memoizedState!==null){cy(m);continue}}A!==null?(A.return=y,J=A):cy(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=kv("display",o))}catch(D){nt(t,t.return,D)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(D){nt(t,t.return,D)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:$n(e,t),ir(t),r&4&&ly(t);break;case 21:break;default:$n(e,t),ir(t)}}function ir(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Y_(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ga(s,""),r.flags&=-33);var i=ay(t);zh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ay(t);Fh(t,l,o);break;default:throw Error(K(161))}}catch(c){nt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ok(t,e,n){J=t,Z_(t)}function Z_(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var s=J,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||zl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Kt;l=zl;var h=Kt;if(zl=o,(Kt=c)&&!h)for(J=s;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?dy(s):c!==null?(c.return=o,J=c):dy(s);for(;i!==null;)J=i,Z_(i),i=i.sibling;J=s,zl=l,Kt=h}uy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,J=i):uy(t)}}function uy(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Kt||Ic(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Kg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Kg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&wa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Kt||e.flags&512&&Uh(e)}catch(y){nt(e,e.return,y)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function cy(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function dy(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ic(4,e)}catch(c){nt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){nt(e,s,c)}}var i=e.return;try{Uh(e)}catch(c){nt(e,i,c)}break;case 5:var o=e.return;try{Uh(e)}catch(c){nt(e,o,c)}}}catch(c){nt(e,e.return,c)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var Mk=Math.ceil,Bu=Ur.ReactCurrentDispatcher,ip=Ur.ReactCurrentOwner,On=Ur.ReactCurrentBatchConfig,Ie=0,bt=null,pt=null,qt=0,vn=0,Fi=Cs(0),vt=0,Ra=null,ii=0,Tc=0,op=0,aa=null,un=null,ap=0,io=1/0,xr=null,$u=!1,Bh=null,ms=null,Bl=!1,as=null,Wu=0,la=0,$h=null,cu=-1,du=0;function nn(){return Ie&6?at():cu!==-1?cu:cu=at()}function gs(t){return t.mode&1?Ie&2&&qt!==0?qt&-qt:wk.transition!==null?(du===0&&(du=Mv()),du):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:$v(t.type)),t):1}function Xn(t,e,n,r){if(50<la)throw la=0,$h=null,Error(K(185));Ka(t,n,r),(!(Ie&2)||t!==bt)&&(t===bt&&(!(Ie&2)&&(Tc|=n),vt===4&&es(t,qt)),pn(t,r),n===1&&Ie===0&&!(e.mode&1)&&(io=at()+500,Ec&&Rs()))}function pn(t,e){var n=t.callbackNode;wb(t,e);var r=Su(t,t===bt?qt:0);if(r===0)n!==null&&wg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wg(n),e===1)t.tag===0?_k(hy.bind(null,t)):u_(hy.bind(null,t)),mk(function(){!(Ie&6)&&Rs()}),n=null;else{switch(Lv(r)){case 1:n=qf;break;case 4:n=Dv;break;case 16:n=Au;break;case 536870912:n=Ov;break;default:n=Au}n=aw(n,ew.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ew(t,e){if(cu=-1,du=0,Ie&6)throw Error(K(327));var n=t.callbackNode;if(Gi()&&t.callbackNode!==n)return null;var r=Su(t,t===bt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hu(t,r);else{e=r;var s=Ie;Ie|=2;var i=nw();(bt!==t||qt!==e)&&(xr=null,io=at()+500,Js(t,e));do try{Uk();break}catch(l){tw(t,l)}while(!0);Hf(),Bu.current=i,Ie=s,pt!==null?e=0:(bt=null,qt=0,e=vt)}if(e!==0){if(e===2&&(s=yh(t),s!==0&&(r=s,e=Wh(t,s))),e===1)throw n=Ra,Js(t,0),es(t,r),pn(t,at()),n;if(e===6)es(t,r);else{if(s=t.current.alternate,!(r&30)&&!Lk(s)&&(e=Hu(t,r),e===2&&(i=yh(t),i!==0&&(r=i,e=Wh(t,i))),e===1))throw n=Ra,Js(t,0),es(t,r),pn(t,at()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:$s(t,un,xr);break;case 3:if(es(t,r),(r&130023424)===r&&(e=ap+500-at(),10<e)){if(Su(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ih($s.bind(null,t,un,xr),e);break}$s(t,un,xr);break;case 4:if(es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=at()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mk(r/1960))-r,10<r){t.timeoutHandle=Ih($s.bind(null,t,un,xr),r);break}$s(t,un,xr);break;case 5:$s(t,un,xr);break;default:throw Error(K(329))}}}return pn(t,at()),t.callbackNode===n?ew.bind(null,t):null}function Wh(t,e){var n=aa;return t.current.memoizedState.isDehydrated&&(Js(t,e).flags|=256),t=Hu(t,e),t!==2&&(e=un,un=n,e!==null&&Hh(e)),t}function Hh(t){un===null?un=t:un.push.apply(un,t)}function Lk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e){for(e&=~op,e&=~Tc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),r=1<<n;t[n]=-1,e&=~r}}function hy(t){if(Ie&6)throw Error(K(327));Gi();var e=Su(t,0);if(!(e&1))return pn(t,at()),null;var n=Hu(t,e);if(t.tag!==0&&n===2){var r=yh(t);r!==0&&(e=r,n=Wh(t,r))}if(n===1)throw n=Ra,Js(t,0),es(t,e),pn(t,at()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,un,xr),pn(t,at()),null}function lp(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(io=at()+500,Ec&&Rs())}}function oi(t){as!==null&&as.tag===0&&!(Ie&6)&&Gi();var e=Ie;Ie|=1;var n=On.transition,r=Pe;try{if(On.transition=null,Pe=1,t)return t()}finally{Pe=r,On.transition=n,Ie=e,!(Ie&6)&&Rs()}}function up(){vn=Fi.current,We(Fi)}function Js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pk(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(Bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&qu();break;case 3:ro(),We(hn),We(Yt),Jf();break;case 5:Xf(r);break;case 4:ro();break;case 13:We(Qe);break;case 19:We(Qe);break;case 10:Kf(r.type._context);break;case 22:case 23:up()}n=n.return}if(bt=t,pt=t=ys(t.current,null),qt=vn=e,vt=0,Ra=null,op=Tc=ii=0,un=aa=null,Gs!==null){for(e=0;e<Gs.length;e++)if(n=Gs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Gs=null}return t}function tw(t,e){do{var n=pt;try{if(Hf(),au.current=zu,Fu){for(var r=Ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fu=!1}if(si=0,Et=yt=Ye=null,ia=!1,Sa=0,ip.current=null,n===null||n.return===null){vt=1,Ra=e,pt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=qt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var A=Zg(o);if(A!==null){A.flags&=-257,ey(A,o,l,i,e),A.mode&1&&Jg(i,h,e),e=A,c=h;var P=e.updateQueue;if(P===null){var D=new Set;D.add(c),e.updateQueue=D}else P.add(c);break e}else{if(!(e&1)){Jg(i,h,e),cp();break e}c=Error(K(426))}}else if(He&&l.mode&1){var S=Zg(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),ey(S,o,l,i,e),$f(so(c,l));break e}}i=c=so(c,l),vt!==4&&(vt=2),aa===null?aa=[i]:aa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=L_(i,c,e);Hg(i,x);break e;case 1:l=c;var _=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(ms===null||!ms.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var q=V_(i,l,e);Hg(i,q);break e}}i=i.return}while(i!==null)}sw(n)}catch(W){e=W,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function nw(){var t=Bu.current;return Bu.current=zu,t===null?zu:t}function cp(){(vt===0||vt===3||vt===2)&&(vt=4),bt===null||!(ii&268435455)&&!(Tc&268435455)||es(bt,qt)}function Hu(t,e){var n=Ie;Ie|=2;var r=nw();(bt!==t||qt!==e)&&(xr=null,Js(t,e));do try{Vk();break}catch(s){tw(t,s)}while(!0);if(Hf(),Ie=n,Bu.current=r,pt!==null)throw Error(K(261));return bt=null,qt=0,vt}function Vk(){for(;pt!==null;)rw(pt)}function Uk(){for(;pt!==null&&!db();)rw(pt)}function rw(t){var e=ow(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?sw(t):pt=e,ip.current=null}function sw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qk(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,pt=null;return}}else if(n=Pk(n,e,vn),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);vt===0&&(vt=5)}function $s(t,e,n){var r=Pe,s=On.transition;try{On.transition=null,Pe=1,Fk(t,e,n,r)}finally{On.transition=s,Pe=r}return null}function Fk(t,e,n,r){do Gi();while(as!==null);if(Ie&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(xb(t,i),t===bt&&(pt=bt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bl||(Bl=!0,aw(Au,function(){return Gi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=On.transition,On.transition=null;var o=Pe;Pe=1;var l=Ie;Ie|=4,ip.current=null,Dk(t,n),J_(n,t),ak(bh),Nu=!!Eh,bh=Eh=null,t.current=n,Ok(n),hb(),Ie=l,Pe=o,On.transition=i}else t.current=n;if(Bl&&(Bl=!1,as=t,Wu=s),i=t.pendingLanes,i===0&&(ms=null),mb(n.stateNode),pn(t,at()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($u)throw $u=!1,t=Bh,Bh=null,t;return Wu&1&&t.tag!==0&&Gi(),i=t.pendingLanes,i&1?t===$h?la++:(la=0,$h=t):la=0,Rs(),null}function Gi(){if(as!==null){var t=Lv(Wu),e=On.transition,n=Pe;try{if(On.transition=null,Pe=16>t?16:t,as===null)var r=!1;else{if(t=as,as=null,Wu=0,Ie&6)throw Error(K(331));var s=Ie;for(Ie|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(J=h;J!==null;){var p=J;switch(p.tag){case 0:case 11:case 15:oa(8,p,i)}var m=p.child;if(m!==null)m.return=p,J=m;else for(;J!==null;){p=J;var y=p.sibling,A=p.return;if(Q_(p),p===h){J=null;break}if(y!==null){y.return=A,J=y;break}J=A}}}var P=i.alternate;if(P!==null){var D=P.child;if(D!==null){P.child=null;do{var S=D.sibling;D.sibling=null,D=S}while(D!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oa(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,J=x;break e}J=i.return}}var _=t.current;for(J=_;J!==null;){o=J;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,J=I;else e:for(o=_;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ic(9,l)}}catch(W){nt(l,l.return,W)}if(l===o){J=null;break e}var q=l.sibling;if(q!==null){q.return=l.return,J=q;break e}J=l.return}}if(Ie=s,Rs(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(yc,t)}catch{}r=!0}return r}finally{Pe=n,On.transition=e}}return!1}function fy(t,e,n){e=so(n,e),e=L_(t,e,1),t=ps(t,e,1),e=nn(),t!==null&&(Ka(t,1,e),pn(t,e))}function nt(t,e,n){if(t.tag===3)fy(t,t,n);else for(;e!==null;){if(e.tag===3){fy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))){t=so(n,t),t=V_(e,t,1),e=ps(e,t,1),t=nn(),e!==null&&(Ka(e,1,t),pn(e,t));break}}e=e.return}}function zk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=nn(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(qt&n)===n&&(vt===4||vt===3&&(qt&130023424)===qt&&500>at()-ap?Js(t,0):op|=n),pn(t,e)}function iw(t,e){e===0&&(t.mode&1?(e=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):e=1);var n=nn();t=jr(t,e),t!==null&&(Ka(t,e,n),pn(t,n))}function Bk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iw(t,n)}function $k(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),iw(t,n)}var ow;ow=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)dn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return dn=!1,Rk(t,e,n);dn=!!(t.flags&131072)}else dn=!1,He&&e.flags&1048576&&c_(e,Ou,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uu(t,e),t=e.pendingProps;var s=eo(e,Yt.current);Ki(e,n),s=ep(null,e,r,t,s,n);var i=tp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fn(r)?(i=!0,ju(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qf(e),s.updater=kc,e.stateNode=s,s._reactInternals=e,Ph(e,r,t,n),e=Dh(null,e,r,!0,i,n)):(e.tag=0,He&&i&&zf(e),tn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Hk(r),t=Wn(r,t),s){case 0:e=jh(null,e,r,t,n);break e;case 1:e=ry(null,e,r,t,n);break e;case 11:e=ty(null,e,r,t,n);break e;case 14:e=ny(null,e,r,Wn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),jh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),ry(t,e,r,s,n);case 3:e:{if(B_(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,g_(t,e),Vu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=so(Error(K(423)),e),e=sy(t,e,r,n,s);break e}else if(r!==s){s=so(Error(K(424)),e),e=sy(t,e,r,n,s);break e}else for(_n=fs(e.stateNode.containerInfo.firstChild),En=e,He=!0,Kn=null,n=p_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(to(),r===s){e=Dr(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return y_(e),t===null&&Nh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,kh(r,s)?o=null:i!==null&&kh(r,i)&&(e.flags|=32),z_(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&Nh(e),null;case 13:return $_(t,e,n);case 4:return Yf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=no(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),ty(t,e,r,s,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Le(Mu,r._currentValue),r._currentValue=o,i!==null)if(Zn(i.value,o)){if(i.children===s.children&&!hn.current){e=Dr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Nr(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ch(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ch(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ki(e,n),s=Mn(s),r=r(s),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,s=Wn(r,e.pendingProps),s=Wn(r.type,s),ny(t,e,r,s,n);case 15:return U_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),uu(t,e),e.tag=1,fn(r)?(t=!0,ju(e)):t=!1,Ki(e,n),M_(e,r,s),Ph(e,r,s,n),Dh(null,e,r,!0,t,n);case 19:return W_(t,e,n);case 22:return F_(t,e,n)}throw Error(K(156,e.tag))};function aw(t,e){return jv(t,e)}function Wk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qn(t,e,n,r){return new Wk(t,e,n,r)}function dp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hk(t){if(typeof t=="function")return dp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cf)return 11;if(t===Rf)return 14}return 2}function ys(t,e){var n=t.alternate;return n===null?(n=qn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")dp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ri:return Zs(n.children,s,i,e);case Nf:o=8,s|=8;break;case nh:return t=qn(12,n,e,s|2),t.elementType=nh,t.lanes=i,t;case rh:return t=qn(13,n,e,s),t.elementType=rh,t.lanes=i,t;case sh:return t=qn(19,n,e,s),t.elementType=sh,t.lanes=i,t;case yv:return Ac(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mv:o=10;break e;case gv:o=9;break e;case Cf:o=11;break e;case Rf:o=14;break e;case Xr:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=qn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Zs(t,e,n,r){return t=qn(7,t,r,e),t.lanes=n,t}function Ac(t,e,n,r){return t=qn(22,t,r,e),t.elementType=yv,t.lanes=n,t.stateNode={isHidden:!1},t}function Od(t,e,n){return t=qn(6,t,null,e),t.lanes=n,t}function Md(t,e,n){return e=qn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yd(0),this.expirationTimes=yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hp(t,e,n,r,s,i,o,l,c){return t=new Kk(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qf(i),t}function Gk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ci,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lw(t){if(!t)return Es;t=t._reactInternals;e:{if(gi(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(fn(n))return l_(t,n,e)}return e}function uw(t,e,n,r,s,i,o,l,c){return t=hp(n,r,!0,t,s,i,o,l,c),t.context=lw(null),n=t.current,r=nn(),s=gs(n),i=Nr(r,s),i.callback=e??null,ps(n,i,s),t.current.lanes=s,Ka(t,s,r),pn(t,r),t}function Sc(t,e,n,r){var s=e.current,i=nn(),o=gs(s);return n=lw(n),e.context===null?e.context=n:e.pendingContext=n,e=Nr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ps(s,e,o),t!==null&&(Xn(t,s,o,i),ou(t,s,o)),o}function Ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function py(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fp(t,e){py(t,e),(t=t.alternate)&&py(t,e)}function Qk(){return null}var cw=typeof reportError=="function"?reportError:function(t){console.error(t)};function pp(t){this._internalRoot=t}Nc.prototype.render=pp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Sc(t,e,null,null)};Nc.prototype.unmount=pp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oi(function(){Sc(null,t,null,null)}),e[qr]=null}};function Nc(t){this._internalRoot=t}Nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Fv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&Bv(t)}};function mp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function my(){}function Yk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Ku(o);i.call(h)}}var o=uw(e,r,t,0,null,!1,!1,"",my);return t._reactRootContainer=o,t[qr]=o.current,ba(t.nodeType===8?t.parentNode:t),oi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Ku(c);l.call(h)}}var c=hp(t,0,!1,null,null,!1,!1,"",my);return t._reactRootContainer=c,t[qr]=c.current,ba(t.nodeType===8?t.parentNode:t),oi(function(){Sc(e,c,n,r)}),c}function Rc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ku(o);l.call(c)}}Sc(e,o,t,s)}else o=Yk(n,e,t,s,r);return Ku(o)}Vv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$o(e.pendingLanes);n!==0&&(jf(e,n|1),pn(e,at()),!(Ie&6)&&(io=at()+500,Rs()))}break;case 13:oi(function(){var r=jr(t,1);if(r!==null){var s=nn();Xn(r,t,1,s)}}),fp(t,1)}};Df=function(t){if(t.tag===13){var e=jr(t,134217728);if(e!==null){var n=nn();Xn(e,t,134217728,n)}fp(t,134217728)}};Uv=function(t){if(t.tag===13){var e=gs(t),n=jr(t,e);if(n!==null){var r=nn();Xn(n,t,e,r)}fp(t,e)}};Fv=function(){return Pe};zv=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};ph=function(t,e,n){switch(e){case"input":if(ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xc(r);if(!s)throw Error(K(90));_v(r),ah(r,s)}}}break;case"textarea":xv(t,n);break;case"select":e=n.value,e!=null&&Bi(t,!!n.multiple,e,!1)}};Sv=lp;Nv=oi;var Xk={usingClientEntryPoint:!1,Events:[Qa,Di,xc,Tv,Av,lp]},Vo={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jk={bundleType:Vo.bundleType,version:Vo.version,rendererPackageName:Vo.rendererPackageName,rendererConfig:Vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pv(t),t===null?null:t.stateNode},findFiberByHostInstance:Vo.findFiberByHostInstance||Qk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{yc=$l.inject(Jk),ur=$l}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xk;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mp(e))throw Error(K(200));return Gk(t,e,null,n)};In.createRoot=function(t,e){if(!mp(t))throw Error(K(299));var n=!1,r="",s=cw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=hp(t,1,!1,null,null,n,!1,r,s),t[qr]=e.current,ba(t.nodeType===8?t.parentNode:t),new pp(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Pv(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return oi(t)};In.hydrate=function(t,e,n){if(!Cc(e))throw Error(K(200));return Rc(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!mp(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=cw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uw(e,null,t,1,n??null,s,!1,i,o),t[qr]=e.current,ba(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nc(e)};In.render=function(t,e,n){if(!Cc(e))throw Error(K(200));return Rc(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!Cc(t))throw Error(K(40));return t._reactRootContainer?(oi(function(){Rc(null,null,t,!1,function(){t._reactRootContainer=null,t[qr]=null})}),!0):!1};In.unstable_batchedUpdates=lp;In.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Cc(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Rc(t,e,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function dw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dw)}catch(t){console.error(t)}}dw(),dv.exports=In;var Zk=dv.exports,gy=Zk;eh.createRoot=gy.createRoot,eh.hydrateRoot=gy.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...h},p)=>O.createElement("svg",{ref:p,...eI,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${tI(t)}`,l].join(" "),...h},[...e.map(([m,y])=>O.createElement(m,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=Z("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Z("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gp=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=Z("BookOpenCheck",[["path",{d:"M8 3H2v15h7c1.7 0 3 1.3 3 3V7c0-2.2-1.8-4-4-4Z",key:"1i8u0n"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V3h-6c-2.2 0-4 1.8-4 4v14c0-1.7 1.3-3 3-3h7v-2.3",key:"jb5l51"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Z("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=Z("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Z("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=Z("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=Z("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Z("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=Z("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=Z("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=Z("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Z("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=Z("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=Z("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=Z("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=Z("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=Z("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Z("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=Z("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=Z("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=Z("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Z("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Hs=(t=>(t.LIGHT="light",t.DARK="dark",t))(Hs||{}),Ty={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},TI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let y=(l&15)<<2|h>>6,A=h&63;c||(A=64,o||(y=64)),r.push(n[p],n[m],n[y],n[A])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new AI;const y=i<<2|l>>4;if(r.push(y),h!==64){const A=l<<4&240|h>>2;if(r.push(A),m!==64){const P=h<<6&192|m;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SI=function(t){const e=bw(t);return kw.encodeByteArray(e,!0)},Zu=function(t){return SI(t).replace(/\./g,"")},Iw=function(t){try{return kw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=()=>NI().__FIREBASE_DEFAULTS__,RI=()=>{if(typeof process>"u"||typeof Ty>"u")return;const t=Ty.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},PI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Iw(t[1]);return e&&JSON.parse(e)},Pc=()=>{try{return CI()||RI()||PI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Tw=t=>{var e,n;return(n=(e=Pc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Aw=t=>{const e=Tw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sw=()=>{var t;return(t=Pc())===null||t===void 0?void 0:t.config},Nw=t=>{var e;return(e=Pc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zu(JSON.stringify(n)),Zu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function DI(){var t;const e=(t=Pc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function LI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VI(){const t=Xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UI(){return!DI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FI(){try{return typeof indexedDB=="object"}catch{return!1}}function zI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI="FirebaseError";class yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BI,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ja.prototype.create)}}class Ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?$I(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new yr(s,l,r)}}function $I(t,e){return t.replace(WI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const WI=/\{\$([^}]+)}/g;function HI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ec(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ay(i)&&Ay(o)){if(!ec(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ay(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ko(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KI(t,e){const n=new GI(t,e);return n.subscribe.bind(n)}class GI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ld),s.error===void 0&&(s.error=Ld),s.complete===void 0&&(s.complete=Ld);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class bs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JI(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XI(t){return t===Ws?void 0:t}function JI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const eT={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},tT=xe.INFO,nT={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},rT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vp{constructor(e){this.name=e,this._logLevel=tT,this._logHandler=rT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const sT=(t,e)=>e.some(n=>t instanceof n);let Sy,Ny;function iT(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oT(){return Ny||(Ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rw=new WeakMap,Qh=new WeakMap,Pw=new WeakMap,Vd=new WeakMap,_p=new WeakMap;function aT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(vs(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Rw.set(n,t)}).catch(()=>{}),_p.set(e,t),e}function lT(t){if(Qh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Qh.set(t,e)}let Yh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Pw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uT(t){Yh=t(Yh)}function cT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ud(this),e,...n);return Pw.set(r,e.sort?e.sort():[e]),vs(r)}:oT().includes(t)?function(...e){return t.apply(Ud(this),e),vs(Rw.get(this))}:function(...e){return vs(t.apply(Ud(this),e))}}function dT(t){return typeof t=="function"?cT(t):(t instanceof IDBTransaction&&lT(t),sT(t,iT())?new Proxy(t,Yh):t)}function vs(t){if(t instanceof IDBRequest)return aT(t);if(Vd.has(t))return Vd.get(t);const e=dT(t);return e!==t&&(Vd.set(t,e),_p.set(e,t)),e}const Ud=t=>_p.get(t);function hT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=vs(o);return r&&o.addEventListener("upgradeneeded",c=>{r(vs(o.result),c.oldVersion,c.newVersion,vs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const fT=["get","getKey","getAll","getAllKeys","count"],pT=["put","add","delete","clear"],Fd=new Map;function Cy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fd.get(e))return Fd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=pT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||fT.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return Fd.set(e,i),i}uT(t=>({...t,get:(e,n,r)=>Cy(e,n)||t.get(e,n,r),has:(e,n)=>!!Cy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xh="@firebase/app",Ry="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=new vp("@firebase/app"),yT="@firebase/app-compat",vT="@firebase/analytics-compat",_T="@firebase/analytics",wT="@firebase/app-check-compat",xT="@firebase/app-check",ET="@firebase/auth",bT="@firebase/auth-compat",kT="@firebase/database",IT="@firebase/data-connect",TT="@firebase/database-compat",AT="@firebase/functions",ST="@firebase/functions-compat",NT="@firebase/installations",CT="@firebase/installations-compat",RT="@firebase/messaging",PT="@firebase/messaging-compat",qT="@firebase/performance",jT="@firebase/performance-compat",DT="@firebase/remote-config",OT="@firebase/remote-config-compat",MT="@firebase/storage",LT="@firebase/storage-compat",VT="@firebase/firestore",UT="@firebase/vertexai-preview",FT="@firebase/firestore-compat",zT="firebase",BT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="[DEFAULT]",$T={[Xh]:"fire-core",[yT]:"fire-core-compat",[_T]:"fire-analytics",[vT]:"fire-analytics-compat",[xT]:"fire-app-check",[wT]:"fire-app-check-compat",[ET]:"fire-auth",[bT]:"fire-auth-compat",[kT]:"fire-rtdb",[IT]:"fire-data-connect",[TT]:"fire-rtdb-compat",[AT]:"fire-fn",[ST]:"fire-fn-compat",[NT]:"fire-iid",[CT]:"fire-iid-compat",[RT]:"fire-fcm",[PT]:"fire-fcm-compat",[qT]:"fire-perf",[jT]:"fire-perf-compat",[DT]:"fire-rc",[OT]:"fire-rc-compat",[MT]:"fire-gcs",[LT]:"fire-gcs-compat",[VT]:"fire-fst",[FT]:"fire-fst-compat",[UT]:"fire-vertex","fire-js":"fire-js",[zT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,WT=new Map,Zh=new Map;function Py(t,e){try{t.container.addComponent(e)}catch(n){Or.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ai(t){const e=t.name;if(Zh.has(e))return Or.debug(`There were multiple attempts to register component ${e}.`),!1;Zh.set(e,t);for(const n of tc.values())Py(n,t);for(const n of WT.values())Py(n,t);return!0}function qc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Qn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new Ja("app","Firebase",HT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=BT;function qw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _s.create("bad-app-name",{appName:String(s)});if(n||(n=Sw()),!n)throw _s.create("no-options");const i=tc.get(s);if(i){if(ec(n,i.options)&&ec(r,i.config))return i;throw _s.create("duplicate-app",{appName:s})}const o=new ZI(s);for(const c of Zh.values())o.addComponent(c);const l=new KT(n,r,o);return tc.set(s,l),l}function wp(t=Jh){const e=tc.get(t);if(!e&&t===Jh&&Sw())return qw();if(!e)throw _s.create("no-app",{appName:t});return e}function dr(t,e,n){var r;let s=(r=$T[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Or.warn(l.join(" "));return}ai(new bs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firebase-heartbeat-database",QT=1,Da="firebase-heartbeat-store";let zd=null;function jw(){return zd||(zd=hT(GT,QT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Da)}catch(n){console.warn(n)}}}}).catch(t=>{throw _s.create("idb-open",{originalErrorMessage:t.message})})),zd}async function YT(t){try{const n=(await jw()).transaction(Da),r=await n.objectStore(Da).get(Dw(t));return await n.done,r}catch(e){if(e instanceof yr)Or.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Or.warn(n.message)}}}async function qy(t,e){try{const r=(await jw()).transaction(Da,"readwrite");await r.objectStore(Da).put(e,Dw(t)),await r.done}catch(n){if(n instanceof yr)Or.warn(n.message);else{const r=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Or.warn(r.message)}}}function Dw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT=1024,JT=30*24*60*60*1e3;class ZT{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new t2(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=JT}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Or.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jy(),{heartbeatsToSend:r,unsentEntries:s}=e2(this._heartbeatsCache.heartbeats),i=Zu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Or.warn(n),""}}}function jy(){return new Date().toISOString().substring(0,10)}function e2(t,e=XT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Dy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class t2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FI()?zI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return qy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return qy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Dy(t){return Zu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(t){ai(new bs("platform-logger",e=>new mT(e),"PRIVATE")),ai(new bs("heartbeat",e=>new ZT(e),"PRIVATE")),dr(Xh,Ry,t),dr(Xh,Ry,"esm2017"),dr("fire-js","")}n2("");var r2="firebase",s2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(r2,s2,"app");var Oy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ei,Ow;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,g){function E(){}E.prototype=g.prototype,w.D=g.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(k,T,C){for(var b=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)b[Te-2]=arguments[Te];return g.prototype[T].apply(k,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,E){E||(E=0);var k=Array(16);if(typeof g=="string")for(var T=0;16>T;++T)k[T]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(T=0;16>T;++T)k[T]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=w.g[0],E=w.g[1],T=w.g[2];var C=w.g[3],b=g+(C^E&(T^C))+k[0]+3614090360&4294967295;g=E+(b<<7&4294967295|b>>>25),b=C+(T^g&(E^T))+k[1]+3905402710&4294967295,C=g+(b<<12&4294967295|b>>>20),b=T+(E^C&(g^E))+k[2]+606105819&4294967295,T=C+(b<<17&4294967295|b>>>15),b=E+(g^T&(C^g))+k[3]+3250441966&4294967295,E=T+(b<<22&4294967295|b>>>10),b=g+(C^E&(T^C))+k[4]+4118548399&4294967295,g=E+(b<<7&4294967295|b>>>25),b=C+(T^g&(E^T))+k[5]+1200080426&4294967295,C=g+(b<<12&4294967295|b>>>20),b=T+(E^C&(g^E))+k[6]+2821735955&4294967295,T=C+(b<<17&4294967295|b>>>15),b=E+(g^T&(C^g))+k[7]+4249261313&4294967295,E=T+(b<<22&4294967295|b>>>10),b=g+(C^E&(T^C))+k[8]+1770035416&4294967295,g=E+(b<<7&4294967295|b>>>25),b=C+(T^g&(E^T))+k[9]+2336552879&4294967295,C=g+(b<<12&4294967295|b>>>20),b=T+(E^C&(g^E))+k[10]+4294925233&4294967295,T=C+(b<<17&4294967295|b>>>15),b=E+(g^T&(C^g))+k[11]+2304563134&4294967295,E=T+(b<<22&4294967295|b>>>10),b=g+(C^E&(T^C))+k[12]+1804603682&4294967295,g=E+(b<<7&4294967295|b>>>25),b=C+(T^g&(E^T))+k[13]+4254626195&4294967295,C=g+(b<<12&4294967295|b>>>20),b=T+(E^C&(g^E))+k[14]+2792965006&4294967295,T=C+(b<<17&4294967295|b>>>15),b=E+(g^T&(C^g))+k[15]+1236535329&4294967295,E=T+(b<<22&4294967295|b>>>10),b=g+(T^C&(E^T))+k[1]+4129170786&4294967295,g=E+(b<<5&4294967295|b>>>27),b=C+(E^T&(g^E))+k[6]+3225465664&4294967295,C=g+(b<<9&4294967295|b>>>23),b=T+(g^E&(C^g))+k[11]+643717713&4294967295,T=C+(b<<14&4294967295|b>>>18),b=E+(C^g&(T^C))+k[0]+3921069994&4294967295,E=T+(b<<20&4294967295|b>>>12),b=g+(T^C&(E^T))+k[5]+3593408605&4294967295,g=E+(b<<5&4294967295|b>>>27),b=C+(E^T&(g^E))+k[10]+38016083&4294967295,C=g+(b<<9&4294967295|b>>>23),b=T+(g^E&(C^g))+k[15]+3634488961&4294967295,T=C+(b<<14&4294967295|b>>>18),b=E+(C^g&(T^C))+k[4]+3889429448&4294967295,E=T+(b<<20&4294967295|b>>>12),b=g+(T^C&(E^T))+k[9]+568446438&4294967295,g=E+(b<<5&4294967295|b>>>27),b=C+(E^T&(g^E))+k[14]+3275163606&4294967295,C=g+(b<<9&4294967295|b>>>23),b=T+(g^E&(C^g))+k[3]+4107603335&4294967295,T=C+(b<<14&4294967295|b>>>18),b=E+(C^g&(T^C))+k[8]+1163531501&4294967295,E=T+(b<<20&4294967295|b>>>12),b=g+(T^C&(E^T))+k[13]+2850285829&4294967295,g=E+(b<<5&4294967295|b>>>27),b=C+(E^T&(g^E))+k[2]+4243563512&4294967295,C=g+(b<<9&4294967295|b>>>23),b=T+(g^E&(C^g))+k[7]+1735328473&4294967295,T=C+(b<<14&4294967295|b>>>18),b=E+(C^g&(T^C))+k[12]+2368359562&4294967295,E=T+(b<<20&4294967295|b>>>12),b=g+(E^T^C)+k[5]+4294588738&4294967295,g=E+(b<<4&4294967295|b>>>28),b=C+(g^E^T)+k[8]+2272392833&4294967295,C=g+(b<<11&4294967295|b>>>21),b=T+(C^g^E)+k[11]+1839030562&4294967295,T=C+(b<<16&4294967295|b>>>16),b=E+(T^C^g)+k[14]+4259657740&4294967295,E=T+(b<<23&4294967295|b>>>9),b=g+(E^T^C)+k[1]+2763975236&4294967295,g=E+(b<<4&4294967295|b>>>28),b=C+(g^E^T)+k[4]+1272893353&4294967295,C=g+(b<<11&4294967295|b>>>21),b=T+(C^g^E)+k[7]+4139469664&4294967295,T=C+(b<<16&4294967295|b>>>16),b=E+(T^C^g)+k[10]+3200236656&4294967295,E=T+(b<<23&4294967295|b>>>9),b=g+(E^T^C)+k[13]+681279174&4294967295,g=E+(b<<4&4294967295|b>>>28),b=C+(g^E^T)+k[0]+3936430074&4294967295,C=g+(b<<11&4294967295|b>>>21),b=T+(C^g^E)+k[3]+3572445317&4294967295,T=C+(b<<16&4294967295|b>>>16),b=E+(T^C^g)+k[6]+76029189&4294967295,E=T+(b<<23&4294967295|b>>>9),b=g+(E^T^C)+k[9]+3654602809&4294967295,g=E+(b<<4&4294967295|b>>>28),b=C+(g^E^T)+k[12]+3873151461&4294967295,C=g+(b<<11&4294967295|b>>>21),b=T+(C^g^E)+k[15]+530742520&4294967295,T=C+(b<<16&4294967295|b>>>16),b=E+(T^C^g)+k[2]+3299628645&4294967295,E=T+(b<<23&4294967295|b>>>9),b=g+(T^(E|~C))+k[0]+4096336452&4294967295,g=E+(b<<6&4294967295|b>>>26),b=C+(E^(g|~T))+k[7]+1126891415&4294967295,C=g+(b<<10&4294967295|b>>>22),b=T+(g^(C|~E))+k[14]+2878612391&4294967295,T=C+(b<<15&4294967295|b>>>17),b=E+(C^(T|~g))+k[5]+4237533241&4294967295,E=T+(b<<21&4294967295|b>>>11),b=g+(T^(E|~C))+k[12]+1700485571&4294967295,g=E+(b<<6&4294967295|b>>>26),b=C+(E^(g|~T))+k[3]+2399980690&4294967295,C=g+(b<<10&4294967295|b>>>22),b=T+(g^(C|~E))+k[10]+4293915773&4294967295,T=C+(b<<15&4294967295|b>>>17),b=E+(C^(T|~g))+k[1]+2240044497&4294967295,E=T+(b<<21&4294967295|b>>>11),b=g+(T^(E|~C))+k[8]+1873313359&4294967295,g=E+(b<<6&4294967295|b>>>26),b=C+(E^(g|~T))+k[15]+4264355552&4294967295,C=g+(b<<10&4294967295|b>>>22),b=T+(g^(C|~E))+k[6]+2734768916&4294967295,T=C+(b<<15&4294967295|b>>>17),b=E+(C^(T|~g))+k[13]+1309151649&4294967295,E=T+(b<<21&4294967295|b>>>11),b=g+(T^(E|~C))+k[4]+4149444226&4294967295,g=E+(b<<6&4294967295|b>>>26),b=C+(E^(g|~T))+k[11]+3174756917&4294967295,C=g+(b<<10&4294967295|b>>>22),b=T+(g^(C|~E))+k[2]+718787259&4294967295,T=C+(b<<15&4294967295|b>>>17),b=E+(C^(T|~g))+k[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var E=g-this.blockSize,k=this.B,T=this.h,C=0;C<g;){if(T==0)for(;C<=E;)s(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<g;)if(k[T++]=w.charCodeAt(C++),T==this.blockSize){s(this,k),T=0;break}}else for(;C<g;)if(k[T++]=w[C++],T==this.blockSize){s(this,k),T=0;break}}this.h=T,this.o+=g},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var E=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=E&255,E/=256;for(this.u(w),w=Array(16),g=E=0;4>g;++g)for(var k=0;32>k;k+=8)w[E++]=this.g[g]>>>k&255;return w};function i(w,g){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=g(w)}function o(w,g){this.h=g;for(var E=[],k=!0,T=w.length-1;0<=T;T--){var C=w[T]|0;k&&C==g||(E[T]=C,k=!1)}this.g=E}var l={};function c(w){return-128<=w&&128>w?i(w,function(g){return new o([g|0],0>g?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return S(h(-w));for(var g=[],E=1,k=0;w>=E;k++)g[k]=w/E|0,E*=4294967296;return new o(g,0)}function p(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return S(p(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(g,8)),k=m,T=0;T<w.length;T+=8){var C=Math.min(8,w.length-T),b=parseInt(w.substring(T,T+C),g);8>C?(C=h(Math.pow(g,C)),k=k.j(C).add(h(b))):(k=k.j(E),k=k.add(h(b)))}return k}var m=c(0),y=c(1),A=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-S(this).m();for(var w=0,g=1,E=0;E<this.g.length;E++){var k=this.i(E);w+=(0<=k?k:4294967296+k)*g,g*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(P(this))return"0";if(D(this))return"-"+S(this).toString(w);for(var g=h(Math.pow(w,6)),E=this,k="";;){var T=q(E,g).g;E=x(E,T.j(g));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=T,P(E))return C+k;for(;6>C.length;)C="0"+C;k=C+k}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function P(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function D(w){return w.h==-1}t.l=function(w){return w=x(this,w),D(w)?-1:P(w)?0:1};function S(w){for(var g=w.g.length,E=[],k=0;k<g;k++)E[k]=~w.g[k];return new o(E,~w.h).add(y)}t.abs=function(){return D(this)?S(this):this},t.add=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],k=0,T=0;T<=g;T++){var C=k+(this.i(T)&65535)+(w.i(T)&65535),b=(C>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);k=b>>>16,C&=65535,b&=65535,E[T]=b<<16|C}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(w,g){return w.add(S(g))}t.j=function(w){if(P(this)||P(w))return m;if(D(this))return D(w)?S(this).j(S(w)):S(S(this).j(w));if(D(w))return S(this.j(S(w)));if(0>this.l(A)&&0>w.l(A))return h(this.m()*w.m());for(var g=this.g.length+w.g.length,E=[],k=0;k<2*g;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(var T=0;T<w.g.length;T++){var C=this.i(k)>>>16,b=this.i(k)&65535,Te=w.i(T)>>>16,Ze=w.i(T)&65535;E[2*k+2*T]+=b*Ze,_(E,2*k+2*T),E[2*k+2*T+1]+=C*Ze,_(E,2*k+2*T+1),E[2*k+2*T+1]+=b*Te,_(E,2*k+2*T+1),E[2*k+2*T+2]+=C*Te,_(E,2*k+2*T+2)}for(k=0;k<g;k++)E[k]=E[2*k+1]<<16|E[2*k];for(k=g;k<2*g;k++)E[k]=0;return new o(E,0)};function _(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function I(w,g){this.g=w,this.h=g}function q(w,g){if(P(g))throw Error("division by zero");if(P(w))return new I(m,m);if(D(w))return g=q(S(w),g),new I(S(g.g),S(g.h));if(D(g))return g=q(w,S(g)),new I(S(g.g),g.h);if(30<w.g.length){if(D(w)||D(g))throw Error("slowDivide_ only works with positive integers.");for(var E=y,k=g;0>=k.l(w);)E=W(E),k=W(k);var T=$(E,1),C=$(k,1);for(k=$(k,2),E=$(E,2);!P(k);){var b=C.add(k);0>=b.l(w)&&(T=T.add(E),C=b),k=$(k,1),E=$(E,1)}return g=x(w,T.j(g)),new I(T,g)}for(T=m;0<=w.l(g);){for(E=Math.max(1,Math.floor(w.m()/g.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),C=h(E),b=C.j(g);D(b)||0<b.l(w);)E-=k,C=h(E),b=C.j(g);P(C)&&(C=y),T=T.add(C),w=x(w,b)}return new I(T,w)}t.A=function(w){return q(this,w).h},t.and=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],k=0;k<g;k++)E[k]=this.i(k)&w.i(k);return new o(E,this.h&w.h)},t.or=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],k=0;k<g;k++)E[k]=this.i(k)|w.i(k);return new o(E,this.h|w.h)},t.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],k=0;k<g;k++)E[k]=this.i(k)^w.i(k);return new o(E,this.h^w.h)};function W(w){for(var g=w.g.length+1,E=[],k=0;k<g;k++)E[k]=w.i(k)<<1|w.i(k-1)>>>31;return new o(E,w.h)}function $(w,g){var E=g>>5;g%=32;for(var k=w.g.length-E,T=[],C=0;C<k;C++)T[C]=0<g?w.i(C+E)>>>g|w.i(C+E+1)<<32-g:w.i(C+E);return new o(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ow=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,ei=o}).apply(typeof Oy<"u"?Oy:typeof self<"u"?self:typeof window<"u"?window:{});var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw,Go,Lw,mu,ef,Vw,Uw,Fw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hl=="object"&&Hl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in f))break e;f=f[j]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,v=!1,j={next:function(){if(!v&&f<a.length){var L=f++;return{value:d(L,a[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function A(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function P(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,j,L){for(var Q=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Q[Oe-2]=arguments[Oe];return d.prototype[j].apply(v,Q)}}function D(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function S(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(c(v)){const j=a.length||0,L=v.length||0;a.length=j+L;for(let Q=0;Q<L;Q++)a[j+Q]=v[Q]}else a.push(v)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function I(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function q(a){return q[" "](a),a}q[" "]=function(){};var W=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function $(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function w(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function g(a){const d={};for(const f in a)d[f]=a[f];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,d){let f,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(f in v)a[f]=v[f];for(let L=0;L<E.length;L++)f=E[L],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function T(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function C(a){l.setTimeout(()=>{throw a},0)}function b(){var a=ee;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Te{constructor(){this.h=this.g=null}add(d,f){const v=Ze.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Ze=new x(()=>new kt,a=>a.reset());class kt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,G=!1,ee=new Te,oe=()=>{const a=l.Promise.resolve(void 0);ct=()=>{a.then(ye)}};var ye=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(f){C(f)}var d=Ze;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}G=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function gt(a,d){if(ve.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(W){e:{try{q(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:dt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&gt.aa.h.call(this)}}P(gt,ve);var dt={2:"touch",3:"pen",4:"mouse"};gt.prototype.h=function(){gt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var It="closure_listenable_"+(1e6*Math.random()|0),An=0;function mn(a,d,f,v,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=j,this.key=++An,this.da=this.fa=!1}function et(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ue(a){this.src=a,this.g={},this.h=0}Ue.prototype.add=function(a,d,f,v,j){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var Q=ht(a,d,v,j);return-1<Q?(d=a[Q],f||(d.fa=!1)):(d=new mn(d,this.src,L,!!v,j),d.fa=f,a.push(d)),d};function ln(a,d){var f=d.type;if(f in a.g){var v=a.g[f],j=Array.prototype.indexOf.call(v,d,void 0),L;(L=0<=j)&&Array.prototype.splice.call(v,j,1),L&&(et(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ht(a,d,f,v){for(var j=0;j<a.length;++j){var L=a[j];if(!L.da&&L.listener==d&&L.capture==!!f&&L.ha==v)return j}return-1}var Jt="closure_lm_"+(1e6*Math.random()|0),ke={};function gn(a,d,f,v,j){if(Array.isArray(d)){for(var L=0;L<d.length;L++)gn(a,d[L],f,v,j);return null}return f=Fe(f),a&&a[It]?a.K(d,f,h(v)?!!v.capture:!1,j):Tt(a,d,f,!1,v,j)}function Tt(a,d,f,v,j,L){if(!d)throw Error("Invalid event type");var Q=h(j)?!!j.capture:!!j,Oe=de(a);if(Oe||(a[Jt]=Oe=new Ue(a)),f=Oe.add(d,f,v,Q,L),f.proxy)return f;if(v=Mt(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Ve||(j=Q),j===void 0&&(j=!1),a.addEventListener(d.toString(),v,j);else if(a.attachEvent)a.attachEvent(At(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Mt(){function a(f){return d.call(a.src,a.listener,f)}const d=R;return a}function Lt(a,d,f,v,j){if(Array.isArray(d))for(var L=0;L<d.length;L++)Lt(a,d[L],f,v,j);else v=h(v)?!!v.capture:!!v,f=Fe(f),a&&a[It]?(a=a.i,d=String(d).toString(),d in a.g&&(L=a.g[d],f=ht(L,f,v,j),-1<f&&(et(L[f]),Array.prototype.splice.call(L,f,1),L.length==0&&(delete a.g[d],a.h--)))):a&&(a=de(a))&&(d=a.g[d.toString()],a=-1,d&&(a=ht(d,f,v,j)),(f=-1<a?d[a]:null)&&Sn(f))}function Sn(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[It])ln(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(At(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=de(d))?(ln(f,a),f.h==0&&(f.src=null,d[Jt]=null)):et(a)}}}function At(a){return a in ke?ke[a]:ke[a]="on"+a}function R(a,d){if(a.da)a=!0;else{d=new gt(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&Sn(a),a=f.call(v,d)}return a}function de(a){return a=a[Jt],a instanceof Ue?a:null}var me="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fe(a){return typeof a=="function"?a:(a[me]||(a[me]=function(d){return a.handleEvent(d)}),a[me])}function Ee(){pe.call(this),this.i=new Ue(this),this.M=this,this.F=null}P(Ee,pe),Ee.prototype[It]=!0,Ee.prototype.removeEventListener=function(a,d,f,v){Lt(this,a,d,f,v)};function Re(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new ve(d,a);else if(d instanceof ve)d.target=d.target||a;else{var j=d;d=new ve(v,a),k(d,j)}if(j=!0,f)for(var L=f.length-1;0<=L;L--){var Q=d.g=f[L];j=nr(Q,v,!0,d)&&j}if(Q=d.g=a,j=nr(Q,v,!0,d)&&j,j=nr(Q,v,!1,d)&&j,f)for(L=0;L<f.length;L++)Q=d.g=f[L],j=nr(Q,v,!1,d)&&j}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)et(f[v]);delete a.g[d],a.h--}}this.F=null},Ee.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},Ee.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function nr(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,L=0;L<d.length;++L){var Q=d[L];if(Q&&!Q.da&&Q.capture==f){var Oe=Q.listener,Nt=Q.ha||Q.src;Q.fa&&ln(a.i,Q),j=Oe.call(Nt,v)!==!1&&j}}return j&&!v.defaultPrevented}function rr(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Nn(a){a.g=rr(()=>{a.g=null,a.i&&(a.i=!1,Nn(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Os extends pe{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Nn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fn(a){pe.call(this),this.h=a,this.g={}}P(Fn,pe);var $r=[];function Wr(a){$(a.g,function(d,f){this.g.hasOwnProperty(f)&&Sn(d)},a),a.g={}}Fn.prototype.N=function(){Fn.aa.N.call(this),Wr(this)},Fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=l.JSON.stringify,Ms=l.JSON.parse,Ls=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Cn(){}Cn.prototype.h=null;function U(a){return a.h||(a.h=a.i())}function ce(){}var Ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function it(){ve.call(this,"d")}P(it,ve);function Vt(){ve.call(this,"c")}P(Vt,ve);var St={},M=null;function B(){return M=M||new Ee}St.La="serverreachability";function re(a){ve.call(this,St.La,a)}P(re,ve);function z(a){const d=B();Re(d,new re(d))}St.STAT_EVENT="statevent";function ne(a,d){ve.call(this,St.STAT_EVENT,a),this.stat=d}P(ne,ve);function ie(a){const d=B();Re(d,new ne(d,a))}St.Ma="timingevent";function N(a,d){ve.call(this,St.Ma,a),this.size=d}P(N,ve);function X(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function te(){this.g=!0}te.prototype.xa=function(){this.g=!1};function Ce(a,d,f,v,j,L){a.info(function(){if(a.g)if(L)for(var Q="",Oe=L.split("&"),Nt=0;Nt<Oe.length;Nt++){var Ae=Oe[Nt].split("=");if(1<Ae.length){var Ft=Ae[0];Ae=Ae[1];var zt=Ft.split("_");Q=2<=zt.length&&zt[1]=="type"?Q+(Ft+"="+Ae+"&"):Q+(Ft+"=redacted&")}}else Q=null;else Q=L;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+d+`
`+f+`
`+Q})}function Ge(a,d,f,v,j,L,Q){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+d+`
`+f+`
`+L+" "+Q})}function je(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+vr(a,f)+(v?" "+v:"")})}function Zt(a,d){a.info(function(){return"TIMEOUT: "+d})}te.prototype.info=function(){};function vr(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var L=j[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Q=1;Q<j.length;Q++)j[Q]=""}}}}return sr(f)}catch{return d}}var wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ut;function Vs(){}P(Vs,Cn),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},Ut=new Vs;function zn(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new Fn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var Im={},td={};function nd(a,d,f){a.L=1,a.v=_l(_r(d)),a.m=f,a.P=!0,Tm(a,null)}function Tm(a,d){a.F=Date.now(),gl(a),a.A=_r(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Um(f.i,"t",v),a.C=0,f=a.j.J,a.h=new ml,a.g=sg(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Os(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&($r[0]=j.toString()),j=$r);for(var L=0;L<j.length;L++){var Q=gn(f,j[L],v||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),z(),Ce(a.i,a.u,a.A,a.l,a.R,a.m)}zn.prototype.ca=function(a){a=a.target;const d=this.M;d&&wr(a)==3?d.j():this.Y(a)},zn.prototype.Y=function(a){try{if(a==this.g)e:{const zt=wr(this.g);var d=this.g.Ba();const bi=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||Km(this.g)))){this.J||zt!=4||d==7||(d==8||0>=bi?z(3):z(2)),rd(this);var f=this.g.Z();this.X=f;t:if(Am(this)){var v=Km(this.g);a="";var j=v.length,L=wr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Us(this),ko(this);var Q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(L&&d==j-1)});v.length=0,this.h.g+=a,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=f==200,Ge(this.i,this.u,this.A,this.l,this.R,zt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,Nt=this.g;if((Oe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Oe)){var Ae=Oe;break t}}Ae=null}if(f=Ae)je(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sd(this,f);else{this.o=!1,this.s=3,ie(12),Us(this),ko(this);break e}}if(this.P){f=!0;let Bn;for(;!this.J&&this.C<Q.length;)if(Bn=lE(this,Q),Bn==td){zt==4&&(this.s=4,ie(14),f=!1),je(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==Im){this.s=4,ie(15),je(this.i,this.l,Q,"[Invalid Chunk]"),f=!1;break}else je(this.i,this.l,Bn,null),sd(this,Bn);if(Am(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||Q.length!=0||this.h.h||(this.s=1,ie(16),f=!1),this.o=this.o&&f,!f)je(this.i,this.l,Q,"[Invalid Chunked Response]"),Us(this),ko(this);else if(0<Q.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),cd(Ft),Ft.M=!0,ie(11))}}else je(this.i,this.l,Q,null),sd(this,Q);zt==4&&Us(this),this.o&&!this.J&&(zt==4?eg(this.j,this):(this.o=!1,gl(this)))}else IE(this.g),f==400&&0<Q.indexOf("Unknown SID")?(this.s=3,ie(12)):(this.s=0,ie(13)),Us(this),ko(this)}}}catch{}finally{}};function Am(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function lE(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?td:(f=Number(d.substring(f,v)),isNaN(f)?Im:(v+=1,v+f>d.length?td:(d=d.slice(v,v+f),a.C=v+f,d)))}zn.prototype.cancel=function(){this.J=!0,Us(this)};function gl(a){a.S=Date.now()+a.I,Sm(a,a.I)}function Sm(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=X(y(a.ba,a),d)}function rd(a){a.B&&(l.clearTimeout(a.B),a.B=null)}zn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Zt(this.i,this.A),this.L!=2&&(z(),ie(17)),Us(this),this.s=2,ko(this)):Sm(this,this.S-a)};function ko(a){a.j.G==0||a.J||eg(a.j,a)}function Us(a){rd(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,Wr(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function sd(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||id(f.h,a))){if(!a.K&&id(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Il(f),bl(f);else break e;ud(f),ie(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=X(y(f.Za,f),6e3));if(1>=Rm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else zs(f,11)}else if((a.K||f.g==a)&&Il(f),!_(d))for(j=f.Da.g.parse(d),d=0;d<j.length;d++){let Ae=j[d];if(f.T=Ae[0],Ae=Ae[1],f.G==2)if(Ae[0]=="c"){f.K=Ae[1],f.ia=Ae[2];const Ft=Ae[3];Ft!=null&&(f.la=Ft,f.j.info("VER="+f.la));const zt=Ae[4];zt!=null&&(f.Aa=zt,f.j.info("SVER="+f.Aa));const bi=Ae[5];bi!=null&&typeof bi=="number"&&0<bi&&(v=1.5*bi,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Bn=a.g;if(Bn){const Al=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var L=v.h;L.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(od(L,L.h),L.h=null))}if(v.D){const dd=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;dd&&(v.ya=dd,ze(v.I,v.D,dd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var Q=a;if(v.qa=rg(v,v.J?v.ia:null,v.W),Q.K){Pm(v.h,Q);var Oe=Q,Nt=v.L;Nt&&(Oe.I=Nt),Oe.B&&(rd(Oe),gl(Oe)),v.g=Q}else Jm(v);0<f.i.length&&kl(f)}else Ae[0]!="stop"&&Ae[0]!="close"||zs(f,7);else f.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?zs(f,7):ld(f):Ae[0]!="noop"&&f.l&&f.l.ta(Ae),f.v=0)}}z(4)}catch{}}var uE=class{constructor(a,d){this.g=a,this.map=d}};function Nm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Rm(a){return a.h?1:a.g?a.g.size:0}function id(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function od(a,d){a.g?a.g.add(d):a.h=d}function Pm(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Nm.prototype.cancel=function(){if(this.i=qm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function qm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return D(a.i)}function cE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function dE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function jm(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=dE(a),v=cE(a),j=v.length,L=0;L<j;L++)d.call(void 0,v[L],f&&f[L],a)}var Dm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hE(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),j=null;if(0<=v){var L=a[f].substring(0,v);j=a[f].substring(v+1)}else L=a[f];d(L,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Fs(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Fs){this.h=a.h,yl(this,a.j),this.o=a.o,this.g=a.g,vl(this,a.s),this.l=a.l;var d=a.i,f=new Ao;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Om(this,f),this.m=a.m}else a&&(d=String(a).match(Dm))?(this.h=!1,yl(this,d[1]||"",!0),this.o=Io(d[2]||""),this.g=Io(d[3]||"",!0),vl(this,d[4]),this.l=Io(d[5]||"",!0),Om(this,d[6]||"",!0),this.m=Io(d[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}Fs.prototype.toString=function(){var a=[],d=this.j;d&&a.push(To(d,Mm,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(To(d,Mm,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(To(f,f.charAt(0)=="/"?mE:pE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",To(f,yE)),a.join("")};function _r(a){return new Fs(a)}function yl(a,d,f){a.j=f?Io(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function vl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Om(a,d,f){d instanceof Ao?(a.i=d,vE(a.i,a.h)):(f||(d=To(d,gE)),a.i=new Ao(d,a.h))}function ze(a,d,f){a.i.set(d,f)}function _l(a){return ze(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Io(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function To(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,fE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Mm=/[#\/\?@]/g,pE=/[#\?:]/g,mE=/[#\?]/g,gE=/[#\?@]/g,yE=/#/g;function Ao(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Kr(a){a.g||(a.g=new Map,a.h=0,a.i&&hE(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ao.prototype,t.add=function(a,d){Kr(this),this.i=null,a=xi(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Lm(a,d){Kr(a),d=xi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Vm(a,d){return Kr(a),d=xi(a,d),a.g.has(d)}t.forEach=function(a,d){Kr(this),this.g.forEach(function(f,v){f.forEach(function(j){a.call(d,j,v,this)},this)},this)},t.na=function(){Kr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const j=a[v];for(let L=0;L<j.length;L++)f.push(d[v])}return f},t.V=function(a){Kr(this);let d=[];if(typeof a=="string")Vm(this,a)&&(d=d.concat(this.g.get(xi(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Kr(this),this.i=null,a=xi(this,a),Vm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Um(a,d,f){Lm(a,d),0<f.length&&(a.i=null,a.g.set(xi(a,d),D(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const L=encodeURIComponent(String(v)),Q=this.V(v);for(v=0;v<Q.length;v++){var j=L;Q[v]!==""&&(j+="="+encodeURIComponent(String(Q[v]))),a.push(j)}}return this.i=a.join("&")};function xi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function vE(a,d){d&&!a.j&&(Kr(a),a.i=null,a.g.forEach(function(f,v){var j=v.toLowerCase();v!=j&&(Lm(this,v),Um(this,j,f))},a)),a.j=d}function _E(a,d){const f=new te;if(l.Image){const v=new Image;v.onload=A(Gr,f,"TestLoadImage: loaded",!0,d,v),v.onerror=A(Gr,f,"TestLoadImage: error",!1,d,v),v.onabort=A(Gr,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=A(Gr,f,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function wE(a,d){const f=new te,v=new AbortController,j=setTimeout(()=>{v.abort(),Gr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(L=>{clearTimeout(j),L.ok?Gr(f,"TestPingServer: ok",!0,d):Gr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Gr(f,"TestPingServer: error",!1,d)})}function Gr(a,d,f,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(f)}catch{}}function xE(){this.g=new Ls}function EE(a,d,f){const v=f||"";try{jm(a,function(j,L){let Q=j;h(j)&&(Q=sr(j)),d.push(v+L+"="+encodeURIComponent(Q))})}catch(j){throw d.push(v+"type="+encodeURIComponent("_badmap")),j}}function wl(a){this.l=a.Ub||null,this.j=a.eb||!1}P(wl,Cn),wl.prototype.g=function(){return new xl(this.l,this.j)},wl.prototype.i=function(a){return function(){return a}}({});function xl(a,d){Ee.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(xl,Ee),t=xl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,No(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?So(this):No(this),this.readyState==3&&Fm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,So(this))},t.Qa=function(a){this.g&&(this.response=a,So(this))},t.ga=function(){this.g&&So(this)};function So(a){a.readyState=4,a.l=null,a.j=null,a.v=null,No(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function No(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function zm(a){let d="";return $(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function ad(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=zm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):ze(a,d,f))}function tt(a){Ee.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(tt,Ee);var bE=/^https?$/i,kE=["POST","PUT"];t=tt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ut.g(),this.v=this.o?U(this.o):U(Ut),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(L){Bm(this,L);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)f.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())f.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(L=>L.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(kE,d,void 0))||v||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,Q]of f)this.g.setRequestHeader(L,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hm(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Bm(this,L)}};function Bm(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,$m(a),El(a)}function $m(a){a.A||(a.A=!0,Re(a,"complete"),Re(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Re(this,"complete"),Re(this,"abort"),El(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),El(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Wm(this):this.bb())},t.bb=function(){Wm(this)};function Wm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||wr(a)!=4||a.Z()!=2)){if(a.u&&wr(a)==4)rr(a.Ea,0,a);else if(Re(a,"readystatechange"),wr(a)==4){a.h=!1;try{const Q=a.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=Q===0){var j=String(a.D).match(Dm)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),v=!bE.test(j?j.toLowerCase():"")}f=v}if(f)Re(a,"complete"),Re(a,"success");else{a.m=6;try{var L=2<wr(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",$m(a)}}finally{El(a)}}}}function El(a,d){if(a.g){Hm(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Re(a,"ready");try{f.onreadystatechange=v}catch{}}}function Hm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function wr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<wr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Ms(d)}};function Km(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function IE(a){const d={};a=(a.g&&2<=wr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var f=T(a[v]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const L=d[j]||[];d[j]=L,L.push(f)}w(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Co(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Gm(a){this.Aa=0,this.i=[],this.j=new te,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Co("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Co("baseRetryDelayMs",5e3,a),this.cb=Co("retryDelaySeedMs",1e4,a),this.Wa=Co("forwardChannelMaxRetries",2,a),this.wa=Co("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Nm(a&&a.concurrentRequestLimit),this.Da=new xE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gm.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){ie(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=rg(this,null,this.W),kl(this)};function ld(a){if(Qm(a),a.G==3){var d=a.U++,f=_r(a.I);if(ze(f,"SID",a.K),ze(f,"RID",d),ze(f,"TYPE","terminate"),Ro(a,f),d=new zn(a,a.j,d),d.L=2,d.v=_l(_r(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=sg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),gl(d)}ng(a)}function bl(a){a.g&&(cd(a),a.g.cancel(),a.g=null)}function Qm(a){bl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Il(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function kl(a){if(!Cm(a.h)&&!a.s){a.s=!0;var d=a.Ga;ct||oe(),G||(ct(),G=!0),ee.add(d,a),a.B=0}}function TE(a,d){return Rm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=X(y(a.Ga,a,d),tg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new zn(this,this.j,a);let L=this.o;if(this.S&&(L?(L=g(L),k(L,this.S)):L=this.S),this.m!==null||this.O||(j.H=L,L=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Xm(this,j,d),f=_r(this.I),ze(f,"RID",a),ze(f,"CVER",22),this.D&&ze(f,"X-HTTP-Session-Id",this.D),Ro(this,f),L&&(this.O?d="headers="+encodeURIComponent(String(zm(L)))+"&"+d:this.m&&ad(f,this.m,L)),od(this.h,j),this.Ua&&ze(f,"TYPE","init"),this.P?(ze(f,"$req",d),ze(f,"SID","null"),j.T=!0,nd(j,f,null)):nd(j,f,d),this.G=2}}else this.G==3&&(a?Ym(this,a):this.i.length==0||Cm(this.h)||Ym(this))};function Ym(a,d){var f;d?f=d.l:f=a.U++;const v=_r(a.I);ze(v,"SID",a.K),ze(v,"RID",f),ze(v,"AID",a.T),Ro(a,v),a.m&&a.o&&ad(v,a.m,a.o),f=new zn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Xm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),od(a.h,f),nd(f,v,d)}function Ro(a,d){a.H&&$(a.H,function(f,v){ze(d,v,f)}),a.l&&jm({},function(f,v){ze(d,v,f)})}function Xm(a,d,f){f=Math.min(a.i.length,f);var v=a.l?y(a.l.Na,a.l,a):null;e:{var j=a.i;let L=-1;for(;;){const Q=["count="+f];L==-1?0<f?(L=j[0].g,Q.push("ofs="+L)):L=0:Q.push("ofs="+L);let Oe=!0;for(let Nt=0;Nt<f;Nt++){let Ae=j[Nt].g;const Ft=j[Nt].map;if(Ae-=L,0>Ae)L=Math.max(0,j[Nt].g-100),Oe=!1;else try{EE(Ft,Q,"req"+Ae+"_")}catch{v&&v(Ft)}}if(Oe){v=Q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function Jm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ct||oe(),G||(ct(),G=!0),ee.add(d,a),a.v=0}}function ud(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=X(y(a.Fa,a),tg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Zm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=X(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ie(10),bl(this),Zm(this))};function cd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Zm(a){a.g=new zn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=_r(a.qa);ze(d,"RID","rpc"),ze(d,"SID",a.K),ze(d,"AID",a.T),ze(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&ze(d,"TO",a.ja),ze(d,"TYPE","xmlhttp"),Ro(a,d),a.m&&a.o&&ad(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=_l(_r(d)),f.m=null,f.P=!0,Tm(f,a)}t.Za=function(){this.C!=null&&(this.C=null,bl(this),ud(this),ie(19))};function Il(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function eg(a,d){var f=null;if(a.g==d){Il(a),cd(a),a.g=null;var v=2}else if(id(a.h,d))f=d.D,Pm(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;v=B(),Re(v,new N(v,f)),kl(a)}else Jm(a);else if(j=d.s,j==3||j==0&&0<d.X||!(v==1&&TE(a,d)||v==2&&ud(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),j){case 1:zs(a,5);break;case 4:zs(a,10);break;case 3:zs(a,6);break;default:zs(a,2)}}}function tg(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function zs(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),v=a.Xa;const j=!v;v=new Fs(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||yl(v,"https"),_l(v),j?_E(v.toString(),f):wE(v.toString(),f)}else ie(2);a.G=0,a.l&&a.l.sa(d),ng(a),Qm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ie(2)):(this.j.info("Failed to ping google.com"),ie(1))};function ng(a){if(a.G=0,a.ka=[],a.l){const d=qm(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ka,d),S(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function rg(a,d,f){var v=f instanceof Fs?_r(f):new Fs(f);if(v.g!="")d&&(v.g=d+"."+v.g),vl(v,v.s);else{var j=l.location;v=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var L=new Fs(null);v&&yl(L,v),d&&(L.g=d),j&&vl(L,j),f&&(L.l=f),v=L}return f=a.D,d=a.ya,f&&d&&ze(v,f,d),ze(v,"VER",a.la),Ro(a,v),v}function sg(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new tt(new wl({eb:f})):new tt(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ig(){}t=ig.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(a,d){return new yn(a,d)};function yn(a,d){Ee.call(this),this.g=new Gm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ei(this)}P(yn,Ee),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){ld(this.g)},yn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=sr(a),a=f);d.i.push(new uE(d.Ya++,a)),d.G==3&&kl(d)},yn.prototype.N=function(){this.g.l=null,delete this.j,ld(this.g),delete this.g,yn.aa.N.call(this)};function og(a){it.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}P(og,it);function ag(){Vt.call(this),this.status=1}P(ag,Vt);function Ei(a){this.g=a}P(Ei,ig),Ei.prototype.ua=function(){Re(this.g,"a")},Ei.prototype.ta=function(a){Re(this.g,new og(a))},Ei.prototype.sa=function(a){Re(this.g,new ag)},Ei.prototype.ra=function(){Re(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,Fw=function(){return new Tl},Uw=function(){return B()},Vw=St,ef={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,mu=wt,Hr.COMPLETE="complete",Lw=Hr,ce.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,Go=ce,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,Mw=tt}).apply(typeof Hl<"u"?Hl:typeof self<"u"?self:typeof window<"u"?window:{});const My="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new vp("@firebase/firestore");function Uo(){return li.logLevel}function se(t,...e){if(li.logLevel<=xe.DEBUG){const n=e.map(xp);li.debug(`Firestore (${vo}): ${t}`,...n)}}function Mr(t,...e){if(li.logLevel<=xe.ERROR){const n=e.map(xp);li.error(`Firestore (${vo}): ${t}`,...n)}}function oo(t,...e){if(li.logLevel<=xe.WARN){const n=e.map(xp);li.warn(`Firestore (${vo}): ${t}`,...n)}}function xp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: `+t;throw Mr(e),new Error(e)}function qe(t,e){t||ue()}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class i2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class o2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class a2{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string"),new zw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new Ht(e)}}class l2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class u2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new l2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){qe(this.o===void 0);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.R=n.token,new c2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=h2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function ao(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new _t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new _t(0,0))}static max(){return new he(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class $e extends Oa{construct(e,n,r){return new $e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new $e(n)}static emptyPath(){return new $e([])}}const f2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Oa{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return f2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Y(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae($e.fromString(e))}static fromName(e){return new ae($e.fromString(e).popFirst(5))}static empty(){return new ae($e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&$e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return $e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new $e(e.slice()))}}function p2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=he.fromTimestamp(r===1e9?new _t(n+1,0):new _t(n,r));return new ks(s,ae.empty(),e)}function m2(t){return new ks(t.readTime,t.key,-1)}class ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ks(he.min(),ae.empty(),-1)}static max(){return new ks(he.max(),ae.empty(),-1)}}function g2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==y2)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(s=>s?H.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new H((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new H((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function _2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ep.oe=-1;function jc(t){return t==null}function nc(t){return t===0&&1/t==-1/0}function w2(t){return typeof t=="number"&&Number.isInteger(t)&&!nc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $w(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kl(this.root,e,this.comparator,!0)}}class Kl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=s??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vy(this.data.getIterator())}getIteratorFrom(e){return new Vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class Vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new wn([])}unionWith(e){let n=new jt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ao(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ww("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const x2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(t){if(qe(!!t),typeof t=="string"){let e=0;const n=x2.exec(t);if(qe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ui(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kp(t){const e=t.mapValue.fields.__previous_value__;return bp(e)?kp(e):e}function Ma(t){const e=Is(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,r,s,i,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class La{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new La("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl={mapValue:{}};function ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bp(t)?4:k2(t)?9007199254740991:b2(t)?10:11:ue()}function mr(t,e){if(t===e)return!0;const n=ci(t);if(n!==ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ma(t).isEqual(Ma(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Is(s.timestampValue),l=Is(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ui(s.bytesValue).isEqual(ui(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ot(s.geoPointValue.latitude)===ot(i.geoPointValue.latitude)&&ot(s.geoPointValue.longitude)===ot(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ot(s.integerValue)===ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ot(s.doubleValue),l=ot(i.doubleValue);return o===l?nc(o)===nc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ao(t.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ly(o)!==Ly(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!mr(o[c],l[c])))return!1;return!0}(t,e);default:return ue()}}function Va(t,e){return(t.values||[]).find(n=>mr(n,e))!==void 0}function lo(t,e){if(t===e)return 0;const n=ci(t),r=ci(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=ot(i.integerValue||i.doubleValue),c=ot(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Uy(t.timestampValue,e.timestampValue);case 4:return Uy(Ma(t),Ma(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ui(i),c=ui(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=Se(l[h],c[h]);if(p!==0)return p}return Se(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Se(ot(i.latitude),ot(o.latitude));return l!==0?l:Se(ot(i.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,h,p;const m=i.fields||{},y=o.fields||{},A=(l=m.value)===null||l===void 0?void 0:l.arrayValue,P=(c=y.value)===null||c===void 0?void 0:c.arrayValue,D=Se(((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0,((p=P==null?void 0:P.values)===null||p===void 0?void 0:p.length)||0);return D!==0?D:Fy(A,P)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Gl.mapValue&&o===Gl.mapValue)return 0;if(i===Gl.mapValue)return 1;if(o===Gl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const y=Se(c[m],p[m]);if(y!==0)return y;const A=lo(l[c[m]],h[p[m]]);if(A!==0)return A}return Se(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ue()}}function Uy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Is(t),r=Is(e),s=Se(n.seconds,r.seconds);return s!==0?s:Se(n.nanos,r.nanos)}function Fy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=lo(n[s],r[s]);if(i)return i}return Se(n.length,r.length)}function uo(t){return tf(t)}function tf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ui(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=tf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${tf(n.fields[o])}`;return s+"}"}(t.mapValue):ue()}function zy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function nf(t){return!!t&&"integerValue"in t}function Ip(t){return!!t&&"arrayValue"in t}function By(t){return!!t&&"nullValue"in t}function $y(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gu(t){return!!t&&"mapValue"in t}function b2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ua(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ua(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ua(t.arrayValue.values[n]);return e}return Object.assign({},t)}function k2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.value=e}static empty(){return new cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ua(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new cn(ua(this.value))}}function Hw(t){const e=[];return vi(t.fields,(n,r)=>{const s=new Pt([n]);if(gu(r)){const i=Hw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Gt(e,0,he.min(),he.min(),he.min(),cn.empty(),0)}static newFoundDocument(e,n,r,s){return new Gt(e,1,n,he.min(),r,s,0)}static newNoDocument(e,n){return new Gt(e,2,n,he.min(),he.min(),cn.empty(),0)}static newUnknownDocument(e,n){return new Gt(e,3,n,he.min(),he.min(),cn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.position=e,this.inclusive=n}}function Wy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=lo(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n="asc"){this.field=e,this.dir=n}}function I2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{}class mt extends Kw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new A2(e,n,r):n==="array-contains"?new C2(e,r):n==="in"?new R2(e,r):n==="not-in"?new P2(e,r):n==="array-contains-any"?new q2(e,r):new mt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new S2(e,r):new N2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lo(n,this.value)):n!==null&&ci(this.value)===ci(n)&&this.matchesComparison(lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class er extends Kw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new er(e,n)}matches(e){return Gw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gw(t){return t.op==="and"}function Qw(t){return T2(t)&&Gw(t)}function T2(t){for(const e of t.filters)if(e instanceof er)return!1;return!0}function rf(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+uo(t.value);if(Qw(t))return t.filters.map(e=>rf(e)).join(",");{const e=t.filters.map(n=>rf(n)).join(",");return`${t.op}(${e})`}}function Yw(t,e){return t instanceof mt?function(r,s){return s instanceof mt&&r.op===s.op&&r.field.isEqual(s.field)&&mr(r.value,s.value)}(t,e):t instanceof er?function(r,s){return s instanceof er&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Yw(o,s.filters[l]),!0):!1}(t,e):void ue()}function Xw(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${uo(n.value)}`}(t):t instanceof er?function(n){return n.op.toString()+" {"+n.getFilters().map(Xw).join(" ,")+"}"}(t):"Filter"}class A2 extends mt{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class S2 extends mt{constructor(e,n){super(e,"in",n),this.keys=Jw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class N2 extends mt{constructor(e,n){super(e,"not-in",n),this.keys=Jw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Jw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class C2 extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ip(n)&&Va(n.arrayValue,this.value)}}class R2 extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Va(this.value.arrayValue,n)}}class P2 extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Va(this.value.arrayValue,n)}}class q2 extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Va(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Ky(t,e=null,n=[],r=[],s=null,i=null,o=null){return new j2(t,e,n,r,s,i,o)}function Tp(t){const e=fe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>uo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>uo(r)).join(",")),e.ue=n}return e.ue}function Ap(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!I2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Hy(t.startAt,e.startAt)&&Hy(t.endAt,e.endAt)}function sf(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function D2(t,e,n,r,s,i,o,l){return new _o(t,e,n,r,s,i,o,l)}function Dc(t){return new _o(t)}function Gy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zw(t){return t.collectionGroup!==null}function ca(t){const e=fe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new jt(Pt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ua(i,r))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new Ua(Pt.keyField(),r))}return e.ce}function hr(t){const e=fe(t);return e.le||(e.le=O2(e,ca(t))),e.le}function O2(t,e){if(t.limitType==="F")return Ky(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ua(s.field,i)});const n=t.endAt?new rc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new rc(t.startAt.position,t.startAt.inclusive):null;return Ky(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function of(t,e){const n=t.filters.concat([e]);return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sc(t,e,n){return new _o(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Oc(t,e){return Ap(hr(t),hr(e))&&t.limitType===e.limitType}function ex(t){return`${Tp(hr(t))}|lt:${t.limitType}`}function Ai(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Xw(s)).join(", ")}]`),jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>uo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>uo(s)).join(",")),`Target(${r})`}(hr(t))}; limitType=${t.limitType})`}function Mc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ca(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const h=Wy(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,ca(r),s)||r.endAt&&!function(o,l,c){const h=Wy(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,ca(r),s))}(t,e)}function M2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tx(t){return(e,n)=>{let r=!1;for(const s of ca(t)){const i=L2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function L2(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?lo(c,h):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $w(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new Je(ae.comparator);function Lr(){return V2}const nx=new Je(ae.comparator);function Qo(...t){let e=nx;for(const n of t)e=e.insert(n.key,n);return e}function rx(t){let e=nx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ys(){return da()}function sx(){return da()}function da(){return new wo(t=>t.toString(),(t,e)=>t.isEqual(e))}const U2=new Je(ae.comparator),F2=new jt(ae.comparator);function we(...t){let e=F2;for(const n of t)e=e.add(n);return e}const z2=new jt(Se);function B2(){return z2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function ix(t){return{integerValue:""+t}}function $2(t,e){return w2(e)?ix(e):Sp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function W2(t,e,n){return t instanceof Fa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bp(i)&&(i=kp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof za?ax(t,e):t instanceof Ba?lx(t,e):function(s,i){const o=ox(s,i),l=Qy(o)+Qy(s.Pe);return nf(o)&&nf(s.Pe)?ix(l):Sp(s.serializer,l)}(t,e)}function H2(t,e,n){return t instanceof za?ax(t,e):t instanceof Ba?lx(t,e):n}function ox(t,e){return t instanceof ic?function(r){return nf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Fa extends Lc{}class za extends Lc{constructor(e){super(),this.elements=e}}function ax(t,e){const n=ux(e);for(const r of t.elements)n.some(s=>mr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ba extends Lc{constructor(e){super(),this.elements=e}}function lx(t,e){let n=ux(e);for(const r of t.elements)n=n.filter(s=>!mr(s,r));return{arrayValue:{values:n}}}class ic extends Lc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Qy(t){return ot(t.integerValue||t.doubleValue)}function ux(t){return Ip(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.field=e,this.transform=n}}function G2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof za&&s instanceof za||r instanceof Ba&&s instanceof Ba?ao(r.elements,s.elements,mr):r instanceof ic&&s instanceof ic?mr(r.Pe,s.Pe):r instanceof Fa&&s instanceof Fa}(t.transform,e.transform)}class Q2{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vc{}function cx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uc(t.key,rn.none()):new nl(t.key,t.data,rn.none());{const n=t.data,r=cn.empty();let s=new jt(Pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ps(t.key,r,new wn(s.toArray()),rn.none())}}function Y2(t,e,n){t instanceof nl?function(s,i,o){const l=s.value.clone(),c=Xy(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ps?function(s,i,o){if(!yu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Xy(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(dx(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ha(t,e,n,r){return t instanceof nl?function(i,o,l,c){if(!yu(i.precondition,o))return l;const h=i.value.clone(),p=Jy(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ps?function(i,o,l,c){if(!yu(i.precondition,o))return l;const h=Jy(i.fieldTransforms,c,o),p=o.data;return p.setAll(dx(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return yu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function X2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ox(r.transform,s||null);i!=null&&(n===null&&(n=cn.empty()),n.set(r.field,i))}return n||null}function Yy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ao(r,s,(i,o)=>G2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends Vc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ps extends Vc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function dx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Xy(t,e,n){const r=new Map;qe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,H2(o,l,n[s]))}return r}function Jy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,W2(i,o,e))}return r}class Uc extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J2 extends Vc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Y2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ha(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=cx(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&ao(this.mutations,e.mutations,(n,r)=>Yy(n,r))&&ao(this.baseMutations,e.baseMutations,(n,r)=>Yy(n,r))}}class Np{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){qe(e.mutations.length===r.length);let s=function(){return U2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Np(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,be;function nA(t){switch(t){default:return ue();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function hx(t){if(t===void 0)return Mr("GRPC error has no .code"),F.UNKNOWN;switch(t){case ft.OK:return F.OK;case ft.CANCELLED:return F.CANCELLED;case ft.UNKNOWN:return F.UNKNOWN;case ft.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ft.INTERNAL:return F.INTERNAL;case ft.UNAVAILABLE:return F.UNAVAILABLE;case ft.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ft.NOT_FOUND:return F.NOT_FOUND;case ft.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ft.ABORTED:return F.ABORTED;case ft.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ft.DATA_LOSS:return F.DATA_LOSS;default:return ue()}}(be=ft||(ft={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=new ei([4294967295,4294967295],0);function Zy(t){const e=rA().encode(t),n=new Ow;return n.update(e),new Uint8Array(n.digest())}function e0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ei([n,r],0),new ei([s,i],0)]}class Cp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yo(`Invalid padding: ${n}`);if(r<0)throw new Yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ei.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ei.fromNumber(r)));return s.compare(sA)===1&&(s=new ei([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Zy(e),[r,s]=e0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Cp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Zy(e),[r,s]=e0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Fc(he.min(),s,new Je(Se),Lr(),we())}}class rl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rl(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class fx{constructor(e,n){this.targetId=e,this.me=n}}class px{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class t0{constructor(){this.fe=0,this.ge=r0(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),r=we();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue()}}),new rl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=r0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class iA{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lr(),this.qe=n0(),this.Qe=new Je(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(sf(i))if(r===0){const o=new ae(i.path);this.Ue(n,o,Gt.newNoDocument(o,he.min()))}else qe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ui(r).toUint8Array()}catch(c){if(c instanceof Ww)return oo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Cp(o,s,i)}catch(c){return oo(c instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&sf(l.target)){const c=new ae(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Gt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=we();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Fc(e,n,this.Qe,this.ke,r);return this.ke=Lr(),this.qe=n0(),this.Qe=new Je(Se),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new t0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new jt(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new t0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function n0(){return new Je(ae.comparator)}function r0(){return new Je(ae.comparator)}const oA={asc:"ASCENDING",desc:"DESCENDING"},aA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lA={and:"AND",or:"OR"};class uA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function af(t,e){return t.useProto3Json||jc(e)?e:{value:e}}function oc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cA(t,e){return oc(t,e.toTimestamp())}function fr(t){return qe(!!t),he.fromTimestamp(function(n){const r=Is(n);return new _t(r.seconds,r.nanos)}(t))}function Rp(t,e){return lf(t,e).canonicalString()}function lf(t,e){const n=function(s){return new $e(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gx(t){const e=$e.fromString(t);return qe(xx(e)),e}function uf(t,e){return Rp(t.databaseId,e.path)}function Bd(t,e){const n=gx(e);if(n.get(1)!==t.databaseId.projectId)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(vx(n))}function yx(t,e){return Rp(t.databaseId,e)}function dA(t){const e=gx(t);return e.length===4?$e.emptyPath():vx(e)}function cf(t){return new $e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vx(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function s0(t,e,n){return{name:uf(t,e),fields:n.value.mapValue.fields}}function hA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(qe(p===void 0||typeof p=="string"),Ot.fromBase64String(p||"")):(qe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Ot.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?F.UNKNOWN:hx(h.code);return new Y(p,h.message||"")}(o);n=new px(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bd(t,r.document.name),i=fr(r.document.updateTime),o=r.document.createTime?fr(r.document.createTime):he.min(),l=new cn({mapValue:{fields:r.document.fields}}),c=Gt.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new vu(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Bd(t,r.document),i=r.readTime?fr(r.readTime):he.min(),o=Gt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new vu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Bd(t,r.document),i=r.removedTargetIds||[];n=new vu([],i,s,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new tA(s,i),l=r.targetId;n=new fx(l,o)}}return n}function fA(t,e){let n;if(e instanceof nl)n={update:s0(t,e.key,e.value)};else if(e instanceof Uc)n={delete:uf(t,e.key)};else if(e instanceof Ps)n={update:s0(t,e.key,e.data),updateMask:EA(e.fieldMask)};else{if(!(e instanceof J2))return ue();n={verify:uf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Fa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof za)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ba)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ic)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:cA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue()}(t,e.precondition)),n}function pA(t,e){return t&&t.length>0?(qe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?fr(s.updateTime):fr(i);return o.isEqual(he.min())&&(o=fr(i)),new Q2(o,s.transformResults||[])}(n,e))):[]}function mA(t,e){return{documents:[yx(t,e.path)]}}function gA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yx(t,s);const i=function(h){if(h.length!==0)return wx(er.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:Si(y.field),direction:_A(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=af(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function yA(t){let e=dA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){qe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const y=_x(m);return y instanceof er&&Qw(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(P){return new Ua(Ni(P.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,jc(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,A=m.values||[];return new rc(A,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,A=m.values||[];return new rc(A,y)}(n.endAt)),D2(e,s,o,i,l,"F",c,h)}function vA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _x(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ni(n.unaryFilter.field);return mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ni(n.unaryFilter.field);return mt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ni(n.unaryFilter.field);return mt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ni(n.unaryFilter.field);return mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return mt.create(Ni(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return er.create(n.compositeFilter.filters.map(r=>_x(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function _A(t){return oA[t]}function wA(t){return aA[t]}function xA(t){return lA[t]}function Si(t){return{fieldPath:t.canonicalString()}}function Ni(t){return Pt.fromServerFormat(t.fieldPath)}function wx(t){return t instanceof mt?function(n){if(n.op==="=="){if($y(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NAN"}};if(By(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if($y(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NOT_NAN"}};if(By(n.value))return{unaryFilter:{field:Si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Si(n.field),op:wA(n.op),value:n.value}}}(t):t instanceof er?function(n){const r=n.getFilters().map(s=>wx(s));return r.length===1?r[0]:{compositeFilter:{op:xA(n.op),filters:r}}}(t):ue()}function EA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r,s,i=he.min(),o=he.min(),l=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.ct=e}}function kA(t){const e=yA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(){this.un=new TA}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(ks.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class TA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new jt($e.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new jt($e.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new co(0)}static kn(){return new co(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.changes=new wo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ha(r.mutation,s,wn.empty(),_t.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const s=Ys();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Qo();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Lr();const o=da(),l=function(){return da()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Ps)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),ha(p.mutation,h,p.mutation.getFieldMask(),_t.now())):o.set(h.key,wn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new SA(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=da();let s=new Je((o,l)=>o-l),i=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||wn.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(s.get(l.batchId)||we()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=sx();p.forEach(y=>{if(!i.has(y)){const A=cx(n.get(y),r.get(y));A!==null&&m.set(y,A),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):H.resolve(Ys());let l=-1,c=i;return o.next(h=>H.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?H.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,we())).next(p=>({batchId:l,changes:rx(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=Qo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Qo();return this.indexManager.getCollectionParents(e,i).next(l=>H.forEach(l,c=>{const h=function(m,y){return new _o(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Gt.newInvalidDocument(p)))});let l=Qo();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&ha(p.mutation,h,wn.empty(),_t.now()),Mc(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fr(s.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:kA(s.bundledQuery),readTime:fr(s.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.overlays=new Je(ae.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ys();return H.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const s=Ys(),i=n.length+1,o=new ae(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return H.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Je((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Ys(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Ys(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return H.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new eA(n,r));let i=this.Ir.get(n);i===void 0&&(i=we(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(){this.Tr=new jt(xt.Er),this.dr=new jt(xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new xt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new $e([])),r=new xt(n,e),s=new xt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new $e([])),r=new xt(n,e),s=new xt(n,e+1);let i=we();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new xt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new jt(xt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Z2(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new xt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),s=new xt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new jt(Se);return n.forEach(s=>{const i=new xt(s,0),o=new xt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const o=new xt(new ae(i),0);let l=new jt(Se);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},o),H.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){qe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,s=>{const i=new xt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new xt(n,0),s=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.Mr=e,this.docs=function(){return new Je(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Gt.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Lr();const o=n.path,l=new ae(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||g2(m2(p),r)<=0||(s.has(p.key)||Mc(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DA(this)}getSize(e){return H.resolve(this.size)}}class DA extends AA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.persistence=e,this.Nr=new wo(n=>Tp(n),Ap),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Pp,this.targetCount=0,this.kr=co.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new co(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Ep(0),this.Kr=!1,this.Kr=!0,this.$r=new PA,this.referenceDelegate=e(this),this.Ur=new OA(this),this.indexManager=new IA,this.remoteDocumentCache=function(s){return new jA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new bA(n),this.Gr=new CA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new qA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new LA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class LA extends v2{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Jr=new Pp,this.Yr=null}static Zr(e){return new qp(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const s=ae.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,he.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=we(),s=we();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return UI()?8:_2(Xt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new VA;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Uo()<=xe.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Ai(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Uo()<=xe.DEBUG&&se("QueryEngine","Query:",Ai(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Uo()<=xe.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Ai(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hr(n))):H.resolve())}Yi(e,n){if(Gy(n))return H.resolve(null);let r=hr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sc(n,null,"F"),r=hr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=we(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,sc(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return Gy(n)||s.isEqual(he.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?H.resolve(null):(Uo()<=xe.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ai(n)),this.rs(e,o,n,p2(s,-1)).next(l=>l))})}ts(e,n){let r=new jt(tx(e));return n.forEach((s,i)=>{Mc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Uo()<=xe.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Ai(n)),this.Ji.getDocumentsMatchingQuery(e,n,ks.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Je(Se),this._s=new wo(i=>Tp(i),Ap),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new NA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function zA(t,e,n,r){return new FA(t,e,n,r)}async function Ex(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=we();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function BA(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,y=m.keys();let A=H.resolve();return y.forEach(P=>{A=A.next(()=>p.getEntry(c,P)).next(D=>{const S=h.docVersions.get(P);qe(S!==null),D.version.compareTo(S)<0&&(m.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),p.addEntry(D)))})}),A.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=we();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function bx(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function $A(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const y=s.get(m);if(!y)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let A=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?A=A.withResumeToken(Ot.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):p.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(p.resumeToken,r)),s=s.insert(m,A),function(D,S,x){return D.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(y,A,p)&&l.push(n.Ur.updateTargetData(i,A))});let c=Lr(),h=we();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(WA(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(he.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return H.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function WA(t,e,n){let r=we(),s=we();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Lr();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):se("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function HA(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function KA(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new us(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function df(t,e,n){const r=fe(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!tl(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function i0(t,e,n){const r=fe(t);let s=he.min(),i=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=fe(c),y=m._s.get(p);return y!==void 0?H.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)}(r,o,hr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:he.min(),n?i:we())).next(l=>(GA(r,M2(e),l),{documents:l,Ts:i})))}function GA(t,e,n){let r=t.us.get(e)||he.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class o0{constructor(){this.activeTargetIds=B2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QA{constructor(){this.so=new o0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new o0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql=null;function $d(){return Ql===null?Ql=function(){return 268435456+Math.round(2147483648*Math.random())}():Ql++,"0x"+Ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class ZA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=$d(),c=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(se("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw oo("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=XA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=$d();return new Promise((o,l)=>{const c=new Mw;c.setWithCredentials(!0),c.listenOnce(Lw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case mu.NO_ERROR:const p=c.getResponseJson();se(Wt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case mu.TIMEOUT:se(Wt,`RPC '${e}' ${i} timed out`),l(new Y(F.DEADLINE_EXCEEDED,"Request time out"));break;case mu.HTTP_ERROR:const m=c.getStatus();if(se(Wt,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const A=y==null?void 0:y.error;if(A&&A.status&&A.message){const P=function(S){const x=S.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(x)>=0?x:F.UNKNOWN}(A.status);l(new Y(P,A.message))}else l(new Y(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Y(F.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{se(Wt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);se(Wt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=$d(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Fw(),l=Uw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");se(Wt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let y=!1,A=!1;const P=new JA({Io:S=>{A?se(Wt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(y||(se(Wt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),se(Wt,`RPC '${e}' stream ${s} sending:`,S),m.send(S))},To:()=>m.close()}),D=(S,x,_)=>{S.listen(x,I=>{try{_(I)}catch(q){setTimeout(()=>{throw q},0)}})};return D(m,Go.EventType.OPEN,()=>{A||(se(Wt,`RPC '${e}' stream ${s} transport opened.`),P.yo())}),D(m,Go.EventType.CLOSE,()=>{A||(A=!0,se(Wt,`RPC '${e}' stream ${s} transport closed`),P.So())}),D(m,Go.EventType.ERROR,S=>{A||(A=!0,oo(Wt,`RPC '${e}' stream ${s} transport errored:`,S),P.So(new Y(F.UNAVAILABLE,"The operation could not be completed")))}),D(m,Go.EventType.MESSAGE,S=>{var x;if(!A){const _=S.data[0];qe(!!_);const I=_,q=I.error||((x=I[0])===null||x===void 0?void 0:x.error);if(q){se(Wt,`RPC '${e}' stream ${s} received error:`,q);const W=q.status;let $=function(E){const k=ft[E];if(k!==void 0)return hx(k)}(W),w=q.message;$===void 0&&($=F.INTERNAL,w="Unknown error status: "+W+" with message "+q.message),A=!0,P.So(new Y($,w)),m.close()}else se(Wt,`RPC '${e}' stream ${s} received:`,_),P.bo(_)}}),D(l,Vw.STAT_EVENT,S=>{S.stat===ef.PROXY?se(Wt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===ef.NOPROXY&&se(Wt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t){return new uA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new kx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Mr(n.toString()),Mr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Y(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eS extends Ix{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=hA(this.serializer,e),r=function(i){if(!("targetChange"in i))return he.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?fr(o.readTime):he.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=cf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=sf(c)?{documents:mA(i,c)}:{query:gA(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=mx(i,o.resumeToken);const h=af(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(he.min())>0){l.readTime=oc(i,o.snapshotVersion.toTimestamp());const h=af(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=vA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=cf(this.serializer),n.removeTarget=e,this.a_(n)}}class tS extends Ix{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return qe(!!e.streamToken),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=pA(e.writeResults,e.commitTime),r=fr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=cf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,lf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,lf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mr(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{_i(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=fe(c);h.L_.add(4),await sl(h),h.q_.set("Unknown"),h.L_.delete(4),await Bc(h)}(this))})}),this.q_=new rS(r,s)}}async function Bc(t){if(_i(t))for(const e of t.B_)await e(!0)}async function sl(t){for(const e of t.B_)await e(!1)}function Tx(t,e){const n=fe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Lp(n)?Mp(n):xo(n).r_()&&Op(n,e))}function Dp(t,e){const n=fe(t),r=xo(n);n.N_.delete(e),r.r_()&&Ax(n,e),n.N_.size===0&&(r.r_()?r.o_():_i(n)&&n.q_.set("Unknown"))}function Op(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xo(t).A_(e)}function Ax(t,e){t.Q_.xe(e),xo(t).R_(e)}function Mp(t){t.Q_=new iA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xo(t).start(),t.q_.v_()}function Lp(t){return _i(t)&&!xo(t).n_()&&t.N_.size>0}function _i(t){return fe(t).L_.size===0}function Sx(t){t.Q_=void 0}async function iS(t){t.q_.set("Online")}async function oS(t){t.N_.forEach((e,n)=>{Op(t,e)})}async function aS(t,e){Sx(t),Lp(t)?(t.q_.M_(e),Mp(t)):t.q_.set("Unknown")}async function lS(t,e,n){if(t.q_.set("Online"),e instanceof px&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ac(t,r)}else if(e instanceof vu?t.Q_.Ke(e):e instanceof fx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(he.min()))try{const r=await bx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(Ot.EMPTY_BYTE_STRING,p.snapshotVersion)),Ax(i,c);const m=new us(p.target,c,h,p.sequenceNumber);Op(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await ac(t,r)}}async function ac(t,e,n){if(!tl(e))throw e;t.L_.add(1),await sl(t),t.q_.set("Offline"),n||(n=()=>bx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bc(t)})}function Nx(t,e){return e().catch(n=>ac(t,n,e))}async function $c(t){const e=fe(t),n=Ts(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uS(e);)try{const s=await HA(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,cS(e,s)}catch(s){await ac(e,s)}Cx(e)&&Rx(e)}function uS(t){return _i(t)&&t.O_.length<10}function cS(t,e){t.O_.push(e);const n=Ts(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Cx(t){return _i(t)&&!Ts(t).n_()&&t.O_.length>0}function Rx(t){Ts(t).start()}async function dS(t){Ts(t).p_()}async function hS(t){const e=Ts(t);for(const n of t.O_)e.m_(n.mutations)}async function fS(t,e,n){const r=t.O_.shift(),s=Np.from(r,e,n);await Nx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $c(t)}async function pS(t,e){e&&Ts(t).V_&&await async function(r,s){if(function(o){return nA(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Ts(r).s_(),await Nx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $c(r)}}(t,e),Cx(t)&&Rx(t)}async function l0(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=_i(n);n.L_.add(3),await sl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bc(n)}async function mS(t,e){const n=fe(t);e?(n.L_.delete(2),await Bc(n)):e||(n.L_.add(2),await sl(n),n.q_.set("Unknown"))}function xo(t){return t.K_||(t.K_=function(n,r,s){const i=fe(n);return i.w_(),new eS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:iS.bind(null,t),Ro:oS.bind(null,t),mo:aS.bind(null,t),d_:lS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Lp(t)?Mp(t):t.q_.set("Unknown")):(await t.K_.stop(),Sx(t))})),t.K_}function Ts(t){return t.U_||(t.U_=function(n,r,s){const i=fe(n);return i.w_(),new tS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dS.bind(null,t),mo:pS.bind(null,t),f_:hS.bind(null,t),g_:fS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await $c(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Vp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Up(t,e){if(Mr("AsyncQueue",`${e}: ${t}`),tl(t))return new Y(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Qo(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new Qi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.W_=new Je(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ho{constructor(e,n,r,s,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ho(e,n,Qi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yS{constructor(){this.queries=c0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=c0(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new Y(F.ABORTED,"Firestore shutting down"))}}function c0(){return new wo(t=>ex(t),Oc)}async function Fp(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new gS,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Up(o,`Initialization of query '${Ai(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Bp(n)}async function zp(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vS(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Bp(n)}function _S(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Bp(t){t.Y_.forEach(e=>{e.next()})}var hf,d0;(d0=hf||(hf={})).ea="default",d0.Cache="cache";class $p{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.key=e}}class qx{constructor(e){this.key=e}}class wS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=we(),this.mutatedKeys=we(),this.Aa=tx(e),this.Ra=new Qi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new u0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const y=s.get(p),A=Mc(this.query,m)?m:null,P=!!y&&this.mutatedKeys.has(y.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let S=!1;y&&A?y.data.isEqual(A.data)?P!==D&&(r.track({type:3,doc:A}),S=!0):this.ga(y,A)||(r.track({type:2,doc:A}),S=!0,(c&&this.Aa(A,c)>0||h&&this.Aa(A,h)<0)&&(l=!0)):!y&&A?(r.track({type:0,doc:A}),S=!0):y&&!A&&(r.track({type:1,doc:y}),S=!0,(c||h)&&(l=!0)),S&&(A?(o=o.add(A),i=D?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(A,P){const D=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return D(A)-D(P)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new ho(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new u0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=we(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new qx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Px(r))}),n}ba(e){this.Ta=e.Ts,this.da=we();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ho.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ES{constructor(e){this.key=e,this.va=!1}}class bS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new wo(l=>ex(l),Oc),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(ae.comparator),this.Na=new Map,this.La=new Pp,this.Ba={},this.ka=new Map,this.qa=co.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kS(t,e,n=!0){const r=Vx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await jx(r,e,n,!0),s}async function IS(t,e){const n=Vx(t);await jx(n,e,!0,!1)}async function jx(t,e,n,r){const s=await KA(t.localStore,hr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await TS(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Tx(t.remoteStore,s),l}async function TS(t,e,n,r,s){t.Ka=(m,y,A)=>async function(D,S,x,_){let I=S.view.ma(x);I.ns&&(I=await i0(D.localStore,S.query,!1).then(({documents:w})=>S.view.ma(w,I)));const q=_&&_.targetChanges.get(S.targetId),W=_&&_.targetMismatches.get(S.targetId)!=null,$=S.view.applyChanges(I,D.isPrimaryClient,q,W);return f0(D,S.targetId,$.wa),$.snapshot}(t,m,y,A);const i=await i0(t.localStore,e,!0),o=new wS(e,i.Ts),l=o.ma(i.documents),c=rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,c);f0(t,n,h.wa);const p=new xS(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function AS(t,e,n){const r=fe(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Oc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await df(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Dp(r.remoteStore,s.targetId),ff(r,s.targetId)}).catch(el)):(ff(r,s.targetId),await df(r.localStore,s.targetId,!0))}async function SS(t,e){const n=fe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dp(n.remoteStore,r.targetId))}async function NS(t,e,n){const r=OS(t);try{const s=await function(o,l){const c=fe(o),h=_t.now(),p=l.reduce((A,P)=>A.add(P.key),we());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",A=>{let P=Lr(),D=we();return c.cs.getEntries(A,p).next(S=>{P=S,P.forEach((x,_)=>{_.isValidDocument()||(D=D.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(A,P)).next(S=>{m=S;const x=[];for(const _ of l){const I=X2(_,m.get(_.key).overlayedDocument);I!=null&&x.push(new Ps(_.key,I,Hw(I.value.mapValue),rn.exists(!0)))}return c.mutationQueue.addMutationBatch(A,h,x,l)}).next(S=>{y=S;const x=S.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(A,S.batchId,x)})}).then(()=>({batchId:y.batchId,changes:rx(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Je(Se)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await il(r,s.changes),await $c(r.remoteStore)}catch(s){const i=Up(s,"Failed to persist write");n.reject(i)}}async function Dx(t,e){const n=fe(t);try{const r=await $A(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?qe(o.va):s.removedDocuments.size>0&&(qe(o.va),o.va=!1))}),await il(n,r,e)}catch(r){await el(r)}}function h0(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=fe(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(l)&&(h=!0)}),h&&Bp(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CS(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Je(ae.comparator);o=o.insert(i,Gt.newNoDocument(i,he.min()));const l=we().add(i),c=new Fc(he.min(),new Map,new Je(Se),o,l);await Dx(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Wp(r)}else await df(r.localStore,e,!1).then(()=>ff(r,e,n)).catch(el)}async function RS(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await BA(n.localStore,e);Mx(n,r,null),Ox(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await il(n,s)}catch(s){await el(s)}}async function PS(t,e,n){const r=fe(t);try{const s=await function(o,l){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(qe(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);Mx(r,e,n),Ox(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await il(r,s)}catch(s){await el(s)}}function Ox(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Mx(t,e,n){const r=fe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function ff(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Lx(t,r)})}function Lx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Dp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Wp(t))}function f0(t,e,n){for(const r of n)r instanceof Px?(t.La.addReference(r.key,e),qS(t,r)):r instanceof qx?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Lx(t,r.key)):ue()}function qS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),Wp(t))}function Wp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae($e.fromString(e)),r=t.qa.next();t.Na.set(r,new ES(n)),t.Oa=t.Oa.insert(n,r),Tx(t.remoteStore,new us(hr(Dc(n.path)),r,"TargetPurposeLimboResolution",Ep.oe))}}async function il(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=jp.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=fe(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(h,y=>H.forEach(y.$i,A=>p.persistence.referenceDelegate.addReference(m,y.targetId,A)).next(()=>H.forEach(y.Ui,A=>p.persistence.referenceDelegate.removeReference(m,y.targetId,A)))))}catch(m){if(!tl(m))throw m;se("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const A=p.os.get(y),P=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(P);p.os=p.os.insert(y,D)}}}(r.localStore,i))}async function jS(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await Ex(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new Y(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await il(n,r.hs)}}function DS(t,e){const n=fe(t),r=n.Na.get(e);if(r&&r.va)return we().add(r.key);{let s=we();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function Vx(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CS.bind(null,e),e.Ca.d_=vS.bind(null,e.eventManager),e.Ca.$a=_S.bind(null,e.eventManager),e}function OS(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PS.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return zA(this.persistence,new UA,e.initialUser,this.serializer)}Ga(e){return new MA(qp.Zr,this.serializer)}Wa(e){return new QA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class pf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>h0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jS.bind(null,this.syncEngine),await mS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yS}()}createDatastore(e){const n=zc(e.databaseInfo.databaseId),r=function(i){return new ZA(i)}(e.databaseInfo);return function(i,o,l,c){return new nS(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new sS(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>h0(this.syncEngine,n,0),function(){return a0.D()?new a0:new YA}())}createSyncEngine(e,n){return function(s,i,o,l,c,h,p){const m=new bS(s,i,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=fe(s);se("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await sl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pf.provider={build:()=>new pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Ht.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Up(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hd(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ex(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function p0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LS(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>l0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>l0(e.remoteStore,s)),t._onlineComponents=e}async function LS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;oo("Error using user provided cache. Falling back to memory cache: "+n),await Hd(t,new lc)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Hd(t,new lc);return t._offlineComponents}async function Ux(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await p0(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await p0(t,new pf))),t._onlineComponents}function VS(t){return Ux(t).then(e=>e.syncEngine)}async function uc(t){const e=await Ux(t),n=e.eventManager;return n.onListen=kS.bind(null,e.syncEngine),n.onUnlisten=AS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SS.bind(null,e.syncEngine),n}function US(t,e,n={}){const r=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new Hp({next:y=>{p.Za(),o.enqueueAndForget(()=>zp(i,m));const A=y.docs.has(l);!A&&y.fromCache?h.reject(new Y(F.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&y.fromCache&&c&&c.source==="server"?h.reject(new Y(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new $p(Dc(l.path),p,{includeMetadataChanges:!0,_a:!0});return Fp(i,m)}(await uc(t),t.asyncQueue,e,n,r)),r.promise}function FS(t,e,n={}){const r=new Cr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new Hp({next:y=>{p.Za(),o.enqueueAndForget(()=>zp(i,m)),y.fromCache&&c.source==="server"?h.reject(new Y(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new $p(l,p,{includeMetadataChanges:!0,_a:!0});return Fp(i,m)}(await uc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t,e,n){if(!n)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zS(t,e,n,r){if(e===!0&&r===!0)throw new Y(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function g0(t){if(!ae.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function y0(t){if(ae.isDocumentKey(t))throw new Y(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function sn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wc(t);throw new Y(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function BS(t,e){if(e<=0)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new i2;switch(r.type){case"firstParty":return new u2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=m0.get(n);r&&(se("ComponentProvider","Removing Datastore"),m0.delete(n),r.terminate())}(this),Promise.resolve()}}function $S(t,e,n,r={}){var s;const i=(t=sn(t,Hc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=Ht.MOCK_USER;else{l=Cw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Y(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ht(h)}t._authCredentials=new o2(new zw(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fr(this.firestore,e,this._query)}}class Qt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class ws extends Fr{constructor(e,n,r){super(e,n,Dc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new ae(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function De(t,e,...n){if(t=Me(t),zx("collection","path",e),t instanceof Hc){const r=$e.fromString(e,...n);return y0(r),new ws(t,null,r)}{if(!(t instanceof Qt||t instanceof ws))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return y0(r),new ws(t.firestore,null,r)}}function ge(t,e,...n){if(t=Me(t),arguments.length===1&&(e=Bw.newId()),zx("doc","path",e),t instanceof Hc){const r=$e.fromString(e,...n);return g0(r),new Qt(t,null,new ae(r))}{if(!(t instanceof Qt||t instanceof ws))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child($e.fromString(e,...n));return g0(r),new Qt(t.firestore,t instanceof ws?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new kx(this,"async_queue_retry"),this.Vu=()=>{const r=Wd();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Cr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!tl(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Mr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Vp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function w0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class gr extends Hc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new _0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _0(e),this._firestoreClient=void 0,await e}}}function WS(t,e){const n=typeof t=="object"?t:wp(),r=typeof t=="string"?t:"(default)",s=qc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Aw("firestore");i&&$S(s,...i)}return s}function ol(t){if(t._terminated)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HS(t),t._firestoreClient}function HS(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,p){return new E2(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Fx(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new MS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fo(Ot.fromBase64String(e))}catch(n){throw new Y(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fo(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=/^__.*__$/;class GS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms):new nl(e,this.data,n,this.fieldTransforms)}}class Bx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ps(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function $x(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Qp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($x(this.Cu)&&KS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zc(e)}Qu(e,n,r,s=!1){return new Qp({Cu:e,methodName:n,qu:r,path:Pt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ll(t){const e=t._freezeSettings(),n=zc(t._databaseId);return new QS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Yp(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Jp("Data must be an object, but it was:",o,r);const l=Kx(r,o);let c,h;if(i.merge)c=new wn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=mf(e,m,n);if(!o.contains(y))throw new Y(F.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Qx(p,y)||p.push(y)}c=new wn(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new GS(new cn(l),c,h)}class Gc extends Kc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gc}}class Xp extends Kc{_toFieldTransform(e){return new K2(e.path,new Fa)}isEqual(e){return e instanceof Xp}}function Wx(t,e,n,r){const s=t.Qu(1,e,n);Jp("Data must be an object, but it was:",s,r);const i=[],o=cn.empty();vi(r,(c,h)=>{const p=Zp(e,c,n);h=Me(h);const m=s.Nu(p);if(h instanceof Gc)i.push(p);else{const y=ul(h,m);y!=null&&(i.push(p),o.set(p,y))}});const l=new wn(i);return new Bx(o,l,s.fieldTransforms)}function Hx(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[mf(e,r,n)],c=[s];if(i.length%2!=0)throw new Y(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)l.push(mf(e,i[y])),c.push(i[y+1]);const h=[],p=cn.empty();for(let y=l.length-1;y>=0;--y)if(!Qx(h,l[y])){const A=l[y];let P=c[y];P=Me(P);const D=o.Nu(A);if(P instanceof Gc)h.push(A);else{const S=ul(P,D);S!=null&&(h.push(A),p.set(A,S))}}const m=new wn(h);return new Bx(p,m,o.fieldTransforms)}function YS(t,e,n,r=!1){return ul(n,t.Qu(r?4:3,e))}function ul(t,e){if(Gx(t=Me(t)))return Jp("Unsupported field value:",e,t),Kx(t,e);if(t instanceof Kc)return function(r,s){if(!$x(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=ul(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_t.fromDate(r);return{timestampValue:oc(s.serializer,i)}}if(r instanceof _t){const i=new _t(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:oc(s.serializer,i)}}if(r instanceof Kp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fo)return{bytesValue:mx(s.serializer,r._byteString)};if(r instanceof Qt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Gp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Sp(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Wc(r)}`)}(t,e)}function Kx(t,e){const n={};return $w(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vi(t,(r,s)=>{const i=ul(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Gx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof Kp||t instanceof fo||t instanceof Qt||t instanceof Kc||t instanceof Gp)}function Jp(t,e,n){if(!Gx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Wc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function mf(t,e,n){if((e=Me(e))instanceof al)return e._internalPath;if(typeof e=="string")return Zp(t,e);throw cc("Field path arguments must be of type string or ",t,!1,void 0,n)}const XS=new RegExp("[~\\*/\\[\\]]");function Zp(t,e,n){if(e.search(XS)>=0)throw cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new al(...e.split("."))._internalPath}catch{throw cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function cc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(F.INVALID_ARGUMENT,l+t+c)}function Qx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JS extends Yx{data(){return super.data()}}function Qc(t,e){return typeof e=="string"?Zp(t,e):e instanceof al?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Y(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class em{}class tm extends em{}function lt(t,e,...n){let r=[];e instanceof em&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof nm).length,l=i.filter(c=>c instanceof Yc).length;if(o>1||o>0&&l>0)throw new Y(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Yc extends tm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yc(e,n,r)}_apply(e){const n=this._parse(e);return Jx(e._query,n),new Fr(e.firestore,e.converter,of(e._query,n))}_parse(e){const n=ll(e.firestore);return function(i,o,l,c,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Y(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){E0(m,p);const A=[];for(const P of m)A.push(x0(c,i,P));y={arrayValue:{values:A}}}else y=x0(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||E0(m,p),y=YS(l,o,m,p==="in"||p==="not-in");return mt.create(h,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function As(t,e,n){const r=e,s=Qc("where",t);return Yc._create(s,r,n)}class nm extends em{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:er.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Jx(o,c),o=of(o,c)}(e._query,n),new Fr(e.firestore,e.converter,of(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rm extends tm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ua(i,o)}(e._query,this._field,this._direction);return new Fr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new _o(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ss(t,e="asc"){const n=e,r=Qc("orderBy",t);return rm._create(r,n)}class sm extends tm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new sm(e,n,r)}_apply(e){return new Fr(e.firestore,e.converter,sc(e._query,this._limit,this._limitType))}}function di(t){return BS("limit",t),sm._create("limit",t,"F")}function x0(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new Y(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zw(e)&&n.indexOf("/")!==-1)throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child($e.fromString(n));if(!ae.isDocumentKey(r))throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zy(t,new ae(r))}if(n instanceof Qt)return zy(t,n._key);throw new Y(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wc(n)}.`)}function E0(t,e){if(!Array.isArray(t)||t.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jx(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ZS{convertValue(e,n="none"){switch(ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ui(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ot(o.doubleValue));return new Gp(i)}convertGeoPoint(e){return new Kp(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ma(e));default:return null}}convertTimestamp(e){const n=Is(e);return new _t(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=$e.fromString(e);qe(xx(r));const s=new La(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||Mr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zx extends Yx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Qc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class _u extends Zx{data(e={}){return super.data(e)}}class e1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new _u(this._firestore,this._userDataWriter,r.key,r,new Xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Y(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new _u(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new _u(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:eN(l.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function eN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){t=sn(t,Qt);const e=sn(t.firestore,gr);return US(ol(e),t._key).then(n=>t1(e,t,n))}class om extends ZS{constructor(e){super(),this.firestore=e}convertBytes(e){return new fo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,n)}}function Vn(t){t=sn(t,Fr);const e=sn(t.firestore,gr),n=ol(e),r=new om(e);return Xx(t._query),FS(n,t._query).then(s=>new e1(e,r,t,s))}function zr(t,e,n){t=sn(t,Qt);const r=sn(t.firestore,gr),s=im(t.converter,e,n);return cl(r,[Yp(ll(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,rn.none())])}function ut(t,e,n,...r){t=sn(t,Qt);const s=sn(t.firestore,gr),i=ll(s);let o;return o=typeof(e=Me(e))=="string"||e instanceof al?Hx(i,"updateDoc",t._key,e,n,r):Wx(i,"updateDoc",t._key,e),cl(s,[o.toMutation(t._key,rn.exists(!0))])}function qs(t){return cl(sn(t.firestore,gr),[new Uc(t._key,rn.none())])}function wi(t,e){const n=sn(t.firestore,gr),r=ge(t),s=im(t.converter,e);return cl(n,[Yp(ll(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function tr(t,...e){var n,r,s;t=Me(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||w0(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(w0(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof Qt)h=sn(t.firestore,gr),p=Dc(t._key.path),c={next:m=>{e[o]&&e[o](t1(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=sn(t,Fr);h=sn(m.firestore,gr),p=m._query;const y=new om(h);c={next:A=>{e[o]&&e[o](new e1(h,y,m,A))},error:e[o+1],complete:e[o+2]},Xx(t._query)}return function(y,A,P,D){const S=new Hp(D),x=new $p(A,S,P);return y.asyncQueue.enqueueAndForget(async()=>Fp(await uc(y),x)),()=>{S.Za(),y.asyncQueue.enqueueAndForget(async()=>zp(await uc(y),x))}}(ol(h),p,l,c)}function cl(t,e){return function(r,s){const i=new Cr;return r.asyncQueue.enqueueAndForget(async()=>NS(await VS(r),s,i)),i.promise}(ol(t),e)}function t1(t,e,n){const r=n.docs.get(e._key),s=new om(t);return new Zx(t,s,e._key,r,new Xo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ll(e)}set(e,n,r){this._verifyNotCommitted();const s=Kd(e,this._firestore),i=im(s.converter,n,r),o=Yp(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,rn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Kd(e,this._firestore);let o;return o=typeof(n=Me(n))=="string"||n instanceof al?Hx(this._dataReader,"WriteBatch.update",i._key,n,r,s):Wx(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Kd(e,this._firestore);return this._mutations=this._mutations.concat(new Uc(n._key,rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kd(t,e){if((t=Me(t)).firestore!==e)throw new Y(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ke(){return new Xp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xc(t){return ol(t=sn(t,gr)),new tN(t,e=>cl(t,e))}(function(e,n=!0){(function(s){vo=s})(yi),ai(new bs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new gr(new a2(r.getProvider("auth-internal")),new d2(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Y(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),dr(My,"4.7.3",e),dr(My,"4.7.3","esm2017")})();function am(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function n1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nN=n1,r1=new Ja("auth","Firebase",n1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new vp("@firebase/auth");function rN(t,...e){dc.logLevel<=xe.WARN&&dc.warn(`Auth (${yi}): ${t}`,...e)}function wu(t,...e){dc.logLevel<=xe.ERROR&&dc.error(`Auth (${yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t,...e){throw um(t,...e)}function Jn(t,...e){return um(t,...e)}function lm(t,e,n){const r=Object.assign(Object.assign({},nN()),{[e]:n});return new Ja("auth","Firebase",r).create(e,{appName:t.name})}function Rr(t){return lm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Un(t,"argument-error"),lm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function um(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return r1.create(t,...e)}function le(t,e,...n){if(!t)throw um(e,...n)}function Tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw wu(e),new Error(e)}function Vr(t,e){t||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iN(){return b0()==="http:"||b0()==="https:"}function b0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iN()||MI()||"connection"in navigator)?navigator.onLine:!0}function aN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Vr(n>e,"Short delay should be less than long delay!"),this.isMobile=jI()||LI()}get(){return oN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e){Vr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new dl(3e4,6e4);function js(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Br(t,e,n,r,s={}){return i1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Za(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return OI()||(h.referrerPolicy="no-referrer"),s1.fetch()(o1(t,t.config.apiHost,n,l),h)})}async function i1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lN),e);try{const s=new dN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Yl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Yl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Yl(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw lm(t,p,h);Un(t,p)}}catch(s){if(s instanceof yr)throw s;Un(t,"network-request-failed",{message:String(s)})}}async function hl(t,e,n,r,s={}){const i=await Br(t,e,n,r,s);return"mfaPendingCredential"in i&&Un(t,"multi-factor-auth-required",{_serverResponse:i}),i}function o1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?cm(t.config,s):`${t.config.apiScheme}://${s}`}function cN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jn(this.auth,"network-request-failed")),uN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Jn(t,e,r);return s.customData._tokenResponse=n,s}function k0(t){return t!==void 0&&t.enterprise!==void 0}class hN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function fN(t,e){return Br(t,"GET","/v2/recaptchaConfig",js(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e){return Br(t,"POST","/v1/accounts:delete",e)}async function a1(t,e){return Br(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mN(t,e=!1){const n=Me(t),r=await n.getIdToken(e),s=dm(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:fa(Gd(s.auth_time)),issuedAtTime:fa(Gd(s.iat)),expirationTime:fa(Gd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Gd(t){return Number(t)*1e3}function dm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Iw(n);return s?JSON.parse(s):(wu("Failed to decode base64 JWT payload"),null)}catch(s){return wu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function I0(t){const e=dm(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yr&&gN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fa(this.lastLoginAt),this.creationTime=fa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await po(t,a1(n,{idToken:r}));le(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?l1(i.providerUserInfo):[],l=_N(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function vN(t){const e=Me(t);await hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _N(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function l1(t){return t.map(e=>{var{providerId:n}=e,r=am(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wN(t,e){const n=await i1(t,{},async()=>{const r=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=o1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",s1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xN(t,e){return Br(t,"POST","/v2/accounts:revokeToken",js(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=I0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await wN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Yi;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yi,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ar{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await po(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mN(this,e)}reload(){return vN(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await po(this,pN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,A=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,P=(o=n.photoURL)!==null&&o!==void 0?o:void 0,D=(l=n.tenantId)!==null&&l!==void 0?l:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:I,emailVerified:q,isAnonymous:W,providerData:$,stsTokenManager:w}=n;le(I&&w,e,"internal-error");const g=Yi.fromJSON(this.name,w);le(typeof I=="string",e,"internal-error"),Yr(m,e.name),Yr(y,e.name),le(typeof q=="boolean",e,"internal-error"),le(typeof W=="boolean",e,"internal-error"),Yr(A,e.name),Yr(P,e.name),Yr(D,e.name),Yr(S,e.name),Yr(x,e.name),Yr(_,e.name);const E=new Ar({uid:I,auth:e,email:y,emailVerified:q,displayName:m,isAnonymous:W,photoURL:P,phoneNumber:A,tenantId:D,stsTokenManager:g,createdAt:x,lastLoginAt:_});return $&&Array.isArray($)&&(E.providerData=$.map(k=>Object.assign({},k))),S&&(E._redirectEventId=S),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Yi;s.updateFromServerResponse(n);const i=new Ar({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?l1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Yi;l.updateFromIdToken(r);const c=new Ar({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new yf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;function Sr(t){Vr(t instanceof Function,"Expected a class definition");let e=T0.get(t);return e?(Vr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,T0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}u1.type="NONE";const A0=u1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){return`firebase:${t}:${e}:${n}`}class Xi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=xu(this.userKey,s.apiKey,i),this.fullPersistenceKey=xu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ar._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xi(Sr(A0),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||Sr(A0);const o=xu(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=Ar._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Xi(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Xi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(f1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(m1(e))return"Blackberry";if(g1(e))return"Webos";if(d1(e))return"Safari";if((e.includes("chrome/")||h1(e))&&!e.includes("edge/"))return"Chrome";if(p1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function c1(t=Xt()){return/firefox\//i.test(t)}function d1(t=Xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function h1(t=Xt()){return/crios\//i.test(t)}function f1(t=Xt()){return/iemobile/i.test(t)}function p1(t=Xt()){return/android/i.test(t)}function m1(t=Xt()){return/blackberry/i.test(t)}function g1(t=Xt()){return/webos/i.test(t)}function hm(t=Xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EN(t=Xt()){var e;return hm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bN(){return VI()&&document.documentMode===10}function y1(t=Xt()){return hm(t)||p1(t)||g1(t)||m1(t)||/windows phone/i.test(t)||f1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t,e=[]){let n;switch(t){case"Browser":n=S0(Xt());break;case"Worker":n=`${S0(Xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e={}){return Br(t,"GET","/v2/passwordPolicy",js(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=6;class AN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:TN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new N0(this),this.idTokenSubscription=new N0(this),this.beforeStateQueue=new kN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=r1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Xi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await a1(this,{idToken:e}),r=await Ar._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Qn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Rr(this));const n=e?Me(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IN(this),n=new AN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await xN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sr(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Xi.create(this,[Sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=v1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ds(t){return Me(t)}class N0{constructor(e){this.auth=e,this.observer=null,this.addObserver=KI(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function NN(t){Jc=t}function _1(t){return Jc.loadJS(t)}function CN(){return Jc.recaptchaEnterpriseScript}function RN(){return Jc.gapiScript}function PN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const qN="recaptcha-enterprise",jN="NO_RECAPTCHA";class DN{constructor(e){this.type=qN,this.auth=Ds(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{fN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new hN(c);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;k0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(jN)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&k0(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CN();c.length!==0&&(c+=l),_1(c).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function C0(t,e,n,r=!1){const s=new DN(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function vf(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await C0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await C0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t,e){const n=qc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ec(i,e??{}))return s;Un(s,"already-initialized")}return n.initialize({options:e})}function MN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function LN(t,e,n){const r=Ds(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=w1(e),{host:o,port:l}=VN(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),UN()}function w1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function VN(t){const e=w1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:R0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:R0(o)}}}function R0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function FN(t,e){return Br(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){return hl(t,"POST","/v1/accounts:signInWithPassword",js(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",js(t,e))}async function $N(t,e){return hl(t,"POST","/v1/accounts:signInWithEmailLink",js(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends fm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $a(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $a(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vf(e,n,"signInWithPassword",zN);case"emailLink":return BN(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vf(e,r,"signUpPassword",FN);case"emailLink":return $N(e,{idToken:n,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ji(t,e){return hl(t,"POST","/v1/accounts:signInWithIdp",js(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="http://localhost";class hi extends fm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=am(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new hi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ji(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ji(e,n)}buildRequest(){const e={requestUri:WN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KN(t){const e=Ho(Ko(t)).link,n=e?Ho(Ko(e)).deep_link_id:null,r=Ho(Ko(t)).deep_link_id;return(r?Ho(Ko(r)).link:null)||r||n||e||t}class pm{constructor(e){var n,r,s,i,o,l;const c=Ho(Ko(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=HN((s=c.mode)!==null&&s!==void 0?s:null);le(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=KN(e);try{return new pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.providerId=bo.PROVIDER_ID}static credential(e,n){return $a._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pm.parseLink(n);return le(r,"argument-error"),$a._fromEmailAndCode(e,r.code,r.tenantId)}}bo.PROVIDER_ID="password";bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends mm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends fl{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return br.credential(n,r)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends fl{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends fl{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ss.credential(n,r)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){return hl(t,"POST","/v1/accounts:signUp",js(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ar._fromIdTokenResponse(e,r,s),o=P0(r);return new fi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=P0(r);return new fi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function P0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends yr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fc(e,n,r,s)}}function x1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fc._fromErrorAndOperation(t,i,e,r):i})}async function QN(t,e,n=!1){const r=await po(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e,n=!1){const{auth:r}=t;if(Qn(r.app))return Promise.reject(Rr(r));const s="reauthenticate";try{const i=await po(t,x1(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=dm(i.idToken);le(o,r,"internal-error");const{sub:l}=o;return le(t.uid===l,r,"user-mismatch"),fi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e,n=!1){if(Qn(t.app))return Promise.reject(Rr(t));const r="signIn",s=await x1(t,r,e),i=await fi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function XN(t,e){return E1(Ds(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b1(t){const e=Ds(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JN(t,e,n){if(Qn(t.app))return Promise.reject(Rr(t));const r=Ds(t),o=await vf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",GN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&b1(t),c}),l=await fi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function ZN(t,e,n){return Qn(t.app)?Promise.reject(Rr(t)):XN(Me(t),bo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&b1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eC(t,e){return Br(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Me(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await po(r,eC(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e){return Me(t).setPersistence(e)}function rC(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function sC(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function iC(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}function oC(t){return Me(t).signOut()}const pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pc,"1"),this.storage.removeItem(pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=1e3,lC=10;class I1 extends k1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=y1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);bN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,lC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}I1.type="LOCAL";const T1=I1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends k1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}A1.type="SESSION";const S1=A1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Zc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await uC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=gm("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(y.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(){return window}function dC(t){pr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function hC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function pC(){return N1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="firebaseLocalStorageDb",mC=1,mc="firebaseLocalStorage",R1="fbase_key";class pl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ed(t,e){return t.transaction([mc],e?"readwrite":"readonly").objectStore(mc)}function gC(){const t=indexedDB.deleteDatabase(C1);return new pl(t).toPromise()}function _f(){const t=indexedDB.open(C1,mC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mc,{keyPath:R1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mc)?e(r):(r.close(),await gC(),e(await _f()))})})}async function q0(t,e,n){const r=ed(t,!0).put({[R1]:e,value:n});return new pl(r).toPromise()}async function yC(t,e){const n=ed(t,!1).get(e),r=await new pl(n).toPromise();return r===void 0?null:r.value}function j0(t,e){const n=ed(t,!0).delete(e);return new pl(n).toPromise()}const vC=800,_C=3;class P1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _f(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>_C)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(pC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _f();return await q0(e,pc,"1"),await j0(e,pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>q0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>yC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>j0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ed(s,!1).getAll();return new pl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P1.type="LOCAL";const wC=P1;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t,e){return e?Sr(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym extends fm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function xC(t){return E1(t.auth,new ym(t),t.bypassAuthState)}function EC(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),YN(n,new ym(t),t.bypassAuthState)}async function bC(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),QN(n,new ym(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xC;case"linkViaPopup":case"linkViaRedirect":return bC;case"reauthViaPopup":case"reauthViaRedirect":return EC;default:Un(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new dl(2e3,1e4);async function IC(t,e,n){if(Qn(t.app))return Promise.reject(Jn(t,"operation-not-supported-in-this-environment"));const r=Ds(t);sN(t,e,mm);const s=q1(r,n);return new Xs(r,"signInViaPopup",e,s).executeNotNull()}class Xs extends j1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Xs.currentPopupAction&&Xs.currentPopupAction.cancel(),Xs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=gm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kC.get())};e()}}Xs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="pendingRedirect",Eu=new Map;class AC extends j1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Eu.get(this.auth._key());if(!e){try{const r=await SC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Eu.set(this.auth._key(),e)}return this.bypassAuthState||Eu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SC(t,e){const n=RC(e),r=CC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function NC(t,e){Eu.set(t._key(),e)}function CC(t){return Sr(t._redirectPersistence)}function RC(t){return xu(TC,t.config.apiKey,t.name)}async function PC(t,e,n=!1){if(Qn(t.app))return Promise.reject(Rr(t));const r=Ds(t),s=q1(r,e),o=await new AC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=10*60*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!DC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!D1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qC&&this.cachedEventUids.clear(),this.cachedEventUids.has(D0(e))}saveEventToCache(e){this.cachedEventUids.add(D0(e)),this.lastProcessedEventTime=Date.now()}}function D0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function D1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function DC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t,e={}){return Br(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LC=/^https?/;async function VC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await OC(t);for(const n of e)try{if(UC(n))return}catch{}Un(t,"unauthorized-domain")}function UC(t){const e=gf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!LC.test(n))return!1;if(MC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new dl(3e4,6e4);function O0(){const t=pr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zC(t){return new Promise((e,n)=>{var r,s,i;function o(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),n(Jn(t,"network-request-failed"))},timeout:FC.get()})}if(!((s=(r=pr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=pr().gapi)===null||i===void 0)&&i.load)o();else{const l=PN("iframefcb");return pr()[l]=()=>{gapi.load?o():n(Jn(t,"network-request-failed"))},_1(`${RN()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw bu=null,e})}let bu=null;function BC(t){return bu=bu||zC(t),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new dl(5e3,15e3),WC="__/auth/iframe",HC="emulator/auth/iframe",KC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QC(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cm(e,HC):`https://${t.config.authDomain}/${WC}`,r={apiKey:e.apiKey,appName:t.name,v:yi},s=GC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Za(r).slice(1)}`}async function YC(t){const e=await BC(t),n=pr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:QC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Jn(t,"network-request-failed"),l=pr().setTimeout(()=>{i(o)},$C.get());function c(){pr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JC=500,ZC=600,eR="_blank",tR="http://localhost";class M0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nR(t,e,n,r=JC,s=ZC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},XC),{width:r.toString(),height:s.toString(),top:i,left:o}),h=Xt().toLowerCase();n&&(l=h1(h)?eR:n),c1(h)&&(e=e||tR,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[A,P])=>`${y}${A}=${P},`,"");if(EN(h)&&l!=="_self")return rR(e||"",l),new M0(null);const m=window.open(e||"",l,p);le(m,t,"popup-blocked");try{m.focus()}catch{}return new M0(m)}function rR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="__/auth/handler",iR="emulator/auth/handler",oR=encodeURIComponent("fac");async function L0(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yi,eventId:s};if(e instanceof mm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",HI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof fl){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${oR}=${encodeURIComponent(c)}`:"";return`${aR(t)}?${Za(l).slice(1)}${h}`}function aR({config:t}){return t.emulator?cm(t,iR):`https://${t.authDomain}/${sR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="webStorageSupport";class lR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=S1,this._completeRedirectFn=PC,this._overrideRedirectResult=NC}async _openPopup(e,n,r,s){var i;Vr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await L0(e,n,r,gf(),s);return nR(e,o,gm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await L0(e,n,r,gf(),s);return dC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Vr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await YC(e),r=new jC(e);return n.register("authEvent",s=>(le(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qd,{type:Qd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Qd];o!==void 0&&n(!!o),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return y1()||d1()||hm()}}const uR=lR;var V0="@firebase/auth",U0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hR(t){ai(new bs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:v1(t)},h=new SN(r,s,i,c);return MN(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ai(new bs("auth-internal",e=>{const n=Ds(e.getProvider("auth").getImmediate());return(r=>new cR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(V0,U0,dR(t)),dr(V0,U0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=5*60,pR=Nw("authIdTokenMaxAge")||fR;let F0=null;const mR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pR)return;const s=n==null?void 0:n.token;F0!==s&&(F0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gR(t=wp()){const e=qc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ON(t,{popupRedirectResolver:uR,persistence:[wC,T1,S1]}),r=Nw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=mR(i.toString());sC(n,o,()=>o(n.currentUser)),rC(n,l=>o(l))}}const s=Tw("auth");return s&&LN(n,`http://${s}`),n}function yR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}NN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Jn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",yR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hR("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="firebasestorage.googleapis.com",M1="storageBucket",vR=2*60*1e3,_R=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st extends yr{constructor(e,n,r=0){super(Yd(e),`Firebase Storage: ${n} (${Yd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,st.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rt||(rt={}));function Yd(t){return"storage/"+t}function vm(){const t="An unknown error occurred, please check the error payload for server response.";return new st(rt.UNKNOWN,t)}function wR(t){return new st(rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function xR(t){return new st(rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ER(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new st(rt.UNAUTHENTICATED,t)}function bR(){return new st(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kR(t){return new st(rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function IR(){return new st(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TR(){return new st(rt.CANCELED,"User canceled the upload/download.")}function AR(t){return new st(rt.INVALID_URL,"Invalid URL '"+t+"'.")}function SR(t){return new st(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function NR(){return new st(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+M1+"' property when initializing the app?")}function CR(){return new st(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RR(){return new st(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PR(t){return new st(rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wf(t){return new st(rt.INVALID_ARGUMENT,t)}function L1(){return new st(rt.APP_DELETED,"The Firebase app was deleted.")}function qR(t){return new st(rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pa(t,e){return new st(rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Fo(t){throw new st(rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=xn.makeFromUrl(e,n)}catch{return new xn(e,"")}if(r.path==="")return r;throw SR(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function h(q){q.path_=decodeURIComponent(q.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",A=new RegExp(`^https?://${m}/${p}/b/${s}/o${y}`,"i"),P={bucket:1,path:3},D=n===O1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",x=new RegExp(`^https?://${D}/${s}/${S}`,"i"),I=[{regex:l,indices:c,postModify:i},{regex:A,indices:P,postModify:h},{regex:x,indices:{bucket:1,path:2},postModify:h}];for(let q=0;q<I.length;q++){const W=I[q],$=W.regex.exec(e);if($){const w=$[W.indices.bucket];let g=$[W.indices.path];g||(g=""),r=new xn(w,g),W.postModify(r);break}}if(r==null)throw AR(e);return r}}class jR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let h=!1;function p(...S){h||(h=!0,e.apply(null,S))}function m(S){s=setTimeout(()=>{s=null,t(A,c())},S)}function y(){i&&clearTimeout(i)}function A(S,...x){if(h){y();return}if(S){y(),p.call(null,S,...x);return}if(c()||o){y(),p.call(null,S,...x);return}r<64&&(r*=2);let I;l===1?(l=2,I=0):I=(r+Math.random())*1e3,m(I)}let P=!1;function D(S){P||(P=!0,y(),!h&&(s!==null?(S||(l=2),clearTimeout(s),m(0)):S||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,D(!0)},n),D}function OR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t){return t!==void 0}function LR(t){return typeof t=="object"&&!Array.isArray(t)}function _m(t){return typeof t=="string"||t instanceof String}function z0(t){return wm()&&t instanceof Blob}function wm(){return typeof Blob<"u"}function B0(t,e,n,r){if(r<e)throw wf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw wf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function V1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ti;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ti||(ti={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,s,i,o,l,c,h,p,m,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,P)=>{this.resolve_=A,this.reject_=P,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Xl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===ti.NO_ERROR,c=i.getStatus();if(!l||VR(c,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===ti.ABORT;r(!1,new Xl(!1,null,p));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new Xl(h,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());MR(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=vm();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?L1():TR();o(c)}else{const c=IR();o(c)}};this.canceled_?n(!1,new Xl(!1,null,!0)):this.backoffId_=DR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function FR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function $R(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WR(t,e,n,r,s,i,o=!0){const l=V1(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return BR(h,e),FR(h,n),zR(h,i),$R(h,r),new UR(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KR(...t){const e=HR();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(wm())return new Blob(t);throw new st(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function GR(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){if(typeof atob>"u")throw PR("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xd{constructor(e,n){this.data=e,this.contentType=n||null}}function YR(t,e){switch(t){case lr.RAW:return new Xd(U1(e));case lr.BASE64:case lr.BASE64URL:return new Xd(F1(t,e));case lr.DATA_URL:return new Xd(JR(e),ZR(e))}throw vm()}function U1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function XR(t){let e;try{e=decodeURIComponent(t)}catch{throw pa(lr.DATA_URL,"Malformed data URL.")}return U1(e)}function F1(t,e){switch(t){case lr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw pa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case lr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw pa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=QR(e)}catch(s){throw s.message.includes("polyfill")?s:pa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class z1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw pa(lr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=eP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function JR(t){const e=new z1(t);return e.base64?F1(lr.BASE64,e.rest):XR(e.rest)}function ZR(t){return new z1(t).contentType}function eP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,n){let r=0,s="";z0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(z0(this.data_)){const r=this.data_,s=GR(r,e,n);return s===null?null:new is(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new is(r,!0)}}static getBlob(...e){if(wm()){const n=e.map(r=>r instanceof is?r.data_:r);return new is(KR.apply(null,n))}else{const n=e.map(o=>_m(o)?YR(lr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new is(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){let e;try{e=JSON.parse(t)}catch{return null}return LR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t,e){return e}class en{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||rP}}let Jl=null;function sP(t){return!_m(t)||t.length<2?t:$1(t)}function W1(){if(Jl)return Jl;const t=[];t.push(new en("bucket")),t.push(new en("generation")),t.push(new en("metageneration")),t.push(new en("name","fullPath",!0));function e(i,o){return sP(o)}const n=new en("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new en("size");return s.xform=r,t.push(s),t.push(new en("timeCreated")),t.push(new en("updated")),t.push(new en("md5Hash",null,!0)),t.push(new en("cacheControl",null,!0)),t.push(new en("contentDisposition",null,!0)),t.push(new en("contentEncoding",null,!0)),t.push(new en("contentLanguage",null,!0)),t.push(new en("contentType",null,!0)),t.push(new en("metadata","customMetadata",!0)),Jl=t,Jl}function iP(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new xn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function oP(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return iP(r,t),r}function H1(t,e,n){const r=B1(e);return r===null?null:oP(t,r,n)}function aP(t,e,n,r){const s=B1(e);if(s===null||!_m(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+o(p)+"/o/"+o(m),A=xm(y,n,r),P=V1({alt:"media",token:h});return A+P})[0]}function lP(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class K1{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){if(!t)throw vm()}function uP(t,e){function n(r,s){const i=H1(t,s,e);return G1(i!==null),i}return n}function cP(t,e){function n(r,s){const i=H1(t,s,e);return G1(i!==null),aP(i,s,t.host,t._protocol)}return n}function Q1(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=bR():s=ER():n.getStatus()===402?s=xR(t.bucket):n.getStatus()===403?s=kR(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function dP(t){const e=Q1(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=wR(t.path)),i.serverResponse=s.serverResponse,i}return n}function hP(t,e,n){const r=e.fullServerUrl(),s=xm(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new K1(s,i,cP(t,n),o);return l.errorHandler=dP(e),l}function fP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=fP(null,e)),r}function mP(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let I="";for(let q=0;q<2;q++)I=I+Math.random().toString().slice(2);return I}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const h=pP(e,r,s),p=lP(h,n),m="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+c+"--",A=is.getBlob(m,r,y);if(A===null)throw CR();const P={name:h.fullPath},D=xm(i,t.host,t._protocol),S="POST",x=t.maxUploadRetryTime,_=new K1(D,S,uP(t,n),x);return _.urlParams=P,_.headers=o,_.body=A.uploadData(),_.errorHandler=Q1(e),_}class gP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ti.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ti.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ti.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Fo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yP extends gP{initXhr(){this.xhr_.responseType="text"}}function Y1(){return new yP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){this._service=e,n instanceof xn?this._location=n:this._location=xn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new pi(e,n)}get root(){const e=new xn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $1(this._location.path)}get storage(){return this._service}get parent(){const e=tP(this._location.path);if(e===null)return null;const n=new xn(this._location.bucket,e);return new pi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qR(e)}}function vP(t,e,n){t._throwIfRoot("uploadBytes");const r=mP(t.storage,t._location,W1(),new is(e,!0),n);return t.storage.makeRequestWithTokens(r,Y1).then(s=>({metadata:s,ref:t}))}function _P(t){t._throwIfRoot("getDownloadURL");const e=hP(t.storage,t._location,W1());return t.storage.makeRequestWithTokens(e,Y1).then(n=>{if(n===null)throw RR();return n})}function wP(t,e){const n=nP(t._location.path,e),r=new xn(t._location.bucket,n);return new pi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){return/^[A-Za-z]+:\/\//.test(t)}function EP(t,e){return new pi(t,e)}function X1(t,e){if(t instanceof Em){const n=t;if(n._bucket==null)throw NR();const r=new pi(n,n._bucket);return e!=null?X1(r,e):r}else return e!==void 0?wP(t,e):t}function bP(t,e){if(e&&xP(e)){if(t instanceof Em)return EP(t,e);throw wf("To use ref(service, url), the first argument must be a Storage instance.")}else return X1(t,e)}function $0(t,e){const n=e==null?void 0:e[M1];return n==null?null:xn.makeFromBucketSpec(n,t)}function kP(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Cw(s,t.app.options.projectId))}class Em{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=O1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vR,this._maxUploadRetryTime=_R,this._requests=new Set,s!=null?this._bucket=xn.makeFromBucketSpec(s,this._host):this._bucket=$0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xn.makeFromBucketSpec(this._url,e):this._bucket=$0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){B0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new pi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new jR(L1());{const o=WR(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const W0="@firebase/storage",H0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="storage";function IP(t,e,n){return t=Me(t),vP(t,e,n)}function TP(t){return t=Me(t),_P(t)}function AP(t,e){return t=Me(t),bP(t,e)}function SP(t=wp(),e){t=Me(t);const r=qc(t,J1).getImmediate({identifier:e}),s=Aw("storage");return s&&NP(r,...s),r}function NP(t,e,n,r={}){kP(t,e,n,r)}function CP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Em(n,r,s,e,yi)}function RP(){ai(new bs(J1,CP,"PUBLIC").setMultipleInstances(!0)),dr(W0,H0,""),dr(W0,H0,"esm2017")}RP();const PP={apiKey:"AIzaSyCiTAiDphBPNjd4dKwEYArGY8pXWf55sZQ",authDomain:"irangram-79830.firebaseapp.com",projectId:"irangram-79830",storageBucket:"irangram-79830.firebasestorage.app",messagingSenderId:"355877653612",appId:"1:355877653612:web:5512841c0ab55b6b011c49",measurementId:"G-RZWEBR7XJ7"};let Zl,V=null,kn=null,Wa=null;try{Zl=qw(PP),V=WS(Zl),kn=gR(Zl);try{Wa=SP(Zl)}catch(t){console.warn("Firebase Storage not available. File uploads will be disabled.",t),Wa=null}nC(kn,T1).catch(t=>{console.error("Firebase Persistence Error:",t)}),console.log("Firebase Connected Successfully")}catch(t){console.error("Firebase Initialization Error:",t)}var K0={};const Dn={USE_REAL_SERVER:!1,API_BASE_URL:K0.REACT_APP_API_URL||"http://localhost:5000/api",SOCKET_URL:K0.REACT_APP_SOCKET_URL||"http://localhost:5000",APP_NAME:"",VERSION:"1.7.0",OWNER_EMAIL:"amirrezaveisi45@gmail.com"},qP=t=>kn?iC(kn,t):()=>{},jP=async(t,e,n,r)=>{if(!kn)throw new Error("Auth not initialized");const i=(await JN(kn,t,e)).user,o=t===Dn.OWNER_EMAIL?"owner":"user";return await tC(i,{displayName:n}),V&&await zr(ge(V,"users",i.uid),{name:n,email:t,phone:r,username:t.split("@")[0],bio:"  ",avatar:`https://ui-avatars.com/api/?name=${n}&background=random&color=fff&size=128`,role:o,isBanned:!1,createdAt:Ke(),lastSeen:Ke(),status:"online"}),i},DP=async(t,e)=>{if(!kn)throw new Error("Auth not initialized");const n=await ZN(kn,t,e);if(V&&n.user){const r=ge(V,"users",n.user.uid),s={status:"online",lastSeen:Ke()};t===Dn.OWNER_EMAIL&&(s.role="owner"),ut(r,s).catch(i=>console.log("Status update error",i))}return n.user},OP=async()=>{if(!kn)throw new Error("Auth not initialized");const t=new br;try{const n=(await IC(kn,t)).user,r=n.email||"",s=r===Dn.OWNER_EMAIL?"owner":"user";if(V){const i=ge(V,"users",n.uid);if(!(await Eo(i)).exists())await zr(i,{name:n.displayName||" ",email:r,phone:"",username:r.split("@")[0]||"user",bio:"  ",avatar:n.photoURL||`https://ui-avatars.com/api/?name=${n.displayName}&background=random&color=fff&size=128`,role:s,isBanned:!1,createdAt:Ke(),lastSeen:Ke(),status:"online"});else{const l={status:"online",lastSeen:Ke()};r===Dn.OWNER_EMAIL&&(l.role="owner"),await ut(i,l).catch(c=>console.log("Status update error",c))}}return n}catch(e){throw console.error("Google Sign-In Error",e),e}},Jd=async t=>{kn&&(t&&V&&await ut(ge(V,"users",t),{status:"offline",lastSeen:Ke()}).catch(()=>{}),await oC(kn))},xf=async t=>{if(!V)return null;try{const e=ge(V,"users",t),n=await Eo(e);if(n.exists())return n.data()}catch(e){console.error("Error fetching profile",e)}return null},MP=(t,e)=>{if(!V)return()=>{};const n=ge(V,"users",t);return tr(n,r=>{r.exists()&&e({uid:r.id,...r.data()})})},LP=async(t,e)=>{if(!V)return;const n=ge(V,"users",t),r={};Object.keys(e).forEach(s=>{e[s]!==void 0&&(r[s]=e[s])}),await ut(n,r)},G0=async t=>{if(!V)return null;let e=lt(De(V,"users"),As("username","==",t.replace("@",""))),n=await Vn(e);if(!n.empty){const r=n.docs[0];return{uid:r.id,...r.data()}}if(e=lt(De(V,"users"),As("phone","==",t)),n=await Vn(e),!n.empty){const r=n.docs[0];return{uid:r.id,...r.data()}}return null},VP=async t=>{if(!V||t.length===0)return[];const e=[],n=10;for(let r=0;r<t.length;r+=n){const i=t.slice(r,r+n).map(o=>o.replace(/\s+/g,""));try{const o=lt(De(V,"users"),As("phone","in",i));(await Vn(o)).forEach(c=>{e.push({uid:c.id,...c.data()})})}catch(o){console.error("Error syncing batch",o)}}return e},UP=async(t,e,n,r,s)=>{if(!V)return null;let i=`https://ui-avatars.com/api/?name=${t}&background=random&color=fff&size=128`;if(n&&Wa)try{const c=`groups/${Date.now()}_${n.name}`;i=await bm(n,c)}catch(c){console.error("Group image upload failed",c)}const o=[...new Set([...r,s])],l=await wi(De(V,"groups"),{name:t,description:e,creatorId:s,avatar:i,members:o,createdAt:Ke(),type:"group"});return await zr(ge(V,"chats",l.id),{participants:o,updatedAt:Ke(),lastMessage:"  ",type:"group",name:t,avatar:i,description:e}),{id:l.id,name:t,avatar:i,type:"group"}},eu=async(t,e)=>{if(!V)return;const n=ge(V,"users",t);try{await ut(n,{status:e,lastSeen:Ke()})}catch(r){console.error("Heartbeat error",r)}},FP=async(t,e)=>{if(!V)return;const n=ge(V,"users",t);try{await ut(n,{status:e?"typing...":"online"})}catch(r){console.error("Typing status error",r)}},zP=t=>{if(!V)return()=>{};const e=lt(De(V,"users"));return tr(e,n=>{const r=n.docs.map(s=>({uid:s.id,status:s.data().status,lastSeen:s.data().lastSeen?s.data().lastSeen.toMillis():Date.now(),name:s.data().name,avatar:s.data().avatar}));t(r)})},bm=async(t,e)=>{if(!Wa)throw new Error("   (Storage)       .");const n=AP(Wa,e),r=await IP(n,t);return await TP(r.ref)},BP=async(t,e,n)=>{V&&await wi(De(V,"appeals"),{userId:t,userName:e,message:n,status:"pending",createdAt:Ke()})},$P=t=>{if(!V)return()=>{};const e=lt(De(V,"appeals"),Ss("createdAt","desc"));return tr(e,n=>{const r=n.docs.map(s=>{const i=s.data();return{id:s.id,...i,createdAt:i.createdAt?i.createdAt.toMillis():Date.now()}});t(r)})},Q0=async(t,e)=>{V&&(e?await ut(ge(V,"appeals",t),{status:"approved"}):await ut(ge(V,"appeals",t),{status:"rejected"}))},WP=async t=>{V&&await qs(ge(V,"appeals",t))},HP=async(t,e,n)=>{if(!V)return;const r=lt(De(V,"deletion_requests"),As("userId","==",t));if((await Vn(r)).empty)await wi(De(V,"deletion_requests"),{userId:t,userName:e,reason:n,createdAt:Ke()});else throw new Error("      .")},KP=t=>{if(!V)return()=>{};const e=lt(De(V,"deletion_requests"),Ss("createdAt","desc"));return tr(e,n=>{const r=n.docs.map(s=>{const i=s.data();return{id:s.id,...i,createdAt:i.createdAt?i.createdAt.toMillis():Date.now()}});t(r)})},Y0=async(t,e,n)=>{V&&(n&&await oE(e),await qs(ge(V,"deletion_requests",t)))},GP=async(t,e,n,r,s,i)=>{V&&await wi(De(V,"reports"),{messageId:t,messageContent:e,reportedUserId:n,reportedUserName:r,reporterId:s,reason:i,status:"pending",createdAt:Ke()})},QP=t=>{if(!V)return()=>{};const e=lt(De(V,"reports"),Ss("createdAt","desc"));return tr(e,n=>{const r=n.docs.map(s=>{const i=s.data();return{id:s.id,...i,createdAt:i.createdAt?i.createdAt.toMillis():Date.now(),handledAt:i.handledAt?i.handledAt.toMillis():void 0}});t(r)})},YP=async(t,e)=>{if(!V)return;const n=ge(V,"reports",t);await ut(n,{status:"handled",handledBy:e,handledAt:Ke()})},X0=async t=>{if(!V)return;const e=ge(V,"reports",t);await qs(e)},XP=async()=>{if(!V)return[];try{const t=lt(De(V,"users"),Ss("createdAt","desc"));return(await Vn(t)).docs.map(n=>({uid:n.id,...n.data()}))}catch(t){return console.error("Error fetching users",t),[]}},JP=async(t,e)=>{if(!V)return;const n=ge(V,"users",t);await ut(n,{role:e})},ZP=async(t,e)=>{if(!V)return;const n=ge(V,"users",t);e?await ut(n,{isBanned:!1,banExpiresAt:null}):await ut(n,{isBanned:!0})},eq=async(t,e)=>{if(!V)return;const n=ge(V,"users",t),r=Date.now()+e*60*60*1e3;await ut(n,{isBanned:!0,banExpiresAt:r})},tq=async(t,e)=>{if(!(!V||!e.isBanned||!e.banExpiresAt)&&Date.now()>e.banExpiresAt){console.log("Ban expired, lifting ban for user:",t);const n=ge(V,"users",t);await ut(n,{isBanned:!1,banExpiresAt:null})}},Z1=async t=>{if(V)try{await qs(ge(V,"global_chat",t))}catch(e){console.error("Error deleting global message",e)}},nq=async(t,e)=>{if(V)try{await qs(ge(V,"chats",t,"messages",e))}catch(n){console.error("Error deleting private message",n)}},rq=async t=>{if(V)try{await qs(ge(V,"chats",t))}catch(e){console.error("Error deleting chat",e)}},J0=async t=>{if(V)try{const e=lt(De(V,"chats",t,"messages"),di(500)),n=await Vn(e),r=Xc(V);n.docs.forEach(s=>{r.delete(s.ref)}),await r.commit()}catch(e){console.error("Error clearing chat history",e)}},km=async(t,e)=>{if(V)try{await zr(ge(V,"users",t,"blocked",e),{blockedAt:Ke(),uid:e})}catch(n){console.error("Error blocking user",n)}},eE=async(t,e)=>{if(V)try{await qs(ge(V,"users",t,"blocked",e))}catch(n){console.error("Error unblocking user",n)}},tE=async(t,e)=>{if(!V)return!1;try{const n=ge(V,"users",t,"blocked",e);return(await Eo(n)).exists()}catch{return!1}},nE=async(t,e)=>{if(!V)return;const n=ge(V,"global_chat",t);try{await ut(n,{text:e,edited:!0})}catch(r){console.error("Error editing global message",r)}},rE=async()=>{if(V)try{const t=lt(De(V,"global_chat")),e=await Vn(t),n=Xc(V);let r=0;e.forEach(s=>{n.delete(s.ref),r++,r>=490}),await n.commit(),console.log(`Cleared ${r} messages.`)}catch(t){console.error("Error clearing chat",t)}},sE=async()=>{if(!V)return[];const t=ge(V,"settings","wordFilters"),e=await Eo(t);return e.exists()?e.data().bannedWords||[]:[]},Z0=async t=>{if(!V)return;const e=ge(V,"settings","wordFilters");await zr(e,{bannedWords:t},{merge:!0})},sq=async t=>{if(!V)return[];const e=[{id:"global_chat",name:"  ",avatar:"https://cdn-icons-png.flaticon.com/512/921/921490.png",status:"online",bio:"Surveillance View",username:"@global_world",phone:"",type:"group",isGlobal:!0}];try{const n=lt(De(V,"chats"),As("participants","array-contains",t)),s=(await Vn(n)).docs.map(async l=>{const p=(l.data().participants||[]).find(m=>m!==t);if(p){const m=await xf(p);return{id:l.id,name:m?` : ${m.name}`:`User: ${p}`,avatar:(m==null?void 0:m.avatar)||"https://via.placeholder.com/150",status:"offline",bio:"Private Chat",username:(m==null?void 0:m.username)||"",phone:"",type:"user",isGlobal:!1}}return null}),o=(await Promise.all(s)).filter(l=>l!==null);return[...e,...o]}catch(n){return console.error("Error fetching spy chats",n),e}},iq=async(t,e)=>{if(!V)return[];try{let n;return e==="global_chat"?n=lt(De(V,"global_chat"),Ss("createdAt","desc"),di(100)):n=lt(De(V,"chats",e,"messages"),Ss("createdAt","desc"),di(100)),(await Vn(n)).docs.map(s=>{const i=s.data();return{id:s.id,...i,timestamp:i.createdAt?i.createdAt.toMillis():Date.now()}}).reverse()}catch(n){return console.error("Error fetching spy messages",n),[]}},oq=async(t,e,n)=>{if(V)try{await wi(De(V,"users",t,"notifications"),{title:e,message:n,type:"alert",read:!1,createdAt:Ke()})}catch(r){console.error("Error sending notification",r)}},aq=(t,e)=>{if(!V)return()=>{};const n=lt(De(V,"users",t,"notifications"),As("read","==",!1));return tr(n,r=>{const s=r.docs.map(o=>{const l=o.data();return{id:o.id,...l,createdAt:l.createdAt?l.createdAt.toMillis():Date.now()}});s.sort((o,l)=>l.createdAt-o.createdAt);const i=s.slice(0,10);e(i)})},lq=async(t,e)=>{V&&await ut(ge(V,"users",t,"notifications",e),{read:!0})},uq=async(t,e)=>{if(!V)return;const n=ge(V,"chat_metadata",t);await zr(n,{pinnedMessage:e,updatedAt:Ke()},{merge:!0})},cq=async t=>{if(!V)return;const e=ge(V,"chat_metadata",t);await ut(e,{pinnedMessage:null})},dq=(t,e)=>{if(!V)return()=>{};const n=ge(V,"chat_metadata",t);return tr(n,r=>{r.exists()?e(r.data().pinnedMessage):e(null)})},Ii=(t,e)=>e==="saved"?`saved_${t}`:[t,e].sort().join("_"),hq=t=>{if(!V)return()=>{};const e=lt(De(V,"global_chat"),Ss("createdAt","desc"),di(50));return tr(e,r=>{const s=[];r.forEach(i=>{const o=i.data();s.push({id:i.id,text:o.text,senderId:o.senderId,senderName:o.senderName,senderAvatar:o.senderAvatar,senderRole:o.senderRole||"user",timestamp:o.createdAt?o.createdAt.toMillis():Date.now(),status:"read",type:o.type||"text",imageUrl:o.imageUrl,fileUrl:o.fileUrl,fileName:o.fileName,fileSize:o.fileSize,audioDuration:o.audioDuration,isSticker:o.isSticker,replyToId:o.replyToId,edited:o.edited,reactions:o.reactions||{}})}),t(s.reverse())})},fq=async(t,e)=>{if(!V){console.error("Database not initialized");return}try{let n=t.text||"";n&&t.type==="text"&&(await sE()).forEach(s=>{const i=new RegExp(s,"gi");n=n.replace(i,"*".repeat(s.length))}),await wi(De(V,"global_chat"),{text:n,senderId:t.senderId,senderName:e.name,senderAvatar:e.avatar||"",senderRole:e.role||"user",type:t.type||"text",imageUrl:t.imageUrl||null,fileUrl:t.fileUrl||null,fileName:t.fileName||null,fileSize:t.fileSize||null,audioDuration:t.audioDuration||null,isSticker:t.isSticker||!1,replyToId:t.replyToId||null,createdAt:Ke(),edited:!1,reactions:{}})}catch(n){console.error("Error adding document: ",n)}},pq=(t,e)=>{if(!V)return()=>{};const n=lt(De(V,"chats",t,"messages"),Ss("createdAt","desc"),di(50));return tr(n,r=>{const s=[];r.forEach(i=>{const o=i.data();s.push({id:i.id,text:o.text,senderId:o.senderId,senderName:o.senderName,senderAvatar:o.senderAvatar,timestamp:o.createdAt?o.createdAt.toMillis():Date.now(),status:"read",type:o.type||"text",imageUrl:o.imageUrl,fileUrl:o.fileUrl,fileName:o.fileName,fileSize:o.fileSize,audioDuration:o.audioDuration,isSticker:o.isSticker,replyToId:o.replyToId,edited:o.edited,reactions:o.reactions||{}})}),e(s.reverse())})},iE=async(t,e,n)=>{if(!V)return;const r=ge(V,"chats",t,"messages",e);try{await ut(r,{text:n,edited:!0})}catch(s){console.error("Error editing private message",s)}},mq=(t,e)=>{if(!V)return()=>{};const n=lt(De(V,"chats"),As("participants","array-contains",t));return tr(n,r=>{const s=r.docs.map(i=>{const o=i.data();return{id:i.id,...o,updatedAt:o.updatedAt?o.updatedAt.toMillis():Date.now()}});s.sort((i,o)=>o.updatedAt-i.updatedAt),e(s)})},gq=async(t,e,n,r)=>{if(!V)return;const s=ge(V,"chats",t),i=kn.currentUser,o=e==="saved"?[i==null?void 0:i.uid]:[i==null?void 0:i.uid,e];await zr(s,{participants:o,updatedAt:Ke(),lastMessage:n.text||(n.type==="image"?"":n.type==="audio"?"":""),lastSenderId:i==null?void 0:i.uid},{merge:!0}),await wi(De(V,"chats",t,"messages"),{text:n.text||"",senderId:n.senderId,senderName:r.name,senderAvatar:r.avatar||"",type:n.type||"text",imageUrl:n.imageUrl||null,fileUrl:n.fileUrl||null,fileName:n.fileName||null,fileSize:n.fileSize||null,audioDuration:n.audioDuration||null,isSticker:n.isSticker||!1,replyToId:n.replyToId||null,createdAt:Ke(),reactions:{}})},yq=async(t,e,n)=>{if(!V)return;const r=ge(V,"global_chat",t);try{const s=await Eo(r);if(s.exists()){const o=s.data().reactions||{},l=o[e]||[];let c={...o};l.includes(n)?(c[e]=l.filter(h=>h!==n),c[e].length===0&&delete c[e]):c[e]=[...l,n],await ut(r,{reactions:c})}}catch(s){console.error("Error toggling reaction:",s)}},vq=t=>{if(!V)return()=>{};const e=ge(V,"system","info");return tr(e,n=>{if(n.exists()){const r=n.data();t({currentVersion:r.currentVersion||Dn.VERSION,lastCleanup:r.lastCleanup?r.lastCleanup.toMillis():0,forceUpdate:r.forceUpdate?r.forceUpdate.toMillis():0})}else zr(e,{currentVersion:Dn.VERSION,lastCleanup:Ke()})})},_q=async()=>{if(V)try{const t=ge(V,"system","info"),e=await Eo(t);if(e.exists()){const n=e.data(),r=n.lastCleanup?n.lastCleanup.toMillis():0,s=Date.now();if(s-r>864e5){console.log("Triggering 24h cleanup..."),await ut(t,{lastCleanup:Ke()});const i=new Date(s-864e5),o=lt(De(V,"global_chat"),As("createdAt","<",i)),l=await Vn(o),c=Xc(V);let h=0;l.forEach(p=>{c.delete(p.ref),h++}),h>0&&(await c.commit(),console.log(`Cleanup: Deleted ${h} old messages.`))}}}catch(t){console.error("Error in auto cleanup:",t)}},wq=async()=>{V&&await zr(ge(V,"system","info"),{forceUpdate:Ke()},{merge:!0})},xq=async()=>{if(V){await rE();try{const t=lt(De(V,"chats"),di(100)),e=await Vn(t);for(const n of e.docs){const r=lt(De(V,"chats",n.id,"messages"),di(500)),s=await Vn(r);if(!s.empty){const i=Xc(V);s.forEach(o=>i.delete(o.ref)),await i.commit()}await ut(n.ref,{lastMessage:"",lastSenderId:null,updatedAt:Ke()})}}catch(t){console.error("Wipe chats error",t)}}},oE=async t=>{if(V)try{await qs(ge(V,"users",t))}catch(e){console.error("Delete user error",e)}},Eq=({contacts:t,sessions:e,activeContactId:n,onSelectContact:r,toggleTheme:s,theme:i,userProfile:o,onOpenSettings:l,onOpenAdminPanel:c,onAddContact:h,showInstallButton:p,onInstall:m,storedAccounts:y,onAddAccount:A,onSwitchAccount:P,onCreateGroup:D,onDeleteChat:S})=>{var Cn;const[x,_]=O.useState(""),[I,q]=O.useState(!1),[W,$]=O.useState(!1),[w,g]=O.useState("all"),[E,k]=O.useState(!1),[T,C]=O.useState(!1),[b,Te]=O.useState(null),[Ze,kt]=O.useState(""),[ct,G]=O.useState(!1),[ee,oe]=O.useState(null),[ye,pe]=O.useState(""),[ve,Ve]=O.useState(""),[gt,dt]=O.useState(""),[It,An]=O.useState(null),[mn,et]=O.useState(null),[Ue,ln]=O.useState([]),[ht,Jt]=O.useState(!1),ke=O.useRef(null),[gn,Tt]=O.useState(!1),[Mt,Lt]=O.useState([]),[Sn,At]=O.useState(!1),R=O.useRef(null),de=O.useRef(null);O.useEffect(()=>{const U=ce=>{R.current&&!R.current.contains(ce.target)&&q(!1),Te(null)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]),O.useEffect(()=>{const U=setTimeout(async()=>{if(x.trim().length>2){At(!0);try{const ce=await G0(x);ce&&ce.username!==o.username?Lt([ce]):Lt([])}catch{Lt([])}At(!1)}else Lt([]),At(!1)},800);return()=>clearTimeout(U)},[x,o.username]);const me=async()=>{if(!Ze.trim())return;G(!0),pe(""),oe(null);const U=await G0(Ze);U?U.username===o.username?pe("     ."):oe(U):pe("     ."),G(!1)},Fe=()=>{if(ee){const U={id:ee.uid,name:ee.name,avatar:ee.avatar,bio:ee.bio,username:"@"+ee.username,phone:ee.phone,status:ee.status||"offline",type:"user"};h(U),k(!1),oe(null),kt("")}},Ee=U=>{if(U.target.files&&U.target.files[0]){const ce=U.target.files[0];An(ce);const Ne=new FileReader;Ne.onload=it=>{var Vt;et((Vt=it.target)==null?void 0:Vt.result)},Ne.readAsDataURL(ce)}},Re=U=>{ln(ce=>ce.includes(U)?ce.filter(Ne=>Ne!==U):[...ce,U])},nr=async()=>{if(ve.trim()){Jt(!0);try{await D(ve,gt,It,Ue),Ve(""),dt(""),An(null),et(null),ln([]),C(!1)}catch(U){console.error(U)}finally{Jt(!1)}}},rr=async()=>{if(!("contacts"in navigator&&"ContactsManager"in window)){alert("       .      .");return}Tt(!0);try{const U=["name","tel"],ce={multiple:!0},Ne=await navigator.contacts.select(U,ce);if(Ne.length>0){const it=Ne.map(M=>M.tel[0]).filter(Boolean),Vt=await VP(it);let St=0;Vt.forEach(M=>{const B={id:M.uid,name:M.name,avatar:M.avatar,bio:M.bio,username:"@"+M.username,phone:M.phone,status:M.status,type:"user"};h(B),St++}),alert(`${St}      .`)}}catch(U){console.error(U)}finally{Tt(!1),q(!1)}},Nn=()=>{localStorage.setItem("last_forced_update",Date.now().toString()),window.location.reload()},Os=U=>{const ce={id:U.uid,name:U.name,avatar:U.avatar,bio:U.bio,username:"@"+U.username,phone:U.phone,status:U.status||"offline",type:"user"};h(ce),_(""),Lt([])},Fn=(U,ce)=>{if(U.preventDefault(),ce.id==="saved")return;const Ne=U.clientX,it=U.clientY;Te({x:Ne,y:it,contact:ce})},$r=async U=>{await tE(o.uid,U)?(await eE(o.uid,U),alert("   .")):confirm("  ")&&(await km(o.uid,U),alert("  .")),Te(null)},Wr=()=>{window.history.back()},sr=t.filter(U=>{const ce=U.name.toLowerCase().includes(x.toLowerCase())||U.username.toLowerCase().includes(x.toLowerCase());let Ne=!0;return w==="personal"?Ne=U.type==="user":w==="groups"&&(Ne=U.type==="group"||U.type==="channel"),ce&&Ne}),Ms=U=>{if(!U)return"";const ce=new Date(U);return Date.now()-U>24*60*60*1e3?ce.toLocaleDateString("fa-IR"):ce.toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"})},Ls=U=>U.type!=="user"||U.id==="saved"?!1:U.status==="online"?!0:U.lastSeen?Date.now()-new Date(U.lastSeen).getTime()<9e4:!1;return u.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-telegram-bgDark border-l border-gray-200 dark:border-telegram-borderDark relative",ref:de,children:[b&&u.jsx("div",{className:"fixed inset-0 z-[100]",onClick:()=>Te(null),onContextMenu:U=>{U.preventDefault(),Te(null)},children:u.jsxs("div",{className:"absolute bg-white dark:bg-gray-800 rounded-xl shadow-2xl border dark:border-gray-700 py-1 w-48 animate-fade-in overflow-hidden",style:{top:Math.min(b.y,window.innerHeight-200),left:Math.min(b.x,window.innerWidth-200)},onClick:U=>U.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-2 border-b dark:border-gray-700 bg-gray-50 dark:bg-white/5",children:u.jsx("p",{className:"font-bold text-sm text-gray-800 dark:text-gray-200 truncate",children:b.contact.name})}),u.jsxs("button",{onClick:()=>{r(b.contact.id),Te(null)},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(ls,{size:18}),"  "]}),b.contact.id!=="global_chat"&&u.jsxs("button",{onClick:()=>$r(b.contact.id),className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(ts,{size:18})," / "]}),b.contact.id!=="global_chat"&&u.jsxs("button",{onClick:()=>{S&&S(b.contact.id),Te(null)},className:"w-full text-right px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-3 transition-colors border-t border-gray-100 dark:border-gray-700",children:[u.jsx(Gn,{size:18}),"  "]})]})}),u.jsxs("div",{className:`absolute top-0 right-0 h-full w-80 bg-white dark:bg-telegram-secondaryDark z-30 shadow-2xl transform transition-transform duration-300 ease-in-out ${I?"translate-x-0":"translate-x-full"}`,ref:R,children:[u.jsxs("div",{className:"bg-telegram-primary p-6 flex flex-col justify-end text-white relative overflow-hidden",children:[u.jsx("div",{className:"absolute -top-16 -left-16 w-48 h-48 bg-white/10 rounded-full blur-2xl"}),u.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[u.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center text-telegram-primary text-2xl font-bold shadow-lg overflow-hidden ring-4 ring-white/20",children:o.avatar?u.jsx("img",{src:o.avatar,className:"w-full h-full object-cover"}):((Cn=o.name)==null?void 0:Cn.charAt(0))||"U"}),u.jsx("button",{onClick:s,className:"p-2.5 bg-white/20 rounded-full hover:bg-white/30 transition-colors backdrop-blur-md",children:i===Hs.DARK?u.jsx(kI,{size:20}):u.jsx(mI,{size:20})})]}),u.jsxs("div",{className:"relative z-10 cursor-pointer",onClick:()=>$(!W),children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"font-bold text-lg truncate flex items-center gap-2",children:[o.name,o.role==="owner"&&u.jsx("span",{className:"bg-yellow-400 text-black text-[10px] px-2 py-0.5 rounded-full shadow-sm",children:"Owner"})]}),u.jsx(Kh,{size:18,className:`transition-transform duration-300 ${W?"rotate-180":""}`})]}),u.jsx("div",{className:"text-sm opacity-80 font-mono dir-ltr text-right mt-1",children:o.phone||o.username})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:W?u.jsxs("div",{className:"animate-fade-in space-y-1",children:[y.filter(U=>U.username!==o.username).map(U=>u.jsxs("button",{onClick:()=>{P(U.uid),q(!1),$(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx("img",{src:U.avatar,className:"w-10 h-10 rounded-full bg-gray-200 object-cover"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"font-bold text-sm",children:U.name}),u.jsxs("div",{className:"text-xs opacity-60",children:["@",U.username]})]})]},U.uid)),u.jsxs("button",{onClick:()=>{A(),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-dashed border-gray-400 flex items-center justify-center",children:u.jsx(ww,{size:20})}),u.jsx("span",{className:"font-medium",children:"  "})]})]}):u.jsxs("div",{className:"flex flex-col animate-fade-in",children:[u.jsxs("button",{onClick:()=>{C(!0),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(Ju,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:()=>{k(!0),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(ky,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:rr,className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[gn?u.jsx(zi,{size:22,className:"animate-spin text-gray-500"}):u.jsx(Yu,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:()=>{r("saved"),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(vy,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:"  "})]}),u.jsxs("button",{onClick:()=>{l(),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(xw,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:""})]}),u.jsxs("button",{onClick:Nn,className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(II,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:"   "})]}),p&&u.jsxs("button",{onClick:()=>{m(),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(yp,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),(o.role==="owner"||o.role==="admin")&&u.jsxs("button",{onClick:()=>{c(),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-red-50 dark:hover:bg-red-900/10 text-red-600 dark:text-red-400 transition-colors border-t border-gray-100 dark:border-gray-800 mt-2",children:[u.jsx(ja,{size:22}),u.jsx("span",{className:"font-bold",children:" "})]}),u.jsxs("button",{onClick:Wr,className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-red-50 dark:hover:bg-red-900/10 text-red-600 dark:text-red-400 transition-colors border-t border-gray-100 dark:border-gray-800 mt-1",children:[u.jsx(Qu,{size:22}),u.jsx("span",{className:"font-bold",children:"  "})]})]})})]}),I&&u.jsx("div",{className:"absolute inset-0 bg-black/50 z-20 backdrop-blur-sm transition-opacity",onClick:()=>q(!1)}),E&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-3xl shadow-2xl p-6 border border-white/20",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),u.jsx("button",{onClick:()=>k(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full",children:u.jsx(jn,{size:24,className:"text-gray-500"})})]}),u.jsxs("div",{className:"mb-6 relative",children:[u.jsx("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:" "}),u.jsx("input",{value:Ze,onChange:U=>kt(U.target.value),placeholder:"@username   ",className:"w-full bg-gray-100 dark:bg-black/20 rounded-xl px-4 py-3.5 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white transition-all"})]}),ye&&u.jsxs("p",{className:"text-red-500 text-sm mb-4 bg-red-50 dark:bg-red-900/20 p-3 rounded-lg flex items-center gap-2",children:[u.jsx(ja,{size:16})," ",ye]}),ee&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-3 rounded-xl flex items-center gap-3 mb-6 border border-blue-200 dark:border-blue-800",children:[u.jsx("img",{src:ee.avatar,className:"w-12 h-12 rounded-full object-cover"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:ee.name}),u.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["@",ee.username]})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:me,disabled:ct,className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-bold py-3.5 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:ct?u.jsx(zi,{className:"animate-spin mx-auto"}):""}),ee&&u.jsx("button",{onClick:Fe,className:"flex-1 bg-telegram-primary text-white font-bold py-3.5 rounded-xl hover:bg-telegram-primaryDark transition-colors shadow-lg shadow-telegram-primary/30",children:""})]})]})}),T&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-3xl shadow-2xl p-6 max-h-[90vh] overflow-y-auto border border-white/20",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),u.jsx("button",{onClick:()=>C(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full",children:u.jsx(jn,{size:24,className:"text-gray-500"})})]}),u.jsxs("div",{className:"flex justify-center mb-8",children:[u.jsxs("div",{onClick:()=>{var U;return(U=ke.current)==null?void 0:U.click()},className:"relative w-28 h-28 rounded-full bg-gray-100 dark:bg-black/20 flex items-center justify-center border-4 border-dashed border-gray-300 dark:border-gray-600 cursor-pointer overflow-hidden group transition-colors hover:border-telegram-primary",children:[mn?u.jsx("img",{src:mn,className:"w-full h-full object-cover"}):u.jsx(pw,{size:36,className:"text-gray-400 group-hover:text-telegram-primary transition-colors"}),u.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("span",{className:"text-white text-xs font-bold",children:""})})]}),u.jsx("input",{type:"file",ref:ke,className:"hidden",accept:"image/*",onChange:Ee})]}),u.jsxs("div",{className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500 mb-1 block",children:" "}),u.jsx("input",{value:ve,onChange:U=>Ve(U.target.value),placeholder:":  ",className:"w-full bg-gray-100 dark:bg-black/20 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white transition-all"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500 mb-1 block",children:" ()"}),u.jsx("input",{value:gt,onChange:U=>dt(U.target.value),placeholder:" ...",className:"w-full bg-gray-100 dark:bg-black/20 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white transition-all"})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center justify-between",children:[u.jsx("span",{children:" "}),u.jsxs("span",{className:"bg-telegram-primary/10 text-telegram-primary px-2 py-0.5 rounded-full text-xs",children:[Ue.length," "]})]}),u.jsx("div",{className:"max-h-48 overflow-y-auto bg-gray-50 dark:bg-black/10 rounded-xl p-2 custom-scrollbar border border-gray-100 dark:border-gray-700",children:t.filter(U=>U.type==="user"&&U.id!=="saved").length===0?u.jsx("p",{className:"text-center text-gray-400 text-xs py-8",children:"    "}):t.filter(U=>U.type==="user"&&U.id!=="saved").map(U=>u.jsxs("div",{onClick:()=>Re(U.id),className:`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-all mb-1 ${Ue.includes(U.id)?"bg-telegram-primary/10 dark:bg-telegram-primary/20":"hover:bg-gray-100 dark:hover:bg-white/5"}`,children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:U.avatar,className:"w-10 h-10 rounded-full bg-gray-200 object-cover"}),Ue.includes(U.id)&&u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-telegram-primary text-white rounded-full p-0.5 border-2 border-white dark:border-gray-800 animate-scale-in",children:u.jsx(_y,{size:12,fill:"white"})})]}),u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:U.name})}),Ue.includes(U.id)?u.jsx(_y,{className:"text-telegram-primary",size:20}):u.jsx(bI,{className:"text-gray-300 dark:text-gray-600",size:20})]},U.id))})]}),u.jsx("button",{onClick:nr,disabled:!ve.trim()||ht,className:"w-full bg-telegram-primary hover:bg-telegram-primaryDark disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3.5 rounded-xl transition-all shadow-lg shadow-telegram-primary/30 flex justify-center items-center gap-2",children:ht?u.jsx(zi,{className:"animate-spin"}):" "})]})}),u.jsxs("div",{className:"px-3 py-3 flex items-center gap-3 shrink-0",children:[u.jsx("button",{onClick:()=>{q(!0),$(!1)},className:"p-2.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-500 dark:text-gray-400 transition-colors",children:u.jsx(fI,{size:24})}),u.jsxs("div",{className:"relative flex-1 group",children:[u.jsx("input",{type:"text",placeholder:"...",value:x,onChange:U=>_(U.target.value),className:"w-full bg-gray-100 dark:bg-white/5 text-gray-900 dark:text-white rounded-full py-2.5 pr-10 pl-4 focus:outline-none focus:ring-2 focus:ring-telegram-primary/50 focus:bg-white dark:focus:bg-black/20 text-sm transition-all"}),Sn?u.jsx(zi,{className:"absolute right-3.5 top-3 text-telegram-primary w-4 h-4 animate-spin"}):u.jsx(Gh,{className:"absolute right-3.5 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors w-4 h-4"})]})]}),u.jsx("div",{className:"flex px-4 pb-1 shrink-0 border-b border-gray-100 dark:border-white/5 space-x-reverse space-x-4",children:["all","personal","groups"].map(U=>u.jsx("button",{onClick:()=>g(U),className:`flex-1 text-center py-2.5 border-b-2 font-medium text-sm transition-all ${w===U?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:U==="all"?"":U==="personal"?"":""},U))}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:[x&&Mt.length>0&&u.jsxs("div",{className:"mb-4 animate-fade-in",children:[u.jsxs("div",{className:"px-4 py-2 text-xs font-bold text-telegram-primary bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center gap-1.5 mx-2 mb-2",children:[u.jsx(gw,{size:12}),"  "]}),Mt.map(U=>u.jsxs("div",{onClick:()=>Os(U),className:"flex items-center gap-3 p-3 mx-2 rounded-2xl cursor-pointer hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:[u.jsx("img",{src:U.avatar,className:"w-12 h-12 rounded-full object-cover bg-gray-200"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold text-base truncate text-gray-900 dark:text-gray-100",children:U.name}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",U.username]})]}),u.jsx("div",{className:"p-2 bg-telegram-primary/10 rounded-full text-telegram-primary",children:u.jsx(qa,{size:16})})]},"global-"+U.uid))]}),sr.map(U=>{const ce=e[U.id],Ne=ce==null?void 0:ce.messages[ce.messages.length-1],it=n===U.id,Vt=Ls(U);return u.jsxs("div",{onClick:()=>r(U.id),onContextMenu:St=>Fn(St,U),className:`group relative flex items-center gap-3 p-3 mx-1 mb-1 rounded-2xl cursor-pointer transition-all duration-200 select-none ${it?"bg-telegram-primary text-white shadow-lg shadow-telegram-primary/30 scale-[1.02]":"hover:bg-gray-100 dark:hover:bg-white/5"}`,children:[u.jsxs("div",{className:"relative shrink-0",children:[U.id==="saved"?u.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center text-white shadow-md",children:u.jsx(vy,{size:24,fill:"currentColor"})}):u.jsx("img",{src:U.avatar,alt:U.name,className:"w-12 h-12 rounded-full object-cover bg-gray-200 shadow-sm"}),U.id!=="saved"&&Vt&&u.jsx("div",{className:`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 ${it?"bg-white border-telegram-primary":"bg-green-500 border-white dark:border-black"}`})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[u.jsx("h3",{className:`font-bold text-sm truncate ${it?"text-white":"text-gray-900 dark:text-gray-100"}`,children:U.name}),Ne&&u.jsx("span",{className:`text-[11px] font-medium ${it?"text-blue-100":"text-gray-400"}`,children:Ms(Ne.timestamp)})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:`text-sm truncate pr-1 ${it?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:U.status==="typing..."?u.jsx("span",{className:`${it?"text-white":"text-telegram-primary"} animate-pulse font-medium`,children:"  ..."}):Ne?u.jsxs("span",{className:"flex items-center gap-1",children:[Ne.senderId==="me"&&u.jsx("span",{className:"opacity-80",children:":"}),Ne.type==="image"?" ":Ne.type==="audio"?" ":Ne.text]}):u.jsx("span",{className:"text-xs opacity-70 italic",children:U.id!=="saved"&&U.type==="user"?Vt?"":"":U.type==="group"?"":""})}),(ce==null?void 0:ce.unreadCount)>0&&u.jsx("span",{className:`min-w-[1.25rem] h-5 px-1.5 rounded-full text-[10px] font-bold flex items-center justify-center shadow-sm ${it?"bg-white text-telegram-primary":"bg-telegram-primary text-white"}`,children:ce.unreadCount})]})]})]},U.id)})]}),u.jsxs("div",{className:"absolute bottom-6 left-6 flex flex-col gap-4 z-10",children:[u.jsx("button",{onClick:()=>{C(!0)},className:"w-12 h-12 bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-200 rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform hover:text-telegram-primary",title:" ",children:u.jsx(Ju,{size:20})}),u.jsx("button",{onClick:()=>{k(!0)},className:"w-14 h-14 bg-telegram-primary text-white rounded-full shadow-xl shadow-telegram-primary/40 flex items-center justify-center hover:scale-110 transition-transform",title:" ",children:u.jsx(ky,{size:24})})]})]})},bq=({imageUrl:t,onClose:e})=>u.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/95 flex items-center justify-center animate-fade-in backdrop-blur-sm",onClick:e,children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors z-50 backdrop-blur-md",children:u.jsx(jn,{size:24})}),u.jsx("a",{href:t,download:!0,onClick:n=>n.stopPropagation(),className:"absolute top-4 left-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors z-50 backdrop-blur-md",title:" ",children:u.jsx(yp,{size:24})}),u.jsx("div",{className:"w-full h-full p-4 flex items-center justify-center",children:u.jsx("img",{src:t,alt:"Full view",className:"max-w-full max-h-full object-contain select-none shadow-2xl rounded-md",onClick:n=>n.stopPropagation()})})]}),kq=["","","","","","","","","","","","","",""],Iq=["https://cdn-icons-png.flaticon.com/512/742/742751.png","https://cdn-icons-png.flaticon.com/512/742/742752.png","https://cdn-icons-png.flaticon.com/512/742/742822.png","https://cdn-icons-png.flaticon.com/512/742/742760.png","https://cdn-icons-png.flaticon.com/512/742/742920.png","https://cdn-icons-png.flaticon.com/512/742/742786.png","https://cdn-icons-png.flaticon.com/512/166/166538.png","https://cdn-icons-png.flaticon.com/512/190/190623.png","https://cdn-icons-png.flaticon.com/512/417/417779.png"],Tq=t=>{if(!t)return"#3390ec";const e=["#df3f4c","#4a9e56","#e08e0b","#8c52ff","#ff5ca8","#31b5d6","#3390ec"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]},Aq=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Sq=({contact:t,messages:e,myId:n,myRole:r,pinnedMessage:s,onSendMessage:i,onEditMessage:o,onDeleteMessage:l,onPinMessage:c,onUnpinMessage:h,onReaction:p,onBack:m,isMobile:y,onProfileClick:A,onAvatarClick:P,wallpaper:D,onCall:S,onClearHistory:x,onDeleteChat:_,onBlockUser:I,onTyping:q})=>{const[W,$]=O.useState(""),[w,g]=O.useState(null),[E,k]=O.useState(null),[T,C]=O.useState(null),[b,Te]=O.useState(!1),[Ze,kt]=O.useState("emoji"),[ct,G]=O.useState(!1),[ee,oe]=O.useState(0),[ye,pe]=O.useState(null),[ve,Ve]=O.useState(!1),[gt,dt]=O.useState(!1),[It,An]=O.useState(!1),[mn,et]=O.useState(!1),[Ue,ln]=O.useState(!1),[ht,Jt]=O.useState(""),[ke,gn]=O.useState([]),[Tt,Mt]=O.useState(-1),[Lt,Sn]=O.useState(0),At=O.useRef(null),R=O.useRef(null),de=O.useRef(null),me=O.useRef(null),Fe=O.useRef(null),Ee=O.useRef(null),Re=O.useRef(null),nr=t.type==="group",rr=t.id==="global_chat",Nn=`draft_${n}_${t.id}`;O.useEffect(()=>{(async()=>{t.id!=="global_chat"&&t.id})()},[t.id]),O.useEffect(()=>{const N=localStorage.getItem(Nn);N&&$(N)},[Nn]),O.useEffect(()=>{E||(W?localStorage.setItem(Nn,W):localStorage.removeItem(Nn))},[W,Nn,E]),O.useEffect(()=>()=>{Re.current&&clearTimeout(Re.current),t.id!=="saved"&&t.id!=="global_chat"&&q&&q(!1)},[t.id,n,q]),O.useEffect(()=>{var N;Ue||(N=At.current)==null||N.scrollIntoView({behavior:"auto"})},[e.length,w,Ue]),O.useEffect(()=>{const N=()=>{var je;const Ce=((je=navigator.connection)==null?void 0:je.rtt)||45,Ge=Math.floor(Math.random()*20)-10;Sn(Math.max(10,Ce+Ge))};N();const X=setInterval(N,5e3);return()=>clearInterval(X)},[]),O.useEffect(()=>{if(!ht.trim()){gn([]),Mt(-1);return}const N=e.filter(X=>X.type==="text"&&X.text.toLowerCase().includes(ht.toLowerCase())).map(X=>X.id);gn(N),N.length>0?Mt(N.length-1):Mt(-1)},[ht,e]),O.useEffect(()=>{if(Tt>=0&&Tt<ke.length){const N=ke[Tt],X=document.getElementById(`msg-${N}`);X&&X.scrollIntoView({behavior:"smooth",block:"center"})}},[Tt,ke]),O.useEffect(()=>{Ue&&Ee.current?Ee.current.focus():(Jt(""),gn([]))},[Ue]),O.useEffect(()=>{const N=()=>{C(null),Te(!1),et(!1)};return window.addEventListener("click",N),()=>window.removeEventListener("click",N)},[]);const Os=()=>{ke.length!==0&&Mt(N=>N<ke.length-1?N+1:0)},Fn=()=>{ke.length!==0&&Mt(N=>N>0?N-1:ke.length-1)},$r=()=>{if(!s)return;const N=document.getElementById(`msg-${s.id}`);N?(N.scrollIntoView({behavior:"smooth",block:"center"}),N.classList.add("bg-blue-100","dark:bg-blue-900/40"),setTimeout(()=>N.classList.remove("bg-blue-100","dark:bg-blue-900/40"),2e3)):alert("       .")},Wr=N=>{$(N.target.value),t.id!=="saved"&&t.id!=="global_chat"&&q&&(Re.current||q(!0),Re.current&&clearTimeout(Re.current),Re.current=setTimeout(()=>{q(!1),Re.current=null},2e3))},sr=()=>{W.trim()&&(Re.current&&(clearTimeout(Re.current),Re.current=null,t.id!=="saved"&&t.id!=="global_chat"&&q&&q(!1)),E?(o(E.id,W),k(null)):(i({text:W,type:"text"},w==null?void 0:w.id),g(null)),$(""))},Ms=N=>{i({imageUrl:N,type:"image",isSticker:!0},w==null?void 0:w.id),g(null),Te(!1)},Ls=()=>{alert("  ")},Cn=N=>{G(!1),oe(0)},U=()=>{alert("    ")},ce=(N,X="image")=>{if(N){const te=(N.size/1024/1024).toFixed(2)+" MB";i({type:X,file:N,fileName:N.name,fileSize:te,text:X==="image"?"":N.name},w==null?void 0:w.id),g(null)}},Ne=N=>{N.preventDefault(),N.stopPropagation(),Ve(!1);const X=N.dataTransfer.files;if(X&&X.length>0){const te=X[0],Ce=te.type.startsWith("image/");ce(te,Ce?"image":"file")}},it=async()=>{rr&&r==="owner"&&confirm("              .")&&await rE()},Vt=async N=>{const X=prompt("    ");if(X)try{await GP(N.id,N.text||(N.type==="image"?"":""),N.senderId,N.senderName||"",n,X),alert("           .")}catch(te){console.error(te),alert("   .")}C(null)},St=(N,X,te)=>{N.preventDefault(),N.stopPropagation();const Ce=192,Ge=240;let je=N.clientX,Zt=N.clientY;je+Ce>window.innerWidth&&(je=window.innerWidth-Ce-20),Zt+Ge>window.innerHeight&&(Zt=window.innerHeight-Ge-20),C({x:je,y:Zt,message:X,isMe:te})},M=N=>new Date(N).toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"}),B=N=>{if(!N)return"";const X=new Date(N),te=Date.now()-X.getTime();return te<9e4?"":te<36e5?`  ${Math.floor(te/6e4)}  `:te<864e5?`  ${Math.floor(te/36e5)}  `:"  "},re=()=>D==="default"?{}:D.startsWith("http")||D.startsWith("data")?{backgroundImage:`url(${D})`,backgroundSize:"cover",backgroundPosition:"center"}:{backgroundColor:D},z=N=>{if(!ht||!N)return N;const X=new RegExp(`(${Aq(ht)})`,"gi");return N.split(X).map((Ce,Ge)=>Ce.toLowerCase()===ht.toLowerCase()?u.jsx("span",{className:"bg-yellow-300 text-black rounded px-0.5",children:Ce},Ge):Ce)},ne=t.id==="saved"||r==="admin"||r==="owner",ie=r==="admin"||r==="owner";return u.jsxs("div",{className:"h-full flex flex-col relative bg-telegram-bg dark:bg-telegram-bgDark overflow-hidden",onDragOver:N=>{N.preventDefault(),Ve(!0)},onDragLeave:N=>{N.preventDefault(),N.currentTarget.contains(N.relatedTarget)||Ve(!1)},onDrop:Ne,children:[ve&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-telegram-primary/80 backdrop-blur-sm flex flex-col items-center justify-center text-white animate-fade-in",children:[u.jsx(Ey,{size:64,className:"mb-4 animate-bounce"}),u.jsx("h2",{className:"text-2xl font-bold",children:"    "})]}),ye&&u.jsx(bq,{imageUrl:ye,onClose:()=>pe(null)}),u.jsx("input",{type:"file",ref:me,className:"hidden",accept:"image/*",onChange:N=>{var X;return ce((X=N.target.files)==null?void 0:X[0],"image")}}),u.jsx("input",{type:"file",ref:Fe,className:"hidden",onChange:N=>{var X;return ce((X=N.target.files)==null?void 0:X[0],"file")}}),u.jsx("div",{className:"absolute inset-0 z-0",style:re(),children:D==="default"&&u.jsx("div",{className:"absolute inset-0 chat-bg-pattern opacity-100"})}),t.status==="connecting"&&u.jsx("div",{className:"absolute top-16 left-0 right-0 bg-red-500/90 text-white text-xs py-1 text-center z-20",children:"  ..."}),u.jsxs("div",{className:"relative z-50 flex flex-col shrink-0 bg-white/80 dark:bg-telegram-bgDark/80 backdrop-blur-xl border-b border-gray-100 dark:border-white/5 shadow-sm",children:[u.jsx("div",{className:"flex items-center justify-between px-3 py-2 h-16",children:Ue?u.jsxs("div",{className:"flex-1 flex items-center gap-2 animate-fade-in w-full",children:[u.jsx("button",{onClick:()=>ln(!1),className:"p-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:u.jsx(jn,{size:24})}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{ref:Ee,value:ht,onChange:N=>Jt(N.target.value),placeholder:"   ...",className:"w-full bg-gray-100 dark:bg-white/10 text-gray-900 dark:text-white rounded-lg pl-3 pr-10 py-2 text-sm outline-none focus:ring-2 focus:ring-telegram-primary"}),u.jsx(Gh,{size:16,className:"absolute right-3 top-3 text-gray-400"})]}),u.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-500 font-mono w-16 justify-center",children:ke.length>0?u.jsxs("span",{children:[Tt+1," / ",ke.length]}):u.jsx("span",{children:"0 / 0"})}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:Fn,disabled:ke.length===0,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full disabled:opacity-30",children:u.jsx(sI,{size:20})}),u.jsx("button",{onClick:Os,disabled:ke.length===0,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full disabled:opacity-30",children:u.jsx(Kh,{size:20})})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden cursor-pointer flex-1",onClick:A,children:[y&&u.jsx("button",{onClick:N=>{N.stopPropagation(),m()},className:"p-2 -mr-2 text-gray-500 dark:text-gray-300",children:u.jsx(Gu,{size:22})}),u.jsx("img",{src:t.avatar||"",alt:"",className:"w-10 h-10 rounded-full bg-gray-200 object-cover shrink-0"}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("h2",{className:"font-bold text-gray-900 dark:text-white truncate text-base",children:t.name}),u.jsx("span",{className:`text-xs truncate ${t.status==="online"?"text-telegram-primary":"text-gray-500"}`,children:t.id==="saved"?"  ":t.status==="online"?"":B(t.lastSeen)})]})]}),u.jsxs("div",{className:"hidden md:flex items-center gap-1 text-[10px] text-gray-400 font-mono mr-2 px-2 py-1 bg-gray-100 dark:bg-white/5 rounded-full",title:"  (Ping)",children:[u.jsx(wI,{size:12,className:Lt<100?"text-green-500":"text-yellow-500"}),u.jsxs("span",{children:[Lt,"ms"]})]}),u.jsxs("div",{className:"flex items-center text-gray-500 gap-1 relative",children:[u.jsx("button",{onClick:N=>{N.stopPropagation(),ln(!0)},className:"p-2.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-500 transition-colors",title:"  ",children:u.jsx(Gh,{size:20})}),u.jsx("button",{onClick:N=>{N.stopPropagation(),S()},className:"p-2.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-telegram-primary transition-colors",children:u.jsx(Xa,{size:20})}),u.jsx("button",{onClick:N=>{N.stopPropagation(),et(!mn)},className:`p-2.5 rounded-full transition-colors ${mn?"bg-gray-100 dark:bg-white/10 text-telegram-primary":"hover:bg-gray-100 dark:hover:bg-white/10"}`,children:u.jsx(gI,{size:20})}),mn&&u.jsxs("div",{className:"absolute top-12 left-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border dark:border-gray-700 py-2 z-[100] animate-fade-in origin-top-left overflow-hidden",children:[rr&&r==="owner"&&u.jsxs("button",{onClick:N=>{N.stopPropagation(),it(),et(!1)},className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2",children:[u.jsx(Gn,{size:16}),"   "]}),!rr&&t.id!=="saved"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:N=>{N.stopPropagation(),x&&x(),et(!1)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[u.jsx(wy,{size:16}),"   "]}),u.jsxs("button",{onClick:N=>{N.stopPropagation(),_&&_(),et(!1)},className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2",children:[u.jsx(Gn,{size:16}),"  "]}),u.jsxs("button",{onClick:N=>{N.stopPropagation(),I&&I(),et(!1)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[u.jsx(ts,{size:16})," / "]})]}),t.id==="saved"&&u.jsxs("button",{onClick:N=>{N.stopPropagation(),x&&x(),et(!1)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[u.jsx(wy,{size:16}),"   "]})]})]})]})}),s&&u.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-gray-50/80 dark:bg-black/40 border-t border-gray-100 dark:border-white/5 cursor-pointer hover:bg-gray-100 dark:hover:bg-black/50 transition-colors backdrop-blur-md",onClick:$r,children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"w-0.5 self-stretch bg-telegram-primary rounded-full"}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("span",{className:"text-xs font-bold text-telegram-primary truncate",children:"  "}),u.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:s.text||(s.type==="image"?"":"")})]})]}),ne&&u.jsx("button",{onClick:N=>{N.stopPropagation(),h()},className:"p-1 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full text-gray-500",children:u.jsx(jn,{size:16})})]})]}),u.jsxs("div",{ref:R,className:"relative z-10 flex-1 overflow-y-auto p-2 sm:p-4 flex flex-col gap-1.5 scroll-smooth",onScroll:N=>dt(N.currentTarget.scrollHeight-N.currentTarget.scrollTop-N.currentTarget.clientHeight>200),children:[e.map((N,X)=>{var Hr;const te=N.senderId==="me",Ce=nr&&!te&&(!e[X-1]||e[X-1].senderId!==N.senderId),Ge=ke.includes(N.id),je=ke[Tt]===N.id,Zt=N.senderRole==="owner",vr=N.senderRole==="admin";let wt="px-3 py-2 rounded-2xl shadow-sm text-base break-words border min-w-[4rem] relative transition-all ";return je?wt+="ring-4 ring-yellow-400 dark:ring-yellow-500/50 ":Ge&&(wt+="ring-2 ring-yellow-200 dark:ring-yellow-500/20 "),Zt?wt+="bg-gradient-to-br from-amber-50 to-yellow-100 dark:from-yellow-900/40 dark:to-amber-800/40 text-gray-900 dark:text-white border-amber-400 dark:border-amber-600 shadow-[0_0_15px_rgba(251,191,36,0.3)] ring-1 ring-amber-300 dark:ring-amber-700 ":vr?wt+="bg-gradient-to-br from-red-50 to-rose-100 dark:from-red-900/40 dark:to-rose-800/40 text-gray-900 dark:text-white border-red-400 dark:border-red-600 shadow-[0_0_10px_rgba(244,63,94,0.3)] ring-1 ring-red-300 dark:ring-red-700 ":te?wt+="bg-telegram-chatOut dark:bg-telegram-chatOutDark border-telegram-chatOut dark:border-telegram-chatOutDark text-gray-900 dark:text-white ":wt+="bg-white dark:bg-telegram-chatInDark border-white dark:border-telegram-chatInDark text-gray-900 dark:text-white ",te?wt+="rounded-tr-2xl rounded-tl-none ":wt+="rounded-tl-2xl rounded-tr-none ",u.jsxs("div",{id:`msg-${N.id}`,className:`flex flex-col ${te?"items-end self-end":"items-start self-start"} group max-w-[85%] sm:max-w-[75%] animate-slide-in`,onContextMenu:Ut=>St(Ut,N,te),children:[Ce&&u.jsxs("div",{className:"flex items-center gap-1 mb-1 pr-2",children:[Zt&&u.jsx(oI,{size:12,className:"text-amber-500 fill-amber-500"}),vr&&u.jsx(_I,{size:12,className:"text-red-500 fill-red-500"}),u.jsx("span",{className:`text-xs font-bold cursor-pointer hover:underline ${Zt?"text-amber-600 dark:text-amber-400":vr?"text-red-600 dark:text-red-400":"text-telegram-primary"}`,onClick:()=>P&&N.senderId!=="me"&&P({id:N.senderId,name:N.senderName,avatar:N.senderAvatar}),style:{color:!Zt&&!vr?Tq(N.senderId):void 0},children:N.senderName||""})]}),u.jsxs("div",{className:wt,children:[N.replyToId&&u.jsxs("div",{className:"mb-1 pl-2 border-l-2 border-telegram-primary/50 text-xs opacity-70 cursor-pointer",onClick:()=>{const Ut=document.getElementById(`msg-${N.replyToId}`);Ut&&Ut.scrollIntoView({behavior:"smooth",block:"center"})},children:[u.jsx("div",{className:"font-bold",children:"  "}),u.jsx("div",{className:"truncate",children:((Hr=e.find(Ut=>Ut.id===N.replyToId))==null?void 0:Hr.text)||"..."})]}),N.type==="image"&&N.imageUrl&&u.jsx("div",{className:"mb-1 cursor-pointer",onClick:()=>pe(N.imageUrl||""),children:u.jsx("img",{src:N.imageUrl,alt:"Shared",className:`rounded-lg max-h-80 object-cover ${N.isSticker?"max-w-[150px] bg-transparent shadow-none border-none":"w-full min-w-[200px]"}`})}),N.type==="file"&&u.jsxs("div",{className:"flex items-center gap-3 bg-black/5 dark:bg-white/10 p-2 rounded-lg mb-1",children:[u.jsx("div",{className:"p-2 bg-telegram-primary rounded-full text-white",children:u.jsx(mw,{size:20})}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("span",{className:"font-bold text-sm truncate max-w-[150px]",children:N.fileName||"File"}),u.jsx("span",{className:"text-xs opacity-70",children:N.fileSize||"Unknown size"})]}),u.jsx("a",{href:N.fileUrl,download:!0,className:"p-2 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx(yp,{size:18})})]}),!N.isSticker&&N.type!=="image"&&N.type!=="file"&&u.jsx("p",{className:"leading-relaxed whitespace-pre-wrap dir-auto",dir:"auto",children:z(N.text)}),u.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 select-none ${te?"text-telegram-primaryDark dark:text-blue-200":"text-gray-500 dark:text-gray-400"}`,children:[N.edited&&u.jsx("span",{className:"text-[10px] italic opacity-70",children:" "}),u.jsx("span",{className:"text-[10px] opacity-80",children:M(N.timestamp)}),te&&(N.status==="read"?u.jsx(rI,{size:14}):N.status==="sent"?u.jsx(Pa,{size:14}):u.jsx("div",{className:"w-2 h-2 rounded-full border border-current opacity-60"}))]}),N.reactions&&Object.keys(N.reactions).length>0&&u.jsx("div",{className:"absolute -bottom-3 left-2 flex gap-1 z-10",children:Object.entries(N.reactions).map(([Ut,Vs])=>{const zn=Array.isArray(Vs)?Vs:[];return u.jsxs("button",{onClick:ml=>{ml.stopPropagation(),p(N.id,Ut)},className:`text-xs px-1.5 py-0.5 rounded-full border shadow-sm flex items-center gap-1 transition-transform hover:scale-110 ${zn.includes("me")?"bg-telegram-primary text-white border-telegram-primary":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200"}`,children:[u.jsx("span",{children:Ut}),u.jsx("span",{className:"font-bold",children:zn.length})]},Ut)})})]})]},N.id)}),u.jsx("div",{ref:At})]}),gt&&u.jsx("button",{onClick:()=>{var N;return(N=At.current)==null?void 0:N.scrollIntoView({behavior:"smooth"})},className:"absolute bottom-20 right-4 p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg text-gray-500 hover:text-telegram-primary transition-colors z-20 animate-fade-in border dark:border-gray-700",children:u.jsx(Kh,{size:24})}),w&&u.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-gray-50/90 dark:bg-black/40 border-t border-telegram-primary/20 animate-slide-in backdrop-blur-md",children:[u.jsx(by,{size:20,className:"text-telegram-primary"}),u.jsxs("div",{className:"flex-1 overflow-hidden",children:[u.jsxs("div",{className:"text-xs font-bold text-telegram-primary",children:["  ",w.senderName||""]}),u.jsx("div",{className:"text-sm truncate text-gray-500",children:w.text})]}),u.jsx("button",{onClick:()=>g(null),children:u.jsx(jn,{size:18,className:"text-gray-400"})})]}),u.jsxs("div",{className:"p-2 sm:p-3 bg-white dark:bg-telegram-bgDark border-t border-gray-200 dark:border-white/5 relative z-20",children:[It?u.jsxs("button",{onClick:()=>{I&&I(),An(!1)},className:"w-full py-4 bg-gray-100 dark:bg-white/10 text-gray-600 dark:text-gray-300 rounded-2xl flex items-center justify-center gap-2 font-bold hover:bg-gray-200 dark:hover:bg-white/20 transition-colors",children:[u.jsx(Ew,{size:20}),"     .  "]}):u.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto",children:[u.jsx("button",{className:"p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",onClick:U,title:" ",children:u.jsx(Ey,{size:24,className:"transform rotate-0"})}),u.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-black/20 rounded-2xl flex items-center relative transition-shadow focus-within:ring-1 focus-within:ring-telegram-primary/50",children:[u.jsx("textarea",{ref:de,value:W,onChange:Wr,onKeyDown:N=>{N.key==="Enter"&&!N.shiftKey&&!y&&(N.preventDefault(),sr())},placeholder:"   ...",className:"w-full bg-transparent border-none focus:ring-0 resize-none py-3 px-4 max-h-32 min-h-[48px] text-gray-900 dark:text-white placeholder-gray-500 custom-scrollbar",rows:1,style:{height:"auto",minHeight:"48px"}}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-yellow-500 transition-colors mr-1",onClick:()=>Te(!b),children:u.jsx(EI,{size:24})})]}),W.trim()||E?u.jsx("button",{onClick:sr,className:"p-3 bg-telegram-primary text-white rounded-full shadow-lg hover:bg-telegram-primaryDark hover:scale-105 transition-all",children:E?u.jsx(Pa,{size:24}):u.jsx(Xu,{size:24,className:y?"":"ml-0.5"})}):u.jsx("button",{onMouseDown:Ls,onMouseUp:()=>Cn(),onMouseLeave:()=>ct&&Cn(),className:`p-3 rounded-full shadow-lg transition-all ${ct?"bg-red-500 scale-110 animate-pulse":"bg-telegram-primary hover:bg-telegram-primaryDark"} text-white`,children:u.jsx(vw,{size:24})})]}),b&&u.jsxs("div",{className:"absolute bottom-20 left-4 sm:left-auto sm:right-16 z-50 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border dark:border-gray-700 w-80 h-72 flex flex-col overflow-hidden animate-fade-in",children:[u.jsxs("div",{className:"flex border-b dark:border-gray-700",children:[u.jsx("button",{onClick:()=>kt("emoji"),className:`flex-1 py-3 text-sm font-bold transition-colors ${Ze==="emoji"?"text-telegram-primary border-b-2 border-telegram-primary bg-gray-50 dark:bg-white/5":"text-gray-500 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:""}),u.jsx("button",{onClick:()=>kt("sticker"),className:`flex-1 py-3 text-sm font-bold transition-colors ${Ze==="sticker"?"text-telegram-primary border-b-2 border-telegram-primary bg-gray-50 dark:bg-white/5":"text-gray-500 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 grid grid-cols-5 gap-2 content-start custom-scrollbar bg-gray-50/50 dark:bg-black/10",children:Ze==="emoji"?kq.map(N=>u.jsx("button",{onClick:()=>{$(X=>X+N)},className:"text-2xl p-2 hover:bg-white dark:hover:bg-white/10 rounded-xl transition-colors shadow-sm hover:shadow-md",children:N},N)):Iq.map((N,X)=>u.jsx("button",{onClick:()=>Ms(N),className:"p-2 hover:bg-white dark:hover:bg-white/10 rounded-xl transition-colors shadow-sm hover:shadow-md",children:u.jsx("img",{src:N,className:"w-12 h-12 object-contain"})},X))})]})]}),T&&u.jsxs("div",{className:"fixed z-[200] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border dark:border-gray-700 py-1 w-48 animate-fade-in overflow-hidden",style:{top:T.y,left:T.x},onClick:N=>N.stopPropagation(),children:[u.jsxs("button",{onClick:()=>{var N;g(T.message),C(null),(N=de.current)==null||N.focus()},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[u.jsx(by,{size:18})," "]}),T.message.type==="text"&&u.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(T.message.text),C(null)},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[u.jsx(iI,{size:18})," "]}),ne&&u.jsxs("button",{onClick:()=>{c(T.message),C(null)},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[u.jsx(vI,{size:18}),"  "]}),T.isMe&&Date.now()-T.message.timestamp<864e5&&u.jsxs("button",{onClick:()=>{var N;k(T.message),$(T.message.text),C(null),(N=de.current)==null||N.focus()},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[u.jsx(_w,{size:18})," "]}),(T.isMe||ie)&&u.jsxs("button",{onClick:()=>{confirm("  ")&&l(T.message.id),C(null)},className:"w-full text-right px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-3",children:[u.jsx(Gn,{size:18})," "]}),!T.isMe&&u.jsxs("button",{onClick:()=>Vt(T.message),className:"w-full text-right px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-3 border-t border-gray-100 dark:border-gray-700",children:[u.jsx(pu,{size:18})," "]})]})]})},Nq=({contact:t,onClose:e,onStartChat:n,currentUserId:r})=>{const s=t.id==="global_chat",i=t.id==="saved",[o,l]=Zd.useState(!1);Zd.useEffect(()=>{r&&!s&&!i&&tE(r,t.id).then(l)},[t.id,r]);const c=async()=>{r&&(o?(await eE(r,t.id),l(!1),alert("   .")):confirm("  ")&&(await km(r,t.id),l(!0),alert("  .")))};return u.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-telegram-secondaryDark border-l border-gray-200 dark:border-telegram-borderDark overflow-y-auto animate-slide-in",children:[u.jsxs("div",{className:"flex items-center gap-4 p-4 sticky top-0 bg-white/80 dark:bg-telegram-secondaryDark/80 backdrop-blur-md z-10 border-b border-gray-100 dark:border-white/5",children:[u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 dark:hover:text-gray-200",children:u.jsx(jn,{size:24})}),u.jsx("span",{className:"font-semibold text-lg",children:s?"  ":" "})]}),u.jsxs("div",{className:"px-6 py-8 flex flex-col items-center border-b-8 border-gray-50 dark:border-black/20 bg-gradient-to-b from-transparent to-gray-50/50 dark:to-black/10",children:[u.jsx("img",{src:t.avatar,alt:t.name,className:`w-32 h-32 object-cover mb-4 shadow-2xl ${s||i?"rounded-3xl p-2 bg-white dark:bg-white/5":"rounded-full ring-4 ring-white dark:ring-gray-700"}`}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 text-center",children:t.name}),u.jsx("p",{className:"text-gray-500 text-sm font-medium mb-4",children:s?u.jsx("span",{className:"text-telegram-primary bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full",children:"  "}):t.status==="online"?u.jsx("span",{className:"text-telegram-primary bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full",children:""}):u.jsxs("span",{className:"opacity-70",children:["  ",t.lastSeen||" "]})}),u.jsxs("div",{className:"flex gap-3 mt-2",children:[n&&!s&&!i&&u.jsxs("button",{onClick:()=>n(t),className:"flex items-center gap-2 bg-telegram-primary hover:bg-telegram-primaryDark text-white px-6 py-2.5 rounded-full font-bold transition-all shadow-lg shadow-telegram-primary/30",children:[u.jsx(qa,{size:20})," "]}),!s&&!i&&r&&u.jsx("button",{onClick:c,className:`flex items-center gap-2 px-4 py-2.5 rounded-full font-bold transition-colors ${o?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-50 text-red-600 hover:bg-red-100"}`,title:o?" ":" ",children:o?u.jsx(Ew,{size:20}):u.jsx(ts,{size:20})})]})]}),u.jsxs("div",{className:"p-6 space-y-6 border-b-8 border-gray-50 dark:border-black/20",children:[s?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(gw,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium",children:" (Public)"}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:" "})]})]}),u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(Ju,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium",children:"  "}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:""})]})]})]}):u.jsxs(u.Fragment,{children:[t.phone&&u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(Xa,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium font-mono",children:t.phone}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:""})]})]}),t.username&&u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(fw,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium font-mono",children:t.username}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:" "})]})]})]}),u.jsxs("div",{className:"flex items-start gap-4 group cursor-pointer",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(gp,{size:24})}),u.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium",children:""}),u.jsx("div",{className:"w-11 h-6 bg-telegram-primary rounded-full relative cursor-pointer shadow-inner",children:u.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow-sm"})})]})]}),u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(mw,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base leading-relaxed",children:t.bio||" "}),u.jsx("p",{className:"text-gray-500 text-xs mt-1",children:" (Bio)"})]})]})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-4",children:[u.jsx("button",{className:"flex-1 py-3 text-telegram-primary border-b-2 border-telegram-primary font-bold text-sm",children:""}),u.jsx("button",{className:"flex-1 py-3 text-gray-500 font-medium text-sm hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:""}),u.jsx("button",{className:"flex-1 py-3 text-gray-500 font-medium text-sm hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:""})]}),u.jsx("div",{className:"grid grid-cols-3 gap-1 rounded-xl overflow-hidden",children:[1,2,3,4,5,6].map(h=>u.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 cursor-pointer hover:opacity-80 transition-opacity",children:u.jsx("img",{src:`https://picsum.photos/200/200?random=${h+10}`,className:"w-full h-full object-cover",alt:"media"})},h))})]})]})},Cq=[{id:"default",name:"",value:"default",color:"#8db5d0"},{id:"blue",name:" ",value:"#dbeafe",color:"#dbeafe"},{id:"green",name:" ",value:"#dcfce7",color:"#dcfce7"},{id:"dark",name:"",value:"#18181b",color:"#18181b"},{id:"pink",name:"",value:"#fce7f3",color:"#fce7f3"},{id:"pattern1",name:" ",value:"https://img.freepik.com/free-vector/hand-drawn-contact-sheet-template_23-2150937449.jpg",color:"#e5e7eb"},{id:"pattern2",name:" ",value:"https://img.freepik.com/free-vector/seamless-pattern-with-cute-cats_23-2147665476.jpg",color:"#e5e7eb"}],Rq=({isOpen:t,onClose:e,userProfile:n,onSave:r,wallpaper:s,onSaveWallpaper:i})=>{const[o,l]=O.useState(n),[c,h]=O.useState("profile"),[p,m]=O.useState(s),[y,A]=O.useState(""),[P,D]=O.useState(!1),S=O.useRef(null),[x,_]=O.useState(!1),[I,q]=O.useState("");if(O.useEffect(()=>{l(n),m(s)},[n,s,t]),!t)return null;const W=()=>{r(o),i(p),e()},$=async g=>{var k;const E=(k=g.target.files)==null?void 0:k[0];if(E){D(!0);try{const T=`avatars/${n.uid}/${Date.now()}_${E.name}`,C=await bm(E,T);l(b=>({...b,avatar:C}))}catch(T){console.error("Storage failed, attempting base64 fallback",T);try{if(E.size>1024*1024)alert("  :             .");else{const C=new FileReader;C.onloadend=()=>{const b=C.result;l(Te=>({...Te,avatar:b}))},C.readAsDataURL(E)}}catch{alert("    .")}}finally{D(!1)}}},w=async()=>{if(!I.trim()){alert("     .");return}try{await HP(n.uid,n.name,I),alert("             ."),_(!1)}catch(g){alert(g.message||"   .")}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-telegram-secondaryDark w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex flex-col border-b border-gray-100 dark:border-white/10",children:[u.jsxs("div",{className:"flex items-center justify-between p-4",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:""}),u.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx(jn,{size:24,className:"text-gray-500 dark:text-gray-300"})})]}),u.jsxs("div",{className:"flex px-4",children:[u.jsx("button",{onClick:()=>h("profile"),className:`flex-1 pb-3 text-sm font-medium border-b-2 transition-colors ${c==="profile"?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(ls,{size:18}),""]})}),u.jsx("button",{onClick:()=>h("chat"),className:`flex-1 pb-3 text-sm font-medium border-b-2 transition-colors ${c==="chat"?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(uI,{size:18})," "]})})]})]}),u.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:c==="profile"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"relative bg-telegram-secondary dark:bg-black/20 p-6 flex flex-col items-center justify-center gap-4",children:[u.jsx("input",{type:"file",ref:S,className:"hidden",accept:"image/*",onChange:$}),u.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var g;return!P&&((g=S.current)==null?void 0:g.click())},children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-telegram-primary text-white flex items-center justify-center text-3xl font-bold shadow-lg overflow-hidden border-4 border-white dark:border-gray-700",children:P?u.jsx(zi,{className:"animate-spin",size:32}):o.avatar?u.jsx("img",{src:o.avatar,alt:"Profile",className:"w-full h-full object-cover"}):o.name.charAt(0)}),u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(pw,{size:24,className:"text-white"})})]}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"     "})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(ls,{size:20})}),u.jsx("input",{type:"text",value:o.name,onChange:g=>l({...o,name:g.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white",placeholder:" "}),u.jsx("label",{className:"text-xs text-telegram-primary mt-1 block",children:" ()"})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(cI,{size:20})}),u.jsx("input",{type:"text",value:o.bio,onChange:g=>l({...o,bio:g.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white",placeholder:""}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"   "})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(fw,{size:20})}),u.jsx("input",{type:"text",value:o.username,onChange:g=>l({...o,username:g.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white dir-ltr text-right",placeholder:" "}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"  "})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(Xa,{size:20})}),u.jsx("input",{type:"tel",value:o.phone,onChange:g=>l({...o,phone:g.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white dir-ltr text-right",placeholder:" "}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:" "})]}),u.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:x?u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-200 dark:border-red-800 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400 font-bold mb-2",children:[u.jsx(fu,{size:18}),"  "]}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-3 leading-relaxed",children:"                  .     ."}),u.jsx("textarea",{value:I,onChange:g=>q(g.target.value),placeholder:"  ...",className:"w-full p-2 text-sm border rounded-lg mb-3 dark:bg-black/20 dark:border-gray-700 dark:text-white"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(!1),className:"flex-1 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm",children:""}),u.jsx("button",{onClick:w,className:"flex-1 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700",children:" "})]})]}):u.jsxs("button",{onClick:()=>_(!0),className:"w-full flex items-center justify-center gap-2 text-red-600 bg-red-50 dark:bg-red-900/10 py-3 rounded-xl hover:bg-red-100 dark:hover:bg-red-900/20 transition-colors font-medium",children:[u.jsx(Gn,{size:18}),"  "]})})]})]}):u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"       ."}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:Cq.map(g=>u.jsxs("div",{onClick:()=>m(g.value),className:`
                                    relative aspect-[3/4] rounded-lg cursor-pointer overflow-hidden border-2 transition-all shadow-sm
                                    ${p===g.value?"border-telegram-primary scale-105":"border-transparent hover:scale-105"}
                                `,children:[u.jsx("div",{className:"w-full h-full",style:{backgroundColor:g.color,backgroundImage:g.value.startsWith("http")?`url(${g.value})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:g.value==="default"&&u.jsx("div",{className:"w-full h-full opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7z' fill='%23ffffff' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E")`}})}),u.jsx("div",{className:"absolute bottom-0 w-full bg-black/40 text-white text-[10px] text-center py-1",children:g.name}),p===g.value&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:u.jsx(Pa,{className:"text-white drop-shadow-md",size:32})})]},g.id))}),u.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-white/10",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"  "}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:y,onChange:g=>A(g.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 bg-gray-100 dark:bg-white/5 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-telegram-primary"}),u.jsx("button",{onClick:()=>{y&&m(y)},className:"bg-telegram-secondary dark:bg-white/10 text-telegram-primary rounded-lg px-4 py-2 text-sm font-medium hover:bg-gray-200 dark:hover:bg-white/20",children:""})]})]})]})}),u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-black/20 flex justify-end gap-3",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-telegram-primary hover:bg-telegram-primary/10 rounded-lg transition-colors font-medium",children:""}),u.jsxs("button",{onClick:W,disabled:P,className:"px-6 py-2 bg-telegram-primary hover:bg-telegram-primaryDark disabled:opacity-50 text-white rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[u.jsx(Pa,{size:18})," "]})]})]})})},Pq=({onClose:t,currentUserEmail:e,currentUserRole:n,onStartChat:r})=>{const[s,i]=O.useState("users"),[o,l]=O.useState([]),[c,h]=O.useState([]),[p,m]=O.useState([]),[y,A]=O.useState([]),[P,D]=O.useState(!0),[S,x]=O.useState({isOpen:!1,targetUid:null}),[_,I]=O.useState({isOpen:!1,report:null}),[q,W]=O.useState({isOpen:!1,targetUid:null,targetName:""}),[$,w]=O.useState([]),[g,E]=O.useState(null),[k,T]=O.useState([]),[C,b]=O.useState(""),[Te,Ze]=O.useState([]),[kt,ct]=O.useState("");O.useEffect(()=>{G(),ee();const R=QP(h),de=$P(m),me=KP(A);return()=>{R(),de(),me()}},[]);const G=async()=>{D(!0);const R=await XP();l(R),D(!1)},ee=async()=>{const R=await sE();Ze(R)},oe=async(R,de,me)=>{if(n!=="owner"){alert("       .");return}const Fe=o.find(Ee=>Ee.uid===R);if((Fe==null?void 0:Fe.email)===Dn.OWNER_EMAIL){alert("       .");return}await JP(R,me),l(o.map(Ee=>Ee.uid===R?{...Ee,role:me}:Ee))},ye=async(R,de)=>{const me=o.find(Fe=>Fe.uid===R);if((me==null?void 0:me.role)==="owner"){alert("     .");return}if((me==null?void 0:me.role)==="admin"&&n!=="owner"){alert("      .");return}await ZP(R,de||!1),l(o.map(Fe=>Fe.uid===R?{...Fe,isBanned:!de,banExpiresAt:void 0}:Fe))},pe=async R=>{if(n!=="owner"){alert("       .");return}confirm("             .")&&(await oE(R),l(de=>de.filter(me=>me.uid!==R)),alert("   ."))},ve=async(R,de)=>{const me=o.find(Fe=>Fe.uid===R);if((me==null?void 0:me.role)==="owner"||(me==null?void 0:me.role)==="admin"&&n!=="owner"){alert("     .");return}await eq(R,de),alert(`   ${de}   .`),G()},Ve=async(R,de)=>{const me=R||S.targetUid,Fe=de||C;!me||!Fe.trim()||(await oq(me,"  ",Fe),de||(x({isOpen:!1,targetUid:null}),b(""),alert("  .")))},gt=async()=>{if(!kt.trim())return;const R=[...Te,kt.trim()];Ze(R),ct(""),await Z0(R)},dt=async R=>{const de=Te.filter(me=>me!==R);Ze(de),await Z0(de)},It=async R=>{if(R.role==="owner"||R.role==="admin"&&n!=="owner")return;W({isOpen:!0,targetUid:R.uid,targetName:R.name}),w([]),E(null),T([]);const de=await sq(R.uid);w(de)},An=async R=>{if(!q.targetUid)return;E(R);const de=await iq(q.targetUid,R);T(de)},mn=async R=>{g&&confirm(" ")&&(g==="global_chat"?await Z1(R):await nq(g,R),T(de=>de.filter(me=>me.id!==R)))},et=async(R,de)=>{if(!g)return;const me=prompt(" :",de);me&&me!==de&&(g==="global_chat"?await nE(R,me):await iE(g,R,me),T(Fe=>Fe.map(Ee=>Ee.id===R?{...Ee,text:me,edited:!0}:Ee)))},Ue=async R=>{confirm("    ")&&await YP(R,n==="owner"?" ":"")},ln=async R=>{confirm("          .")&&(await X0(R),I({isOpen:!1,report:null}))},ht=async R=>{confirm(`    ${R.userName}  `)&&(await ye(R.userId,!0),await Q0(R.id,!0),alert("       ."))},Jt=async R=>{confirm("   ")&&await Q0(R,!1)},ke=async R=>{confirm(" ")&&await WP(R)},gn=async R=>{if(n!=="owner"){alert("       .");return}confirm(`:   ${R.userName}         .   `)&&(await Y0(R.id,R.userId,!0),alert("   ."),G())},Tt=async R=>{confirm("     ")&&(await Y0(R.id,R.userId,!1),await Ve(R.userId,"       ."))},Mt=async()=>{confirm("         ")&&(await wq(),alert("   ."))},Lt=async()=>{n==="owner"&&confirm("!            .     .   ")&&confirm("   .    ")&&(await xq(),alert("     ."))},Sn=c.filter(R=>n==="owner"?!0:R.status==="pending"),At=p.filter(R=>R.status==="pending");return u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 flex justify-between items-center border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ja,{className:"text-red-600",size:24}),u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"  "})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:u.jsx(jn,{size:24})})]}),u.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:[u.jsx("button",{onClick:()=>i("users"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="users"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(ls,{size:18})," "]})}),u.jsx("button",{onClick:()=>i("reports"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="reports"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(pu,{size:18})," ",c.filter(R=>R.status==="pending").length>0&&u.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 rounded-full",children:c.filter(R=>R.status==="pending").length})]})}),u.jsx("button",{onClick:()=>i("appeals"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="appeals"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(yy,{size:18})," ",At.length>0&&u.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-1.5 rounded-full",children:At.length})]})}),u.jsx("button",{onClick:()=>i("deletions"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="deletions"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(Iy,{size:18})," ",y.length>0&&u.jsx("span",{className:"bg-red-600 text-white text-[10px] px-1.5 rounded-full",children:y.length})]})}),u.jsx("button",{onClick:()=>i("filters"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="filters"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(xw,{size:18}),"  "]})}),n==="owner"&&u.jsx("button",{onClick:()=>i("maintenance"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="maintenance"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(aI,{size:18})," "]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s==="users"?P?u.jsx("div",{className:"text-center py-10 text-gray-500",children:"    ..."}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-right",children:[u.jsx("thead",{className:"text-xs text-gray-500 bg-gray-50 dark:bg-gray-800 uppercase",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:" / "}),u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:""})]})}),u.jsx("tbody",{children:o.map(R=>u.jsxs("tr",{className:"bg-white dark:bg-gray-900 border-b dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[u.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[u.jsx("img",{src:R.avatar,className:"w-8 h-8 rounded-full"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:R.name}),R.email===Dn.OWNER_EMAIL&&u.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full w-fit",children:"Owner"})]})]}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{children:R.email}),u.jsx("span",{className:"text-xs",children:R.phone}),u.jsx("span",{className:"text-[10px] opacity-50",children:R.uid})]})}),u.jsx("td",{className:"px-6 py-4",children:n==="owner"&&R.email!==Dn.OWNER_EMAIL?u.jsxs("select",{value:R.role,onChange:de=>oe(R.uid,R.role,de.target.value),className:"bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",children:[u.jsx("option",{value:"user",children:""}),u.jsx("option",{value:"admin",children:""}),u.jsx("option",{value:"owner",children:" "})]}):u.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${R.role==="owner"?"bg-yellow-100 text-yellow-800":R.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:R.role==="owner"?" ":R.role==="admin"?"":""})}),u.jsx("td",{className:"px-6 py-4",children:R.isBanned?u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-red-600 font-bold flex items-center gap-1",children:[u.jsx(ts,{size:14})," "]}),R.banExpiresAt&&u.jsx("span",{className:"text-xs text-orange-500",children:" "})]}):u.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-1",children:[u.jsx(Wl,{size:14})," "]})}),u.jsxs("td",{className:"px-6 py-4 flex items-center gap-2",children:[R.email!==Dn.OWNER_EMAIL&&(n==="owner"||n==="admin"&&R.role==="user")&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>ye(R.uid,R.isBanned||!1),title:R.isBanned?" ":" ",className:`p-2 rounded-lg text-white ${R.isBanned?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:u.jsx(ts,{size:16})}),n==="owner"&&u.jsx("button",{onClick:()=>pe(R.uid),title:"   ",className:"p-2 rounded-lg bg-gray-600 hover:bg-gray-700 text-white",children:u.jsx(Gn,{size:16})})]}),u.jsx("button",{onClick:()=>x({isOpen:!0,targetUid:R.uid}),title:"  ",className:"p-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white",children:u.jsx(gp,{size:16})}),u.jsx("button",{onClick:()=>{r(R),t()},title:"",className:"p-2 rounded-lg bg-teal-500 hover:bg-teal-600 text-white",children:u.jsx(qa,{size:16})}),(n==="owner"||n==="admin"&&R.role==="user")&&u.jsx("button",{onClick:()=>It(R),title:"  (Ghost Mode)",className:"p-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white",children:u.jsx(xy,{size:16})})]})]},R.uid))})]})}):s==="appeals"?u.jsxs("div",{className:"space-y-4",children:[At.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-10 opacity-50",children:[u.jsx(yy,{size:48,className:"mb-2"}),u.jsx("p",{children:"      ."})]}):At.map(R=>u.jsxs("div",{className:"p-4 rounded-xl border border-orange-200 bg-orange-50 dark:bg-orange-900/10 dark:border-orange-800 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[u.jsx(ls,{size:16})," ",R.userName]}),u.jsx("span",{className:"text-xs text-gray-500 font-mono",children:R.userId})]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(R.createdAt).toLocaleString("fa-IR")})]}),u.jsx("div",{className:"bg-white dark:bg-black/20 p-3 rounded-lg text-sm leading-relaxed text-gray-800 dark:text-gray-200",children:R.message}),u.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[u.jsx("button",{onClick:()=>Jt(R.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm hover:bg-red-200",children:" "}),u.jsxs("button",{onClick:()=>ht(R),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 flex items-center gap-2 shadow-sm",children:[u.jsx(Wl,{size:16}),"   "]})]})]},R.id)),p.filter(R=>R.status!=="pending").length>0&&u.jsxs("div",{className:"mt-8 border-t pt-4 dark:border-gray-700",children:[u.jsx("h4",{className:"text-sm font-bold text-gray-500 mb-4",children:" "}),p.filter(R=>R.status!=="pending").map(R=>u.jsxs("div",{className:"p-3 mb-2 rounded border dark:border-gray-700 opacity-60 hover:opacity-100 transition-opacity bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-sm",children:R.userName}),u.jsx("span",{className:`mx-2 text-xs px-2 py-0.5 rounded-full ${R.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:R.status==="approved"?" ":" "})]}),u.jsx("button",{onClick:()=>ke(R.id),className:"text-red-400 hover:text-red-600",children:u.jsx(Gn,{size:16})})]},R.id))]})]}):s==="deletions"?u.jsx("div",{className:"space-y-4",children:y.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-10 opacity-50",children:[u.jsx(Iy,{size:48,className:"mb-2"}),u.jsx("p",{children:"     ."})]}):y.map(R=>u.jsxs("div",{className:"p-4 rounded-xl border border-red-200 bg-red-50 dark:bg-red-900/10 dark:border-red-800 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[u.jsx(ls,{size:16})," ",R.userName]}),u.jsx("span",{className:"text-xs text-gray-500 font-mono",children:R.userId})]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(R.createdAt).toLocaleString("fa-IR")})]}),u.jsxs("div",{className:"bg-white dark:bg-black/20 p-3 rounded-lg text-sm leading-relaxed text-gray-800 dark:text-gray-200",children:[u.jsx("span",{className:"block text-xs text-red-500 mb-1",children:" :"}),R.reason]}),u.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[u.jsx("button",{onClick:()=>Tt(R),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm",children:" "}),u.jsxs("button",{onClick:()=>gn(R),className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 flex items-center gap-2 shadow-sm",children:[u.jsx(Gn,{size:16}),"  "]})]})]},R.id))}):s==="reports"?u.jsx("div",{className:"space-y-4",children:Sn.length===0?u.jsx("p",{className:"text-center text-gray-500 py-10",children:"   ."}):Sn.map(R=>u.jsxs("div",{className:`p-4 rounded-xl border flex flex-col md:flex-row gap-4 ${R.status==="handled"?"bg-green-50 border-green-200 dark:bg-green-900/10":"bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[R.status==="pending"?u.jsxs("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[u.jsx(pu,{size:10})," "]}):u.jsxs("span",{className:"bg-green-100 text-green-600 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[u.jsx(Pa,{size:10}),"    ",R.handledBy]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(R.createdAt).toLocaleString("fa-IR")})]}),u.jsxs("div",{className:"mb-2",children:[u.jsxs("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:[": ",u.jsx("span",{className:"font-mono text-xs opacity-70",children:R.reporterId})]}),u.jsxs("p",{className:"text-sm font-bold text-red-500",children:[": ",R.reportedUserName," ",u.jsxs("span",{className:"font-mono text-xs opacity-70 text-gray-400",children:["(",R.reportedUserId,")"]})]})]}),u.jsxs("div",{className:"bg-gray-100 dark:bg-black/20 p-2 rounded text-sm mb-2",children:[u.jsx("span",{className:"text-xs opacity-50 block mb-1",children:" :"}),R.messageContent]}),u.jsxs("div",{className:"text-xs text-red-500 bg-red-50 dark:bg-red-900/20 p-2 rounded inline-block",children:[": ",R.reason]})]}),u.jsxs("div",{className:"flex flex-row md:flex-col gap-2 justify-center border-t md:border-t-0 md:border-r border-gray-100 dark:border-gray-700 pt-2 md:pt-0 md:pr-4",children:[R.status==="pending"&&u.jsxs("button",{onClick:()=>I({isOpen:!0,report:R}),className:"flex items-center justify-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm",children:[u.jsx(dI,{size:16}),"  "]}),n==="owner"&&R.status==="handled"&&u.jsxs("button",{onClick:()=>ln(R.id),className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm",children:[u.jsx(Wl,{size:16}),"   "]})]})]},R.id))}):s==="maintenance"?u.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 py-6",children:[u.jsx("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-xl",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(Yu,{size:32,className:"text-blue-600 mt-1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"                           ."}),u.jsx("button",{onClick:Mt,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:"  "})]})]})}),u.jsx("div",{className:"p-6 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-xl",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(Gn,{size:32,className:"text-red-600 mt-1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-red-800 dark:text-red-300 mb-2",children:"   ()"}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["           . ",u.jsx("br",{}),u.jsx("strong",{children:":"}),"   (Users)   .     ."]}),u.jsx("button",{onClick:Lt,className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors shadow-sm",children:"  "})]})]})})]}):u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-sm text-yellow-800 flex items-start gap-3",children:[u.jsx(fu,{className:"shrink-0"}),u.jsx("p",{children:"               (***)   ."})]}),u.jsxs("div",{className:"flex gap-2 mb-6",children:[u.jsx("input",{type:"text",value:kt,onChange:R=>ct(R.target.value),placeholder:"  ...",className:"flex-1 p-3 rounded-xl border bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-white"}),u.jsx("button",{onClick:gt,className:"bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 transition-colors",children:""})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Te.map((R,de)=>u.jsxs("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full flex items-center gap-2",children:[u.jsx("span",{children:R}),u.jsx("button",{onClick:()=>dt(R),className:"hover:text-red-900",children:u.jsx(jn,{size:14})})]},de))})]})}),S.isOpen&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/70 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md shadow-2xl",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"    "}),u.jsx("textarea",{value:C,onChange:R=>b(R.target.value),placeholder:"   ...",className:"w-full h-32 p-3 border rounded-lg mb-4 bg-gray-50 dark:bg-gray-700 dark:border-gray-600 resize-none"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>x({isOpen:!1,targetUid:null}),className:"px-4 py-2 text-gray-500",children:""}),u.jsxs("button",{onClick:()=>Ve(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2",children:[u.jsx(Xu,{size:16})," "]})]})]})}),_.isOpen&&_.report&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/80 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 text-red-600",children:[u.jsx(ja,{}),"   "]}),u.jsx("button",{onClick:()=>I({isOpen:!1,report:null}),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:u.jsx(jn,{})})]}),u.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-200",children:[u.jsx(fu,{size:24,className:"text-red-600"}),u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-sm block",children:"  (  )"}),u.jsx("span",{className:"text-xs opacity-80",children:"          ."})]})]}),u.jsx("button",{onClick:()=>{confirm("        (  )   ")&&(ye(_.report.reportedUserId,!1),ye(_.report.reporterId,!1),alert("      ."))},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm whitespace-nowrap",children:"  "})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{className:"border border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/10 rounded-xl p-4",children:[u.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-3 flex items-center gap-2",children:[u.jsx(ls,{size:18})," : ",_.report.reportedUserName]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>ye(_.report.reportedUserId,!1),className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(ts,{size:16}),"  "]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("button",{onClick:()=>ve(_.report.reportedUserId,24),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ti,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>ve(_.report.reportedUserId,72),className:"bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ti,{size:14}),"   "]})]}),u.jsxs("button",{onClick:()=>ve(_.report.reportedUserId,168),className:"w-full bg-orange-700 hover:bg-orange-800 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ti,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>{const R=prompt("    :");R&&Ve(_.report.reportedUserId,` : ${R}`)},className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(fu,{size:16}),"  "]})]})]}),u.jsxs("div",{className:"border border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/10 rounded-xl p-4",children:[u.jsxs("h4",{className:"font-bold text-blue-700 dark:text-blue-400 mb-3 flex items-center gap-2",children:[u.jsx(pu,{size:18})," : ",_.report.reporterId]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>{const R=prompt("    ( ):");R&&Ve(_.report.reporterId,` : ${R}`)},className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(hw,{size:16}),"   "]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("button",{onClick:()=>ve(_.report.reporterId,24),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ti,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>ve(_.report.reporterId,72),className:"bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ti,{size:14}),"   "]})]}),u.jsxs("button",{onClick:()=>ye(_.report.reporterId,!1),className:"w-full bg-gray-800 hover:bg-gray-900 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(ts,{size:16}),"  ( )"]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-200 dark:border-blue-800",children:[u.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"   :"}),u.jsxs("button",{onClick:()=>{Ue(_.report.id),I({isOpen:!1,report:null})},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Wl,{size:16}),"    "]}),u.jsxs("button",{onClick:()=>{X0(_.report.id),I({isOpen:!1,report:null})},className:"w-full mt-2 bg-red-100 hover:bg-red-200 text-red-600 py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Gn,{size:16}),"   "]})]})]})]})]})}),q.isOpen&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/70 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-6xl h-[80vh] shadow-2xl flex flex-col overflow-hidden border border-gray-300 dark:border-gray-700",children:[u.jsxs("div",{className:"p-4 bg-purple-700 text-white flex justify-between items-center shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(xy,{size:24,className:"animate-pulse"}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold",children:["  : ",q.targetName]}),u.jsx("p",{className:"text-xs opacity-80",children:"Ghost Mode: Viewing chats as user"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>ye(q.targetUid,!0),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm flex items-center gap-1",children:[u.jsx(ts,{size:14}),"   "]}),u.jsx("button",{onClick:()=>W({isOpen:!1,targetUid:null,targetName:""}),className:"bg-white/10 hover:bg-white/20 p-2 rounded-full",children:u.jsx(jn,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsxs("div",{className:"w-1/3 border-l border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:[u.jsx("h4",{className:"p-3 font-bold text-gray-500 text-sm border-b dark:border-gray-700",children:" "}),$.map(R=>u.jsxs("div",{onClick:()=>An(R.id),className:`flex items-center gap-3 p-3 cursor-pointer transition-colors border-b dark:border-gray-800 ${g===R.id?"bg-purple-100 dark:bg-purple-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[u.jsx("img",{src:R.avatar,className:"w-10 h-10 rounded-full bg-gray-300"}),u.jsxs("div",{className:"overflow-hidden",children:[u.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100 truncate",children:R.name}),u.jsx("div",{className:"text-xs text-gray-500",children:R.type==="group"?"":""})]}),g===R.id&&u.jsx(nI,{size:16,className:"mr-auto text-purple-500"})]},R.id)),$.length===0&&u.jsx("p",{className:"text-center p-4 text-sm text-gray-500",children:"  ."})]}),u.jsx("div",{className:"flex-1 bg-white dark:bg-black/20 overflow-y-auto p-4 flex flex-col",children:g?k.length>0?k.map(R=>u.jsxs("div",{className:`mb-2 p-3 rounded-lg max-w-[80%] border group relative ${R.senderId===q.targetUid?"self-end bg-purple-50 border-purple-200 dark:bg-purple-900/20 dark:border-purple-800":"self-start bg-gray-50 border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-600 dark:text-gray-400",children:R.senderName||R.senderId}),u.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(R.timestamp).toLocaleTimeString("fa-IR")})]}),u.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-200 whitespace-pre-wrap",children:R.text}),u.jsxs("div",{className:"absolute top-1 left-1 hidden group-hover:flex gap-1 bg-white dark:bg-gray-800 p-1 rounded shadow-md border dark:border-gray-600",children:[u.jsx("button",{onClick:()=>et(R.id,R.text),className:"p-1 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded",title:"",children:u.jsx(_w,{size:12})}),u.jsx("button",{onClick:()=>mn(R.id),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"",children:u.jsx(Gn,{size:12})})]})]},R.id)):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[u.jsx(qa,{size:40,className:"mb-2 opacity-50"}),u.jsx("p",{children:"     ."})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[u.jsx(Gu,{size:40,className:"mb-2 opacity-50"}),u.jsx("p",{children:"      ."})]})})]})]})})]})})},qq=({onSuccess:t,storedAccounts:e=[],initialEmail:n=""})=>{const[r,s]=O.useState(!0),[i,o]=O.useState(!1),[l,c]=O.useState(""),[h,p]=O.useState(e.length>0&&!n),[m,y]=O.useState({name:"",email:n||"",phone:"",password:""});O.useEffect(()=>{n&&(y(x=>({...x,email:n})),p(!1))},[n]);const A=async x=>{x.preventDefault(),c(""),o(!0);try{if(r){if(!m.email||!m.password)throw new Error("       ");await DP(m.email,m.password)}else{if(!m.name||!m.email||!m.password||!m.phone)throw new Error("     ");if(m.password.length<6)throw new Error("      ");await jP(m.email,m.password,m.name,m.phone)}}catch(_){console.error(_),_.code==="auth/invalid-email"?c("   "):_.code==="auth/user-not-found"||_.code==="auth/wrong-password"||_.code==="auth/invalid-credential"?c("     "):_.code==="auth/email-already-in-use"?c("     "):c(_.message||"  .    .")}finally{o(!1)}},P=async()=>{c(""),o(!0);try{await OP()}catch(x){if(console.error("Google Login Error:",x),x.code==="auth/unauthorized-domain"){const _=window.location.hostname;c(` "${_}"  .      Authentication > Settings > Authorized domains    .`)}else x.code==="auth/popup-closed-by-user"?c("     ."):c(x.message||"    ")}finally{o(!1)}},D=x=>{y(_=>({..._,email:x.email})),p(!1),s(!0)},S=()=>u.jsx("div",{className:"absolute bottom-6 left-0 right-0 z-20 flex justify-center animate-fade-in pointer-events-none",children:u.jsxs("div",{className:"pointer-events-auto bg-white/10 dark:bg-black/40 backdrop-blur-md border border-white/20 dark:border-white/10 px-6 py-2.5 rounded-full shadow-2xl flex items-center gap-4 transition-transform hover:-translate-y-1 duration-300",children:[u.jsxs("a",{href:"https://github.com/mrv006",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-telegram-primary dark:hover:text-telegram-primary transition-colors group",children:[u.jsx("div",{className:"p-1.5 bg-white/20 rounded-full group-hover:bg-white/40 transition-colors",children:u.jsx(lI,{size:18})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] opacity-60 font-medium leading-none mb-0.5",children:"Designed & Developed by"}),u.jsx("span",{className:"text-sm font-bold leading-none tracking-wide font-mono",children:"Mr.V"})]})]}),u.jsx("div",{className:"w-px h-8 bg-gray-400/30 dark:bg-white/20"}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[u.jsx(xI,{size:16,className:"opacity-70"}),u.jsx("span",{className:"text-xs font-mono font-bold tracking-wider opacity-90",children:"09902076468"})]})]})});return h&&e.length>0?u.jsxs("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark p-4 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 chat-bg-pattern pointer-events-none"}),u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-telegram-secondaryDark rounded-3xl shadow-2xl p-8 relative z-10 animate-fade-in",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-lg shadow-telegram-primary/30 p-2 overflow-hidden border-4 border-telegram-primary",children:u.jsx("img",{src:"https://www.tarhbama.com/cities-vector/147566",alt:"Logo",className:"w-full h-full object-cover"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"  "}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"         "})]}),u.jsxs("div",{className:"space-y-3 mb-6",children:[e.map(x=>u.jsxs("button",{onClick:()=>D(x),className:"w-full bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 p-3 rounded-xl flex items-center gap-4 transition-colors border border-gray-100 dark:border-gray-700",children:[u.jsx("img",{src:x.avatar,className:"w-12 h-12 rounded-full object-cover"}),u.jsxs("div",{className:"text-right flex-1",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:x.name}),u.jsx("p",{className:"text-sm text-gray-500",children:x.email})]}),u.jsx(Gu,{size:20,className:"text-gray-400 rotate-180"})]},x.uid)),u.jsxs("button",{onClick:()=>p(!1),className:"w-full bg-transparent hover:bg-gray-50 dark:hover:bg-white/5 p-3 rounded-xl flex items-center gap-4 transition-colors border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:text-telegram-primary",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-white/5 flex items-center justify-center",children:u.jsx(ww,{size:24})}),u.jsx("div",{className:"text-right flex-1",children:u.jsx("h3",{className:"font-bold",children:"   "})})]})]})]}),S()]}):u.jsxs("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark p-4 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 chat-bg-pattern pointer-events-none"}),u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-telegram-secondaryDark rounded-3xl shadow-2xl p-8 relative z-10 animate-fade-in border border-white/50 dark:border-white/5",children:[u.jsxs("div",{className:"text-center mb-8 relative",children:[e.length>0&&u.jsx("button",{onClick:()=>p(!0),className:"absolute top-0 right-0 p-2 text-gray-400 hover:text-gray-600",title:"   ",children:u.jsx(Ju,{size:20})}),u.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-xl shadow-telegram-primary/30 ring-4 ring-telegram-primary dark:ring-telegram-secondaryDark p-2 overflow-hidden transform hover:scale-105 transition-transform duration-500",children:u.jsx("img",{src:"https://www.tarhbama.com/cities-vector/147566",alt:"Logo",className:"w-full h-full object-cover"})}),u.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:r?"  ":"  "}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:r?"   ":"     "})]}),l&&u.jsxs("div",{className:"mb-6 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-start gap-2 text-right dir-rtl",dir:"rtl",children:[u.jsx(hw,{size:16,className:"mt-0.5 shrink-0"}),u.jsx("span",{children:l})]}),u.jsxs("form",{onSubmit:A,className:"space-y-4",children:[!r&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"relative group",children:[u.jsx(ls,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"text",name:"name",autoComplete:"name",placeholder:"   ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white font-medium placeholder:font-normal",value:m.name,onChange:x=>y({...m,name:x.target.value})})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(Xa,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"tel",name:"phone",autoComplete:"tel",placeholder:" ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.phone,onChange:x=>y({...m,phone:x.target.value})})]})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(hI,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"email",name:"email",autoComplete:"username",placeholder:"",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.email,onChange:x=>y({...m,email:x.target.value})})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(yw,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"password",name:"password",autoComplete:r?"current-password":"new-password",placeholder:" ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.password,onChange:x=>y({...m,password:x.target.value})})]}),u.jsx("button",{type:"submit",disabled:i,className:"w-full bg-telegram-primary hover:bg-telegram-primaryDark text-white font-bold py-3 rounded-xl shadow-lg shadow-telegram-primary/30 flex items-center justify-center gap-2 transition-transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed mt-6",children:i?u.jsx(zi,{className:"animate-spin"}):u.jsxs(u.Fragment,{children:[r?"":" ",u.jsx(Gu,{size:20,className:"rotate-180"})]})})]}),u.jsxs("div",{className:"relative my-6",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-200 dark:border-white/10"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white dark:bg-telegram-secondaryDark text-gray-500",children:""})})]}),u.jsxs("button",{type:"button",onClick:P,disabled:i,className:"w-full bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/10 text-gray-700 dark:text-white font-medium py-3 rounded-xl flex items-center justify-center gap-3 transition-colors",children:[u.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"Google"}),"   "]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsx("button",{onClick:()=>{s(!r),c("")},className:"text-telegram-primary hover:underline text-sm font-medium",children:r?"     ":"     "})})]}),S()]})},jq=({currentUser:t,onLogout:e,banExpiresAt:n})=>{const[r,s]=O.useState(""),[i,o]=O.useState(!1),[l,c]=O.useState(!1),[h,p]=O.useState("");O.useEffect(()=>{if(n){const y=setInterval(()=>{const P=Date.now(),D=n-P;if(D<=0)p("   .     ."),clearInterval(y);else{const S=Math.floor(D/36e5),x=Math.floor(D%(1e3*60*60)/(1e3*60));p(`${S}   ${x}  `)}},6e4),A=n-Date.now();if(A>0){const P=Math.floor(A/36e5),D=Math.floor(A%(1e3*60*60)/(1e3*60));p(`${P}   ${D}  `)}return()=>clearInterval(y)}},[n]);const m=async()=>{if(r.trim()){o(!0);try{await BP(t.uid,t.name,r),c(!0),s("")}catch(y){console.error("Error sending appeal",y),alert("   .    .")}finally{o(!1)}}};return u.jsx("div",{className:"fixed inset-0 z-[200] bg-gray-100 dark:bg-black flex flex-col items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-800",children:[u.jsxs("div",{className:"bg-red-600 p-8 flex flex-col items-center text-center text-white",children:[u.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mb-4 backdrop-blur-sm animate-pulse",children:u.jsx(ja,{size:40})}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"   "}),n?u.jsxs("div",{className:"bg-red-800/50 px-4 py-2 rounded-lg mt-2 flex items-center gap-2",children:[u.jsx(Ti,{size:16}),u.jsx("span",{className:"font-mono text-sm",children:h||"  ..."})]}):u.jsx("p",{className:"opacity-90 text-sm leading-relaxed",children:"           ."})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-start gap-3 bg-red-50 dark:bg-red-900/20 p-4 rounded-xl text-red-800 dark:text-red-200 text-sm border border-red-100 dark:border-red-800",children:[u.jsx(yw,{className:"shrink-0 mt-1",size:18}),u.jsxs("p",{className:"leading-relaxed",children:["        . ",n?"        .":"               ."]})]}),l?u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 p-6 rounded-xl text-center animate-fade-in",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-800 text-green-600 dark:text-green-200 rounded-full flex items-center justify-center mx-auto mb-3",children:u.jsx(Xu,{size:24,className:"rotate-180"})}),u.jsx("h3",{className:"font-bold text-green-700 dark:text-green-300 mb-1",children:"  "}),u.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"      .    ."}),u.jsx("button",{onClick:()=>c(!1),className:"text-xs text-gray-400 underline mt-4 hover:text-gray-600 dark:hover:text-gray-200",children:"  "})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300",children:[u.jsx(qa,{size:16}),"    /"]}),u.jsx("textarea",{value:r,onChange:y=>s(y.target.value),placeholder:"       ...",className:"w-full h-32 p-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-black/20 focus:ring-2 focus:ring-red-500 outline-none resize-none text-gray-900 dark:text-white transition-all"}),u.jsx("button",{onClick:m,disabled:i||!r.trim(),className:"w-full bg-telegram-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg",children:i?"  ...":u.jsxs(u.Fragment,{children:[u.jsx(Xu,{size:18,className:"rotate-180"})," "]})})]}),u.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800 pt-4",children:u.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 text-gray-500 hover:text-red-500 transition-colors py-2 text-sm",children:[u.jsx(Qu,{size:16}),"   "]})})]})]})})},Dq="data:audio/mpeg;base64,//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",Jo=[{id:"global_chat",name:"   ",avatar:"https://cdn-icons-png.flaticon.com/512/921/921490.png",status:"online",bio:"        (   )",username:"@global_world",phone:"",type:"group",isGlobal:!0},{id:"saved",name:"  ",avatar:"",status:"online",bio:"       ",username:"@saved_messages",phone:"",type:"user"}],Zo={};Jo.forEach(t=>{Zo[t.id]={contactId:t.id,messages:[],unreadCount:0,draft:""}});const Oq={uid:"",name:" ",email:"",bio:"...",username:"@guest",phone:"",role:"user",isBanned:!1,avatar:"",createdAt:Date.now(),lastSeen:Date.now(),status:"offline"},Mq=()=>{var Vt,St;const[t,e]=O.useState(null),[n,r]=O.useState(!0),[s,i]=O.useState(Jo),[o,l]=O.useState(Zo),[c,h]=O.useState(Oq),[p,m]=O.useState([]),[y,A]=O.useState(""),[P,D]=O.useState("default"),[S,x]=O.useState(null),[_,I]=O.useState(()=>localStorage.getItem("irangram_theme")||Hs.LIGHT),[q,W]=O.useState(window.innerWidth<768),[$,w]=O.useState(!1),[g,E]=O.useState(null),[k,T]=O.useState(!1),[C,b]=O.useState(!1),[Te,Ze]=O.useState(!1),[kt,ct]=O.useState(""),[G,ee]=O.useState(0),[oe,ye]=O.useState(null),[pe,ve]=O.useState(!1),[Ve,gt]=O.useState(0),[dt,It]=O.useState(!1),[An,mn]=O.useState(null),[et,Ue]=O.useState(!1),ln=O.useRef(!1),ht=O.useRef(null),Jt=O.useRef(null),ke=O.useRef(null),gn=O.useRef(new Audio(Dq)),Tt=O.useRef(new Set),Mt=O.useRef(s),Lt=O.useRef({activeContactId:S,isSettingsOpen:k,isAdminPanelOpen:C,showProfile:$,viewingContact:g,isCalling:pe,showExitConfirm:et});O.useEffect(()=>{Mt.current=s},[s]),O.useEffect(()=>{Lt.current={activeContactId:S,isSettingsOpen:k,isAdminPanelOpen:C,showProfile:$,viewingContact:g,isCalling:pe,showExitConfirm:et}},[S,k,C,$,g,pe,et]),O.useEffect(()=>{const M=re=>{re.preventDefault(),re.returnValue=""};window.addEventListener("beforeunload",M),window.history.pushState({app:!0},"",window.location.href);const B=re=>{if(ln.current)return;window.history.pushState({app:!0},"",window.location.href);const z=Lt.current;if(z.showExitConfirm){Ue(!1);return}if(z.isCalling){ve(!1);return}if(z.isAdminPanelOpen){b(!1);return}if(z.isSettingsOpen){T(!1);return}if(z.showProfile||z.viewingContact){w(!1),E(null);return}if(z.activeContactId){x(null);return}Ue(!0)};return window.addEventListener("popstate",B),()=>{window.removeEventListener("beforeunload",M),window.removeEventListener("popstate",B)}},[]),O.useEffect(()=>{_===Hs.DARK?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[_]),O.useEffect(()=>{i(M=>{if(!M)return[];const B=new Map;return M.forEach(re=>B.set(re.id,re)),B.size!==M.length?Array.from(B.values()):M})},[]),O.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),O.useEffect(()=>{const M=B=>{B.preventDefault(),ye(B)};return window.addEventListener("beforeinstallprompt",M),()=>{window.removeEventListener("beforeinstallprompt",M)}},[]);const Sn=async()=>{if(!oe)return;oe.prompt();const{outcome:M}=await oe.userChoice;M==="accepted"&&ye(null)};O.useEffect(()=>{const M=localStorage.getItem("irangram_accounts");M&&m(JSON.parse(M))},[]),O.useEffect(()=>{const M=qP(async B=>{var re;if(B){e(B);const z=await xf(B.uid);h({uid:B.uid,name:(z==null?void 0:z.name)||B.displayName||"",email:B.email||"",bio:(z==null?void 0:z.bio)||"",username:(z==null?void 0:z.username)||((re=B.email)==null?void 0:re.split("@")[0])||"",phone:(z==null?void 0:z.phone)||"",role:(z==null?void 0:z.role)||"user",isBanned:(z==null?void 0:z.isBanned)||!1,banExpiresAt:z==null?void 0:z.banExpiresAt,avatar:(z==null?void 0:z.avatar)||B.photoURL||`https://ui-avatars.com/api/?name=${B.email}`,createdAt:z==null?void 0:z.createdAt,lastSeen:z==null?void 0:z.lastSeen,status:(z==null?void 0:z.status)||"online"});const ne=B.uid,ie=localStorage.getItem(`irangram_contacts_${ne}`);let N=ie?JSON.parse(ie):Jo;N.find(je=>je.id==="global_chat")||(N=[...Jo,...N]);const X=Array.from(new Map(N.map(je=>[je.id,je])).values());i(X);const te=localStorage.getItem(`irangram_sessions_${ne}`);let Ce=JSON.parse(te||JSON.stringify(Zo));Ce.global_chat||(Ce.global_chat=Zo.global_chat),l(Ce);const Ge=localStorage.getItem(`irangram_wallpaper_${ne}`);D(Ge||"default"),m(je=>{var Hr;const Zt={uid:B.uid,name:(z==null?void 0:z.name)||B.displayName||"",avatar:(z==null?void 0:z.avatar)||`https://ui-avatars.com/api/?name=${B.email}`,email:B.email||"",username:(z==null?void 0:z.username)||((Hr=B.email)==null?void 0:Hr.split("@")[0])||"",role:(z==null?void 0:z.role)||"user"},vr=je.filter(Ut=>Ut.uid!==B.uid),wt=[Zt,...vr];return localStorage.setItem("irangram_accounts",JSON.stringify(wt)),wt})}else e(null),i(Jo),l(Zo);r(!1)});return()=>M()},[]),O.useEffect(()=>{if(!t)return;const M=MP(t.uid,ne=>{ne.isBanned&&ne.banExpiresAt&&tq(t.uid,ne),h(ie=>({...ie,...ne}))});eu(t.uid,"online");const B=setInterval(()=>{eu(t.uid,"online")},3e4),re=()=>eu(t.uid,"offline");window.addEventListener("beforeunload",re);const z=zP(ne=>{i(ie=>{const N=ie.map(X=>{const te=ne.find(Ce=>Ce.uid===X.id);return te?{...X,status:te.status,lastSeen:new Date(te.lastSeen).toISOString(),avatar:te.avatar||X.avatar}:X});return JSON.stringify(N)!==JSON.stringify(ie)?N:ie})});return()=>{M(),z(),clearInterval(B),window.removeEventListener("beforeunload",re),eu(t.uid,"offline")}},[t]),O.useEffect(()=>{if(t){localStorage.setItem(`irangram_sessions_${t.uid}`,JSON.stringify(o));const M=Array.from(new Map(s.map(B=>[B.id,B])).values());localStorage.setItem(`irangram_contacts_${t.uid}`,JSON.stringify(M)),localStorage.setItem(`irangram_wallpaper_${t.uid}`,P)}},[o,s,P,t]),O.useEffect(()=>{localStorage.setItem("irangram_theme",_)},[_]),O.useEffect(()=>{if(!t||c.isBanned)return;const M=vq(z=>{if(z.currentVersion>Dn.VERSION&&Ze(!0),z.forceUpdate){const ne=Number(localStorage.getItem("last_forced_update")||0);z.forceUpdate>ne&&(ct("     .     ."),ee(z.forceUpdate),Ze(!0))}}),B=aq(t.uid,z=>{if(z.length>0){const ne=z[0];mn({title:ne.title,message:ne.message}),lq(t.uid,ne.id)}}),re=mq(t.uid,async z=>{for(const ne of z){ne.type==="group"&&(Mt.current.some(te=>te.id===ne.id)||i(te=>[...te,{id:ne.id,name:ne.name,avatar:ne.avatar,bio:ne.description||"",username:"",phone:"",status:"online",type:"group"}]));const ie=ne.participants.find(X=>X!==t.uid);!ie||ne.type==="group"||ne.id.includes("saved")?ne.id.includes("saved"):!Mt.current.some(te=>te.id===ie)&&!Tt.current.has(ie)&&(Tt.current.add(ie),xf(ie).then(te=>{te&&i(Ce=>{if(!Ce)return[];const Ge=new Map(Ce.map(je=>[je.id,je]));return Ge.has(te.uid)?Ce:(Ge.set(te.uid,{id:te.uid,name:te.name,avatar:te.avatar,bio:te.bio,username:"@"+te.username,phone:te.phone,status:te.status,type:"user"}),Array.from(Ge.values()))}),Tt.current.delete(ie)}));const N=ne.type==="group"?ne.id:ie||"saved";l(X=>{const te=X[N]||{contactId:N,messages:[],unreadCount:0,draft:""};let Ce=te.messages;Ce.length===0&&ne.lastMessage&&(Ce=[{id:"preview-"+Date.now(),text:ne.lastMessage,senderId:ne.lastSenderId||"them",timestamp:ne.updatedAt,status:"read",type:"text",reactions:{}}]);let Ge=te.unreadCount;return ne.lastSenderId&&ne.lastSenderId!==t.uid&&S!==N&&Ge===0&&(Ge=1),{...X,[N]:{...te,messages:Ce,unreadCount:S===N?0:Ge}}})}});return _q(),()=>{M(),B(),re()}},[t,c.isBanned,S]),O.useEffect(()=>{if(!t||c.isBanned)return;const M=B=>{const re=B.map(z=>({...z,senderId:z.senderId===t.uid?"me":z.senderId,reactions:z.reactions||{}}));l(z=>{var X,te,Ce,Ge,je,Zt;const ne=(te=(X=z.global_chat)==null?void 0:X.messages.slice(-1)[0])==null?void 0:te.id,ie=(Ce=re.slice(-1)[0])==null?void 0:Ce.id;let N=((Ge=z.global_chat)==null?void 0:Ge.unreadCount)||0;if(ne!==ie&&re.length>0&&re[re.length-1].senderId!=="me"){S!=="global_chat"&&(N+=1);try{gn.current.currentTime=0,gn.current.play().catch(()=>{})}catch{}}return{...z,global_chat:{contactId:"global_chat",messages:re,unreadCount:S==="global_chat"?0:N,draft:((je=z.global_chat)==null?void 0:je.draft)||"",pinnedMessage:(Zt=z.global_chat)==null?void 0:Zt.pinnedMessage}}})};return ht.current=hq(M),Jt.current=dq("global_chat",B=>{l(re=>({...re,global_chat:{...re.global_chat,pinnedMessage:B}}))}),()=>{ht.current&&ht.current(),Jt.current&&Jt.current()}},[t,S,c.isBanned]),O.useEffect(()=>{if(!t||!S){ke.current&&ke.current();return}const M=S==="global_chat",B=s.find(re=>re.id===S);if(B==null||B.type,M)ke.current&&(ke.current(),ke.current=null);else{ke.current&&ke.current();const re=Ii(t.uid,S);ke.current=pq(re,z=>{const ne=z.map(ie=>({...ie,senderId:ie.senderId===t.uid?"me":ie.senderId,reactions:ie.reactions||{}}));l(ie=>{var N;return{...ie,[S]:{contactId:S,messages:ne,unreadCount:0,draft:((N=ie[S])==null?void 0:N.draft)||""}}})})}return()=>{ke.current&&ke.current()}},[S,t,s]),O.useEffect(()=>{let M;return pe?M=setInterval(()=>{gt(B=>B+1)},1e3):gt(0),()=>clearInterval(M)},[pe]);const At=()=>I(M=>M===Hs.LIGHT?Hs.DARK:Hs.LIGHT),R=M=>{x(M),w(!1),E(null),l(B=>({...B,[M]:{...B[M],unreadCount:0}}))},de=M=>{i(B=>B.some(re=>re.id===M.id)?B:[...B,M]),l(B=>B[M.id]?B:{...B,[M.id]:{contactId:M.id,messages:[],unreadCount:0,draft:""}}),R(M.id)},me=async(M,B,re,z)=>{if(t)try{const ne=await UP(M,B,re,z,t.uid);if(ne){const ie={id:ne.id,name:ne.name,avatar:ne.avatar,bio:B||" ",username:"",phone:"",status:"online",type:"group"};de(ie)}}catch(ne){console.error("Error creating group",ne),alert("   ")}},Fe=O.useCallback(async(M,B)=>{!S||!t||(S==="global_chat"?await yq(M,B,t.uid):l(re=>{const z=re[S];if(!z)return re;const ne=z.messages.map(ie=>{if(ie.id!==M)return ie;const N={...ie.reactions},X=N[B]||[];return X.includes("me")?(N[B]=X.filter(te=>te!=="me"),N[B].length===0&&delete N[B]):N[B]=[...X,"me"],{...ie,reactions:N}});return{...re,[S]:{...z,messages:ne}}}))},[S,t]),Ee=O.useCallback(async M=>{S&&(S==="global_chat"?await Z1(M):l(B=>({...B,[S]:{...B[S],messages:B[S].messages.filter(re=>re.id!==M)}})))},[S]),Re=O.useCallback(async M=>{if(!S)return;const B={id:M.id,text:M.type==="text"?M.text.substring(0,50):M.type==="image"?"":"",sender:M.senderName||"",type:M.type};S==="global_chat"?(c.role==="admin"||c.role==="owner")&&await uq("global_chat",B):l(re=>({...re,[S]:{...re[S],pinnedMessage:B}}))},[S,c]),nr=O.useCallback(async()=>{S&&(S==="global_chat"?(c.role==="admin"||c.role==="owner")&&await cq("global_chat"):l(M=>({...M,[S]:{...M[S],pinnedMessage:null}})))},[S,c]),rr=O.useCallback(async(M,B)=>{if(!S||!t)return;if(S==="global_chat"){await nE(M,B);return}if(!(S==="global_chat")){const z=Ii(t.uid,S);await iE(z,M,B);return}l(z=>{const ne=z[S];if(!ne)return z;const ie=ne.messages.map(N=>N.id===M?{...N,text:B,edited:!0}:N);return{...z,[S]:{...ne,messages:ie}}})},[S,t,s]),Nn=O.useCallback(async(M,B)=>{if(!S||!t)return;let re=M.imageUrl,z=M.fileUrl;if(M.file)try{const ie=M.type==="audio"?"audios":M.type==="image"?"images":"files",N=`uploads/${t.uid}/${ie}/${Date.now()}_${M.fileName||"file"}`,X=await bm(M.file,N);M.type==="image"?re=X:z=X}catch(ie){console.error("Upload failed",ie),alert("     .");return}if(S==="global_chat"){const ie=c.name?`https://ui-avatars.com/api/?name=${c.name}&background=random&color=fff&size=64`:"";await fq({text:M.text,type:M.type,imageUrl:re,fileUrl:z,fileName:M.fileName,fileSize:M.fileSize,audioDuration:M.audioDuration,isSticker:M.isSticker,replyToId:B,senderId:t.uid},{name:c.name,avatar:ie,role:c.role});return}if(!(S==="global_chat")){const ie=Ii(t.uid,S);await gq(ie,S,{text:M.text,type:M.type,senderId:t.uid,imageUrl:re,fileUrl:z,fileName:M.fileName,fileSize:M.fileSize,audioDuration:M.audioDuration,isSticker:M.isSticker,replyToId:B},{name:c.name,avatar:c.avatar});return}},[S,t,c,s]),Os=async M=>{const B={...c,...M};if(h(B),t){await LP(t.uid,B),m(z=>z.map(ne=>ne.uid===t.uid?{...ne,name:B.name,username:B.username}:ne));const re=p.map(z=>z.uid===t.uid?{...z,name:B.name,username:B.username}:z);localStorage.setItem("irangram_accounts",JSON.stringify(re))}},Fn=async()=>{Ue(!0)},$r=async()=>{Ue(!1),A(""),await Jd(t==null?void 0:t.uid),e(null)},Wr=async()=>{A(""),await Jd(t==null?void 0:t.uid),e(null)},sr=async M=>{const B=p.find(re=>re.uid===M);B&&A(B.email),await Jd(t==null?void 0:t.uid),e(null)},Ms=M=>{const B={id:M.uid,name:M.name,avatar:M.avatar,bio:M.bio,username:"@"+M.username,phone:M.phone,status:"offline",type:"user"};de(B)},Ls=M=>{M.id==="me"||M.id===(t==null?void 0:t.uid)?T(!0):E({id:M.id,name:M.name||"",avatar:M.avatar||"",username:"",phone:"",bio:" ",type:"user",status:"offline"})},Cn=async M=>{const B=M||S;if(B&&confirm("           ."))try{if(B!=="saved"&&B!=="global_chat"){const re=Ii(t.uid,B);await rq(re)}i(re=>re.filter(z=>z.id!==B)),l(re=>{const z={...re};return delete z[B],z}),S===B&&x(null)}catch(re){console.error("Delete chat failed",re)}},U=async()=>{if(S&&confirm("       "))try{if(S==="saved"){const M=Ii(t.uid,"saved");await J0(M)}else if(S!=="global_chat"){const M=Ii(t.uid,S);await J0(M)}}catch(M){console.error("Clear history failed",M)}},ce=async()=>{if(S&&confirm("       "))try{await km(t.uid,S),alert("  .")}catch(M){console.error("Block user failed",M)}},Ne=M=>{t&&FP(t.uid,M)},it=()=>{G>0&&localStorage.setItem("last_forced_update",G.toString()),window.location.reload()};return n?u.jsx("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-white dark:bg-black text-telegram-primary",children:u.jsx(Yu,{className:"animate-spin w-10 h-10"})}):t?c.isBanned?u.jsx(jq,{currentUser:{uid:t.uid,name:c.name},onLogout:()=>Ue(!0),banExpiresAt:c.banExpiresAt}):u.jsxs("div",{className:"flex flex-col h-[100dvh] w-full overflow-hidden bg-white dark:bg-black font-sans relative",children:[et&&u.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full border border-gray-200 dark:border-gray-700 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Qu,{size:32})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"  "}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-sm",children:"            ."}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>Ue(!1),className:"flex-1 py-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:""}),u.jsx("button",{onClick:()=>{S===null?$r():(ln.current=!0,window.history.back())},className:"flex-1 py-3 rounded-xl bg-red-600 text-white font-bold hover:bg-red-700 transition-colors",children:" "})]})]})}),An&&u.jsx("div",{className:"fixed inset-0 z-[120] bg-black/60 flex items-center justify-center p-6 animate-fade-in backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full border-t-4 border-blue-500",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-600 dark:text-blue-400",children:[u.jsx(gp,{size:28}),u.jsx("h3",{className:"text-xl font-bold",children:An.title})]}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:An.message}),u.jsx("button",{onClick:()=>mn(null),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-xl transition-colors",children:" "})]})}),Te&&u.jsxs("div",{onClick:it,className:"fixed bottom-6 left-6 z-[100] bg-telegram-primary text-white p-4 rounded-2xl shadow-2xl shadow-blue-500/30 flex items-center gap-4 cursor-pointer hover:scale-105 transition-transform animate-slide-in",children:[u.jsx("div",{className:"bg-white/20 p-2.5 rounded-full",children:u.jsx(Yu,{size:24,className:"animate-spin"})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"font-bold text-sm",children:" "}),u.jsx("p",{className:"text-xs opacity-90 mt-0.5",children:kt||"    "})]})]}),pe&&u.jsxs("div",{className:"fixed inset-0 z-[90] bg-gray-900/95 backdrop-blur-md flex flex-col items-center justify-between py-12 text-white animate-fade-in",children:[u.jsxs("div",{className:"flex flex-col items-center mt-10",children:[u.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white/20 mb-4 shadow-2xl",children:u.jsx("img",{src:((Vt=s.find(M=>M.id===S))==null?void 0:Vt.avatar)||"https://via.placeholder.com/150",className:"w-full h-full object-cover"})}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:((St=s.find(M=>M.id===S))==null?void 0:St.name)||" "}),u.jsx("p",{className:"text-white/60 text-lg animate-pulse",children:Ve>0?`${Math.floor(Ve/60)}:${(Ve%60).toString().padStart(2,"0")}`:"  ..."})]}),u.jsxs("div",{className:"flex items-center gap-8 mb-10",children:[u.jsx("button",{onClick:()=>It(!dt),className:`p-4 rounded-full transition-all ${dt?"bg-white text-gray-900":"bg-white/10 hover:bg-white/20"}`,children:dt?u.jsx(pI,{size:32}):u.jsx(vw,{size:32})}),u.jsx("button",{onClick:()=>{ve(!1)},className:"p-6 bg-red-500 rounded-full shadow-lg hover:bg-red-600 hover:scale-110 transition-all",children:u.jsx(yI,{size:40})}),u.jsx("button",{className:"p-4 bg-white/10 hover:bg-white/20 rounded-full transition-all",children:u.jsx(Xa,{size:32,className:"rotate-180"})})]})]}),C&&u.jsx(Pq,{onClose:()=>b(!1),currentUserEmail:t.email,currentUserRole:c.role||"user",onStartChat:Ms}),u.jsx(Rq,{isOpen:k,onClose:()=>T(!1),userProfile:c,onSave:Os,wallpaper:P,onSaveWallpaper:D}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("div",{className:`
            ${q&&S?"hidden":"flex"}
            ${q?"w-full":"w-80 lg:w-96"} 
            flex-col h-full z-20 transition-all duration-300 shadow-xl bg-white dark:bg-telegram-bgDark border-l border-gray-200 dark:border-white/5
          `,children:[u.jsx("div",{className:"flex-1 overflow-hidden",children:u.jsx(Eq,{contacts:s,sessions:o,activeContactId:S,onSelectContact:R,toggleTheme:At,theme:_,userProfile:c,onOpenSettings:()=>T(!0),onOpenAdminPanel:()=>b(!0),onAddContact:de,showInstallButton:!!oe,onInstall:Sn,storedAccounts:p,onAddAccount:Wr,onSwitchAccount:sr,onCreateGroup:me,onDeleteChat:Cn})}),u.jsxs("div",{className:"p-2 border-t border-gray-100 dark:border-white/5 flex justify-between items-center bg-gray-50 dark:bg-black/20",children:[u.jsxs("span",{className:"text-xs text-gray-400 px-2 font-mono opacity-50",children:["v",Dn.VERSION]}),u.jsx("button",{onClick:Fn,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-white/5 rounded-lg transition-colors",title:" ",children:u.jsx(Qu,{size:18})})]})]}),u.jsxs("div",{className:`
            ${q&&!S?"hidden":"flex"}
            flex-1 h-full relative flex-col min-w-0
          `,children:[u.jsx("div",{className:"flex-1 h-full relative flex flex-col min-w-0",children:S?u.jsx(Sq,{contact:s.find(M=>M.id===S),messages:o[S].messages,pinnedMessage:o[S].pinnedMessage,myId:"me",myRole:c.role||"user",onSendMessage:Nn,onEditMessage:rr,onDeleteMessage:Ee,onPinMessage:Re,onUnpinMessage:nr,onReaction:Fe,onBack:()=>{window.history.back()},isMobile:q,onProfileClick:()=>w(!0),onAvatarClick:Ls,wallpaper:P,onCall:()=>ve(!0),onDeleteChat:()=>Cn(),onClearHistory:U,onBlockUser:ce,onTyping:Ne},S):u.jsx("div",{className:"h-full w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark text-gray-400 dark:text-gray-600 pattern-bg",children:u.jsxs("div",{className:"text-center p-8 bg-white/60 dark:bg-black/40 backdrop-blur-md rounded-3xl shadow-xl border border-white/20 dark:border-white/5 animate-scale-in",children:[u.jsx("span",{className:"text-5xl block mb-6 animate-bounce",children:""}),u.jsx("h3",{className:"font-bold text-xl mb-2 text-gray-800 dark:text-gray-100",children:"   "}),u.jsx("p",{className:"text-sm opacity-80",children:"    "})]})})}),($||g)&&u.jsx("div",{className:`
                    absolute inset-y-0 right-0 z-[60] bg-white dark:bg-telegram-secondaryDark shadow-2xl transition-transform duration-300
                    ${q?"w-full":"w-96 border-l border-gray-200 dark:border-white/5"}
                `,children:u.jsx(Nq,{contact:g||s.find(M=>M.id===S),onClose:()=>{w(!1),E(null)},onStartChat:g?M=>{de(M),E(null)}:void 0,currentUserId:t.uid})})]})]})]}):u.jsx(qq,{onSuccess:e,storedAccounts:p,initialEmail:y})},aE=document.getElementById("root");if(!aE)throw new Error("Could not find root element to mount to");const Lq=eh.createRoot(aE);Lq.render(u.jsx(Zd.StrictMode,{children:u.jsx(Mq,{})}));
