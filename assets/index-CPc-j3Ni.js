(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function AE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rv={exports:{}},xc={},sv={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),SE=Symbol.for("react.portal"),NE=Symbol.for("react.fragment"),CE=Symbol.for("react.strict_mode"),RE=Symbol.for("react.profiler"),PE=Symbol.for("react.provider"),qE=Symbol.for("react.context"),jE=Symbol.for("react.forward_ref"),DE=Symbol.for("react.suspense"),OE=Symbol.for("react.memo"),ME=Symbol.for("react.lazy"),hg=Symbol.iterator;function LE(t){return t===null||typeof t!="object"?null:(t=hg&&t[hg]||t["@@iterator"],typeof t=="function"?t:null)}var iv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ov=Object.assign,av={};function wo(t,e,n){this.props=t,this.context=e,this.refs=av,this.updater=n||iv}wo.prototype.isReactComponent={};wo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lv(){}lv.prototype=wo.prototype;function Nf(t,e,n){this.props=t,this.context=e,this.refs=av,this.updater=n||iv}var Cf=Nf.prototype=new lv;Cf.constructor=Nf;ov(Cf,wo.prototype);Cf.isPureReactComponent=!0;var fg=Array.isArray,uv=Object.prototype.hasOwnProperty,Rf={current:null},cv={key:!0,ref:!0,__self:!0,__source:!0};function dv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)uv.call(e,r)&&!cv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:el,type:t,key:i,ref:o,props:s,_owner:Rf.current}}function VE(t,e){return{$$typeof:el,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pf(t){return typeof t=="object"&&t!==null&&t.$$typeof===el}function UE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pg=/\/+/g;function yd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?UE(""+t.key):e.toString(36)}function au(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case el:case SE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+yd(o,0):r,fg(s)?(n="",t!=null&&(n=t.replace(pg,"$&/")+"/"),au(s,e,n,"",function(h){return h})):s!=null&&(Pf(s)&&(s=VE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(pg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",fg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+yd(i,l);o+=au(i,e,n,c,s)}else if(c=LE(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+yd(i,l++),o+=au(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jl(t,e,n){if(t==null)return t;var r=[],s=0;return au(t,r,"","",function(i){return e.call(n,i,s++)}),r}function FE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var un={current:null},lu={transition:null},zE={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:lu,ReactCurrentOwner:Rf};function hv(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:jl,forEach:function(t,e,n){jl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jl(t,function(){e++}),e},toArray:function(t){return jl(t,function(e){return e})||[]},only:function(t){if(!Pf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=wo;we.Fragment=NE;we.Profiler=RE;we.PureComponent=Nf;we.StrictMode=CE;we.Suspense=DE;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zE;we.act=hv;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ov({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Rf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)uv.call(e,c)&&!cv.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:el,type:t.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:qE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PE,_context:t},t.Consumer=t};we.createElement=dv;we.createFactory=function(t){var e=dv.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:jE,render:t}};we.isValidElement=Pf;we.lazy=function(t){return{$$typeof:ME,_payload:{_status:-1,_result:t},_init:FE}};we.memo=function(t,e){return{$$typeof:OE,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=lu.transition;lu.transition={};try{t()}finally{lu.transition=e}};we.unstable_act=hv;we.useCallback=function(t,e){return un.current.useCallback(t,e)};we.useContext=function(t){return un.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return un.current.useDeferredValue(t)};we.useEffect=function(t,e){return un.current.useEffect(t,e)};we.useId=function(){return un.current.useId()};we.useImperativeHandle=function(t,e,n){return un.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return un.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return un.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return un.current.useMemo(t,e)};we.useReducer=function(t,e,n){return un.current.useReducer(t,e,n)};we.useRef=function(t){return un.current.useRef(t)};we.useState=function(t){return un.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return un.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return un.current.useTransition()};we.version="18.3.1";sv.exports=we;var O=sv.exports;const sh=AE(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE=O,$E=Symbol.for("react.element"),WE=Symbol.for("react.fragment"),HE=Object.prototype.hasOwnProperty,KE=BE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GE={key:!0,ref:!0,__self:!0,__source:!0};function fv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HE.call(e,r)&&!GE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$E,type:t,key:i,ref:o,props:s,_owner:KE.current}}xc.Fragment=WE;xc.jsx=fv;xc.jsxs=fv;rv.exports=xc;var u=rv.exports,ih={},pv={exports:{}},Nn={},mv={exports:{}},gv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,te){var oe=G.length;G.push(te);e:for(;0<oe;){var ye=oe-1>>>1,fe=G[ye];if(0<s(fe,te))G[ye]=te,G[oe]=fe,oe=ye;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var te=G[0],oe=G.pop();if(oe!==te){G[0]=oe;e:for(var ye=0,fe=G.length,ve=fe>>>1;ye<ve;){var Ve=2*(ye+1)-1,vt=G[Ve],ft=Ve+1,je=G[ft];if(0>s(vt,oe))ft<fe&&0>s(je,vt)?(G[ye]=je,G[ft]=oe,ye=ft):(G[ye]=vt,G[Ve]=oe,ye=Ve);else if(ft<fe&&0>s(je,oe))G[ye]=je,G[ft]=oe,ye=ft;else break e}}return te}function s(G,te){var oe=G.sortIndex-te.sortIndex;return oe!==0?oe:G.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],p=1,m=null,y=3,I=!1,R=!1,D=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var te=n(h);te!==null;){if(te.callback===null)r(h);else if(te.startTime<=G)r(h),te.sortIndex=te.expirationTime,e(c,te);else break;te=n(h)}}function q(G){if(D=!1,T(G),!R)if(n(c)!==null)R=!0,St(W);else{var te=n(h);te!==null&&ht(q,te.startTime-G)}}function W(G,te){R=!1,D&&(D=!1,x(g),g=-1),I=!0;var oe=y;try{for(T(te),m=n(c);m!==null&&(!(m.expirationTime>te)||G&&!A());){var ye=m.callback;if(typeof ye=="function"){m.callback=null,y=m.priorityLevel;var fe=ye(m.expirationTime<=te);te=t.unstable_now(),typeof fe=="function"?m.callback=fe:m===n(c)&&r(c),T(te)}else r(c);m=n(c)}if(m!==null)var ve=!0;else{var Ve=n(h);Ve!==null&&ht(q,Ve.startTime-te),ve=!1}return ve}finally{m=null,y=oe,I=!1}}var $=!1,w=null,g=-1,E=5,b=-1;function A(){return!(t.unstable_now()-b<E)}function N(){if(w!==null){var G=t.unstable_now();b=G;var te=!0;try{te=w(!0,G)}finally{te?k():($=!1,w=null)}}else $=!1}var k;if(typeof _=="function")k=function(){_(N)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ze=Ae.port2;Ae.port1.onmessage=N,k=function(){Ze.postMessage(null)}}else k=function(){S(N,0)};function St(G){w=G,$||($=!0,k())}function ht(G,te){g=S(function(){G(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){R||I||(R=!0,St(W))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(G){switch(y){case 1:case 2:case 3:var te=3;break;default:te=y}var oe=y;y=te;try{return G()}finally{y=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,te){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var oe=y;y=G;try{return te()}finally{y=oe}},t.unstable_scheduleCallback=function(G,te,oe){var ye=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?ye+oe:ye):oe=ye,G){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=oe+fe,G={id:p++,callback:te,priorityLevel:G,startTime:oe,expirationTime:fe,sortIndex:-1},oe>ye?(G.sortIndex=oe,e(h,G),n(c)===null&&G===n(h)&&(D?(x(g),g=-1):D=!0,ht(q,oe-ye))):(G.sortIndex=fe,e(c,G),R||I||(R=!0,St(W))),G},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(G){var te=y;return function(){var oe=y;y=te;try{return G.apply(this,arguments)}finally{y=oe}}}})(gv);mv.exports=gv;var QE=mv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE=O,An=QE;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yv=new Set,Ea={};function vi(t,e){ro(t,e),ro(t+"Capture",e)}function ro(t,e){for(Ea[t]=e,t=0;t<e.length;t++)yv.add(e[t])}var Lr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=Object.prototype.hasOwnProperty,XE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mg={},gg={};function JE(t){return oh.call(gg,t)?!0:oh.call(mg,t)?!1:XE.test(t)?gg[t]=!0:(mg[t]=!0,!1)}function ZE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ek(t,e,n,r){if(e===null||typeof e>"u"||ZE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var qf=/[\-:]([a-z])/g;function jf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qf,jf);Lt[e]=new cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qf,jf);Lt[e]=new cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qf,jf);Lt[e]=new cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new cn(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Df(t,e,n,r){var s=Lt.hasOwnProperty(e)?Lt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ek(e,n,s,r)&&(n=null),r||s===null?JE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=YE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dl=Symbol.for("react.element"),ji=Symbol.for("react.portal"),Di=Symbol.for("react.fragment"),Of=Symbol.for("react.strict_mode"),ah=Symbol.for("react.profiler"),vv=Symbol.for("react.provider"),_v=Symbol.for("react.context"),Mf=Symbol.for("react.forward_ref"),lh=Symbol.for("react.suspense"),uh=Symbol.for("react.suspense_list"),Lf=Symbol.for("react.memo"),ns=Symbol.for("react.lazy"),wv=Symbol.for("react.offscreen"),yg=Symbol.iterator;function Vo(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,vd;function Qo(t){if(vd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vd=e&&e[1]||""}return`
`+vd+t}var _d=!1;function wd(t,e){if(!t||_d)return"";_d=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{_d=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qo(t):""}function tk(t){switch(t.tag){case 5:return Qo(t.type);case 16:return Qo("Lazy");case 13:return Qo("Suspense");case 19:return Qo("SuspenseList");case 0:case 2:case 15:return t=wd(t.type,!1),t;case 11:return t=wd(t.type.render,!1),t;case 1:return t=wd(t.type,!0),t;default:return""}}function ch(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Di:return"Fragment";case ji:return"Portal";case ah:return"Profiler";case Of:return"StrictMode";case lh:return"Suspense";case uh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _v:return(t.displayName||"Context")+".Consumer";case vv:return(t._context.displayName||"Context")+".Provider";case Mf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lf:return e=t.displayName||null,e!==null?e:ch(t.type)||"Memo";case ns:e=t._payload,t=t._init;try{return ch(t(e))}catch{}}return null}function nk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ch(e);case 8:return e===Of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rk(t){var e=xv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ol(t){t._valueTracker||(t._valueTracker=rk(t))}function Ev(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=xv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dh(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kv(t,e){e=e.checked,e!=null&&Df(t,"checked",e,!1)}function hh(t,e){kv(t,e);var n=Ts(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fh(t,e.type,n):e.hasOwnProperty("defaultValue")&&fh(t,e.type,Ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _g(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fh(t,e,n){(e!=="number"||Cu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yo=Array.isArray;function Ki(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ts(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Yo(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ts(n)}}function bv(t,e){var n=Ts(e.value),r=Ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function xg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Tv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Tv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ml,Iv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ml=Ml||document.createElement("div"),Ml.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ml.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ka(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var aa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sk=["Webkit","ms","Moz","O"];Object.keys(aa).forEach(function(t){sk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),aa[e]=aa[t]})});function Av(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||aa.hasOwnProperty(t)&&aa[t]?(""+e).trim():e+"px"}function Sv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Av(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ik=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gh(t,e){if(e){if(ik[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function yh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vh=null;function Vf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _h=null,Gi=null,Qi=null;function Eg(t){if(t=rl(t)){if(typeof _h!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Ic(e),_h(t.stateNode,t.type,e))}}function Nv(t){Gi?Qi?Qi.push(t):Qi=[t]:Gi=t}function Cv(){if(Gi){var t=Gi,e=Qi;if(Qi=Gi=null,Eg(t),e)for(t=0;t<e.length;t++)Eg(e[t])}}function Rv(t,e){return t(e)}function Pv(){}var xd=!1;function qv(t,e,n){if(xd)return t(e,n);xd=!0;try{return Rv(t,e,n)}finally{xd=!1,(Gi!==null||Qi!==null)&&(Pv(),Cv())}}function ba(t,e){var n=t.stateNode;if(n===null)return null;var r=Ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var wh=!1;if(Lr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){wh=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{wh=!1}function ok(t,e,n,r,s,i,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var la=!1,Ru=null,Pu=!1,xh=null,ak={onError:function(t){la=!0,Ru=t}};function lk(t,e,n,r,s,i,o,l,c){la=!1,Ru=null,ok.apply(ak,arguments)}function uk(t,e,n,r,s,i,o,l,c){if(lk.apply(this,arguments),la){if(la){var h=Ru;la=!1,Ru=null}else throw Error(K(198));Pu||(Pu=!0,xh=h)}}function _i(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function jv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kg(t){if(_i(t)!==t)throw Error(K(188))}function ck(t){var e=t.alternate;if(!e){if(e=_i(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return kg(s),t;if(i===r)return kg(s),e;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Dv(t){return t=ck(t),t!==null?Ov(t):null}function Ov(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ov(t);if(e!==null)return e;t=t.sibling}return null}var Mv=An.unstable_scheduleCallback,bg=An.unstable_cancelCallback,dk=An.unstable_shouldYield,hk=An.unstable_requestPaint,ut=An.unstable_now,fk=An.unstable_getCurrentPriorityLevel,Uf=An.unstable_ImmediatePriority,Lv=An.unstable_UserBlockingPriority,qu=An.unstable_NormalPriority,pk=An.unstable_LowPriority,Vv=An.unstable_IdlePriority,Ec=null,hr=null;function mk(t){if(hr&&typeof hr.onCommitFiberRoot=="function")try{hr.onCommitFiberRoot(Ec,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:vk,gk=Math.log,yk=Math.LN2;function vk(t){return t>>>=0,t===0?32:31-(gk(t)/yk|0)|0}var Ll=64,Vl=4194304;function Xo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ju(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Xo(l):(i&=o,i!==0&&(r=Xo(i)))}else o=n&~s,o!==0?r=Xo(o):i!==0&&(r=Xo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),s=1<<n,r|=t[n],e&=~s;return r}function _k(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-er(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=_k(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Eh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Uv(){var t=Ll;return Ll<<=1,!(Ll&4194240)&&(Ll=64),t}function Ed(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function xk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-er(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ff(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Re=0;function Fv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zv,zf,Bv,$v,Wv,kh=!1,Ul=[],ps=null,ms=null,gs=null,Ta=new Map,Ia=new Map,ss=[],Ek="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tg(t,e){switch(t){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ia.delete(e.pointerId)}}function Fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=rl(e),e!==null&&zf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kk(t,e,n,r,s){switch(e){case"focusin":return ps=Fo(ps,t,e,n,r,s),!0;case"dragenter":return ms=Fo(ms,t,e,n,r,s),!0;case"mouseover":return gs=Fo(gs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ta.set(i,Fo(Ta.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ia.set(i,Fo(Ia.get(i)||null,t,e,n,r,s)),!0}return!1}function Hv(t){var e=Ys(t.target);if(e!==null){var n=_i(e);if(n!==null){if(e=n.tag,e===13){if(e=jv(n),e!==null){t.blockedOn=e,Wv(t.priority,function(){Bv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vh=r,n.target.dispatchEvent(r),vh=null}else return e=rl(n),e!==null&&zf(e),t.blockedOn=n,!1;e.shift()}return!0}function Ig(t,e,n){uu(t)&&n.delete(e)}function bk(){kh=!1,ps!==null&&uu(ps)&&(ps=null),ms!==null&&uu(ms)&&(ms=null),gs!==null&&uu(gs)&&(gs=null),Ta.forEach(Ig),Ia.forEach(Ig)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,kh||(kh=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,bk)))}function Aa(t){function e(s){return zo(s,t)}if(0<Ul.length){zo(Ul[0],t);for(var n=1;n<Ul.length;n++){var r=Ul[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ps!==null&&zo(ps,t),ms!==null&&zo(ms,t),gs!==null&&zo(gs,t),Ta.forEach(e),Ia.forEach(e),n=0;n<ss.length;n++)r=ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ss.length&&(n=ss[0],n.blockedOn===null);)Hv(n),n.blockedOn===null&&ss.shift()}var Yi=Hr.ReactCurrentBatchConfig,Du=!0;function Tk(t,e,n,r){var s=Re,i=Yi.transition;Yi.transition=null;try{Re=1,Bf(t,e,n,r)}finally{Re=s,Yi.transition=i}}function Ik(t,e,n,r){var s=Re,i=Yi.transition;Yi.transition=null;try{Re=4,Bf(t,e,n,r)}finally{Re=s,Yi.transition=i}}function Bf(t,e,n,r){if(Du){var s=bh(t,e,n,r);if(s===null)Pd(t,e,r,Ou,n),Tg(t,r);else if(kk(s,t,e,n,r))r.stopPropagation();else if(Tg(t,r),e&4&&-1<Ek.indexOf(t)){for(;s!==null;){var i=rl(s);if(i!==null&&zv(i),i=bh(t,e,n,r),i===null&&Pd(t,e,r,Ou,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Pd(t,e,r,null,n)}}var Ou=null;function bh(t,e,n,r){if(Ou=null,t=Vf(r),t=Ys(t),t!==null)if(e=_i(t),e===null)t=null;else if(n=e.tag,n===13){if(t=jv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ou=t,null}function Kv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fk()){case Uf:return 1;case Lv:return 4;case qu:case pk:return 16;case Vv:return 536870912;default:return 16}default:return 16}}var cs=null,$f=null,cu=null;function Gv(){if(cu)return cu;var t,e=$f,n=e.length,r,s="value"in cs?cs.value:cs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return cu=s.slice(t,1<r?1-r:void 0)}function du(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fl(){return!0}function Ag(){return!1}function Cn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fl:Ag,this.isPropagationStopped=Ag,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),e}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wf=Cn(xo),nl=Xe({},xo,{view:0,detail:0}),Ak=Cn(nl),kd,bd,Bo,kc=Xe({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(kd=t.screenX-Bo.screenX,bd=t.screenY-Bo.screenY):bd=kd=0,Bo=t),kd)},movementY:function(t){return"movementY"in t?t.movementY:bd}}),Sg=Cn(kc),Sk=Xe({},kc,{dataTransfer:0}),Nk=Cn(Sk),Ck=Xe({},nl,{relatedTarget:0}),Td=Cn(Ck),Rk=Xe({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),Pk=Cn(Rk),qk=Xe({},xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jk=Cn(qk),Dk=Xe({},xo,{data:0}),Ng=Cn(Dk),Ok={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lk[t])?!!e[t]:!1}function Hf(){return Vk}var Uk=Xe({},nl,{key:function(t){if(t.key){var e=Ok[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=du(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hf,charCode:function(t){return t.type==="keypress"?du(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?du(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fk=Cn(Uk),zk=Xe({},kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cg=Cn(zk),Bk=Xe({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hf}),$k=Cn(Bk),Wk=Xe({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hk=Cn(Wk),Kk=Xe({},kc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gk=Cn(Kk),Qk=[9,13,27,32],Kf=Lr&&"CompositionEvent"in window,ua=null;Lr&&"documentMode"in document&&(ua=document.documentMode);var Yk=Lr&&"TextEvent"in window&&!ua,Qv=Lr&&(!Kf||ua&&8<ua&&11>=ua),Rg=" ",Pg=!1;function Yv(t,e){switch(t){case"keyup":return Qk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oi=!1;function Xk(t,e){switch(t){case"compositionend":return Xv(e);case"keypress":return e.which!==32?null:(Pg=!0,Rg);case"textInput":return t=e.data,t===Rg&&Pg?null:t;default:return null}}function Jk(t,e){if(Oi)return t==="compositionend"||!Kf&&Yv(t,e)?(t=Gv(),cu=$f=cs=null,Oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qv&&e.locale!=="ko"?null:e.data;default:return null}}var Zk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zk[t.type]:e==="textarea"}function Jv(t,e,n,r){Nv(r),e=Mu(e,"onChange"),0<e.length&&(n=new Wf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ca=null,Sa=null;function eb(t){u_(t,0)}function bc(t){var e=Vi(t);if(Ev(e))return t}function tb(t,e){if(t==="change")return e}var Zv=!1;if(Lr){var Id;if(Lr){var Ad="oninput"in document;if(!Ad){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Ad=typeof jg.oninput=="function"}Id=Ad}else Id=!1;Zv=Id&&(!document.documentMode||9<document.documentMode)}function Dg(){ca&&(ca.detachEvent("onpropertychange",e_),Sa=ca=null)}function e_(t){if(t.propertyName==="value"&&bc(Sa)){var e=[];Jv(e,Sa,t,Vf(t)),qv(eb,e)}}function nb(t,e,n){t==="focusin"?(Dg(),ca=e,Sa=n,ca.attachEvent("onpropertychange",e_)):t==="focusout"&&Dg()}function rb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(Sa)}function sb(t,e){if(t==="click")return bc(e)}function ib(t,e){if(t==="input"||t==="change")return bc(e)}function ob(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:ob;function Na(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!oh.call(e,s)||!rr(t[s],e[s]))return!1}return!0}function Og(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mg(t,e){var n=Og(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Og(n)}}function t_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?t_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function n_(){for(var t=window,e=Cu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cu(t.document)}return e}function Gf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ab(t){var e=n_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&t_(n.ownerDocument.documentElement,n)){if(r!==null&&Gf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Mg(n,i);var o=Mg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lb=Lr&&"documentMode"in document&&11>=document.documentMode,Mi=null,Th=null,da=null,Ih=!1;function Lg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ih||Mi==null||Mi!==Cu(r)||(r=Mi,"selectionStart"in r&&Gf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),da&&Na(da,r)||(da=r,r=Mu(Th,"onSelect"),0<r.length&&(e=new Wf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mi)))}function zl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Li={animationend:zl("Animation","AnimationEnd"),animationiteration:zl("Animation","AnimationIteration"),animationstart:zl("Animation","AnimationStart"),transitionend:zl("Transition","TransitionEnd")},Sd={},r_={};Lr&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function Tc(t){if(Sd[t])return Sd[t];if(!Li[t])return t;var e=Li[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in r_)return Sd[t]=e[n];return t}var s_=Tc("animationend"),i_=Tc("animationiteration"),o_=Tc("animationstart"),a_=Tc("transitionend"),l_=new Map,Vg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){l_.set(t,e),vi(e,[t])}for(var Nd=0;Nd<Vg.length;Nd++){var Cd=Vg[Nd],ub=Cd.toLowerCase(),cb=Cd[0].toUpperCase()+Cd.slice(1);qs(ub,"on"+cb)}qs(s_,"onAnimationEnd");qs(i_,"onAnimationIteration");qs(o_,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(a_,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),db=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function Ug(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uk(r,e,void 0,t),t.currentTarget=null}function u_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ug(s,l,h),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ug(s,l,h),i=c}}}if(Pu)throw t=xh,Pu=!1,xh=null,t}function ze(t,e){var n=e[Rh];n===void 0&&(n=e[Rh]=new Set);var r=t+"__bubble";n.has(r)||(c_(e,t,2,!1),n.add(r))}function Rd(t,e,n){var r=0;e&&(r|=4),c_(n,t,r,e)}var Bl="_reactListening"+Math.random().toString(36).slice(2);function Ca(t){if(!t[Bl]){t[Bl]=!0,yv.forEach(function(n){n!=="selectionchange"&&(db.has(n)||Rd(n,!1,t),Rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Bl]||(e[Bl]=!0,Rd("selectionchange",!1,e))}}function c_(t,e,n,r){switch(Kv(e)){case 1:var s=Tk;break;case 4:s=Ik;break;default:s=Bf}n=s.bind(null,e,n,t),s=void 0,!wh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Pd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ys(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}qv(function(){var h=i,p=Vf(n),m=[];e:{var y=l_.get(t);if(y!==void 0){var I=Wf,R=t;switch(t){case"keypress":if(du(n)===0)break e;case"keydown":case"keyup":I=Fk;break;case"focusin":R="focus",I=Td;break;case"focusout":R="blur",I=Td;break;case"beforeblur":case"afterblur":I=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Nk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=$k;break;case s_:case i_:case o_:I=Pk;break;case a_:I=Hk;break;case"scroll":I=Ak;break;case"wheel":I=Gk;break;case"copy":case"cut":case"paste":I=jk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Cg}var D=(e&4)!==0,S=!D&&t==="scroll",x=D?y!==null?y+"Capture":null:y;D=[];for(var _=h,T;_!==null;){T=_;var q=T.stateNode;if(T.tag===5&&q!==null&&(T=q,x!==null&&(q=ba(_,x),q!=null&&D.push(Ra(_,q,T)))),S)break;_=_.return}0<D.length&&(y=new I(y,R,null,n,p),m.push({event:y,listeners:D}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",y&&n!==vh&&(R=n.relatedTarget||n.fromElement)&&(Ys(R)||R[Vr]))break e;if((I||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,I?(R=n.relatedTarget||n.toElement,I=h,R=R?Ys(R):null,R!==null&&(S=_i(R),R!==S||R.tag!==5&&R.tag!==6)&&(R=null)):(I=null,R=h),I!==R)){if(D=Sg,q="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(D=Cg,q="onPointerLeave",x="onPointerEnter",_="pointer"),S=I==null?y:Vi(I),T=R==null?y:Vi(R),y=new D(q,_+"leave",I,n,p),y.target=S,y.relatedTarget=T,q=null,Ys(p)===h&&(D=new D(x,_+"enter",R,n,p),D.target=T,D.relatedTarget=S,q=D),S=q,I&&R)t:{for(D=I,x=R,_=0,T=D;T;T=Si(T))_++;for(T=0,q=x;q;q=Si(q))T++;for(;0<_-T;)D=Si(D),_--;for(;0<T-_;)x=Si(x),T--;for(;_--;){if(D===x||x!==null&&D===x.alternate)break t;D=Si(D),x=Si(x)}D=null}else D=null;I!==null&&Fg(m,y,I,D,!1),R!==null&&S!==null&&Fg(m,S,R,D,!0)}}e:{if(y=h?Vi(h):window,I=y.nodeName&&y.nodeName.toLowerCase(),I==="select"||I==="input"&&y.type==="file")var W=tb;else if(qg(y))if(Zv)W=ib;else{W=rb;var $=nb}else(I=y.nodeName)&&I.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(W=sb);if(W&&(W=W(t,h))){Jv(m,W,n,p);break e}$&&$(t,y,h),t==="focusout"&&($=y._wrapperState)&&$.controlled&&y.type==="number"&&fh(y,"number",y.value)}switch($=h?Vi(h):window,t){case"focusin":(qg($)||$.contentEditable==="true")&&(Mi=$,Th=h,da=null);break;case"focusout":da=Th=Mi=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,Lg(m,n,p);break;case"selectionchange":if(lb)break;case"keydown":case"keyup":Lg(m,n,p)}var w;if(Kf)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Oi?Yv(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(Qv&&n.locale!=="ko"&&(Oi||g!=="onCompositionStart"?g==="onCompositionEnd"&&Oi&&(w=Gv()):(cs=p,$f="value"in cs?cs.value:cs.textContent,Oi=!0)),$=Mu(h,g),0<$.length&&(g=new Ng(g,t,null,n,p),m.push({event:g,listeners:$}),w?g.data=w:(w=Xv(n),w!==null&&(g.data=w)))),(w=Yk?Xk(t,n):Jk(t,n))&&(h=Mu(h,"onBeforeInput"),0<h.length&&(p=new Ng("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=w))}u_(m,e)})}function Ra(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ba(t,n),i!=null&&r.unshift(Ra(t,i,s)),i=ba(t,e),i!=null&&r.push(Ra(t,i,s))),t=t.return}return r}function Si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Fg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,h=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&h!==null&&(l=h,s?(c=ba(n,i),c!=null&&o.unshift(Ra(n,c,l))):s||(c=ba(n,i),c!=null&&o.push(Ra(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hb=/\r\n?/g,fb=/\u0000|\uFFFD/g;function zg(t){return(typeof t=="string"?t:""+t).replace(hb,`
`).replace(fb,"")}function $l(t,e,n){if(e=zg(e),zg(t)!==e&&n)throw Error(K(425))}function Lu(){}var Ah=null,Sh=null;function Nh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ch=typeof setTimeout=="function"?setTimeout:void 0,pb=typeof clearTimeout=="function"?clearTimeout:void 0,Bg=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof Bg<"u"?function(t){return Bg.resolve(null).then(t).catch(gb)}:Ch;function gb(t){setTimeout(function(){throw t})}function qd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Aa(e)}function ys(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $g(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),cr="__reactFiber$"+Eo,Pa="__reactProps$"+Eo,Vr="__reactContainer$"+Eo,Rh="__reactEvents$"+Eo,yb="__reactListeners$"+Eo,vb="__reactHandles$"+Eo;function Ys(t){var e=t[cr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vr]||n[cr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$g(t);t!==null;){if(n=t[cr])return n;t=$g(t)}return e}t=n,n=t.parentNode}return null}function rl(t){return t=t[cr]||t[Vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Vi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Ic(t){return t[Pa]||null}var Ph=[],Ui=-1;function js(t){return{current:t}}function $e(t){0>Ui||(t.current=Ph[Ui],Ph[Ui]=null,Ui--)}function Le(t,e){Ui++,Ph[Ui]=t.current,t.current=e}var Is={},Jt=js(Is),yn=js(!1),ii=Is;function so(t,e){var n=t.type.contextTypes;if(!n)return Is;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vn(t){return t=t.childContextTypes,t!=null}function Vu(){$e(yn),$e(Jt)}function Wg(t,e,n){if(Jt.current!==Is)throw Error(K(168));Le(Jt,e),Le(yn,n)}function d_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(K(108,nk(t)||"Unknown",s));return Xe({},n,r)}function Uu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Is,ii=Jt.current,Le(Jt,t),Le(yn,yn.current),!0}function Hg(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=d_(t,e,ii),r.__reactInternalMemoizedMergedChildContext=t,$e(yn),$e(Jt),Le(Jt,t)):$e(yn),Le(yn,n)}var Ar=null,Ac=!1,jd=!1;function h_(t){Ar===null?Ar=[t]:Ar.push(t)}function _b(t){Ac=!0,h_(t)}function Ds(){if(!jd&&Ar!==null){jd=!0;var t=0,e=Re;try{var n=Ar;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ar=null,Ac=!1}catch(s){throw Ar!==null&&(Ar=Ar.slice(t+1)),Mv(Uf,Ds),s}finally{Re=e,jd=!1}}return null}var Fi=[],zi=0,Fu=null,zu=0,jn=[],Dn=0,oi=null,Cr=1,Rr="";function Hs(t,e){Fi[zi++]=zu,Fi[zi++]=Fu,Fu=t,zu=e}function f_(t,e,n){jn[Dn++]=Cr,jn[Dn++]=Rr,jn[Dn++]=oi,oi=t;var r=Cr;t=Rr;var s=32-er(r)-1;r&=~(1<<s),n+=1;var i=32-er(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Cr=1<<32-er(e)+s|n<<s|r,Rr=i+t}else Cr=1<<i|n<<s|r,Rr=t}function Qf(t){t.return!==null&&(Hs(t,1),f_(t,1,0))}function Yf(t){for(;t===Fu;)Fu=Fi[--zi],Fi[zi]=null,zu=Fi[--zi],Fi[zi]=null;for(;t===oi;)oi=jn[--Dn],jn[Dn]=null,Rr=jn[--Dn],jn[Dn]=null,Cr=jn[--Dn],jn[Dn]=null}var In=null,kn=null,He=!1,Xn=null;function p_(t,e){var n=On(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Kg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,In=t,kn=ys(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,In=t,kn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oi!==null?{id:Cr,overflow:Rr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=On(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,In=t,kn=null,!0):!1;default:return!1}}function qh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jh(t){if(He){var e=kn;if(e){var n=e;if(!Kg(t,e)){if(qh(t))throw Error(K(418));e=ys(n.nextSibling);var r=In;e&&Kg(t,e)?p_(r,n):(t.flags=t.flags&-4097|2,He=!1,In=t)}}else{if(qh(t))throw Error(K(418));t.flags=t.flags&-4097|2,He=!1,In=t}}}function Gg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;In=t}function Wl(t){if(t!==In)return!1;if(!He)return Gg(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nh(t.type,t.memoizedProps)),e&&(e=kn)){if(qh(t))throw m_(),Error(K(418));for(;e;)p_(t,e),e=ys(e.nextSibling)}if(Gg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){kn=ys(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}kn=null}}else kn=In?ys(t.stateNode.nextSibling):null;return!0}function m_(){for(var t=kn;t;)t=ys(t.nextSibling)}function io(){kn=In=null,He=!1}function Xf(t){Xn===null?Xn=[t]:Xn.push(t)}var wb=Hr.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Hl(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qg(t){var e=t._init;return e(t._payload)}function g_(t){function e(x,_){if(t){var T=x.deletions;T===null?(x.deletions=[_],x.flags|=16):T.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=xs(x,_),x.index=0,x.sibling=null,x}function i(x,_,T){return x.index=T,t?(T=x.alternate,T!==null?(T=T.index,T<_?(x.flags|=2,_):T):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,_,T,q){return _===null||_.tag!==6?(_=Fd(T,x.mode,q),_.return=x,_):(_=s(_,T),_.return=x,_)}function c(x,_,T,q){var W=T.type;return W===Di?p(x,_,T.props.children,q,T.key):_!==null&&(_.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ns&&Qg(W)===_.type)?(q=s(_,T.props),q.ref=$o(x,_,T),q.return=x,q):(q=vu(T.type,T.key,T.props,null,x.mode,q),q.ref=$o(x,_,T),q.return=x,q)}function h(x,_,T,q){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=zd(T,x.mode,q),_.return=x,_):(_=s(_,T.children||[]),_.return=x,_)}function p(x,_,T,q,W){return _===null||_.tag!==7?(_=ni(T,x.mode,q,W),_.return=x,_):(_=s(_,T),_.return=x,_)}function m(x,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Fd(""+_,x.mode,T),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Dl:return T=vu(_.type,_.key,_.props,null,x.mode,T),T.ref=$o(x,null,_),T.return=x,T;case ji:return _=zd(_,x.mode,T),_.return=x,_;case ns:var q=_._init;return m(x,q(_._payload),T)}if(Yo(_)||Vo(_))return _=ni(_,x.mode,T,null),_.return=x,_;Hl(x,_)}return null}function y(x,_,T,q){var W=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return W!==null?null:l(x,_,""+T,q);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Dl:return T.key===W?c(x,_,T,q):null;case ji:return T.key===W?h(x,_,T,q):null;case ns:return W=T._init,y(x,_,W(T._payload),q)}if(Yo(T)||Vo(T))return W!==null?null:p(x,_,T,q,null);Hl(x,T)}return null}function I(x,_,T,q,W){if(typeof q=="string"&&q!==""||typeof q=="number")return x=x.get(T)||null,l(_,x,""+q,W);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Dl:return x=x.get(q.key===null?T:q.key)||null,c(_,x,q,W);case ji:return x=x.get(q.key===null?T:q.key)||null,h(_,x,q,W);case ns:var $=q._init;return I(x,_,T,$(q._payload),W)}if(Yo(q)||Vo(q))return x=x.get(T)||null,p(_,x,q,W,null);Hl(_,q)}return null}function R(x,_,T,q){for(var W=null,$=null,w=_,g=_=0,E=null;w!==null&&g<T.length;g++){w.index>g?(E=w,w=null):E=w.sibling;var b=y(x,w,T[g],q);if(b===null){w===null&&(w=E);break}t&&w&&b.alternate===null&&e(x,w),_=i(b,_,g),$===null?W=b:$.sibling=b,$=b,w=E}if(g===T.length)return n(x,w),He&&Hs(x,g),W;if(w===null){for(;g<T.length;g++)w=m(x,T[g],q),w!==null&&(_=i(w,_,g),$===null?W=w:$.sibling=w,$=w);return He&&Hs(x,g),W}for(w=r(x,w);g<T.length;g++)E=I(w,x,g,T[g],q),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?g:E.key),_=i(E,_,g),$===null?W=E:$.sibling=E,$=E);return t&&w.forEach(function(A){return e(x,A)}),He&&Hs(x,g),W}function D(x,_,T,q){var W=Vo(T);if(typeof W!="function")throw Error(K(150));if(T=W.call(T),T==null)throw Error(K(151));for(var $=W=null,w=_,g=_=0,E=null,b=T.next();w!==null&&!b.done;g++,b=T.next()){w.index>g?(E=w,w=null):E=w.sibling;var A=y(x,w,b.value,q);if(A===null){w===null&&(w=E);break}t&&w&&A.alternate===null&&e(x,w),_=i(A,_,g),$===null?W=A:$.sibling=A,$=A,w=E}if(b.done)return n(x,w),He&&Hs(x,g),W;if(w===null){for(;!b.done;g++,b=T.next())b=m(x,b.value,q),b!==null&&(_=i(b,_,g),$===null?W=b:$.sibling=b,$=b);return He&&Hs(x,g),W}for(w=r(x,w);!b.done;g++,b=T.next())b=I(w,x,g,b.value,q),b!==null&&(t&&b.alternate!==null&&w.delete(b.key===null?g:b.key),_=i(b,_,g),$===null?W=b:$.sibling=b,$=b);return t&&w.forEach(function(N){return e(x,N)}),He&&Hs(x,g),W}function S(x,_,T,q){if(typeof T=="object"&&T!==null&&T.type===Di&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Dl:e:{for(var W=T.key,$=_;$!==null;){if($.key===W){if(W=T.type,W===Di){if($.tag===7){n(x,$.sibling),_=s($,T.props.children),_.return=x,x=_;break e}}else if($.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===ns&&Qg(W)===$.type){n(x,$.sibling),_=s($,T.props),_.ref=$o(x,$,T),_.return=x,x=_;break e}n(x,$);break}else e(x,$);$=$.sibling}T.type===Di?(_=ni(T.props.children,x.mode,q,T.key),_.return=x,x=_):(q=vu(T.type,T.key,T.props,null,x.mode,q),q.ref=$o(x,_,T),q.return=x,x=q)}return o(x);case ji:e:{for($=T.key;_!==null;){if(_.key===$)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(x,_.sibling),_=s(_,T.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=zd(T,x.mode,q),_.return=x,x=_}return o(x);case ns:return $=T._init,S(x,_,$(T._payload),q)}if(Yo(T))return R(x,_,T,q);if(Vo(T))return D(x,_,T,q);Hl(x,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(x,_.sibling),_=s(_,T),_.return=x,x=_):(n(x,_),_=Fd(T,x.mode,q),_.return=x,x=_),o(x)):n(x,_)}return S}var oo=g_(!0),y_=g_(!1),Bu=js(null),$u=null,Bi=null,Jf=null;function Zf(){Jf=Bi=$u=null}function ep(t){var e=Bu.current;$e(Bu),t._currentValue=e}function Dh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Xi(t,e){$u=t,Jf=Bi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(gn=!0),t.firstContext=null)}function Un(t){var e=t._currentValue;if(Jf!==t)if(t={context:t,memoizedValue:e,next:null},Bi===null){if($u===null)throw Error(K(308));Bi=t,$u.dependencies={lanes:0,firstContext:t}}else Bi=Bi.next=t;return e}var Xs=null;function tp(t){Xs===null?Xs=[t]:Xs.push(t)}function v_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,tp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ur(t,r)}function Ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rs=!1;function np(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function __(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ur(t,n)}return s=r.interleaved,s===null?(e.next=e,tp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ur(t,n)}function hu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ff(t,n)}}function Yg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wu(t,e,n,r){var s=t.updateQueue;rs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;o=0,p=h=c=null,l=i;do{var y=l.lane,I=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,D=l;switch(y=e,I=n,D.tag){case 1:if(R=D.payload,typeof R=="function"){m=R.call(I,m,y);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=D.payload,y=typeof R=="function"?R.call(I,m,y):R,y==null)break e;m=Xe({},m,y);break e;case 2:rs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[l]:y.push(l))}else I={eventTime:I,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=I,c=m):p=p.next=I,o|=y;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;y=l,l=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(p===null&&(c=m),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);li|=o,t.lanes=o,t.memoizedState=m}}function Xg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var sl={},fr=js(sl),qa=js(sl),ja=js(sl);function Js(t){if(t===sl)throw Error(K(174));return t}function rp(t,e){switch(Le(ja,e),Le(qa,t),Le(fr,sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mh(e,t)}$e(fr),Le(fr,e)}function ao(){$e(fr),$e(qa),$e(ja)}function w_(t){Js(ja.current);var e=Js(fr.current),n=mh(e,t.type);e!==n&&(Le(qa,t),Le(fr,n))}function sp(t){qa.current===t&&($e(fr),$e(qa))}var Qe=js(0);function Hu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dd=[];function ip(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var fu=Hr.ReactCurrentDispatcher,Od=Hr.ReactCurrentBatchConfig,ai=0,Ye=null,wt=null,It=null,Ku=!1,ha=!1,Da=0,xb=0;function Wt(){throw Error(K(321))}function op(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function ap(t,e,n,r,s,i){if(ai=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fu.current=t===null||t.memoizedState===null?Tb:Ib,t=n(r,s),ha){i=0;do{if(ha=!1,Da=0,25<=i)throw Error(K(301));i+=1,It=wt=null,e.updateQueue=null,fu.current=Ab,t=n(r,s)}while(ha)}if(fu.current=Gu,e=wt!==null&&wt.next!==null,ai=0,It=wt=Ye=null,Ku=!1,e)throw Error(K(300));return t}function lp(){var t=Da!==0;return Da=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ye.memoizedState=It=t:It=It.next=t,It}function Fn(){if(wt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=It===null?Ye.memoizedState:It.next;if(e!==null)It=e,wt=t;else{if(t===null)throw Error(K(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},It===null?Ye.memoizedState=It=t:It=It.next=t}return It}function Oa(t,e){return typeof e=="function"?e(t):e}function Md(t){var e=Fn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=wt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,h=i;do{var p=h.lane;if((ai&p)===p)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,Ye.lanes|=p,li|=p}h=h.next}while(h!==null&&h!==i);c===null?o=r:c.next=l,rr(r,e.memoizedState)||(gn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ye.lanes|=i,li|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ld(t){var e=Fn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);rr(i,e.memoizedState)||(gn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function x_(){}function E_(t,e){var n=Ye,r=Fn(),s=e(),i=!rr(r.memoizedState,s);if(i&&(r.memoizedState=s,gn=!0),r=r.queue,up(T_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,Ma(9,b_.bind(null,n,r,s,e),void 0,null),At===null)throw Error(K(349));ai&30||k_(n,e,s)}return s}function k_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function b_(t,e,n,r){e.value=n,e.getSnapshot=r,I_(e)&&A_(t)}function T_(t,e,n){return n(function(){I_(e)&&A_(t)})}function I_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function A_(t){var e=Ur(t,1);e!==null&&tr(e,t,1,-1)}function Jg(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:t},e.queue=t,t=t.dispatch=bb.bind(null,Ye,t),[e.memoizedState,t]}function Ma(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function S_(){return Fn().memoizedState}function pu(t,e,n,r){var s=ur();Ye.flags|=t,s.memoizedState=Ma(1|e,n,void 0,r===void 0?null:r)}function Sc(t,e,n,r){var s=Fn();r=r===void 0?null:r;var i=void 0;if(wt!==null){var o=wt.memoizedState;if(i=o.destroy,r!==null&&op(r,o.deps)){s.memoizedState=Ma(e,n,i,r);return}}Ye.flags|=t,s.memoizedState=Ma(1|e,n,i,r)}function Zg(t,e){return pu(8390656,8,t,e)}function up(t,e){return Sc(2048,8,t,e)}function N_(t,e){return Sc(4,2,t,e)}function C_(t,e){return Sc(4,4,t,e)}function R_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function P_(t,e,n){return n=n!=null?n.concat([t]):null,Sc(4,4,R_.bind(null,e,t),n)}function cp(){}function q_(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&op(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function j_(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&op(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function D_(t,e,n){return ai&21?(rr(n,e)||(n=Uv(),Ye.lanes|=n,li|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,gn=!0),t.memoizedState=n)}function Eb(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Od.transition;Od.transition={};try{t(!1),e()}finally{Re=n,Od.transition=r}}function O_(){return Fn().memoizedState}function kb(t,e,n){var r=ws(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},M_(t))L_(e,n);else if(n=v_(t,e,n,r),n!==null){var s=on();tr(n,t,r,s),V_(n,e,r)}}function bb(t,e,n){var r=ws(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(M_(t))L_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,rr(l,o)){var c=e.interleaved;c===null?(s.next=s,tp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=v_(t,e,s,r),n!==null&&(s=on(),tr(n,t,r,s),V_(n,e,r))}}function M_(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function L_(t,e){ha=Ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function V_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ff(t,n)}}var Gu={readContext:Un,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},Tb={readContext:Un,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Un,useEffect:Zg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pu(4194308,4,R_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pu(4194308,4,t,e)},useInsertionEffect:function(t,e){return pu(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kb.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:Jg,useDebugValue:cp,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=Jg(!1),e=t[0];return t=Eb.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,s=ur();if(He){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),At===null)throw Error(K(349));ai&30||k_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Zg(T_.bind(null,r,i,t),[t]),r.flags|=2048,Ma(9,b_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ur(),e=At.identifierPrefix;if(He){var n=Rr,r=Cr;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Da++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=xb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ib={readContext:Un,useCallback:q_,useContext:Un,useEffect:up,useImperativeHandle:P_,useInsertionEffect:N_,useLayoutEffect:C_,useMemo:j_,useReducer:Md,useRef:S_,useState:function(){return Md(Oa)},useDebugValue:cp,useDeferredValue:function(t){var e=Fn();return D_(e,wt.memoizedState,t)},useTransition:function(){var t=Md(Oa)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:x_,useSyncExternalStore:E_,useId:O_,unstable_isNewReconciler:!1},Ab={readContext:Un,useCallback:q_,useContext:Un,useEffect:up,useImperativeHandle:P_,useInsertionEffect:N_,useLayoutEffect:C_,useMemo:j_,useReducer:Ld,useRef:S_,useState:function(){return Ld(Oa)},useDebugValue:cp,useDeferredValue:function(t){var e=Fn();return wt===null?e.memoizedState=t:D_(e,wt.memoizedState,t)},useTransition:function(){var t=Ld(Oa)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:x_,useSyncExternalStore:E_,useId:O_,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Oh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nc={isMounted:function(t){return(t=t._reactInternals)?_i(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=on(),s=ws(t),i=Dr(r,s);i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&(tr(e,t,s,r),hu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=on(),s=ws(t),i=Dr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vs(t,i,s),e!==null&&(tr(e,t,s,r),hu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=on(),r=ws(t),s=Dr(n,r);s.tag=2,e!=null&&(s.callback=e),e=vs(t,s,r),e!==null&&(tr(e,t,r,n),hu(e,t,r))}};function ey(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Na(n,r)||!Na(s,i):!0}function U_(t,e,n){var r=!1,s=Is,i=e.contextType;return typeof i=="object"&&i!==null?i=Un(i):(s=vn(e)?ii:Jt.current,r=e.contextTypes,i=(r=r!=null)?so(t,s):Is),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ty(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nc.enqueueReplaceState(e,e.state,null)}function Mh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},np(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Un(i):(i=vn(e)?ii:Jt.current,s.context=so(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Oh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Nc.enqueueReplaceState(s,s.state,null),Wu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function lo(t,e){try{var n="",r=e;do n+=tk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sb=typeof WeakMap=="function"?WeakMap:Map;function F_(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Yu||(Yu=!0,Gh=r),Lh(t,e)},n}function z_(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Lh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Lh(t,e),typeof r!="function"&&(_s===null?_s=new Set([this]):_s.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ny(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sb;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=zb.bind(null,t,e,n),e.then(t,t))}function ry(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,vs(n,e,1))),n.lanes|=1),t)}var Nb=Hr.ReactCurrentOwner,gn=!1;function sn(t,e,n,r){e.child=t===null?y_(e,null,n,r):oo(e,t.child,n,r)}function iy(t,e,n,r,s){n=n.render;var i=e.ref;return Xi(e,s),r=ap(t,e,n,r,i,s),n=lp(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fr(t,e,s)):(He&&n&&Qf(e),e.flags|=1,sn(t,e,r,s),e.child)}function oy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!vp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,B_(t,e,i,r,s)):(t=vu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Na,n(o,r)&&t.ref===e.ref)return Fr(t,e,s)}return e.flags|=1,t=xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function B_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Na(i,r)&&t.ref===e.ref)if(gn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(gn=!0);else return e.lanes=t.lanes,Fr(t,e,s)}return Vh(t,e,n,r,s)}function $_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Wi,En),En|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Wi,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Le(Wi,En),En|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Le(Wi,En),En|=r;return sn(t,e,s,n),e.child}function W_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vh(t,e,n,r,s){var i=vn(n)?ii:Jt.current;return i=so(e,i),Xi(e,s),n=ap(t,e,n,r,i,s),r=lp(),t!==null&&!gn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Fr(t,e,s)):(He&&r&&Qf(e),e.flags|=1,sn(t,e,n,s),e.child)}function ay(t,e,n,r,s){if(vn(n)){var i=!0;Uu(e)}else i=!1;if(Xi(e,s),e.stateNode===null)mu(t,e),U_(e,n,r),Mh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Un(h):(h=vn(n)?ii:Jt.current,h=so(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==h)&&ty(e,o,r,h),rs=!1;var y=e.memoizedState;o.state=y,Wu(e,r,o,s),c=e.memoizedState,l!==r||y!==c||yn.current||rs?(typeof p=="function"&&(Oh(e,n,p,r),c=e.memoizedState),(l=rs||ey(e,n,l,r,y,c,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,__(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Qn(e.type,l),o.props=h,m=e.pendingProps,y=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Un(c):(c=vn(n)?ii:Jt.current,c=so(e,c));var I=n.getDerivedStateFromProps;(p=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||y!==c)&&ty(e,o,r,c),rs=!1,y=e.memoizedState,o.state=y,Wu(e,r,o,s);var R=e.memoizedState;l!==m||y!==R||yn.current||rs?(typeof I=="function"&&(Oh(e,n,I,r),R=e.memoizedState),(h=rs||ey(e,n,h,r,y,R,c)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=c,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Uh(t,e,n,r,i,s)}function Uh(t,e,n,r,s,i){W_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Hg(e,n,!1),Fr(t,e,i);r=e.stateNode,Nb.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=oo(e,t.child,null,i),e.child=oo(e,null,l,i)):sn(t,e,l,i),e.memoizedState=r.state,s&&Hg(e,n,!0),e.child}function H_(t){var e=t.stateNode;e.pendingContext?Wg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wg(t,e.context,!1),rp(t,e.containerInfo)}function ly(t,e,n,r,s){return io(),Xf(s),e.flags|=256,sn(t,e,n,r),e.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function zh(t){return{baseLanes:t,cachePool:null,transitions:null}}function K_(t,e,n){var r=e.pendingProps,s=Qe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Le(Qe,s&1),t===null)return jh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Pc(o,r,0,null),t=ni(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=zh(n),e.memoizedState=Fh,t):dp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Cb(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=xs(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=xs(l,i):(i=ni(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?zh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Fh,r}return i=t.child,t=i.sibling,r=xs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function dp(t,e){return e=Pc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kl(t,e,n,r){return r!==null&&Xf(r),oo(e,t.child,null,n),t=dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cb(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Vd(Error(K(422))),Kl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Pc({mode:"visible",children:r.children},s,0,null),i=ni(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&oo(e,t.child,null,o),e.child.memoizedState=zh(o),e.memoizedState=Fh,i);if(!(e.mode&1))return Kl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(K(419)),r=Vd(i,r,void 0),Kl(t,e,o,r)}if(l=(o&t.childLanes)!==0,gn||l){if(r=At,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ur(t,s),tr(r,t,s,-1))}return yp(),r=Vd(Error(K(421))),Kl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Bb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,kn=ys(s.nextSibling),In=e,He=!0,Xn=null,t!==null&&(jn[Dn++]=Cr,jn[Dn++]=Rr,jn[Dn++]=oi,Cr=t.id,Rr=t.overflow,oi=e),e=dp(e,r.children),e.flags|=4096,e)}function uy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dh(t.return,e,n)}function Ud(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function G_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(sn(t,e,r.children,n),r=Qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uy(t,n,e);else if(t.tag===19)uy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Qe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Hu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ud(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Hu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ud(e,!0,n,null,i);break;case"together":Ud(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),li|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Rb(t,e,n){switch(e.tag){case 3:H_(e),io();break;case 5:w_(e);break;case 1:vn(e.type)&&Uu(e);break;case 4:rp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Le(Bu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Qe,Qe.current&1),e.flags|=128,null):n&e.child.childLanes?K_(t,e,n):(Le(Qe,Qe.current&1),t=Fr(t,e,n),t!==null?t.sibling:null);Le(Qe,Qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return G_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Qe,Qe.current),r)break;return null;case 22:case 23:return e.lanes=0,$_(t,e,n)}return Fr(t,e,n)}var Q_,Bh,Y_,X_;Q_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bh=function(){};Y_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Js(fr.current);var i=null;switch(n){case"input":s=dh(t,s),r=dh(t,r),i=[];break;case"select":s=Xe({},s,{value:void 0}),r=Xe({},r,{value:void 0}),i=[];break;case"textarea":s=ph(t,s),r=ph(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Lu)}gh(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Ea.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var c=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Ea.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ze("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};X_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wo(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Pb(t,e,n){var r=e.pendingProps;switch(Yf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return vn(e.type)&&Vu(),Ht(e),null;case 3:return r=e.stateNode,ao(),$e(yn),$e(Jt),ip(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(Xh(Xn),Xn=null))),Bh(t,e),Ht(e),null;case 5:sp(e);var s=Js(ja.current);if(n=e.type,t!==null&&e.stateNode!=null)Y_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Ht(e),null}if(t=Js(fr.current),Wl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[cr]=e,r[Pa]=i,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",r),ze("close",r);break;case"iframe":case"object":case"embed":ze("load",r);break;case"video":case"audio":for(s=0;s<Jo.length;s++)ze(Jo[s],r);break;case"source":ze("error",r);break;case"img":case"image":case"link":ze("error",r),ze("load",r);break;case"details":ze("toggle",r);break;case"input":vg(r,i),ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ze("invalid",r);break;case"textarea":wg(r,i),ze("invalid",r)}gh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&$l(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&$l(r.textContent,l,t),s=["children",""+l]):Ea.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ze("scroll",r)}switch(n){case"input":Ol(r),_g(r,i,!0);break;case"textarea":Ol(r),xg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Lu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Tv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cr]=e,t[Pa]=r,Q_(t,e,!1,!1),e.stateNode=t;e:{switch(o=yh(n,r),n){case"dialog":ze("cancel",t),ze("close",t),s=r;break;case"iframe":case"object":case"embed":ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<Jo.length;s++)ze(Jo[s],t);s=r;break;case"source":ze("error",t),s=r;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=r;break;case"details":ze("toggle",t),s=r;break;case"input":vg(t,r),s=dh(t,r),ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Xe({},r,{value:void 0}),ze("invalid",t);break;case"textarea":wg(t,r),s=ph(t,r),ze("invalid",t);break;default:s=r}gh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Sv(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Iv(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ka(t,c):typeof c=="number"&&ka(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ea.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ze("scroll",t):c!=null&&Df(t,i,c,o))}switch(n){case"input":Ol(t),_g(t,r,!1);break;case"textarea":Ol(t),xg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ts(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ki(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ki(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)X_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Js(ja.current),Js(fr.current),Wl(e)){if(r=e.stateNode,n=e.memoizedProps,r[cr]=e,(i=r.nodeValue!==n)&&(t=In,t!==null))switch(t.tag){case 3:$l(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$l(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cr]=e,e.stateNode=r}return Ht(e),null;case 13:if($e(Qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&kn!==null&&e.mode&1&&!(e.flags&128))m_(),io(),e.flags|=98560,i=!1;else if(i=Wl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(K(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[cr]=e}else io(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),i=!1}else Xn!==null&&(Xh(Xn),Xn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Qe.current&1?xt===0&&(xt=3):yp())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return ao(),Bh(t,e),t===null&&Ca(e.stateNode.containerInfo),Ht(e),null;case 10:return ep(e.type._context),Ht(e),null;case 17:return vn(e.type)&&Vu(),Ht(e),null;case 19:if($e(Qe),i=e.memoizedState,i===null)return Ht(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wo(i,!1);else{if(xt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hu(t),o!==null){for(e.flags|=128,Wo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Qe,Qe.current&1|2),e.child}t=t.sibling}i.tail!==null&&ut()>uo&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Hu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!He)return Ht(e),null}else 2*ut()-i.renderingStartTime>uo&&n!==1073741824&&(e.flags|=128,r=!0,Wo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ut(),e.sibling=null,n=Qe.current,Le(Qe,r?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return gp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?En&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function qb(t,e){switch(Yf(e),e.tag){case 1:return vn(e.type)&&Vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ao(),$e(yn),$e(Jt),ip(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return sp(e),null;case 13:if($e(Qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));io()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $e(Qe),null;case 4:return ao(),null;case 10:return ep(e.type._context),null;case 22:case 23:return gp(),null;case 24:return null;default:return null}}var Gl=!1,Qt=!1,jb=typeof WeakSet=="function"?WeakSet:Set,ee=null;function $i(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function $h(t,e,n){try{n()}catch(r){nt(t,e,r)}}var cy=!1;function Db(t,e){if(Ah=Du,t=n_(),Gf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var I;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)y=m,m=I;for(;;){if(m===t)break t;if(y===n&&++h===s&&(l=o),y===i&&++p===r&&(c=o),(I=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=I}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sh={focusedElem:t,selectionRange:n},Du=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var D=R.memoizedProps,S=R.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?D:Qn(e.type,D),S);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(q){nt(e,e.return,q)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return R=cy,cy=!1,R}function fa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&$h(e,n,i)}s=s.next}while(s!==r)}}function Cc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Wh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function J_(t){var e=t.alternate;e!==null&&(t.alternate=null,J_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[Pa],delete e[Rh],delete e[yb],delete e[vb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Z_(t){return t.tag===5||t.tag===3||t.tag===4}function dy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Z_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lu));else if(r!==4&&(t=t.child,t!==null))for(Hh(t,e,n),t=t.sibling;t!==null;)Hh(t,e,n),t=t.sibling}function Kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kh(t,e,n),t=t.sibling;t!==null;)Kh(t,e,n),t=t.sibling}var qt=null,Yn=!1;function es(t,e,n){for(n=n.child;n!==null;)ew(t,e,n),n=n.sibling}function ew(t,e,n){if(hr&&typeof hr.onCommitFiberUnmount=="function")try{hr.onCommitFiberUnmount(Ec,n)}catch{}switch(n.tag){case 5:Qt||$i(n,e);case 6:var r=qt,s=Yn;qt=null,es(t,e,n),qt=r,Yn=s,qt!==null&&(Yn?(t=qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qt.removeChild(n.stateNode));break;case 18:qt!==null&&(Yn?(t=qt,n=n.stateNode,t.nodeType===8?qd(t.parentNode,n):t.nodeType===1&&qd(t,n),Aa(t)):qd(qt,n.stateNode));break;case 4:r=qt,s=Yn,qt=n.stateNode.containerInfo,Yn=!0,es(t,e,n),qt=r,Yn=s;break;case 0:case 11:case 14:case 15:if(!Qt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&$h(n,e,o),s=s.next}while(s!==r)}es(t,e,n);break;case 1:if(!Qt&&($i(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){nt(n,e,l)}es(t,e,n);break;case 21:es(t,e,n);break;case 22:n.mode&1?(Qt=(r=Qt)||n.memoizedState!==null,es(t,e,n),Qt=r):es(t,e,n);break;default:es(t,e,n)}}function hy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jb),e.forEach(function(r){var s=$b.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:qt=l.stateNode,Yn=!1;break e;case 3:qt=l.stateNode.containerInfo,Yn=!0;break e;case 4:qt=l.stateNode.containerInfo,Yn=!0;break e}l=l.return}if(qt===null)throw Error(K(160));ew(i,o,s),qt=null,Yn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){nt(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tw(e,t),e=e.sibling}function tw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),lr(t),r&4){try{fa(3,t,t.return),Cc(3,t)}catch(D){nt(t,t.return,D)}try{fa(5,t,t.return)}catch(D){nt(t,t.return,D)}}break;case 1:Gn(e,t),lr(t),r&512&&n!==null&&$i(n,n.return);break;case 5:if(Gn(e,t),lr(t),r&512&&n!==null&&$i(n,n.return),t.flags&32){var s=t.stateNode;try{ka(s,"")}catch(D){nt(t,t.return,D)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&kv(s,i),yh(l,o);var h=yh(l,i);for(o=0;o<c.length;o+=2){var p=c[o],m=c[o+1];p==="style"?Sv(s,m):p==="dangerouslySetInnerHTML"?Iv(s,m):p==="children"?ka(s,m):Df(s,p,m,h)}switch(l){case"input":hh(s,i);break;case"textarea":bv(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Ki(s,!!i.multiple,I,!1):y!==!!i.multiple&&(i.defaultValue!=null?Ki(s,!!i.multiple,i.defaultValue,!0):Ki(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pa]=i}catch(D){nt(t,t.return,D)}}break;case 6:if(Gn(e,t),lr(t),r&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(D){nt(t,t.return,D)}}break;case 3:if(Gn(e,t),lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Aa(e.containerInfo)}catch(D){nt(t,t.return,D)}break;case 4:Gn(e,t),lr(t);break;case 13:Gn(e,t),lr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(pp=ut())),r&4&&hy(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qt=(h=Qt)||p,Gn(e,t),Qt=h):Gn(e,t),lr(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(ee=t,p=t.child;p!==null;){for(m=ee=p;ee!==null;){switch(y=ee,I=y.child,y.tag){case 0:case 11:case 14:case 15:fa(4,y,y.return);break;case 1:$i(y,y.return);var R=y.stateNode;if(typeof R.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(D){nt(r,n,D)}}break;case 5:$i(y,y.return);break;case 22:if(y.memoizedState!==null){py(m);continue}}I!==null?(I.return=y,ee=I):py(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Av("display",o))}catch(D){nt(t,t.return,D)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(D){nt(t,t.return,D)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Gn(e,t),lr(t),r&4&&hy(t);break;case 21:break;default:Gn(e,t),lr(t)}}function lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Z_(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ka(s,""),r.flags&=-33);var i=dy(t);Kh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=dy(t);Hh(t,l,o);break;default:throw Error(K(161))}}catch(c){nt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ob(t,e,n){ee=t,nw(t)}function nw(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Gl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Qt;l=Gl;var h=Qt;if(Gl=o,(Qt=c)&&!h)for(ee=s;ee!==null;)o=ee,c=o.child,o.tag===22&&o.memoizedState!==null?my(s):c!==null?(c.return=o,ee=c):my(s);for(;i!==null;)ee=i,nw(i),i=i.sibling;ee=s,Gl=l,Qt=h}fy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):fy(t)}}function fy(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qt||Cc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Xg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Aa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Qt||e.flags&512&&Wh(e)}catch(y){nt(e,e.return,y)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function py(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function my(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cc(4,e)}catch(c){nt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){nt(e,s,c)}}var i=e.return;try{Wh(e)}catch(c){nt(e,i,c)}break;case 5:var o=e.return;try{Wh(e)}catch(c){nt(e,o,c)}}}catch(c){nt(e,e.return,c)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var Mb=Math.ceil,Qu=Hr.ReactCurrentDispatcher,hp=Hr.ReactCurrentOwner,Vn=Hr.ReactCurrentBatchConfig,Ie=0,At=null,gt=null,Ot=0,En=0,Wi=js(0),xt=0,La=null,li=0,Rc=0,fp=0,pa=null,pn=null,pp=0,uo=1/0,Ir=null,Yu=!1,Gh=null,_s=null,Ql=!1,ds=null,Xu=0,ma=0,Qh=null,gu=-1,yu=0;function on(){return Ie&6?ut():gu!==-1?gu:gu=ut()}function ws(t){return t.mode&1?Ie&2&&Ot!==0?Ot&-Ot:wb.transition!==null?(yu===0&&(yu=Uv()),yu):(t=Re,t!==0||(t=window.event,t=t===void 0?16:Kv(t.type)),t):1}function tr(t,e,n,r){if(50<ma)throw ma=0,Qh=null,Error(K(185));tl(t,n,r),(!(Ie&2)||t!==At)&&(t===At&&(!(Ie&2)&&(Rc|=n),xt===4&&is(t,Ot)),_n(t,r),n===1&&Ie===0&&!(e.mode&1)&&(uo=ut()+500,Ac&&Ds()))}function _n(t,e){var n=t.callbackNode;wk(t,e);var r=ju(t,t===At?Ot:0);if(r===0)n!==null&&bg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bg(n),e===1)t.tag===0?_b(gy.bind(null,t)):h_(gy.bind(null,t)),mb(function(){!(Ie&6)&&Ds()}),n=null;else{switch(Fv(r)){case 1:n=Uf;break;case 4:n=Lv;break;case 16:n=qu;break;case 536870912:n=Vv;break;default:n=qu}n=cw(n,rw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rw(t,e){if(gu=-1,yu=0,Ie&6)throw Error(K(327));var n=t.callbackNode;if(Ji()&&t.callbackNode!==n)return null;var r=ju(t,t===At?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ju(t,r);else{e=r;var s=Ie;Ie|=2;var i=iw();(At!==t||Ot!==e)&&(Ir=null,uo=ut()+500,ti(t,e));do try{Ub();break}catch(l){sw(t,l)}while(!0);Zf(),Qu.current=i,Ie=s,gt!==null?e=0:(At=null,Ot=0,e=xt)}if(e!==0){if(e===2&&(s=Eh(t),s!==0&&(r=s,e=Yh(t,s))),e===1)throw n=La,ti(t,0),is(t,r),_n(t,ut()),n;if(e===6)is(t,r);else{if(s=t.current.alternate,!(r&30)&&!Lb(s)&&(e=Ju(t,r),e===2&&(i=Eh(t),i!==0&&(r=i,e=Yh(t,i))),e===1))throw n=La,ti(t,0),is(t,r),_n(t,ut()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:Ks(t,pn,Ir);break;case 3:if(is(t,r),(r&130023424)===r&&(e=pp+500-ut(),10<e)){if(ju(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){on(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ch(Ks.bind(null,t,pn,Ir),e);break}Ks(t,pn,Ir);break;case 4:if(is(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-er(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Mb(r/1960))-r,10<r){t.timeoutHandle=Ch(Ks.bind(null,t,pn,Ir),r);break}Ks(t,pn,Ir);break;case 5:Ks(t,pn,Ir);break;default:throw Error(K(329))}}}return _n(t,ut()),t.callbackNode===n?rw.bind(null,t):null}function Yh(t,e){var n=pa;return t.current.memoizedState.isDehydrated&&(ti(t,e).flags|=256),t=Ju(t,e),t!==2&&(e=pn,pn=n,e!==null&&Xh(e)),t}function Xh(t){pn===null?pn=t:pn.push.apply(pn,t)}function Lb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!rr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function is(t,e){for(e&=~fp,e&=~Rc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function gy(t){if(Ie&6)throw Error(K(327));Ji();var e=ju(t,0);if(!(e&1))return _n(t,ut()),null;var n=Ju(t,e);if(t.tag!==0&&n===2){var r=Eh(t);r!==0&&(e=r,n=Yh(t,r))}if(n===1)throw n=La,ti(t,0),is(t,e),_n(t,ut()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,pn,Ir),_n(t,ut()),null}function mp(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(uo=ut()+500,Ac&&Ds())}}function ui(t){ds!==null&&ds.tag===0&&!(Ie&6)&&Ji();var e=Ie;Ie|=1;var n=Vn.transition,r=Re;try{if(Vn.transition=null,Re=1,t)return t()}finally{Re=r,Vn.transition=n,Ie=e,!(Ie&6)&&Ds()}}function gp(){En=Wi.current,$e(Wi)}function ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pb(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(Yf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vu();break;case 3:ao(),$e(yn),$e(Jt),ip();break;case 5:sp(r);break;case 4:ao();break;case 13:$e(Qe);break;case 19:$e(Qe);break;case 10:ep(r.type._context);break;case 22:case 23:gp()}n=n.return}if(At=t,gt=t=xs(t.current,null),Ot=En=e,xt=0,La=null,fp=Rc=li=0,pn=pa=null,Xs!==null){for(e=0;e<Xs.length;e++)if(n=Xs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xs=null}return t}function sw(t,e){do{var n=gt;try{if(Zf(),fu.current=Gu,Ku){for(var r=Ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ku=!1}if(ai=0,It=wt=Ye=null,ha=!1,Da=0,hp.current=null,n===null||n.return===null){xt=1,La=e,gt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var I=ry(o);if(I!==null){I.flags&=-257,sy(I,o,l,i,e),I.mode&1&&ny(i,h,e),e=I,c=h;var R=e.updateQueue;if(R===null){var D=new Set;D.add(c),e.updateQueue=D}else R.add(c);break e}else{if(!(e&1)){ny(i,h,e),yp();break e}c=Error(K(426))}}else if(He&&l.mode&1){var S=ry(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),sy(S,o,l,i,e),Xf(lo(c,l));break e}}i=c=lo(c,l),xt!==4&&(xt=2),pa===null?pa=[i]:pa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=F_(i,c,e);Yg(i,x);break e;case 1:l=c;var _=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(_s===null||!_s.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var q=z_(i,l,e);Yg(i,q);break e}}i=i.return}while(i!==null)}aw(n)}catch(W){e=W,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(!0)}function iw(){var t=Qu.current;return Qu.current=Gu,t===null?Gu:t}function yp(){(xt===0||xt===3||xt===2)&&(xt=4),At===null||!(li&268435455)&&!(Rc&268435455)||is(At,Ot)}function Ju(t,e){var n=Ie;Ie|=2;var r=iw();(At!==t||Ot!==e)&&(Ir=null,ti(t,e));do try{Vb();break}catch(s){sw(t,s)}while(!0);if(Zf(),Ie=n,Qu.current=r,gt!==null)throw Error(K(261));return At=null,Ot=0,xt}function Vb(){for(;gt!==null;)ow(gt)}function Ub(){for(;gt!==null&&!dk();)ow(gt)}function ow(t){var e=uw(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?aw(t):gt=e,hp.current=null}function aw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qb(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xt=6,gt=null;return}}else if(n=Pb(n,e,En),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);xt===0&&(xt=5)}function Ks(t,e,n){var r=Re,s=Vn.transition;try{Vn.transition=null,Re=1,Fb(t,e,n,r)}finally{Vn.transition=s,Re=r}return null}function Fb(t,e,n,r){do Ji();while(ds!==null);if(Ie&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(xk(t,i),t===At&&(gt=At=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ql||(Ql=!0,cw(qu,function(){return Ji(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vn.transition,Vn.transition=null;var o=Re;Re=1;var l=Ie;Ie|=4,hp.current=null,Db(t,n),tw(n,t),ab(Sh),Du=!!Ah,Sh=Ah=null,t.current=n,Ob(n),hk(),Ie=l,Re=o,Vn.transition=i}else t.current=n;if(Ql&&(Ql=!1,ds=t,Xu=s),i=t.pendingLanes,i===0&&(_s=null),mk(n.stateNode),_n(t,ut()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Yu)throw Yu=!1,t=Gh,Gh=null,t;return Xu&1&&t.tag!==0&&Ji(),i=t.pendingLanes,i&1?t===Qh?ma++:(ma=0,Qh=t):ma=0,Ds(),null}function Ji(){if(ds!==null){var t=Fv(Xu),e=Vn.transition,n=Re;try{if(Vn.transition=null,Re=16>t?16:t,ds===null)var r=!1;else{if(t=ds,ds=null,Xu=0,Ie&6)throw Error(K(331));var s=Ie;for(Ie|=4,ee=t.current;ee!==null;){var i=ee,o=i.child;if(ee.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(ee=h;ee!==null;){var p=ee;switch(p.tag){case 0:case 11:case 15:fa(8,p,i)}var m=p.child;if(m!==null)m.return=p,ee=m;else for(;ee!==null;){p=ee;var y=p.sibling,I=p.return;if(J_(p),p===h){ee=null;break}if(y!==null){y.return=I,ee=y;break}ee=I}}}var R=i.alternate;if(R!==null){var D=R.child;if(D!==null){R.child=null;do{var S=D.sibling;D.sibling=null,D=S}while(D!==null)}}ee=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ee=o;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fa(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ee=x;break e}ee=i.return}}var _=t.current;for(ee=_;ee!==null;){o=ee;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ee=T;else e:for(o=_;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cc(9,l)}}catch(W){nt(l,l.return,W)}if(l===o){ee=null;break e}var q=l.sibling;if(q!==null){q.return=l.return,ee=q;break e}ee=l.return}}if(Ie=s,Ds(),hr&&typeof hr.onPostCommitFiberRoot=="function")try{hr.onPostCommitFiberRoot(Ec,t)}catch{}r=!0}return r}finally{Re=n,Vn.transition=e}}return!1}function yy(t,e,n){e=lo(n,e),e=F_(t,e,1),t=vs(t,e,1),e=on(),t!==null&&(tl(t,1,e),_n(t,e))}function nt(t,e,n){if(t.tag===3)yy(t,t,n);else for(;e!==null;){if(e.tag===3){yy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_s===null||!_s.has(r))){t=lo(n,t),t=z_(e,t,1),e=vs(e,t,1),t=on(),e!==null&&(tl(e,1,t),_n(e,t));break}}e=e.return}}function zb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=on(),t.pingedLanes|=t.suspendedLanes&n,At===t&&(Ot&n)===n&&(xt===4||xt===3&&(Ot&130023424)===Ot&&500>ut()-pp?ti(t,0):fp|=n),_n(t,e)}function lw(t,e){e===0&&(t.mode&1?(e=Vl,Vl<<=1,!(Vl&130023424)&&(Vl=4194304)):e=1);var n=on();t=Ur(t,e),t!==null&&(tl(t,e,n),_n(t,n))}function Bb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lw(t,n)}function $b(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),lw(t,n)}var uw;uw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yn.current)gn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return gn=!1,Rb(t,e,n);gn=!!(t.flags&131072)}else gn=!1,He&&e.flags&1048576&&f_(e,zu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mu(t,e),t=e.pendingProps;var s=so(e,Jt.current);Xi(e,n),s=ap(null,e,r,t,s,n);var i=lp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vn(r)?(i=!0,Uu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,np(e),s.updater=Nc,e.stateNode=s,s._reactInternals=e,Mh(e,r,t,n),e=Uh(null,e,r,!0,i,n)):(e.tag=0,He&&i&&Qf(e),sn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Hb(r),t=Qn(r,t),s){case 0:e=Vh(null,e,r,t,n);break e;case 1:e=ay(null,e,r,t,n);break e;case 11:e=iy(null,e,r,t,n);break e;case 14:e=oy(null,e,r,Qn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Vh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),ay(t,e,r,s,n);case 3:e:{if(H_(e),t===null)throw Error(K(387));r=e.pendingProps,i=e.memoizedState,s=i.element,__(t,e),Wu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=lo(Error(K(423)),e),e=ly(t,e,r,n,s);break e}else if(r!==s){s=lo(Error(K(424)),e),e=ly(t,e,r,n,s);break e}else for(kn=ys(e.stateNode.containerInfo.firstChild),In=e,He=!0,Xn=null,n=y_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(io(),r===s){e=Fr(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return w_(e),t===null&&jh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Nh(r,s)?o=null:i!==null&&Nh(r,i)&&(e.flags|=32),W_(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&jh(e),null;case 13:return K_(t,e,n);case 4:return rp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=oo(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),iy(t,e,r,s,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Le(Bu,r._currentValue),r._currentValue=o,i!==null)if(rr(i.value,o)){if(i.children===s.children&&!yn.current){e=Fr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Dr(-1,n&-n),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?c.next=c:(c.next=p.next,p.next=c),h.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Dh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(K(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Dh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}sn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Xi(e,n),s=Un(s),r=r(s),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,s=Qn(r,e.pendingProps),s=Qn(r.type,s),oy(t,e,r,s,n);case 15:return B_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),mu(t,e),e.tag=1,vn(r)?(t=!0,Uu(e)):t=!1,Xi(e,n),U_(e,r,s),Mh(e,r,s,n),Uh(null,e,r,!0,t,n);case 19:return G_(t,e,n);case 22:return $_(t,e,n)}throw Error(K(156,e.tag))};function cw(t,e){return Mv(t,e)}function Wb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(t,e,n,r){return new Wb(t,e,n,r)}function vp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hb(t){if(typeof t=="function")return vp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mf)return 11;if(t===Lf)return 14}return 2}function xs(t,e){var n=t.alternate;return n===null?(n=On(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function vu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")vp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Di:return ni(n.children,s,i,e);case Of:o=8,s|=8;break;case ah:return t=On(12,n,e,s|2),t.elementType=ah,t.lanes=i,t;case lh:return t=On(13,n,e,s),t.elementType=lh,t.lanes=i,t;case uh:return t=On(19,n,e,s),t.elementType=uh,t.lanes=i,t;case wv:return Pc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vv:o=10;break e;case _v:o=9;break e;case Mf:o=11;break e;case Lf:o=14;break e;case ns:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=On(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ni(t,e,n,r){return t=On(7,t,r,e),t.lanes=n,t}function Pc(t,e,n,r){return t=On(22,t,r,e),t.elementType=wv,t.lanes=n,t.stateNode={isHidden:!1},t}function Fd(t,e,n){return t=On(6,t,null,e),t.lanes=n,t}function zd(t,e,n){return e=On(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ed(0),this.expirationTimes=Ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ed(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _p(t,e,n,r,s,i,o,l,c){return t=new Kb(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=On(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},np(i),t}function Gb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ji,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dw(t){if(!t)return Is;t=t._reactInternals;e:{if(_i(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(vn(n))return d_(t,n,e)}return e}function hw(t,e,n,r,s,i,o,l,c){return t=_p(n,r,!0,t,s,i,o,l,c),t.context=dw(null),n=t.current,r=on(),s=ws(n),i=Dr(r,s),i.callback=e??null,vs(n,i,s),t.current.lanes=s,tl(t,s,r),_n(t,r),t}function qc(t,e,n,r){var s=e.current,i=on(),o=ws(s);return n=dw(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vs(s,e,o),t!==null&&(tr(t,s,o,i),hu(t,s,o)),o}function Zu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wp(t,e){vy(t,e),(t=t.alternate)&&vy(t,e)}function Qb(){return null}var fw=typeof reportError=="function"?reportError:function(t){console.error(t)};function xp(t){this._internalRoot=t}jc.prototype.render=xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));qc(t,e,null,null)};jc.prototype.unmount=xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ui(function(){qc(null,t,null,null)}),e[Vr]=null}};function jc(t){this._internalRoot=t}jc.prototype.unstable_scheduleHydration=function(t){if(t){var e=$v();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ss.length&&e!==0&&e<ss[n].priority;n++);ss.splice(n,0,t),n===0&&Hv(t)}};function Ep(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _y(){}function Yb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Zu(o);i.call(h)}}var o=hw(e,r,t,0,null,!1,!1,"",_y);return t._reactRootContainer=o,t[Vr]=o.current,Ca(t.nodeType===8?t.parentNode:t),ui(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Zu(c);l.call(h)}}var c=_p(t,0,!1,null,null,!1,!1,"",_y);return t._reactRootContainer=c,t[Vr]=c.current,Ca(t.nodeType===8?t.parentNode:t),ui(function(){qc(e,c,n,r)}),c}function Oc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Zu(o);l.call(c)}}qc(e,o,t,s)}else o=Yb(n,e,t,s,r);return Zu(o)}zv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xo(e.pendingLanes);n!==0&&(Ff(e,n|1),_n(e,ut()),!(Ie&6)&&(uo=ut()+500,Ds()))}break;case 13:ui(function(){var r=Ur(t,1);if(r!==null){var s=on();tr(r,t,1,s)}}),wp(t,1)}};zf=function(t){if(t.tag===13){var e=Ur(t,134217728);if(e!==null){var n=on();tr(e,t,134217728,n)}wp(t,134217728)}};Bv=function(t){if(t.tag===13){var e=ws(t),n=Ur(t,e);if(n!==null){var r=on();tr(n,t,e,r)}wp(t,e)}};$v=function(){return Re};Wv=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};_h=function(t,e,n){switch(e){case"input":if(hh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ic(r);if(!s)throw Error(K(90));Ev(r),hh(r,s)}}}break;case"textarea":bv(t,n);break;case"select":e=n.value,e!=null&&Ki(t,!!n.multiple,e,!1)}};Rv=mp;Pv=ui;var Xb={usingClientEntryPoint:!1,Events:[rl,Vi,Ic,Nv,Cv,mp]},Ho={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jb={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dv(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||Qb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{Ec=Yl.inject(Jb),hr=Yl}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xb;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ep(e))throw Error(K(200));return Gb(t,e,null,n)};Nn.createRoot=function(t,e){if(!Ep(t))throw Error(K(299));var n=!1,r="",s=fw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=_p(t,1,!1,null,null,n,!1,r,s),t[Vr]=e.current,Ca(t.nodeType===8?t.parentNode:t),new xp(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Dv(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return ui(t)};Nn.hydrate=function(t,e,n){if(!Dc(e))throw Error(K(200));return Oc(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!Ep(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=fw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hw(e,null,t,1,n??null,s,!1,i,o),t[Vr]=e.current,Ca(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new jc(e)};Nn.render=function(t,e,n){if(!Dc(e))throw Error(K(200));return Oc(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Dc(t))throw Error(K(40));return t._reactRootContainer?(ui(function(){Oc(null,null,t,!1,function(){t._reactRootContainer=null,t[Vr]=null})}),!0):!1};Nn.unstable_batchedUpdates=mp;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dc(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Oc(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function pw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pw)}catch(t){console.error(t)}}pw(),pv.exports=Nn;var Zb=pv.exports,wy=Zb;ih.createRoot=wy.createRoot,ih.hydrateRoot=wy.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...h},p)=>O.createElement("svg",{ref:p,...e2,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${t2(t)}`,l].join(" "),...h},[...e.map(([m,y])=>O.createElement(m,y)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=Z("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=Z("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Z("BookOpenCheck",[["path",{d:"M8 3H2v15h7c1.7 0 3 1.3 3 3V7c0-2.2-1.8-4-4-4Z",key:"1i8u0n"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V3h-6c-2.2 0-4 1.8-4 4v14c0-1.7 1.3-3 3-3h7v-2.3",key:"jb5l51"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=Z("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=Z("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=Z("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=Z("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bp=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=Z("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wu=Z("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Z("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=Z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=Z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=Z("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=Z("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=Z("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=Z("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=Z("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=Z("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=Z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=Z("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kw=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Z("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nc=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=Z("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=Z("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E2=Z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k2=Z("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=Z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=Z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=Z("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=Z("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I2=Z("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=Z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Qs=(t=>(t.LIGHT="light",t.DARK="dark",t))(Qs||{}),Ny={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},S2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Aw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,h=c?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let y=(l&15)<<2|h>>6,I=h&63;c||(I=64,o||(y=64)),r.push(n[p],n[m],n[y],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Iw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):S2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new N2;const y=i<<2|l>>4;if(r.push(y),h!==64){const I=l<<4&240|h>>2;if(r.push(I),m!==64){const R=h<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class N2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const C2=function(t){const e=Iw(t);return Aw.encodeByteArray(e,!0)},rc=function(t){return C2(t).replace(/\./g,"")},Sw=function(t){try{return Aw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=()=>R2().__FIREBASE_DEFAULTS__,q2=()=>{if(typeof process>"u"||typeof Ny>"u")return;const t=Ny.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},j2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Sw(t[1]);return e&&JSON.parse(e)},Mc=()=>{try{return P2()||q2()||j2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nw=t=>{var e,n;return(n=(e=Mc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Cw=t=>{const e=Nw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rw=()=>{var t;return(t=Mc())===null||t===void 0?void 0:t.config},Pw=t=>{var e;return(e=Mc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rc(JSON.stringify(n)),rc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function O2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zt())}function M2(){var t;const e=(t=Mc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function L2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function V2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function U2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F2(){const t=Zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function z2(){return!M2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B2(){try{return typeof indexedDB=="object"}catch{return!1}}function $2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="FirebaseError";class wr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=W2,Object.setPrototypeOf(this,wr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?H2(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new wr(s,l,r)}}function H2(t,e){return t.replace(K2,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const K2=/\{\$([^}]+)}/g;function G2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Cy(i)&&Cy(o)){if(!sc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Cy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ol(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ea(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Q2(t,e){const n=new Y2(t,e);return n.subscribe.bind(n)}class Y2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");X2(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Bd),s.error===void 0&&(s.error=Bd),s.complete===void 0&&(s.complete=Bd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function X2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class As{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new D2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eT(e))try{this.getOrInitializeService({instanceIdentifier:Gs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gs){return this.instances.has(e)}getOptions(e=Gs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Z2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gs){return this.component?this.component.multipleInstances?e:Gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z2(t){return t===Gs?void 0:t}function eT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new J2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ee||(Ee={}));const nT={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},rT=Ee.INFO,sT={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},iT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=sT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tp{constructor(e){this.name=e,this._logLevel=rT,this._logHandler=iT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const oT=(t,e)=>e.some(n=>t instanceof n);let Ry,Py;function aT(){return Ry||(Ry=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lT(){return Py||(Py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jw=new WeakMap,nf=new WeakMap,Dw=new WeakMap,$d=new WeakMap,Ip=new WeakMap;function uT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Es(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jw.set(n,t)}).catch(()=>{}),Ip.set(e,t),e}function cT(t){if(nf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nf.set(t,e)}let rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Es(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dT(t){rf=t(rf)}function hT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wd(this),e,...n);return Dw.set(r,e.sort?e.sort():[e]),Es(r)}:lT().includes(t)?function(...e){return t.apply(Wd(this),e),Es(jw.get(this))}:function(...e){return Es(t.apply(Wd(this),e))}}function fT(t){return typeof t=="function"?hT(t):(t instanceof IDBTransaction&&cT(t),oT(t,aT())?new Proxy(t,rf):t)}function Es(t){if(t instanceof IDBRequest)return uT(t);if($d.has(t))return $d.get(t);const e=fT(t);return e!==t&&($d.set(t,e),Ip.set(e,t)),e}const Wd=t=>Ip.get(t);function pT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Es(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Es(o.result),c.oldVersion,c.newVersion,Es(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const mT=["get","getKey","getAll","getAllKeys","count"],gT=["put","add","delete","clear"],Hd=new Map;function qy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hd.get(e))return Hd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=gT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mT.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return Hd.set(e,i),i}dT(t=>({...t,get:(e,n,r)=>qy(e,n)||t.get(e,n,r),has:(e,n)=>!!qy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sf="@firebase/app",jy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Tp("@firebase/app"),_T="@firebase/app-compat",wT="@firebase/analytics-compat",xT="@firebase/analytics",ET="@firebase/app-check-compat",kT="@firebase/app-check",bT="@firebase/auth",TT="@firebase/auth-compat",IT="@firebase/database",AT="@firebase/data-connect",ST="@firebase/database-compat",NT="@firebase/functions",CT="@firebase/functions-compat",RT="@firebase/installations",PT="@firebase/installations-compat",qT="@firebase/messaging",jT="@firebase/messaging-compat",DT="@firebase/performance",OT="@firebase/performance-compat",MT="@firebase/remote-config",LT="@firebase/remote-config-compat",VT="@firebase/storage",UT="@firebase/storage-compat",FT="@firebase/firestore",zT="@firebase/vertexai-preview",BT="@firebase/firestore-compat",$T="firebase",WT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="[DEFAULT]",HT={[sf]:"fire-core",[_T]:"fire-core-compat",[xT]:"fire-analytics",[wT]:"fire-analytics-compat",[kT]:"fire-app-check",[ET]:"fire-app-check-compat",[bT]:"fire-auth",[TT]:"fire-auth-compat",[IT]:"fire-rtdb",[AT]:"fire-data-connect",[ST]:"fire-rtdb-compat",[NT]:"fire-fn",[CT]:"fire-fn-compat",[RT]:"fire-iid",[PT]:"fire-iid-compat",[qT]:"fire-fcm",[jT]:"fire-fcm-compat",[DT]:"fire-perf",[OT]:"fire-perf-compat",[MT]:"fire-rc",[LT]:"fire-rc-compat",[VT]:"fire-gcs",[UT]:"fire-gcs-compat",[FT]:"fire-fst",[BT]:"fire-fst-compat",[zT]:"fire-vertex","fire-js":"fire-js",[$T]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,KT=new Map,af=new Map;function Dy(t,e){try{t.container.addComponent(e)}catch(n){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ci(t){const e=t.name;if(af.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;af.set(e,t);for(const n of ic.values())Dy(n,t);for(const n of KT.values())Dy(n,t);return!0}function Lc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ks=new il("app","Firebase",GT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=WT;function Ow(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:of,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ks.create("bad-app-name",{appName:String(s)});if(n||(n=Rw()),!n)throw ks.create("no-options");const i=ic.get(s);if(i){if(sc(n,i.options)&&sc(r,i.config))return i;throw ks.create("duplicate-app",{appName:s})}const o=new tT(s);for(const c of af.values())o.addComponent(c);const l=new QT(n,r,o);return ic.set(s,l),l}function Ap(t=of){const e=ic.get(t);if(!e&&t===of&&Rw())return Ow();if(!e)throw ks.create("no-app",{appName:t});return e}function pr(t,e,n){var r;let s=(r=HT[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(l.join(" "));return}ci(new As(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT="firebase-heartbeat-database",XT=1,Ba="firebase-heartbeat-store";let Kd=null;function Mw(){return Kd||(Kd=pT(YT,XT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw ks.create("idb-open",{originalErrorMessage:t.message})})),Kd}async function JT(t){try{const n=(await Mw()).transaction(Ba),r=await n.objectStore(Ba).get(Lw(t));return await n.done,r}catch(e){if(e instanceof wr)zr.warn(e.message);else{const n=ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zr.warn(n.message)}}}async function Oy(t,e){try{const r=(await Mw()).transaction(Ba,"readwrite");await r.objectStore(Ba).put(e,Lw(t)),await r.done}catch(n){if(n instanceof wr)zr.warn(n.message);else{const r=ks.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zr.warn(r.message)}}}function Lw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=1024,eI=30*24*60*60*1e3;class tI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=My();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=eI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=My(),{heartbeatsToSend:r,unsentEntries:s}=nI(this._heartbeatsCache.heartbeats),i=rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return zr.warn(n),""}}}function My(){return new Date().toISOString().substring(0,10)}function nI(t,e=ZT){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ly(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ly(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B2()?$2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JT(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Oy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Oy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ly(t){return rc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t){ci(new As("platform-logger",e=>new yT(e),"PRIVATE")),ci(new As("heartbeat",e=>new tI(e),"PRIVATE")),pr(sf,jy,t),pr(sf,jy,"esm2017"),pr("fire-js","")}sI("");var iI="firebase",oI="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(iI,oI,"app");var Vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,Vw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,g){function E(){}E.prototype=g.prototype,w.D=g.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(b,A,N){for(var k=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)k[Ae-2]=arguments[Ae];return g.prototype[A].apply(b,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,E){E||(E=0);var b=Array(16);if(typeof g=="string")for(var A=0;16>A;++A)b[A]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(A=0;16>A;++A)b[A]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=w.g[0],E=w.g[1],A=w.g[2];var N=w.g[3],k=g+(N^E&(A^N))+b[0]+3614090360&4294967295;g=E+(k<<7&4294967295|k>>>25),k=N+(A^g&(E^A))+b[1]+3905402710&4294967295,N=g+(k<<12&4294967295|k>>>20),k=A+(E^N&(g^E))+b[2]+606105819&4294967295,A=N+(k<<17&4294967295|k>>>15),k=E+(g^A&(N^g))+b[3]+3250441966&4294967295,E=A+(k<<22&4294967295|k>>>10),k=g+(N^E&(A^N))+b[4]+4118548399&4294967295,g=E+(k<<7&4294967295|k>>>25),k=N+(A^g&(E^A))+b[5]+1200080426&4294967295,N=g+(k<<12&4294967295|k>>>20),k=A+(E^N&(g^E))+b[6]+2821735955&4294967295,A=N+(k<<17&4294967295|k>>>15),k=E+(g^A&(N^g))+b[7]+4249261313&4294967295,E=A+(k<<22&4294967295|k>>>10),k=g+(N^E&(A^N))+b[8]+1770035416&4294967295,g=E+(k<<7&4294967295|k>>>25),k=N+(A^g&(E^A))+b[9]+2336552879&4294967295,N=g+(k<<12&4294967295|k>>>20),k=A+(E^N&(g^E))+b[10]+4294925233&4294967295,A=N+(k<<17&4294967295|k>>>15),k=E+(g^A&(N^g))+b[11]+2304563134&4294967295,E=A+(k<<22&4294967295|k>>>10),k=g+(N^E&(A^N))+b[12]+1804603682&4294967295,g=E+(k<<7&4294967295|k>>>25),k=N+(A^g&(E^A))+b[13]+4254626195&4294967295,N=g+(k<<12&4294967295|k>>>20),k=A+(E^N&(g^E))+b[14]+2792965006&4294967295,A=N+(k<<17&4294967295|k>>>15),k=E+(g^A&(N^g))+b[15]+1236535329&4294967295,E=A+(k<<22&4294967295|k>>>10),k=g+(A^N&(E^A))+b[1]+4129170786&4294967295,g=E+(k<<5&4294967295|k>>>27),k=N+(E^A&(g^E))+b[6]+3225465664&4294967295,N=g+(k<<9&4294967295|k>>>23),k=A+(g^E&(N^g))+b[11]+643717713&4294967295,A=N+(k<<14&4294967295|k>>>18),k=E+(N^g&(A^N))+b[0]+3921069994&4294967295,E=A+(k<<20&4294967295|k>>>12),k=g+(A^N&(E^A))+b[5]+3593408605&4294967295,g=E+(k<<5&4294967295|k>>>27),k=N+(E^A&(g^E))+b[10]+38016083&4294967295,N=g+(k<<9&4294967295|k>>>23),k=A+(g^E&(N^g))+b[15]+3634488961&4294967295,A=N+(k<<14&4294967295|k>>>18),k=E+(N^g&(A^N))+b[4]+3889429448&4294967295,E=A+(k<<20&4294967295|k>>>12),k=g+(A^N&(E^A))+b[9]+568446438&4294967295,g=E+(k<<5&4294967295|k>>>27),k=N+(E^A&(g^E))+b[14]+3275163606&4294967295,N=g+(k<<9&4294967295|k>>>23),k=A+(g^E&(N^g))+b[3]+4107603335&4294967295,A=N+(k<<14&4294967295|k>>>18),k=E+(N^g&(A^N))+b[8]+1163531501&4294967295,E=A+(k<<20&4294967295|k>>>12),k=g+(A^N&(E^A))+b[13]+2850285829&4294967295,g=E+(k<<5&4294967295|k>>>27),k=N+(E^A&(g^E))+b[2]+4243563512&4294967295,N=g+(k<<9&4294967295|k>>>23),k=A+(g^E&(N^g))+b[7]+1735328473&4294967295,A=N+(k<<14&4294967295|k>>>18),k=E+(N^g&(A^N))+b[12]+2368359562&4294967295,E=A+(k<<20&4294967295|k>>>12),k=g+(E^A^N)+b[5]+4294588738&4294967295,g=E+(k<<4&4294967295|k>>>28),k=N+(g^E^A)+b[8]+2272392833&4294967295,N=g+(k<<11&4294967295|k>>>21),k=A+(N^g^E)+b[11]+1839030562&4294967295,A=N+(k<<16&4294967295|k>>>16),k=E+(A^N^g)+b[14]+4259657740&4294967295,E=A+(k<<23&4294967295|k>>>9),k=g+(E^A^N)+b[1]+2763975236&4294967295,g=E+(k<<4&4294967295|k>>>28),k=N+(g^E^A)+b[4]+1272893353&4294967295,N=g+(k<<11&4294967295|k>>>21),k=A+(N^g^E)+b[7]+4139469664&4294967295,A=N+(k<<16&4294967295|k>>>16),k=E+(A^N^g)+b[10]+3200236656&4294967295,E=A+(k<<23&4294967295|k>>>9),k=g+(E^A^N)+b[13]+681279174&4294967295,g=E+(k<<4&4294967295|k>>>28),k=N+(g^E^A)+b[0]+3936430074&4294967295,N=g+(k<<11&4294967295|k>>>21),k=A+(N^g^E)+b[3]+3572445317&4294967295,A=N+(k<<16&4294967295|k>>>16),k=E+(A^N^g)+b[6]+76029189&4294967295,E=A+(k<<23&4294967295|k>>>9),k=g+(E^A^N)+b[9]+3654602809&4294967295,g=E+(k<<4&4294967295|k>>>28),k=N+(g^E^A)+b[12]+3873151461&4294967295,N=g+(k<<11&4294967295|k>>>21),k=A+(N^g^E)+b[15]+530742520&4294967295,A=N+(k<<16&4294967295|k>>>16),k=E+(A^N^g)+b[2]+3299628645&4294967295,E=A+(k<<23&4294967295|k>>>9),k=g+(A^(E|~N))+b[0]+4096336452&4294967295,g=E+(k<<6&4294967295|k>>>26),k=N+(E^(g|~A))+b[7]+1126891415&4294967295,N=g+(k<<10&4294967295|k>>>22),k=A+(g^(N|~E))+b[14]+2878612391&4294967295,A=N+(k<<15&4294967295|k>>>17),k=E+(N^(A|~g))+b[5]+4237533241&4294967295,E=A+(k<<21&4294967295|k>>>11),k=g+(A^(E|~N))+b[12]+1700485571&4294967295,g=E+(k<<6&4294967295|k>>>26),k=N+(E^(g|~A))+b[3]+2399980690&4294967295,N=g+(k<<10&4294967295|k>>>22),k=A+(g^(N|~E))+b[10]+4293915773&4294967295,A=N+(k<<15&4294967295|k>>>17),k=E+(N^(A|~g))+b[1]+2240044497&4294967295,E=A+(k<<21&4294967295|k>>>11),k=g+(A^(E|~N))+b[8]+1873313359&4294967295,g=E+(k<<6&4294967295|k>>>26),k=N+(E^(g|~A))+b[15]+4264355552&4294967295,N=g+(k<<10&4294967295|k>>>22),k=A+(g^(N|~E))+b[6]+2734768916&4294967295,A=N+(k<<15&4294967295|k>>>17),k=E+(N^(A|~g))+b[13]+1309151649&4294967295,E=A+(k<<21&4294967295|k>>>11),k=g+(A^(E|~N))+b[4]+4149444226&4294967295,g=E+(k<<6&4294967295|k>>>26),k=N+(E^(g|~A))+b[11]+3174756917&4294967295,N=g+(k<<10&4294967295|k>>>22),k=A+(g^(N|~E))+b[2]+718787259&4294967295,A=N+(k<<15&4294967295|k>>>17),k=E+(N^(A|~g))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,w.g[2]=w.g[2]+A&4294967295,w.g[3]=w.g[3]+N&4294967295}r.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var E=g-this.blockSize,b=this.B,A=this.h,N=0;N<g;){if(A==0)for(;N<=E;)s(this,w,N),N+=this.blockSize;if(typeof w=="string"){for(;N<g;)if(b[A++]=w.charCodeAt(N++),A==this.blockSize){s(this,b),A=0;break}}else for(;N<g;)if(b[A++]=w[N++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=g},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var E=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=E&255,E/=256;for(this.u(w),w=Array(16),g=E=0;4>g;++g)for(var b=0;32>b;b+=8)w[E++]=this.g[g]>>>b&255;return w};function i(w,g){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=g(w)}function o(w,g){this.h=g;for(var E=[],b=!0,A=w.length-1;0<=A;A--){var N=w[A]|0;b&&N==g||(E[A]=N,b=!1)}this.g=E}var l={};function c(w){return-128<=w&&128>w?i(w,function(g){return new o([g|0],0>g?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return S(h(-w));for(var g=[],E=1,b=0;w>=E;b++)g[b]=w/E|0,E*=4294967296;return new o(g,0)}function p(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return S(p(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(g,8)),b=m,A=0;A<w.length;A+=8){var N=Math.min(8,w.length-A),k=parseInt(w.substring(A,A+N),g);8>N?(N=h(Math.pow(g,N)),b=b.j(N).add(h(k))):(b=b.j(E),b=b.add(h(k)))}return b}var m=c(0),y=c(1),I=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-S(this).m();for(var w=0,g=1,E=0;E<this.g.length;E++){var b=this.i(E);w+=(0<=b?b:4294967296+b)*g,g*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R(this))return"0";if(D(this))return"-"+S(this).toString(w);for(var g=h(Math.pow(w,6)),E=this,b="";;){var A=q(E,g).g;E=x(E,A.j(g));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=A,R(E))return N+b;for(;6>N.length;)N="0"+N;b=N+b}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function R(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function D(w){return w.h==-1}t.l=function(w){return w=x(this,w),D(w)?-1:R(w)?0:1};function S(w){for(var g=w.g.length,E=[],b=0;b<g;b++)E[b]=~w.g[b];return new o(E,~w.h).add(y)}t.abs=function(){return D(this)?S(this):this},t.add=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],b=0,A=0;A<=g;A++){var N=b+(this.i(A)&65535)+(w.i(A)&65535),k=(N>>>16)+(this.i(A)>>>16)+(w.i(A)>>>16);b=k>>>16,N&=65535,k&=65535,E[A]=k<<16|N}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(w,g){return w.add(S(g))}t.j=function(w){if(R(this)||R(w))return m;if(D(this))return D(w)?S(this).j(S(w)):S(S(this).j(w));if(D(w))return S(this.j(S(w)));if(0>this.l(I)&&0>w.l(I))return h(this.m()*w.m());for(var g=this.g.length+w.g.length,E=[],b=0;b<2*g;b++)E[b]=0;for(b=0;b<this.g.length;b++)for(var A=0;A<w.g.length;A++){var N=this.i(b)>>>16,k=this.i(b)&65535,Ae=w.i(A)>>>16,Ze=w.i(A)&65535;E[2*b+2*A]+=k*Ze,_(E,2*b+2*A),E[2*b+2*A+1]+=N*Ze,_(E,2*b+2*A+1),E[2*b+2*A+1]+=k*Ae,_(E,2*b+2*A+1),E[2*b+2*A+2]+=N*Ae,_(E,2*b+2*A+2)}for(b=0;b<g;b++)E[b]=E[2*b+1]<<16|E[2*b];for(b=g;b<2*g;b++)E[b]=0;return new o(E,0)};function _(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function T(w,g){this.g=w,this.h=g}function q(w,g){if(R(g))throw Error("division by zero");if(R(w))return new T(m,m);if(D(w))return g=q(S(w),g),new T(S(g.g),S(g.h));if(D(g))return g=q(w,S(g)),new T(S(g.g),g.h);if(30<w.g.length){if(D(w)||D(g))throw Error("slowDivide_ only works with positive integers.");for(var E=y,b=g;0>=b.l(w);)E=W(E),b=W(b);var A=$(E,1),N=$(b,1);for(b=$(b,2),E=$(E,2);!R(b);){var k=N.add(b);0>=k.l(w)&&(A=A.add(E),N=k),b=$(b,1),E=$(E,1)}return g=x(w,A.j(g)),new T(A,g)}for(A=m;0<=w.l(g);){for(E=Math.max(1,Math.floor(w.m()/g.m())),b=Math.ceil(Math.log(E)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),N=h(E),k=N.j(g);D(k)||0<k.l(w);)E-=b,N=h(E),k=N.j(g);R(N)&&(N=y),A=A.add(N),w=x(w,k)}return new T(A,w)}t.A=function(w){return q(this,w).h},t.and=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],b=0;b<g;b++)E[b]=this.i(b)&w.i(b);return new o(E,this.h&w.h)},t.or=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],b=0;b<g;b++)E[b]=this.i(b)|w.i(b);return new o(E,this.h|w.h)},t.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),E=[],b=0;b<g;b++)E[b]=this.i(b)^w.i(b);return new o(E,this.h^w.h)};function W(w){for(var g=w.g.length+1,E=[],b=0;b<g;b++)E[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(E,w.h)}function $(w,g){var E=g>>5;g%=32;for(var b=w.g.length-E,A=[],N=0;N<b;N++)A[N]=0<g?w.i(N+E)>>>g|w.i(N+E+1)<<32-g:w.i(N+E);return new o(A,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Vw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,ri=o}).apply(typeof Vy<"u"?Vy:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Uw,ta,Fw,xu,lf,zw,Bw,$w;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in f))break e;f=f[j]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,v=!1,j={next:function(){if(!v&&f<a.length){var V=f++;return{value:d(V,a[V]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(d,j)}}return function(){return a.apply(d,arguments)}}function y(a,d,f){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function I(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function R(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,j,V){for(var Q=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Q[Oe-2]=arguments[Oe];return d.prototype[j].apply(v,Q)}}function D(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function S(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(c(v)){const j=a.length||0,V=v.length||0;a.length=j+V;for(let Q=0;Q<V;Q++)a[j+Q]=v[Q]}else a.push(v)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function q(a){return q[" "](a),a}q[" "]=function(){};var W=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function $(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function w(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function g(a){const d={};for(const f in a)d[f]=a[f];return d}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,d){let f,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(f in v)a[f]=v[f];for(let V=0;V<E.length;V++)f=E[V],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function A(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function N(a){l.setTimeout(()=>{throw a},0)}function k(){var a=te;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ae{constructor(){this.h=this.g=null}add(d,f){const v=Ze.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var Ze=new x(()=>new St,a=>a.reset());class St{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ht,G=!1,te=new Ae,oe=()=>{const a=l.Promise.resolve(void 0);ht=()=>{a.then(ye)}};var ye=()=>{for(var a;a=k();){try{a.h.call(a.g)}catch(f){N(f)}var d=Ze;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}G=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function vt(a,d){if(ve.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(W){e:{try{q(d.nodeName);var j=!0;break e}catch{}j=!1}j||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ft[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&vt.aa.h.call(this)}}R(vt,ve);var ft={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),en=0;function it(a,d,f,v,j){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=j,this.key=++en,this.da=this.fa=!1}function Nt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ge(a){this.src=a,this.g={},this.h=0}Ge.prototype.add=function(a,d,f,v,j){var V=a.toString();a=this.g[V],a||(a=this.g[V]=[],this.h++);var Q=kt(a,d,v,j);return-1<Q?(d=a[Q],f||(d.fa=!1)):(d=new it(d,this.src,V,!!v,j),d.fa=f,a.push(d)),d};function _t(a,d){var f=d.type;if(f in a.g){var v=a.g[f],j=Array.prototype.indexOf.call(v,d,void 0),V;(V=0<=j)&&Array.prototype.splice.call(v,j,1),V&&(Nt(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function kt(a,d,f,v){for(var j=0;j<a.length;++j){var V=a[j];if(!V.da&&V.listener==d&&V.capture==!!f&&V.ha==v)return j}return-1}var tn="closure_lm_"+(1e6*Math.random()|0),De={};function Rn(a,d,f,v,j){if(Array.isArray(d)){for(var V=0;V<d.length;V++)Rn(a,d[V],f,v,j);return null}return f=Ue(f),a&&a[je]?a.K(d,f,h(v)?!!v.capture:!1,j):We(a,d,f,!1,v,j)}function We(a,d,f,v,j,V){if(!d)throw Error("Invalid event type");var Q=h(j)?!!j.capture:!!j,Oe=pe(a);if(Oe||(a[tn]=Oe=new Ge(a)),f=Oe.add(d,f,v,Q,V),f.proxy)return f;if(v=dn(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Ve||(j=Q),j===void 0&&(j=!1),a.addEventListener(d.toString(),v,j);else if(a.attachEvent)a.attachEvent(Ft(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function dn(){function a(f){return d.call(a.src,a.listener,f)}const d=C;return a}function pt(a,d,f,v,j){if(Array.isArray(d))for(var V=0;V<d.length;V++)pt(a,d[V],f,v,j);else v=h(v)?!!v.capture:!!v,f=Ue(f),a&&a[je]?(a=a.i,d=String(d).toString(),d in a.g&&(V=a.g[d],f=kt(V,f,v,j),-1<f&&(Nt(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete a.g[d],a.h--)))):a&&(a=pe(a))&&(d=a.g[d.toString()],a=-1,d&&(a=kt(d,f,v,j)),(f=-1<a?d[a]:null)&&Ut(f))}function Ut(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[je])_t(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(Ft(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=pe(d))?(_t(f,a),f.h==0&&(f.src=null,d[tn]=null)):Nt(a)}}}function Ft(a){return a in De?De[a]:De[a]="on"+a}function C(a,d){if(a.da)a=!0;else{d=new vt(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&Ut(a),a=f.call(v,d)}return a}function pe(a){return a=a[tn],a instanceof Ge?a:null}var ce="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ue(a){return typeof a=="function"?a:(a[ce]||(a[ce]=function(d){return a.handleEvent(d)}),a[ce])}function ke(){fe.call(this),this.i=new Ge(this),this.M=this,this.F=null}R(ke,fe),ke.prototype[je]=!0,ke.prototype.removeEventListener=function(a,d,f,v){pt(this,a,d,f,v)};function ot(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new ve(d,a);else if(d instanceof ve)d.target=d.target||a;else{var j=d;d=new ve(v,a),b(d,j)}if(j=!0,f)for(var V=f.length-1;0<=V;V--){var Q=d.g=f[V];j=$n(Q,v,!0,d)&&j}if(Q=d.g=a,j=$n(Q,v,!0,d)&&j,j=$n(Q,v,!1,d)&&j,f)for(V=0;V<f.length;V++)Q=d.g=f[V],j=$n(Q,v,!1,d)&&j}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)Nt(f[v]);delete a.g[d],a.h--}}this.F=null},ke.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},ke.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function $n(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var j=!0,V=0;V<d.length;++V){var Q=d[V];if(Q&&!Q.da&&Q.capture==f){var Oe=Q.listener,Pt=Q.ha||Q.src;Q.fa&&_t(a.i,Q),j=Oe.call(Pt,v)!==!1&&j}}return j&&!v.defaultPrevented}function or(a,d,f){if(typeof a=="function")f&&(a=y(a,f));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Ct(a){a.g=or(()=>{a.g=null,a.i&&(a.i=!1,Ct(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Yr extends fe{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Ct(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nn(a){fe.call(this),this.h=a,this.g={}}R(nn,fe);var Pn=[];function xr(a){$(a.g,function(d,f){this.g.hasOwnProperty(f)&&Ut(d)},a),a.g={}}nn.prototype.N=function(){nn.aa.N.call(this),xr(this)},nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Er=l.JSON.stringify,Us=l.JSON.parse,Fs=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ar(){}ar.prototype.h=null;function kr(a){return a.h||(a.h=a.i())}function Xr(){}var Wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hn(){ve.call(this,"d")}R(Hn,ve);function L(){ve.call(this,"c")}R(L,ve);var ne={},M=null;function F(){return M=M||new ke}ne.La="serverreachability";function J(a){ve.call(this,ne.La,a)}R(J,ve);function z(a){const d=F();ot(d,new J(d))}ne.STAT_EVENT="statevent";function Y(a,d){ve.call(this,ne.STAT_EVENT,a),this.stat=d}R(Y,ve);function se(a){const d=F();ot(d,new Y(d,a))}ne.Ma="timingevent";function be(a,d){ve.call(this,ne.Ma,a),this.size=d}R(be,ve);function Ce(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function me(){this.g=!0}me.prototype.xa=function(){this.g=!1};function at(a,d,f,v,j,V){a.info(function(){if(a.g)if(V)for(var Q="",Oe=V.split("&"),Pt=0;Pt<Oe.length;Pt++){var Se=Oe[Pt].split("=");if(1<Se.length){var Bt=Se[0];Se=Se[1];var $t=Bt.split("_");Q=2<=$t.length&&$t[1]=="type"?Q+(Bt+"="+Se+"&"):Q+(Bt+"=redacted&")}}else Q=null;else Q=V;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+d+`
`+f+`
`+Q})}function zt(a,d,f,v,j,V,Q){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+d+`
`+f+`
`+V+" "+Q})}function et(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+le(a,f)+(v?" "+v:"")})}function P(a,d){a.info(function(){return"TIMEOUT: "+d})}me.prototype.info=function(){};function le(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var V=j[0];if(V!="noop"&&V!="stop"&&V!="close")for(var Q=1;Q<j.length;Q++)j[Q]=""}}}}return Er(f)}catch{return d}}var _e={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hn;function wn(){}R(wn,ar),wn.prototype.g=function(){return new XMLHttpRequest},wn.prototype.i=function(){return{}},hn=new wn;function Rt(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zs}function zs(){this.i=null,this.g="",this.h=!1}var qn={},bi={};function fn(a,d,f){a.L=1,a.v=Tl(br(d)),a.m=f,a.P=!0,No(a,null)}function No(a,d){a.F=Date.now(),El(a),a.A=br(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),$m(f.i,"t",v),a.C=0,f=a.j.J,a.h=new zs,a.g=lg(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Yr(y(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(Pn[0]=j.toString()),j=Pn);for(var V=0;V<j.length;V++){var Q=Rn(f,j[V],v||d.handleEvent,!1,d.h||d);if(!Q)break;d.g[Q.key]=Q}d=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),z(),at(a.i,a.u,a.A,a.l,a.R,a.m)}Rt.prototype.ca=function(a){a=a.target;const d=this.M;d&&Tr(a)==3?d.j():this.Y(a)},Rt.prototype.Y=function(a){try{if(a==this.g)e:{const $t=Tr(this.g);var d=this.g.Ba();const Ai=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||Xm(this.g)))){this.J||$t!=4||d==7||(d==8||0>=Ai?z(3):z(2)),ld(this);var f=this.g.Z();this.X=f;t:if(Co(this)){var v=Xm(this.g);a="";var j=v.length,V=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bs(this),Ro(this);var Q="";break t}this.h.i=new l.TextDecoder}for(d=0;d<j;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(V&&d==j-1)});v.length=0,this.h.g+=a,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=f==200,zt(this.i,this.u,this.A,this.l,this.R,$t,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,Pt=this.g;if((Oe=Pt.g?Pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Oe)){var Se=Oe;break t}}Se=null}if(f=Se)et(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ud(this,f);else{this.o=!1,this.s=3,se(12),Bs(this),Ro(this);break e}}if(this.P){f=!0;let Kn;for(;!this.J&&this.C<Q.length;)if(Kn=ad(this,Q),Kn==bi){$t==4&&(this.s=4,se(14),f=!1),et(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==qn){this.s=4,se(15),et(this.i,this.l,Q,"[Invalid Chunk]"),f=!1;break}else et(this.i,this.l,Kn,null),ud(this,Kn);if(Co(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||Q.length!=0||this.h.h||(this.s=1,se(16),f=!1),this.o=this.o&&f,!f)et(this.i,this.l,Q,"[Invalid Chunked Response]"),Bs(this),Ro(this);else if(0<Q.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),md(Bt),Bt.M=!0,se(11))}}else et(this.i,this.l,Q,null),ud(this,Q);$t==4&&Bs(this),this.o&&!this.J&&($t==4?sg(this.j,this):(this.o=!1,El(this)))}else TE(this.g),f==400&&0<Q.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),Bs(this),Ro(this)}}}catch{}finally{}};function Co(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function ad(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?bi:(f=Number(d.substring(f,v)),isNaN(f)?qn:(v+=1,v+f>d.length?bi:(d=d.slice(v,v+f),a.C=v+f,d)))}Rt.prototype.cancel=function(){this.J=!0,Bs(this)};function El(a){a.S=Date.now()+a.I,Pm(a,a.I)}function Pm(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ce(y(a.ba,a),d)}function ld(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Rt.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(P(this.i,this.A),this.L!=2&&(z(),se(17)),Bs(this),this.s=2,Ro(this)):Pm(this,this.S-a)};function Ro(a){a.j.G==0||a.J||sg(a.j,a)}function Bs(a){ld(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,xr(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function ud(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||cd(f.h,a))){if(!a.K&&cd(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Rl(f),Nl(f);else break e;pd(f),se(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ce(y(f.Za,f),6e3));if(1>=Dm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ws(f,11)}else if((a.K||f.g==a)&&Rl(f),!_(d))for(j=f.Da.g.parse(d),d=0;d<j.length;d++){let Se=j[d];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];const Bt=Se[3];Bt!=null&&(f.la=Bt,f.j.info("VER="+f.la));const $t=Se[4];$t!=null&&(f.Aa=$t,f.j.info("SVER="+f.Aa));const Ai=Se[5];Ai!=null&&typeof Ai=="number"&&0<Ai&&(v=1.5*Ai,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Kn=a.g;if(Kn){const ql=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ql){var V=v.h;V.g||ql.indexOf("spdy")==-1&&ql.indexOf("quic")==-1&&ql.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(dd(V,V.h),V.h=null))}if(v.D){const gd=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;gd&&(v.ya=gd,Fe(v.I,v.D,gd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var Q=a;if(v.qa=ag(v,v.J?v.ia:null,v.W),Q.K){Om(v.h,Q);var Oe=Q,Pt=v.L;Pt&&(Oe.I=Pt),Oe.B&&(ld(Oe),El(Oe)),v.g=Q}else ng(v);0<f.i.length&&Cl(f)}else Se[0]!="stop"&&Se[0]!="close"||Ws(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ws(f,7):fd(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}z(4)}catch{}}var uE=class{constructor(a,d){this.g=a,this.map=d}};function qm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Dm(a){return a.h?1:a.g?a.g.size:0}function cd(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function dd(a,d){a.g?a.g.add(d):a.h=d}function Om(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}qm.prototype.cancel=function(){if(this.i=Mm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Mm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return D(a.i)}function cE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function dE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function Lm(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=dE(a),v=cE(a),j=v.length,V=0;V<j;V++)d.call(void 0,v[V],f&&f[V],a)}var Vm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hE(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),j=null;if(0<=v){var V=a[f].substring(0,v);j=a[f].substring(v+1)}else V=a[f];d(V,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function $s(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof $s){this.h=a.h,kl(this,a.j),this.o=a.o,this.g=a.g,bl(this,a.s),this.l=a.l;var d=a.i,f=new jo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Um(this,f),this.m=a.m}else a&&(d=String(a).match(Vm))?(this.h=!1,kl(this,d[1]||"",!0),this.o=Po(d[2]||""),this.g=Po(d[3]||"",!0),bl(this,d[4]),this.l=Po(d[5]||"",!0),Um(this,d[6]||"",!0),this.m=Po(d[7]||"")):(this.h=!1,this.i=new jo(null,this.h))}$s.prototype.toString=function(){var a=[],d=this.j;d&&a.push(qo(d,Fm,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(qo(d,Fm,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(qo(f,f.charAt(0)=="/"?mE:pE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",qo(f,yE)),a.join("")};function br(a){return new $s(a)}function kl(a,d,f){a.j=f?Po(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function bl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Um(a,d,f){d instanceof jo?(a.i=d,vE(a.i,a.h)):(f||(d=qo(d,gE)),a.i=new jo(d,a.h))}function Fe(a,d,f){a.i.set(d,f)}function Tl(a){return Fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Po(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function qo(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,fE),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function fE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Fm=/[#\/\?@]/g,pE=/[#\?:]/g,mE=/[#\?]/g,gE=/[#\?@]/g,yE=/#/g;function jo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Jr(a){a.g||(a.g=new Map,a.h=0,a.i&&hE(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=jo.prototype,t.add=function(a,d){Jr(this),this.i=null,a=Ti(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function zm(a,d){Jr(a),d=Ti(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Bm(a,d){return Jr(a),d=Ti(a,d),a.g.has(d)}t.forEach=function(a,d){Jr(this),this.g.forEach(function(f,v){f.forEach(function(j){a.call(d,j,v,this)},this)},this)},t.na=function(){Jr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const j=a[v];for(let V=0;V<j.length;V++)f.push(d[v])}return f},t.V=function(a){Jr(this);let d=[];if(typeof a=="string")Bm(this,a)&&(d=d.concat(this.g.get(Ti(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Jr(this),this.i=null,a=Ti(this,a),Bm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function $m(a,d,f){zm(a,d),0<f.length&&(a.i=null,a.g.set(Ti(a,d),D(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const V=encodeURIComponent(String(v)),Q=this.V(v);for(v=0;v<Q.length;v++){var j=V;Q[v]!==""&&(j+="="+encodeURIComponent(String(Q[v]))),a.push(j)}}return this.i=a.join("&")};function Ti(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function vE(a,d){d&&!a.j&&(Jr(a),a.i=null,a.g.forEach(function(f,v){var j=v.toLowerCase();v!=j&&(zm(this,v),$m(this,j,f))},a)),a.j=d}function _E(a,d){const f=new me;if(l.Image){const v=new Image;v.onload=I(Zr,f,"TestLoadImage: loaded",!0,d,v),v.onerror=I(Zr,f,"TestLoadImage: error",!1,d,v),v.onabort=I(Zr,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=I(Zr,f,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function wE(a,d){const f=new me,v=new AbortController,j=setTimeout(()=>{v.abort(),Zr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(V=>{clearTimeout(j),V.ok?Zr(f,"TestPingServer: ok",!0,d):Zr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(j),Zr(f,"TestPingServer: error",!1,d)})}function Zr(a,d,f,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(f)}catch{}}function xE(){this.g=new Fs}function EE(a,d,f){const v=f||"";try{Lm(a,function(j,V){let Q=j;h(j)&&(Q=Er(j)),d.push(v+V+"="+encodeURIComponent(Q))})}catch(j){throw d.push(v+"type="+encodeURIComponent("_badmap")),j}}function Il(a){this.l=a.Ub||null,this.j=a.eb||!1}R(Il,ar),Il.prototype.g=function(){return new Al(this.l,this.j)},Il.prototype.i=function(a){return function(){return a}}({});function Al(a,d){ke.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Al,ke),t=Al.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Oo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Oo(this)),this.g&&(this.readyState=3,Oo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Do(this):Oo(this),this.readyState==3&&Wm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Do(this))},t.Qa=function(a){this.g&&(this.response=a,Do(this))},t.ga=function(){this.g&&Do(this)};function Do(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Oo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Oo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Al.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Hm(a){let d="";return $(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function hd(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=Hm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Fe(a,d,f))}function tt(a){ke.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(tt,ke);var kE=/^https?$/i,bE=["POST","PUT"];t=tt.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hn.g(),this.v=this.o?kr(this.o):kr(hn),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(V){Km(this,V);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)f.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const V of v.keys())f.set(V,v.get(V));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(bE,d,void 0))||v||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Q]of f)this.g.setRequestHeader(V,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ym(this),this.u=!0,this.g.send(a),this.u=!1}catch(V){Km(this,V)}};function Km(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Gm(a),Sl(a)}function Gm(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),Sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sl(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Qm(this):this.bb())},t.bb=function(){Qm(this)};function Qm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Tr(a)!=4||a.Z()!=2)){if(a.u&&Tr(a)==4)or(a.Ea,0,a);else if(ot(a,"readystatechange"),Tr(a)==4){a.h=!1;try{const Q=a.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=Q===0){var j=String(a.D).match(Vm)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),v=!kE.test(j?j.toLowerCase():"")}f=v}if(f)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var V=2<Tr(a)?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.Z()+"]",Gm(a)}}finally{Sl(a)}}}}function Sl(a,d){if(a.g){Ym(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ot(a,"ready");try{f.onreadystatechange=v}catch{}}}function Ym(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Tr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Us(d)}};function Xm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function TE(a){const d={};a=(a.g&&2<=Tr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var f=A(a[v]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=d[j]||[];d[j]=V,V.push(f)}w(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Jm(a){this.Aa=0,this.i=[],this.j=new me,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,a),this.cb=Mo("retryDelaySeedMs",1e4,a),this.Wa=Mo("forwardChannelMaxRetries",2,a),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new qm(a&&a.concurrentRequestLimit),this.Da=new xE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jm.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){se(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=ag(this,null,this.W),Cl(this)};function fd(a){if(Zm(a),a.G==3){var d=a.U++,f=br(a.I);if(Fe(f,"SID",a.K),Fe(f,"RID",d),Fe(f,"TYPE","terminate"),Lo(a,f),d=new Rt(a,a.j,d),d.L=2,d.v=Tl(br(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=lg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),El(d)}og(a)}function Nl(a){a.g&&(md(a),a.g.cancel(),a.g=null)}function Zm(a){Nl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Rl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Cl(a){if(!jm(a.h)&&!a.s){a.s=!0;var d=a.Ga;ht||oe(),G||(ht(),G=!0),te.add(d,a),a.B=0}}function IE(a,d){return Dm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ce(y(a.Ga,a,d),ig(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new Rt(this,this.j,a);let V=this.o;if(this.S&&(V?(V=g(V),b(V,this.S)):V=this.S),this.m!==null||this.O||(j.H=V,V=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=tg(this,j,d),f=br(this.I),Fe(f,"RID",a),Fe(f,"CVER",22),this.D&&Fe(f,"X-HTTP-Session-Id",this.D),Lo(this,f),V&&(this.O?d="headers="+encodeURIComponent(String(Hm(V)))+"&"+d:this.m&&hd(f,this.m,V)),dd(this.h,j),this.Ua&&Fe(f,"TYPE","init"),this.P?(Fe(f,"$req",d),Fe(f,"SID","null"),j.T=!0,fn(j,f,null)):fn(j,f,d),this.G=2}}else this.G==3&&(a?eg(this,a):this.i.length==0||jm(this.h)||eg(this))};function eg(a,d){var f;d?f=d.l:f=a.U++;const v=br(a.I);Fe(v,"SID",a.K),Fe(v,"RID",f),Fe(v,"AID",a.T),Lo(a,v),a.m&&a.o&&hd(v,a.m,a.o),f=new Rt(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=tg(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),dd(a.h,f),fn(f,v,d)}function Lo(a,d){a.H&&$(a.H,function(f,v){Fe(d,v,f)}),a.l&&Lm({},function(f,v){Fe(d,v,f)})}function tg(a,d,f){f=Math.min(a.i.length,f);var v=a.l?y(a.l.Na,a.l,a):null;e:{var j=a.i;let V=-1;for(;;){const Q=["count="+f];V==-1?0<f?(V=j[0].g,Q.push("ofs="+V)):V=0:Q.push("ofs="+V);let Oe=!0;for(let Pt=0;Pt<f;Pt++){let Se=j[Pt].g;const Bt=j[Pt].map;if(Se-=V,0>Se)V=Math.max(0,j[Pt].g-100),Oe=!1;else try{EE(Bt,Q,"req"+Se+"_")}catch{v&&v(Bt)}}if(Oe){v=Q.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function ng(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;ht||oe(),G||(ht(),G=!0),te.add(d,a),a.v=0}}function pd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ce(y(a.Fa,a),ig(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,rg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ce(y(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,se(10),Nl(this),rg(this))};function md(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function rg(a){a.g=new Rt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=br(a.qa);Fe(d,"RID","rpc"),Fe(d,"SID",a.K),Fe(d,"AID",a.T),Fe(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Fe(d,"TO",a.ja),Fe(d,"TYPE","xmlhttp"),Lo(a,d),a.m&&a.o&&hd(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Tl(br(d)),f.m=null,f.P=!0,No(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Nl(this),pd(this),se(19))};function Rl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function sg(a,d){var f=null;if(a.g==d){Rl(a),md(a),a.g=null;var v=2}else if(cd(a.h,d))f=d.D,Om(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var j=a.B;v=F(),ot(v,new be(v,f)),Cl(a)}else ng(a);else if(j=d.s,j==3||j==0&&0<d.X||!(v==1&&IE(a,d)||v==2&&pd(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),j){case 1:Ws(a,5);break;case 4:Ws(a,10);break;case 3:Ws(a,6);break;default:Ws(a,2)}}}function ig(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Ws(a,d){if(a.j.info("Error code "+d),d==2){var f=y(a.fb,a),v=a.Xa;const j=!v;v=new $s(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||kl(v,"https"),Tl(v),j?_E(v.toString(),f):wE(v.toString(),f)}else se(2);a.G=0,a.l&&a.l.sa(d),og(a),Zm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),se(2)):(this.j.info("Failed to ping google.com"),se(1))};function og(a){if(a.G=0,a.ka=[],a.l){const d=Mm(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ka,d),S(a.ka,a.i),a.h.i.length=0,D(a.i),a.i.length=0),a.l.ra()}}function ag(a,d,f){var v=f instanceof $s?br(f):new $s(f);if(v.g!="")d&&(v.g=d+"."+v.g),bl(v,v.s);else{var j=l.location;v=j.protocol,d=d?d+"."+j.hostname:j.hostname,j=+j.port;var V=new $s(null);v&&kl(V,v),d&&(V.g=d),j&&bl(V,j),f&&(V.l=f),v=V}return f=a.D,d=a.ya,f&&d&&Fe(v,f,d),Fe(v,"VER",a.la),Lo(a,v),v}function lg(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new tt(new Il({eb:f})):new tt(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ug(){}t=ug.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Pl(){}Pl.prototype.g=function(a,d){return new xn(a,d)};function xn(a,d){ke.call(this),this.g=new Jm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ii(this)}R(xn,ke),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){fd(this.g)},xn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Er(a),a=f);d.i.push(new uE(d.Ya++,a)),d.G==3&&Cl(d)},xn.prototype.N=function(){this.g.l=null,delete this.j,fd(this.g),delete this.g,xn.aa.N.call(this)};function cg(a){Hn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}R(cg,Hn);function dg(){L.call(this),this.status=1}R(dg,L);function Ii(a){this.g=a}R(Ii,ug),Ii.prototype.ua=function(){ot(this.g,"a")},Ii.prototype.ta=function(a){ot(this.g,new cg(a))},Ii.prototype.sa=function(a){ot(this.g,new dg)},Ii.prototype.ra=function(){ot(this.g,"b")},Pl.prototype.createWebChannel=Pl.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,$w=function(){return new Pl},Bw=function(){return F()},zw=ne,lf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_e.NO_ERROR=0,_e.TIMEOUT=8,_e.HTTP_ERROR=6,xu=_e,bt.COMPLETE="complete",Fw=bt,Xr.EventType=Wn,Wn.OPEN="a",Wn.CLOSE="b",Wn.ERROR="c",Wn.MESSAGE="d",ke.prototype.listen=ke.prototype.K,ta=Xr,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,Uw=tt}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new Tp("@firebase/firestore");function Ko(){return di.logLevel}function re(t,...e){if(di.logLevel<=Ee.DEBUG){const n=e.map(Sp);di.debug(`Firestore (${ko}): ${t}`,...n)}}function Br(t,...e){if(di.logLevel<=Ee.ERROR){const n=e.map(Sp);di.error(`Firestore (${ko}): ${t}`,...n)}}function ho(t,...e){if(di.logLevel<=Ee.WARN){const n=e.map(Sp);di.warn(`Firestore (${ko}): ${t}`,...n)}}function Sp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${ko}) INTERNAL ASSERTION FAILED: `+t;throw Br(e),new Error(e)}function Pe(t,e){t||ue()}function he(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends wr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class lI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uI{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Or)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new Ww(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new Gt(e)}}class cI{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dI{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new cI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);const r=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new hI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=pI(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function fo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.timestamp=e}static fromTimestamp(e){return new de(e)}static min(){return new de(new Et(0,0))}static max(){return new de(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $a.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $a?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Be extends $a{construct(e,n,r){return new Be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new X(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Be(n)}static emptyPath(){return new Be([])}}const mI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends $a{construct(e,n,r){return new Dt(e,n,r)}static isValidIdentifier(e){return mI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new X(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new X(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new X(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(n)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.path=e}static fromPath(e){return new ie(Be.fromString(e))}static fromName(e){return new ie(Be.fromString(e).popFirst(5))}static empty(){return new ie(Be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new Be(e.slice()))}}function gI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new Et(n+1,0):new Et(n,r));return new Ss(s,ie.empty(),e)}function yI(t){return new Ss(t.readTime,t.key,-1)}class Ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ss(de.min(),ie.empty(),-1)}static max(){return new Ss(de.max(),ie.empty(),-1)}}function vI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==_I)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(s=>s?H.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new H((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new H((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function xI(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ll(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Np.oe=-1;function Vc(t){return t==null}function oc(t){return t===0&&1/t==-1/0}function EI(t){return typeof t=="number"&&Number.isInteger(t)&&!oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zl(this.root,e,this.comparator,!0)}}class Zl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??jt.RED,this.left=s??jt.EMPTY,this.right=i??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new jt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,s,i){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new bn([])}unionWith(e){let n=new Mt(Dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Gw("Invalid base64 string: "+i):i}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const kI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=kI.exec(t);if(Pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hi(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Rp(t){const e=t.mapValue.fields.__previous_value__;return Cp(e)?Rp(e):e}function Wa(t){const e=Ns(t.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,r,s,i,o,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class Ha{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ha("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ha&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu={mapValue:{}};function fi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cp(t)?4:II(t)?9007199254740991:TI(t)?10:11:ue()}function vr(t,e){if(t===e)return!0;const n=fi(t);if(n!==fi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wa(t).isEqual(Wa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ns(s.timestampValue),l=Ns(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hi(s.bytesValue).isEqual(hi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return lt(s.geoPointValue.latitude)===lt(i.geoPointValue.latitude)&&lt(s.geoPointValue.longitude)===lt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return lt(s.integerValue)===lt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=lt(s.doubleValue),l=lt(i.doubleValue);return o===l?oc(o)===oc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return fo(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Fy(o)!==Fy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!vr(o[c],l[c])))return!1;return!0}(t,e);default:return ue()}}function Ka(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function po(t,e){if(t===e)return 0;const n=fi(t),r=fi(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=lt(i.integerValue||i.doubleValue),c=lt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return By(t.timestampValue,e.timestampValue);case 4:return By(Wa(t),Wa(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(i,o){const l=hi(i),c=hi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=Ne(l[h],c[h]);if(p!==0)return p}return Ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ne(lt(i.latitude),lt(o.latitude));return l!==0?l:Ne(lt(i.longitude),lt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return $y(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,h,p;const m=i.fields||{},y=o.fields||{},I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,R=(c=y.value)===null||c===void 0?void 0:c.arrayValue,D=Ne(((h=I==null?void 0:I.values)===null||h===void 0?void 0:h.length)||0,((p=R==null?void 0:R.values)===null||p===void 0?void 0:p.length)||0);return D!==0?D:$y(I,R)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===eu.mapValue&&o===eu.mapValue)return 0;if(i===eu.mapValue)return 1;if(o===eu.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=o.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const y=Ne(c[m],p[m]);if(y!==0)return y;const I=po(l[c[m]],h[p[m]]);if(I!==0)return I}return Ne(c.length,p.length)}(t.mapValue,e.mapValue);default:throw ue()}}function By(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Ns(t),r=Ns(e),s=Ne(n.seconds,r.seconds);return s!==0?s:Ne(n.nanos,r.nanos)}function $y(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=po(n[s],r[s]);if(i)return i}return Ne(n.length,r.length)}function mo(t){return uf(t)}function uf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=uf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${uf(n.fields[o])}`;return s+"}"}(t.mapValue):ue()}function Wy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function cf(t){return!!t&&"integerValue"in t}function Pp(t){return!!t&&"arrayValue"in t}function Hy(t){return!!t&&"nullValue"in t}function Ky(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eu(t){return!!t&&"mapValue"in t}function TI(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ga(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return xi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ga(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ga(t.arrayValue.values[n]);return e}return Object.assign({},t)}function II(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ga(n)}setAll(e){let n=Dt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ga(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Eu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){xi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new mn(ga(this.value))}}function Qw(t){const e=[];return xi(t.fields,(n,r)=>{const s=new Dt([n]);if(Eu(r)){const i=Qw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Yt(e,0,de.min(),de.min(),de.min(),mn.empty(),0)}static newFoundDocument(e,n,r,s){return new Yt(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new Yt(e,2,n,de.min(),de.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,de.min(),de.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.position=e,this.inclusive=n}}function Gy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ie.comparator(ie.fromName(o.referenceValue),n.key):r=po(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n="asc"){this.field=e,this.dir=n}}function AI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{}class yt extends Yw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NI(e,n,r):n==="array-contains"?new PI(e,r):n==="in"?new qI(e,r):n==="not-in"?new jI(e,r):n==="array-contains-any"?new DI(e,r):new yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CI(e,r):new RI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(po(n,this.value)):n!==null&&fi(this.value)===fi(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends Yw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new sr(e,n)}matches(e){return Xw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xw(t){return t.op==="and"}function Jw(t){return SI(t)&&Xw(t)}function SI(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function df(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+mo(t.value);if(Jw(t))return t.filters.map(e=>df(e)).join(",");{const e=t.filters.map(n=>df(n)).join(",");return`${t.op}(${e})`}}function Zw(t,e){return t instanceof yt?function(r,s){return s instanceof yt&&r.op===s.op&&r.field.isEqual(s.field)&&vr(r.value,s.value)}(t,e):t instanceof sr?function(r,s){return s instanceof sr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Zw(o,s.filters[l]),!0):!1}(t,e):void ue()}function ex(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${mo(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(ex).join(" ,")+"}"}(t):"Filter"}class NI extends yt{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){const n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class CI extends yt{constructor(e,n){super(e,"in",n),this.keys=tx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RI extends yt{constructor(e,n){super(e,"not-in",n),this.keys=tx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}class PI extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pp(n)&&Ka(n.arrayValue,this.value)}}class qI extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ka(this.value.arrayValue,n)}}class jI extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ka(this.value.arrayValue,n)}}class DI extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Yy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new OI(t,e,n,r,s,i,o)}function qp(t){const e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>df(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>mo(r)).join(",")),e.ue=n}return e.ue}function jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Zw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qy(t.startAt,e.startAt)&&Qy(t.endAt,e.endAt)}function hf(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function MI(t,e,n,r,s,i,o,l){return new bo(t,e,n,r,s,i,o,l)}function Uc(t){return new bo(t)}function Xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nx(t){return t.collectionGroup!==null}function ya(t){const e=he(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Mt(Dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ga(i,r))}),n.has(Dt.keyField().canonicalString())||e.ce.push(new Ga(Dt.keyField(),r))}return e.ce}function mr(t){const e=he(t);return e.le||(e.le=LI(e,ya(t))),e.le}function LI(t,e){if(t.limitType==="F")return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ga(s.field,i)});const n=t.endAt?new ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ac(t.startAt.position,t.startAt.inclusive):null;return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ff(t,e){const n=t.filters.concat([e]);return new bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function lc(t,e,n){return new bo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fc(t,e){return jp(mr(t),mr(e))&&t.limitType===e.limitType}function rx(t){return`${qp(mr(t))}|lt:${t.limitType}`}function Ri(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>ex(s)).join(", ")}]`),Vc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>mo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>mo(s)).join(",")),`Target(${r})`}(mr(t))}; limitType=${t.limitType})`}function zc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ya(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const h=Gy(o,l,c);return o.inclusive?h<=0:h<0}(r.startAt,ya(r),s)||r.endAt&&!function(o,l,c){const h=Gy(o,l,c);return o.inclusive?h>=0:h>0}(r.endAt,ya(r),s))}(t,e)}function VI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sx(t){return(e,n)=>{let r=!1;for(const s of ya(t)){const i=UI(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function UI(t,e,n){const r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),h=l.data.field(i);return c!==null&&h!==null?po(c,h):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI=new Je(ie.comparator);function $r(){return FI}const ix=new Je(ie.comparator);function na(...t){let e=ix;for(const n of t)e=e.insert(n.key,n);return e}function ox(t){let e=ix;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zs(){return va()}function ax(){return va()}function va(){return new To(t=>t.toString(),(t,e)=>t.isEqual(e))}const zI=new Je(ie.comparator),BI=new Mt(ie.comparator);function xe(...t){let e=BI;for(const n of t)e=e.add(n);return e}const $I=new Mt(Ne);function WI(){return $I}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oc(e)?"-0":e}}function lx(t){return{integerValue:""+t}}function HI(t,e){return EI(e)?lx(e):Dp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(){this._=void 0}}function KI(t,e,n){return t instanceof Qa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Cp(i)&&(i=Rp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ya?cx(t,e):t instanceof Xa?dx(t,e):function(s,i){const o=ux(s,i),l=Jy(o)+Jy(s.Pe);return cf(o)&&cf(s.Pe)?lx(l):Dp(s.serializer,l)}(t,e)}function GI(t,e,n){return t instanceof Ya?cx(t,e):t instanceof Xa?dx(t,e):n}function ux(t,e){return t instanceof uc?function(r){return cf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qa extends Bc{}class Ya extends Bc{constructor(e){super(),this.elements=e}}function cx(t,e){const n=hx(e);for(const r of t.elements)n.some(s=>vr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Xa extends Bc{constructor(e){super(),this.elements=e}}function dx(t,e){let n=hx(e);for(const r of t.elements)n=n.filter(s=>!vr(s,r));return{arrayValue:{values:n}}}class uc extends Bc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jy(t){return lt(t.integerValue||t.doubleValue)}function hx(t){return Pp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.field=e,this.transform=n}}function YI(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ya&&s instanceof Ya||r instanceof Xa&&s instanceof Xa?fo(r.elements,s.elements,vr):r instanceof uc&&s instanceof uc?vr(r.Pe,s.Pe):r instanceof Qa&&s instanceof Qa}(t.transform,e.transform)}class XI{constructor(e,n){this.version=e,this.transformResults=n}}class an{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ku(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $c{}function fx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wc(t.key,an.none()):new ul(t.key,t.data,an.none());{const n=t.data,r=mn.empty();let s=new Mt(Dt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Os(t.key,r,new bn(s.toArray()),an.none())}}function JI(t,e,n){t instanceof ul?function(s,i,o){const l=s.value.clone(),c=e0(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Os?function(s,i,o){if(!ku(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=e0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(px(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof ul?function(i,o,l,c){if(!ku(i.precondition,o))return l;const h=i.value.clone(),p=t0(i.fieldTransforms,c,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Os?function(i,o,l,c){if(!ku(i.precondition,o))return l;const h=t0(i.fieldTransforms,c,o),p=o.data;return p.setAll(px(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return ku(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function ZI(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ux(r.transform,s||null);i!=null&&(n===null&&(n=mn.empty()),n.set(r.field,i))}return n||null}function Zy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&fo(r,s,(i,o)=>YI(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ul extends $c{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Os extends $c{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function px(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function e0(t,e,n){const r=new Map;Pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,GI(o,l,n[s]))}return r}function t0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,KI(i,o,e))}return r}class Wc extends $c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eA extends $c{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&JI(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ax();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=fx(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&fo(this.mutations,e.mutations,(n,r)=>Zy(n,r))&&fo(this.baseMutations,e.baseMutations,(n,r)=>Zy(n,r))}}class Op{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length);let s=function(){return zI}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Op(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Te;function sA(t){switch(t){default:return ue();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function mx(t){if(t===void 0)return Br("GRPC error has no .code"),B.UNKNOWN;switch(t){case mt.OK:return B.OK;case mt.CANCELLED:return B.CANCELLED;case mt.UNKNOWN:return B.UNKNOWN;case mt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case mt.INTERNAL:return B.INTERNAL;case mt.UNAVAILABLE:return B.UNAVAILABLE;case mt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case mt.NOT_FOUND:return B.NOT_FOUND;case mt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case mt.ABORTED:return B.ABORTED;case mt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case mt.DATA_LOSS:return B.DATA_LOSS;default:return ue()}}(Te=mt||(mt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new ri([4294967295,4294967295],0);function n0(t){const e=iA().encode(t),n=new Vw;return n.update(e),new Uint8Array(n.digest())}function r0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ri([n,r],0),new ri([s,i],0)]}class Mp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ra(`Invalid padding: ${n}`);if(r<0)throw new ra(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ra(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ri.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ri.fromNumber(r)));return s.compare(oA)===1&&(s=new ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=n0(e),[r,s]=r0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Mp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=n0(e),[r,s]=r0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,cl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hc(de.min(),s,new Je(Ne),$r(),xe())}}class cl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cl(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class gx{constructor(e,n){this.targetId=e,this.me=n}}class yx{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class s0{constructor(){this.fe=0,this.ge=o0(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),n=xe(),r=xe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue()}}),new cl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=o0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aA{constructor(e){this.Le=e,this.Be=new Map,this.ke=$r(),this.qe=i0(),this.Qe=new Je(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(hf(i))if(r===0){const o=new ie(i.path);this.Ue(n,o,Yt.newNoDocument(o,de.min()))}else Pe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=hi(r).toUint8Array()}catch(c){if(c instanceof Gw)return ho("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Mp(o,s,i)}catch(c){return ho(c instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&hf(l.target)){const c=new ie(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Yt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=xe();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const h=this.Je(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Hc(e,n,this.Qe,this.ke,r);return this.ke=$r(),this.qe=i0(),this.Qe=new Je(Ne),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new s0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Mt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new s0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function i0(){return new Je(ie.comparator)}function o0(){return new Je(ie.comparator)}const lA={asc:"ASCENDING",desc:"DESCENDING"},uA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cA={and:"AND",or:"OR"};class dA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pf(t,e){return t.useProto3Json||Vc(e)?e:{value:e}}function cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hA(t,e){return cc(t,e.toTimestamp())}function gr(t){return Pe(!!t),de.fromTimestamp(function(n){const r=Ns(n);return new Et(r.seconds,r.nanos)}(t))}function Lp(t,e){return mf(t,e).canonicalString()}function mf(t,e){const n=function(s){return new Be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _x(t){const e=Be.fromString(t);return Pe(bx(e)),e}function gf(t,e){return Lp(t.databaseId,e.path)}function Gd(t,e){const n=_x(e);if(n.get(1)!==t.databaseId.projectId)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(xx(n))}function wx(t,e){return Lp(t.databaseId,e)}function fA(t){const e=_x(t);return e.length===4?Be.emptyPath():xx(e)}function yf(t){return new Be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xx(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function a0(t,e,n){return{name:gf(t,e),fields:n.value.mapValue.fields}}function pA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Pe(p===void 0||typeof p=="string"),Vt.fromBase64String(p||"")):(Pe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Vt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?B.UNKNOWN:mx(h.code);return new X(p,h.message||"")}(o);n=new yx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Gd(t,r.document.name),i=gr(r.document.updateTime),o=r.document.createTime?gr(r.document.createTime):de.min(),l=new mn({mapValue:{fields:r.document.fields}}),c=Yt.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new bu(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Gd(t,r.document),i=r.readTime?gr(r.readTime):de.min(),o=Yt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new bu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Gd(t,r.document),i=r.removedTargetIds||[];n=new bu([],i,s,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new rA(s,i),l=r.targetId;n=new gx(l,o)}}return n}function mA(t,e){let n;if(e instanceof ul)n={update:a0(t,e.key,e.value)};else if(e instanceof Wc)n={delete:gf(t,e.key)};else if(e instanceof Os)n={update:a0(t,e.key,e.data),updateMask:bA(e.fieldMask)};else{if(!(e instanceof eA))return ue();n={verify:gf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Qa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ya)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof uc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:hA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue()}(t,e.precondition)),n}function gA(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?gr(s.updateTime):gr(i);return o.isEqual(de.min())&&(o=gr(i)),new XI(o,s.transformResults||[])}(n,e))):[]}function yA(t,e){return{documents:[wx(t,e.path)]}}function vA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wx(t,s);const i=function(h){if(h.length!==0)return kx(sr.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:Pi(y.field),direction:xA(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=pf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function _A(t){let e=fA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const y=Ex(m);return y instanceof sr&&Jw(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(R){return new Ga(qi(R.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,Vc(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,I=m.values||[];return new ac(I,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,I=m.values||[];return new ac(I,y)}(n.endAt)),MI(e,s,o,i,l,"F",c,h)}function wA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ex(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qi(n.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qi(n.unaryFilter.field);return yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qi(n.unaryFilter.field);return yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=qi(n.unaryFilter.field);return yt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return yt.create(qi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>Ex(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function xA(t){return lA[t]}function EA(t){return uA[t]}function kA(t){return cA[t]}function Pi(t){return{fieldPath:t.canonicalString()}}function qi(t){return Dt.fromServerFormat(t.fieldPath)}function kx(t){return t instanceof yt?function(n){if(n.op==="=="){if(Ky(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NAN"}};if(Hy(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ky(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NOT_NAN"}};if(Hy(n.value))return{unaryFilter:{field:Pi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pi(n.field),op:EA(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(s=>kx(s));return r.length===1?r[0]:{compositeFilter:{op:kA(n.op),filters:r}}}(t):ue()}function bA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r,s,i=de.min(),o=de.min(),l=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.ct=e}}function IA(t){const e=_A({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?lc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.un=new SA}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Ss.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class SA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Mt(Be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Mt(Be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new go(0)}static kn(){return new go(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.changes=new To(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&_a(r.mutation,s,bn.empty(),Et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const s=Zs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=na();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=$r();const o=va(),l=function(){return va()}();return n.forEach((c,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof Os)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),_a(p.mutation,h,p.mutation.getFieldMask(),Et.now())):o.set(h.key,bn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new CA(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=va();let s=new Je((o,l)=>o-l),i=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||bn.empty();p=l.applyToLocalView(h,p),r.set(c,p);const m=(s.get(l.batchId)||xe()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,m=ax();p.forEach(y=>{if(!i.has(y)){const I=fx(n.get(y),r.get(y));I!==null&&m.set(y,I),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):H.resolve(Zs());let l=-1,c=i;return o.next(h=>H.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?H.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,c,h,xe())).next(p=>({batchId:l,changes:ox(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let s=na();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=na();return this.indexManager.getCollectionParents(e,i).next(l=>H.forEach(l,c=>{const h=function(m,y){return new bo(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Yt.newInvalidDocument(p)))});let l=na();return o.forEach((c,h)=>{const p=i.get(c);p!==void 0&&_a(p.mutation,h,bn.empty(),Et.now()),zc(n,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:gr(s.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:IA(s.bundledQuery),readTime:gr(s.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(){this.overlays=new Je(ie.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zs();return H.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const s=Zs(),i=n.length+1,o=new ie(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return H.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Je((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Zs(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Zs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return H.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nA(n,r));let i=this.Ir.get(n);i===void 0&&(i=xe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(){this.Tr=new Mt(Tt.Er),this.dr=new Mt(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Tt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ie(new Be([])),r=new Tt(n,e),s=new Tt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ie(new Be([])),r=new Tt(n,e),s=new Tt(n,e+1);let i=xe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Tt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ie.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||ie.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Mt(Tt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tA(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Tt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),s=new Tt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Ne);return n.forEach(s=>{const i=new Tt(s,0),o=new Tt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ie.isDocumentKey(i)||(i=i.child(""));const o=new Tt(new ie(i),0);let l=new Mt(Ne);return this.br.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.wr)),!0)},o),H.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,s=>{const i=new Tt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Tt(n,0),s=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.Mr=e,this.docs=function(){return new Je(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let r=$r();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Yt.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=$r();const o=n.path,l=new ie(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||vI(yI(p),r)<=0||(s.has(p.key)||zc(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MA(this)}getSize(e){return H.resolve(this.size)}}class MA extends NA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e){this.persistence=e,this.Nr=new To(n=>qp(n),jp),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Vp,this.targetCount=0,this.kr=go.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new go(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Np(0),this.Kr=!1,this.Kr=!0,this.$r=new jA,this.referenceDelegate=e(this),this.Ur=new LA(this),this.indexManager=new AA,this.remoteDocumentCache=function(s){return new OA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new TA(n),this.Gr=new PA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new DA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){re("MemoryPersistence","Starting transaction:",e);const s=new UA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class UA extends wI{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Jr=new Vp,this.Yr=null}static Zr(e){return new Up(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const s=ie.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,de.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=xe(),s=xe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Fp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return z2()?8:xI(Zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new FA;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ko()<=Ee.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Ri(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Ko()<=Ee.DEBUG&&re("QueryEngine","Query:",Ri(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ko()<=Ee.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Ri(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mr(n))):H.resolve())}Yi(e,n){if(Xy(n))return H.resolve(null);let r=mr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=lc(n,null,"F"),r=mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=xe(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.ts(n,l);return this.ns(n,h,o,c.readTime)?this.Yi(e,lc(n,null,"F")):this.rs(e,h,n,c)}))})))}Zi(e,n,r,s){return Xy(n)||s.isEqual(de.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?H.resolve(null):(Ko()<=Ee.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ri(n)),this.rs(e,o,n,gI(s,-1)).next(l=>l))})}ts(e,n){let r=new Mt(sx(e));return n.forEach((s,i)=>{zc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ko()<=Ee.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Ri(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ss.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Je(Ne),this._s=new To(i=>qp(i),jp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $A(t,e,n,r){return new BA(t,e,n,r)}async function Tx(t,e){const n=he(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=xe();for(const h of s){o.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function WA(t,e){const n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,p){const m=h.batch,y=m.keys();let I=H.resolve();return y.forEach(R=>{I=I.next(()=>p.getEntry(c,R)).next(D=>{const S=h.docVersions.get(R);Pe(S!==null),D.version.compareTo(S)<0&&(m.applyToRemoteDocument(D,h),D.isValidDocument()&&(D.setReadTime(h.commitVersion),p.addEntry(D)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=xe();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ix(t){const e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function HA(t,e){const n=he(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const y=s.get(m);if(!y)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let I=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(Vt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,r)),s=s.insert(m,I),function(D,S,x){return D.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(y,I,p)&&l.push(n.Ur.updateTargetData(i,I))});let c=$r(),h=xe();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(KA(i,o,e.documentUpdates).next(p=>{c=p.Ps,h=p.Is})),!r.isEqual(de.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return H.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(n.os=s,i))}function KA(t,e,n){let r=xe(),s=xe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=$r();return n.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(de.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):re("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function GA(t,e){const n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function QA(t,e){const n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new fs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function vf(t,e,n){const r=he(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ll(o))throw o;re("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function l0(t,e,n){const r=he(t);let s=de.min(),i=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,p){const m=he(c),y=m._s.get(p);return y!==void 0?H.resolve(m.os.get(y)):m.Ur.getTargetData(h,p)}(r,o,mr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?i:xe())).next(l=>(YA(r,VI(e),l),{documents:l,Ts:i})))}function YA(t,e,n){let r=t.us.get(e)||de.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class u0{constructor(){this.activeTargetIds=WI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XA{constructor(){this.so=new u0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new u0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function Qd(){return tu===null?tu=function(){return 268435456+Math.round(2147483648*Math.random())}():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class tS extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Qd(),c=this.xo(n,r.toUriEncodedString());re("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,c,h,s).then(p=>(re("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ho("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",c,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ko}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=ZA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Qd();return new Promise((o,l)=>{const c=new Uw;c.setWithCredentials(!0),c.listenOnce(Fw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case xu.NO_ERROR:const p=c.getResponseJson();re(Kt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case xu.TIMEOUT:re(Kt,`RPC '${e}' ${i} timed out`),l(new X(B.DEADLINE_EXCEEDED,"Request time out"));break;case xu.HTTP_ERROR:const m=c.getStatus();if(re(Kt,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const I=y==null?void 0:y.error;if(I&&I.status&&I.message){const R=function(S){const x=S.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(x)>=0?x:B.UNKNOWN}(I.status);l(new X(R,I.message))}else l(new X(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new X(B.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{re(Kt,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);re(Kt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Qd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$w(),l=Bw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=i.join("");re(Kt,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=o.createWebChannel(p,c);let y=!1,I=!1;const R=new eS({Io:S=>{I?re(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,S):(y||(re(Kt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),re(Kt,`RPC '${e}' stream ${s} sending:`,S),m.send(S))},To:()=>m.close()}),D=(S,x,_)=>{S.listen(x,T=>{try{_(T)}catch(q){setTimeout(()=>{throw q},0)}})};return D(m,ta.EventType.OPEN,()=>{I||(re(Kt,`RPC '${e}' stream ${s} transport opened.`),R.yo())}),D(m,ta.EventType.CLOSE,()=>{I||(I=!0,re(Kt,`RPC '${e}' stream ${s} transport closed`),R.So())}),D(m,ta.EventType.ERROR,S=>{I||(I=!0,ho(Kt,`RPC '${e}' stream ${s} transport errored:`,S),R.So(new X(B.UNAVAILABLE,"The operation could not be completed")))}),D(m,ta.EventType.MESSAGE,S=>{var x;if(!I){const _=S.data[0];Pe(!!_);const T=_,q=T.error||((x=T[0])===null||x===void 0?void 0:x.error);if(q){re(Kt,`RPC '${e}' stream ${s} received error:`,q);const W=q.status;let $=function(E){const b=mt[E];if(b!==void 0)return mx(b)}(W),w=q.message;$===void 0&&($=B.INTERNAL,w="Unknown error status: "+W+" with message "+q.message),I=!0,R.So(new X($,w)),m.close()}else re(Kt,`RPC '${e}' stream ${s} received:`,_),R.bo(_)}}),D(l,zw.STAT_EVENT,S=>{S.stat===lf.PROXY?re(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):S.stat===lf.NOPROXY&&re(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function Yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return new dA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&re("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ax(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Br(n.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new X(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nS extends Sx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=pA(this.serializer,e),r=function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?gr(o.readTime):de.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=yf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=hf(c)?{documents:yA(i,c)}:{query:vA(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=vx(i,o.resumeToken);const h=pf(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(de.min())>0){l.readTime=cc(i,o.snapshotVersion.toTimestamp());const h=pf(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=wA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=yf(this.serializer),n.removeTarget=e,this.a_(n)}}class rS extends Sx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gA(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=yf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,mf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(B.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,mf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new X(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iS{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Br(n),this.D_=!1):re("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ei(this)&&(re("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=he(c);h.L_.add(4),await dl(h),h.q_.set("Unknown"),h.L_.delete(4),await Gc(h)}(this))})}),this.q_=new iS(r,s)}}async function Gc(t){if(Ei(t))for(const e of t.B_)await e(!0)}async function dl(t){for(const e of t.B_)await e(!1)}function Nx(t,e){const n=he(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Wp(n)?$p(n):Io(n).r_()&&Bp(n,e))}function zp(t,e){const n=he(t),r=Io(n);n.N_.delete(e),r.r_()&&Cx(n,e),n.N_.size===0&&(r.r_()?r.o_():Ei(n)&&n.q_.set("Unknown"))}function Bp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(t).A_(e)}function Cx(t,e){t.Q_.xe(e),Io(t).R_(e)}function $p(t){t.Q_=new aA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Io(t).start(),t.q_.v_()}function Wp(t){return Ei(t)&&!Io(t).n_()&&t.N_.size>0}function Ei(t){return he(t).L_.size===0}function Rx(t){t.Q_=void 0}async function aS(t){t.q_.set("Online")}async function lS(t){t.N_.forEach((e,n)=>{Bp(t,e)})}async function uS(t,e){Rx(t),Wp(t)?(t.q_.M_(e),$p(t)):t.q_.set("Unknown")}async function cS(t,e,n){if(t.q_.set("Online"),e instanceof yx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dc(t,r)}else if(e instanceof bu?t.Q_.Ke(e):e instanceof gx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(de.min()))try{const r=await Ix(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,h)=>{const p=i.N_.get(c);if(!p)return;i.N_.set(c,p.withResumeToken(Vt.EMPTY_BYTE_STRING,p.snapshotVersion)),Cx(i,c);const m=new fs(p.target,c,h,p.sequenceNumber);Bp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){re("RemoteStore","Failed to raise snapshot:",r),await dc(t,r)}}async function dc(t,e,n){if(!ll(e))throw e;t.L_.add(1),await dl(t),t.q_.set("Offline"),n||(n=()=>Ix(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{re("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Gc(t)})}function Px(t,e){return e().catch(n=>dc(t,n,e))}async function Qc(t){const e=he(t),n=Cs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dS(e);)try{const s=await GA(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,hS(e,s)}catch(s){await dc(e,s)}qx(e)&&jx(e)}function dS(t){return Ei(t)&&t.O_.length<10}function hS(t,e){t.O_.push(e);const n=Cs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function qx(t){return Ei(t)&&!Cs(t).n_()&&t.O_.length>0}function jx(t){Cs(t).start()}async function fS(t){Cs(t).p_()}async function pS(t){const e=Cs(t);for(const n of t.O_)e.m_(n.mutations)}async function mS(t,e,n){const r=t.O_.shift(),s=Op.from(r,e,n);await Px(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qc(t)}async function gS(t,e){e&&Cs(t).V_&&await async function(r,s){if(function(o){return sA(o)&&o!==B.ABORTED}(s.code)){const i=r.O_.shift();Cs(r).s_(),await Px(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qc(r)}}(t,e),qx(t)&&jx(t)}async function d0(t,e){const n=he(t);n.asyncQueue.verifyOperationInProgress(),re("RemoteStore","RemoteStore received new credentials");const r=Ei(n);n.L_.add(3),await dl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Gc(n)}async function yS(t,e){const n=he(t);e?(n.L_.delete(2),await Gc(n)):e||(n.L_.add(2),await dl(n),n.q_.set("Unknown"))}function Io(t){return t.K_||(t.K_=function(n,r,s){const i=he(n);return i.w_(),new nS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:aS.bind(null,t),Ro:lS.bind(null,t),mo:uS.bind(null,t),d_:cS.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Wp(t)?$p(t):t.q_.set("Unknown")):(await t.K_.stop(),Rx(t))})),t.K_}function Cs(t){return t.U_||(t.U_=function(n,r,s){const i=he(n);return i.w_(),new rS(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fS.bind(null,t),mo:gS.bind(null,t),f_:pS.bind(null,t),g_:mS.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Qc(t)):(await t.U_.stop(),t.O_.length>0&&(re("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Hp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kp(t,e){if(Br("AsyncQueue",`${e}: ${t}`),ll(t))return new X(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=na(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new Zi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.W_=new Je(ie.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class yo{constructor(e,n,r,s,i,o,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new yo(e,n,Zi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _S{constructor(){this.queries=f0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=he(n),i=s.queries;s.queries=f0(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new X(B.ABORTED,"Firestore shutting down"))}}function f0(){return new To(t=>rx(t),Fc)}async function Gp(t,e){const n=he(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new vS,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Kp(o,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Yp(n)}async function Qp(t,e){const n=he(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wS(t,e){const n=he(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Yp(n)}function xS(t,e,n){const r=he(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Yp(t){t.Y_.forEach(e=>{e.next()})}var _f,p0;(p0=_f||(_f={})).ea="default",p0.Cache="cache";class Xp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_f.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.key=e}}class Ox{constructor(e){this.key=e}}class ES{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=sx(e),this.Ra=new Zi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new h0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const y=s.get(p),I=zc(this.query,m)?m:null,R=!!y&&this.mutatedKeys.has(y.key),D=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let S=!1;y&&I?y.data.isEqual(I.data)?R!==D&&(r.track({type:3,doc:I}),S=!0):this.ga(y,I)||(r.track({type:2,doc:I}),S=!0,(c&&this.Aa(I,c)>0||h&&this.Aa(I,h)<0)&&(l=!0)):!y&&I?(r.track({type:0,doc:I}),S=!0):y&&!I&&(r.track({type:1,doc:y}),S=!0,(c||h)&&(l=!0)),S&&(I?(o=o.add(I),i=D?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(I,R){const D=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return D(I)-D(R)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,h=c!==this.Ea;return this.Ea=c,o.length!==0||h?{snapshot:new yo(this.query,e.Ra,i,o,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new h0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ox(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Dx(r))}),n}ba(e){this.Ta=e.Ts,this.da=xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return yo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class kS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class bS{constructor(e){this.key=e,this.va=!1}}class TS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new To(l=>rx(l),Fc),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(ie.comparator),this.Na=new Map,this.La=new Vp,this.Ba={},this.ka=new Map,this.qa=go.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function IS(t,e,n=!0){const r=zx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Mx(r,e,n,!0),s}async function AS(t,e){const n=zx(t);await Mx(n,e,!0,!1)}async function Mx(t,e,n,r){const s=await QA(t.localStore,mr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await SS(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Nx(t.remoteStore,s),l}async function SS(t,e,n,r,s){t.Ka=(m,y,I)=>async function(D,S,x,_){let T=S.view.ma(x);T.ns&&(T=await l0(D.localStore,S.query,!1).then(({documents:w})=>S.view.ma(w,T)));const q=_&&_.targetChanges.get(S.targetId),W=_&&_.targetMismatches.get(S.targetId)!=null,$=S.view.applyChanges(T,D.isPrimaryClient,q,W);return g0(D,S.targetId,$.wa),$.snapshot}(t,m,y,I);const i=await l0(t.localStore,e,!0),o=new ES(e,i.Ts),l=o.ma(i.documents),c=cl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,c);g0(t,n,h.wa);const p=new kS(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function NS(t,e,n){const r=he(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Fc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&zp(r.remoteStore,s.targetId),wf(r,s.targetId)}).catch(al)):(wf(r,s.targetId),await vf(r.localStore,s.targetId,!0))}async function CS(t,e){const n=he(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),zp(n.remoteStore,r.targetId))}async function RS(t,e,n){const r=LS(t);try{const s=await function(o,l){const c=he(o),h=Et.now(),p=l.reduce((I,R)=>I.add(R.key),xe());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",I=>{let R=$r(),D=xe();return c.cs.getEntries(I,p).next(S=>{R=S,R.forEach((x,_)=>{_.isValidDocument()||(D=D.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(I,R)).next(S=>{m=S;const x=[];for(const _ of l){const T=ZI(_,m.get(_.key).overlayedDocument);T!=null&&x.push(new Os(_.key,T,Qw(T.value.mapValue),an.exists(!0)))}return c.mutationQueue.addMutationBatch(I,h,x,l)}).next(S=>{y=S;const x=S.applyToLocalDocumentSet(m,D);return c.documentOverlayCache.saveOverlays(I,S.batchId,x)})}).then(()=>({batchId:y.batchId,changes:ox(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let h=o.Ba[o.currentUser.toKey()];h||(h=new Je(Ne)),h=h.insert(l,c),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await hl(r,s.changes),await Qc(r.remoteStore)}catch(s){const i=Kp(s,"Failed to persist write");n.reject(i)}}async function Lx(t,e){const n=he(t);try{const r=await HA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Pe(o.va):s.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),await hl(n,r,e)}catch(r){await al(r)}}function m0(t,e,n){const r=he(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=he(o);c.onlineState=l;let h=!1;c.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(l)&&(h=!0)}),h&&Yp(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PS(t,e,n){const r=he(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Je(ie.comparator);o=o.insert(i,Yt.newNoDocument(i,de.min()));const l=xe().add(i),c=new Hc(de.min(),new Map,new Je(Ne),o,l);await Lx(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Jp(r)}else await vf(r.localStore,e,!1).then(()=>wf(r,e,n)).catch(al)}async function qS(t,e){const n=he(t),r=e.batch.batchId;try{const s=await WA(n.localStore,e);Ux(n,r,null),Vx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hl(n,s)}catch(s){await al(s)}}async function jS(t,e,n){const r=he(t);try{const s=await function(o,l){const c=he(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(Pe(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>c.localDocuments.getDocuments(h,p))})}(r.localStore,e);Ux(r,e,n),Vx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hl(r,s)}catch(s){await al(s)}}function Vx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ux(t,e,n){const r=he(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function wf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Fx(t,r)})}function Fx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(zp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Jp(t))}function g0(t,e,n){for(const r of n)r instanceof Dx?(t.La.addReference(r.key,e),DS(t,r)):r instanceof Ox?(re("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Fx(t,r.key)):ue()}function DS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(re("SyncEngine","New document in limbo: "+n),t.xa.add(r),Jp(t))}function Jp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ie(Be.fromString(e)),r=t.qa.next();t.Na.set(r,new bS(n)),t.Oa=t.Oa.insert(n,r),Nx(t.remoteStore,new fs(mr(Uc(n.path)),r,"TargetPurposeLimboResolution",Np.oe))}}async function hl(t,e,n){const r=he(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Fp.Wi(c.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,h){const p=he(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(h,y=>H.forEach(y.$i,I=>p.persistence.referenceDelegate.addReference(m,y.targetId,I)).next(()=>H.forEach(y.Ui,I=>p.persistence.referenceDelegate.removeReference(m,y.targetId,I)))))}catch(m){if(!ll(m))throw m;re("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const I=p.os.get(y),R=I.snapshotVersion,D=I.withLastLimboFreeSnapshotVersion(R);p.os=p.os.insert(y,D)}}}(r.localStore,i))}async function OS(t,e){const n=he(t);if(!n.currentUser.isEqual(e)){re("SyncEngine","User change. New user:",e.toKey());const r=await Tx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new X(B.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hl(n,r.hs)}}function MS(t,e){const n=he(t),r=n.Na.get(e);if(r&&r.va)return xe().add(r.key);{let s=xe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function zx(t){const e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Lx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PS.bind(null,e),e.Ca.d_=wS.bind(null,e.eventManager),e.Ca.$a=xS.bind(null,e.eventManager),e}function LS(t){const e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jS.bind(null,e),e}class hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $A(this.persistence,new zA,e.initialUser,this.serializer)}Ga(e){return new VA(Up.Zr,this.serializer)}Wa(e){return new XA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hc.provider={build:()=>new hc};class xf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>m0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OS.bind(null,this.syncEngine),await yS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _S}()}createDatastore(e){const n=Kc(e.databaseInfo.databaseId),r=function(i){return new tS(i)}(e.databaseInfo);return function(i,o,l,c){return new sS(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new oS(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>m0(this.syncEngine,n,0),function(){return c0.D()?new c0:new JA}())}createSyncEngine(e,n){return function(s,i,o,l,c,h,p){const m=new TS(s,i,o,l,c,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=he(s);re("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await dl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}xf.provider={build:()=>new xf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Gt.UNAUTHENTICATED,this.clientId=Hw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{re("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(re("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Kp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xd(t,e){t.asyncQueue.verifyOperationInProgress(),re("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Tx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function y0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await US(t);re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>d0(e.remoteStore,s)),t._onlineComponents=e}async function US(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ho("Error using user provided cache. Falling back to memory cache: "+n),await Xd(t,new hc)}}else re("FirestoreClient","Using default OfflineComponentProvider"),await Xd(t,new hc);return t._offlineComponents}async function Bx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re("FirestoreClient","Using user provided OnlineComponentProvider"),await y0(t,t._uninitializedComponentsProvider._online)):(re("FirestoreClient","Using default OnlineComponentProvider"),await y0(t,new xf))),t._onlineComponents}function FS(t){return Bx(t).then(e=>e.syncEngine)}async function fc(t){const e=await Bx(t),n=e.eventManager;return n.onListen=IS.bind(null,e.syncEngine),n.onUnlisten=NS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CS.bind(null,e.syncEngine),n}function zS(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new Zp({next:y=>{p.Za(),o.enqueueAndForget(()=>Qp(i,m));const I=y.docs.has(l);!I&&y.fromCache?h.reject(new X(B.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&y.fromCache&&c&&c.source==="server"?h.reject(new X(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new Xp(Uc(l.path),p,{includeMetadataChanges:!0,_a:!0});return Gp(i,m)}(await fc(t),t.asyncQueue,e,n,r)),r.promise}function BS(t,e,n={}){const r=new Or;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,h){const p=new Zp({next:y=>{p.Za(),o.enqueueAndForget(()=>Qp(i,m)),y.fromCache&&c.source==="server"?h.reject(new X(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new Xp(l,p,{includeMetadataChanges:!0,_a:!0});return Gp(i,m)}(await fc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t,e,n){if(!n)throw new X(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $S(t,e,n,r){if(e===!0&&r===!0)throw new X(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _0(t){if(!ie.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w0(t){if(ie.isDocumentKey(t))throw new X(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Yc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yc(t);throw new X(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function WS(t,e){if(e<=0)throw new X(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new X(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$S("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$x((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new X(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new X(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new X(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aI;switch(r.type){case"firstParty":return new dI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new X(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=v0.get(n);r&&(re("ComponentProvider","Removing Datastore"),v0.delete(n),r.terminate())}(this),Promise.resolve()}}function HS(t,e,n,r={}){var s;const i=(t=ln(t,Xc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=Gt.MOCK_USER;else{l=qw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new X(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Gt(h)}t._authCredentials=new lI(new Ww(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kr(this.firestore,e,this._query)}}class Xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xt(this.firestore,e,this._key)}}class bs extends Kr{constructor(e,n,r){super(e,n,Uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new ie(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function qe(t,e,...n){if(t=Me(t),Wx("collection","path",e),t instanceof Xc){const r=Be.fromString(e,...n);return w0(r),new bs(t,null,r)}{if(!(t instanceof Xt||t instanceof bs))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return w0(r),new bs(t.firestore,null,r)}}function ge(t,e,...n){if(t=Me(t),arguments.length===1&&(e=Hw.newId()),Wx("doc","path",e),t instanceof Xc){const r=Be.fromString(e,...n);return _0(r),new Xt(t,null,new ie(r))}{if(!(t instanceof Xt||t instanceof bs))throw new X(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Be.fromString(e,...n));return _0(r),new Xt(t.firestore,t instanceof bs?t.converter:null,new ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ax(this,"async_queue_retry"),this.Vu=()=>{const r=Yd();r&&re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Or;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ll(e))throw e;re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Br("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Hp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function k0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class _r extends Xc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new E0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E0(e),this._firestoreClient=void 0,await e}}}function KS(t,e){const n=typeof t=="object"?t:Ap(),r=typeof t=="string"?t:"(default)",s=Lc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Cw("firestore");i&&HS(s,...i)}return s}function fl(t){if(t._terminated)throw new X(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GS(t),t._firestoreClient}function GS(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,h,p){return new bI(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,$x(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new VS(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vo(Vt.fromBase64String(e))}catch(n){throw new X(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vo(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=/^__.*__$/;class YS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Os(e,this.data,this.fieldMask,n,this.fieldTransforms):new ul(e,this.data,n,this.fieldTransforms)}}class Hx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Os(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Kx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class nm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new nm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Kx(this.Cu)&&QS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class XS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Kc(e)}Qu(e,n,r,s=!1){return new nm({Cu:e,methodName:n,qu:r,path:Dt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ml(t){const e=t._freezeSettings(),n=Kc(t._databaseId);return new XS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function rm(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);im("Data must be an object, but it was:",o,r);const l=Yx(r,o);let c,h;if(i.merge)c=new bn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const y=Ef(e,m,n);if(!o.contains(y))throw new X(B.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);Jx(p,y)||p.push(y)}c=new bn(p),h=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=o.fieldTransforms;return new YS(new mn(l),c,h)}class Zc extends Jc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zc}}class sm extends Jc{_toFieldTransform(e){return new QI(e.path,new Qa)}isEqual(e){return e instanceof sm}}function Gx(t,e,n,r){const s=t.Qu(1,e,n);im("Data must be an object, but it was:",s,r);const i=[],o=mn.empty();xi(r,(c,h)=>{const p=om(e,c,n);h=Me(h);const m=s.Nu(p);if(h instanceof Zc)i.push(p);else{const y=gl(h,m);y!=null&&(i.push(p),o.set(p,y))}});const l=new bn(i);return new Hx(o,l,s.fieldTransforms)}function Qx(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Ef(e,r,n)],c=[s];if(i.length%2!=0)throw new X(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)l.push(Ef(e,i[y])),c.push(i[y+1]);const h=[],p=mn.empty();for(let y=l.length-1;y>=0;--y)if(!Jx(h,l[y])){const I=l[y];let R=c[y];R=Me(R);const D=o.Nu(I);if(R instanceof Zc)h.push(I);else{const S=gl(R,D);S!=null&&(h.push(I),p.set(I,S))}}const m=new bn(h);return new Hx(p,m,o.fieldTransforms)}function JS(t,e,n,r=!1){return gl(n,t.Qu(r?4:3,e))}function gl(t,e){if(Xx(t=Me(t)))return im("Unsupported field value:",e,t),Yx(t,e);if(t instanceof Jc)return function(r,s){if(!Kx(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=gl(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Et.fromDate(r);return{timestampValue:cc(s.serializer,i)}}if(r instanceof Et){const i=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cc(s.serializer,i)}}if(r instanceof em)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vo)return{bytesValue:vx(s.serializer,r._byteString)};if(r instanceof Xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof tm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return Dp(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Yc(r)}`)}(t,e)}function Yx(t,e){const n={};return Kw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xi(t,(r,s)=>{const i=gl(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Xx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof em||t instanceof vo||t instanceof Xt||t instanceof Jc||t instanceof tm)}function im(t,e,n){if(!Xx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Yc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ef(t,e,n){if((e=Me(e))instanceof pl)return e._internalPath;if(typeof e=="string")return om(t,e);throw pc("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZS=new RegExp("[~\\*/\\[\\]]");function om(t,e,n){if(e.search(ZS)>=0)throw pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pl(...e.split("."))._internalPath}catch{throw pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new X(B.INVALID_ARGUMENT,l+t+c)}function Jx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ed("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eN extends Zx{data(){return super.data()}}function ed(t,e){return typeof e=="string"?om(t,e):e instanceof pl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class am{}class lm extends am{}function ct(t,e,...n){let r=[];e instanceof am&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof um).length,l=i.filter(c=>c instanceof td).length;if(o>1||o>0&&l>0)throw new X(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class td extends lm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new td(e,n,r)}_apply(e){const n=this._parse(e);return t1(e._query,n),new Kr(e.firestore,e.converter,ff(e._query,n))}_parse(e){const n=ml(e.firestore);return function(i,o,l,c,h,p,m){let y;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new X(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){T0(m,p);const I=[];for(const R of m)I.push(b0(c,i,R));y={arrayValue:{values:I}}}else y=b0(c,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||T0(m,p),y=JS(l,o,m,p==="in"||p==="not-in");return yt.create(h,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Rs(t,e,n){const r=e,s=ed("where",t);return td._create(s,r,n)}class um extends am{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new um(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)t1(o,c),o=ff(o,c)}(e._query,n),new Kr(e.firestore,e.converter,ff(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cm extends lm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new X(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ga(i,o)}(e._query,this._field,this._direction);return new Kr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new bo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ps(t,e="asc"){const n=e,r=ed("orderBy",t);return cm._create(r,n)}class dm extends lm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dm(e,n,r)}_apply(e){return new Kr(e.firestore,e.converter,lc(e._query,this._limit,this._limitType))}}function pi(t){return WS("limit",t),dm._create("limit",t,"F")}function b0(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new X(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nx(e)&&n.indexOf("/")!==-1)throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Be.fromString(n));if(!ie.isDocumentKey(r))throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wy(t,new ie(r))}if(n instanceof Xt)return Wy(t,n._key);throw new X(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yc(n)}.`)}function T0(t,e){if(!Array.isArray(t)||t.length===0)throw new X(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function t1(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new X(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class tN{convertValue(e,n="none"){switch(fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>lt(o.doubleValue));return new tm(i)}convertGeoPoint(e){return new em(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wa(e));default:return null}}convertTimestamp(e){const n=Ns(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Be.fromString(e);Pe(bx(r));const s=new Ha(r.get(1),r.get(3)),i=new ie(r.popFirst(5));return s.isEqual(n)||Br(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class n1 extends Zx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ed("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Tu extends n1{data(e={}){return super.data(e)}}class r1{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new sa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Tu(this._firestore,this._userDataWriter,r.key,r,new sa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Tu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new sa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Tu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new sa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:nN(l.type),doc:c,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t){t=ln(t,Xt);const e=ln(t.firestore,_r);return zS(fl(e),t._key).then(n=>s1(e,t,n))}class fm extends tN{constructor(e){super(),this.firestore=e}convertBytes(e){return new vo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,n)}}function zn(t){t=ln(t,Kr);const e=ln(t.firestore,_r),n=fl(e),r=new fm(e);return e1(t._query),BS(n,t._query).then(s=>new r1(e,r,t,s))}function Gr(t,e,n){t=ln(t,Xt);const r=ln(t.firestore,_r),s=hm(t.converter,e,n);return yl(r,[rm(ml(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,an.none())])}function dt(t,e,n,...r){t=ln(t,Xt);const s=ln(t.firestore,_r),i=ml(s);let o;return o=typeof(e=Me(e))=="string"||e instanceof pl?Qx(i,"updateDoc",t._key,e,n,r):Gx(i,"updateDoc",t._key,e),yl(s,[o.toMutation(t._key,an.exists(!0))])}function Ms(t){return yl(ln(t.firestore,_r),[new Wc(t._key,an.none())])}function ki(t,e){const n=ln(t.firestore,_r),r=ge(t),s=hm(t.converter,e);return yl(n,[rm(ml(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then(()=>r)}function ir(t,...e){var n,r,s;t=Me(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||k0(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(k0(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let c,h,p;if(t instanceof Xt)h=ln(t.firestore,_r),p=Uc(t._key.path),c={next:m=>{e[o]&&e[o](s1(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=ln(t,Kr);h=ln(m.firestore,_r),p=m._query;const y=new fm(h);c={next:I=>{e[o]&&e[o](new r1(h,y,m,I))},error:e[o+1],complete:e[o+2]},e1(t._query)}return function(y,I,R,D){const S=new Zp(D),x=new Xp(I,S,R);return y.asyncQueue.enqueueAndForget(async()=>Gp(await fc(y),x)),()=>{S.Za(),y.asyncQueue.enqueueAndForget(async()=>Qp(await fc(y),x))}}(fl(h),p,l,c)}function yl(t,e){return function(r,s){const i=new Or;return r.asyncQueue.enqueueAndForget(async()=>RS(await FS(r),s,i)),i.promise}(fl(t),e)}function s1(t,e,n){const r=n.docs.get(e._key),s=new fm(t);return new n1(t,s,e._key,r,new sa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ml(e)}set(e,n,r){this._verifyNotCommitted();const s=Jd(e,this._firestore),i=hm(s.converter,n,r),o=rm(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,an.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Jd(e,this._firestore);let o;return o=typeof(n=Me(n))=="string"||n instanceof pl?Qx(this._dataReader,"WriteBatch.update",i._key,n,r,s):Gx(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,an.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Jd(e,this._firestore);return this._mutations=this._mutations.concat(new Wc(n._key,an.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new X(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Jd(t,e){if((t=Me(t)).firestore!==e)throw new X(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Ke(){return new sm("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){return fl(t=ln(t,_r)),new rN(t,e=>yl(t,e))}(function(e,n=!0){(function(s){ko=s})(wi),ci(new As("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new _r(new uI(r.getProvider("auth-internal")),new fI(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new X(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ha(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),pr(Uy,"4.7.3",e),pr(Uy,"4.7.3","esm2017")})();function pm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function i1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sN=i1,o1=new il("auth","Firebase",i1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Tp("@firebase/auth");function iN(t,...e){mc.logLevel<=Ee.WARN&&mc.warn(`Auth (${wi}): ${t}`,...e)}function Iu(t,...e){mc.logLevel<=Ee.ERROR&&mc.error(`Auth (${wi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw gm(t,...e)}function nr(t,...e){return gm(t,...e)}function mm(t,e,n){const r=Object.assign(Object.assign({},sN()),{[e]:n});return new il("auth","Firebase",r).create(e,{appName:t.name})}function Mr(t){return mm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Bn(t,"argument-error"),mm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return o1.create(t,...e)}function ae(t,e,...n){if(!t)throw gm(e,...n)}function Pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Iu(e),new Error(e)}function Wr(t,e){t||Pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aN(){return I0()==="http:"||I0()==="https:"}function I0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aN()||V2()||"connection"in navigator)?navigator.onLine:!0}function uN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wr(n>e,"Short delay should be less than long delay!"),this.isMobile=O2()||U2()}get(){return lN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e){Wr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new vl(3e4,6e4);function Ls(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Qr(t,e,n,r,s={}){return l1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ol(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:c},i);return L2()||(h.referrerPolicy="no-referrer"),a1.fetch()(u1(t,t.config.apiHost,n,l),h)})}async function l1(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},cN),e);try{const s=new fN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw nu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw nu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw nu(t,"user-disabled",o);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mm(t,p,h);Bn(t,p)}}catch(s){if(s instanceof wr)throw s;Bn(t,"network-request-failed",{message:String(s)})}}async function _l(t,e,n,r,s={}){const i=await Qr(t,e,n,r,s);return"mfaPendingCredential"in i&&Bn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function u1(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?ym(t.config,s):`${t.config.apiScheme}://${s}`}function hN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),dN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=nr(t,e,r);return s.customData._tokenResponse=n,s}function A0(t){return t!==void 0&&t.enterprise!==void 0}class pN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function mN(t,e){return Qr(t,"GET","/v2/recaptchaConfig",Ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(t,e){return Qr(t,"POST","/v1/accounts:delete",e)}async function c1(t,e){return Qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yN(t,e=!1){const n=Me(t),r=await n.getIdToken(e),s=vm(r);ae(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:wa(Zd(s.auth_time)),issuedAtTime:wa(Zd(s.iat)),expirationTime:wa(Zd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Zd(t){return Number(t)*1e3}function vm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{const s=Sw(n);return s?JSON.parse(s):(Iu("Failed to decode base64 JWT payload"),null)}catch(s){return Iu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function S0(t){const e=vm(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _o(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof wr&&vN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function vN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wa(this.lastLoginAt),this.creationTime=wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await _o(t,c1(n,{idToken:r}));ae(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?d1(i.providerUserInfo):[],l=xN(t.providerData,o),c=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new bf(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function wN(t){const e=Me(t);await gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function d1(t){return t.map(e=>{var{providerId:n}=e,r=pm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e){const n=await l1(t,{},async()=>{const r=ol({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=u1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",a1.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kN(t,e){return Qr(t,"POST","/v2/accounts:revokeToken",Ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=S0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await EN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new eo;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ae(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ae(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eo,this.toJSON())}_performRefresh(){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=pm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _N(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await _o(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yN(this,e)}reload(){return wN(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zn(this.auth.app))return Promise.reject(Mr(this.auth));const e=await this.getIdToken();return await _o(this,gN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(s=n.email)!==null&&s!==void 0?s:void 0,I=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,D=(l=n.tenantId)!==null&&l!==void 0?l:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:T,emailVerified:q,isAnonymous:W,providerData:$,stsTokenManager:w}=n;ae(T&&w,e,"internal-error");const g=eo.fromJSON(this.name,w);ae(typeof T=="string",e,"internal-error"),ts(m,e.name),ts(y,e.name),ae(typeof q=="boolean",e,"internal-error"),ae(typeof W=="boolean",e,"internal-error"),ts(I,e.name),ts(R,e.name),ts(D,e.name),ts(S,e.name),ts(x,e.name),ts(_,e.name);const E=new qr({uid:T,auth:e,email:y,emailVerified:q,displayName:m,isAnonymous:W,photoURL:R,phoneNumber:I,tenantId:D,stsTokenManager:g,createdAt:x,lastLoginAt:_});return $&&Array.isArray($)&&(E.providerData=$.map(b=>Object.assign({},b))),S&&(E._redirectEventId=S),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new eo;s.updateFromServerResponse(n);const i=new qr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await gc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ae(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?d1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new eo;l.updateFromIdToken(r);const c=new qr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new bf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map;function jr(t){Wr(t instanceof Function,"Expected a class definition");let e=N0.get(t);return e?(Wr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,N0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}h1.type="NONE";const C0=h1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(t,e,n){return`firebase:${t}:${e}:${n}`}class to{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Au(this.userKey,s.apiKey,i),this.fullPersistenceKey=Au("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new to(jr(C0),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||jr(C0);const o=Au(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=qr._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const c=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new to(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new to(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v1(e))return"Blackberry";if(_1(e))return"Webos";if(p1(e))return"Safari";if((e.includes("chrome/")||m1(e))&&!e.includes("edge/"))return"Chrome";if(y1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function f1(t=Zt()){return/firefox\//i.test(t)}function p1(t=Zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m1(t=Zt()){return/crios\//i.test(t)}function g1(t=Zt()){return/iemobile/i.test(t)}function y1(t=Zt()){return/android/i.test(t)}function v1(t=Zt()){return/blackberry/i.test(t)}function _1(t=Zt()){return/webos/i.test(t)}function _m(t=Zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bN(t=Zt()){var e;return _m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TN(){return F2()&&document.documentMode===10}function w1(t=Zt()){return _m(t)||y1(t)||_1(t)||v1(t)||/windows phone/i.test(t)||g1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t,e=[]){let n;switch(t){case"Browser":n=R0(Zt());break;case"Worker":n=`${R0(Zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${wi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e={}){return Qr(t,"GET","/v2/passwordPolicy",Ls(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=6;class NN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P0(this),this.idTokenSubscription=new P0(this),this.beforeStateQueue=new IN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await to.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await c1(this,{idToken:e}),r=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zn(this.app))return Promise.reject(Mr(this));const n=e?Me(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zn(this.app)?Promise.reject(Mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zn(this.app)?Promise.reject(Mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AN(this),n=new NN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new il("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await to.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=x1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&iN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Vs(t){return Me(t)}class P0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Q2(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RN(t){rd=t}function E1(t){return rd.loadJS(t)}function PN(){return rd.recaptchaEnterpriseScript}function qN(){return rd.gapiScript}function jN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const DN="recaptcha-enterprise",ON="NO_RECAPTCHA";class MN{constructor(e){this.type=DN,this.auth=Vs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{mN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new pN(c);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;A0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(ON)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&A0(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=PN();c.length!==0&&(c+=l),E1(c).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function q0(t,e,n,r=!1){const s=new MN(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Tf(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await q0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await q0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e){const n=Lc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(sc(i,e??{}))return s;Bn(s,"already-initialized")}return n.initialize({options:e})}function VN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function UN(t,e,n){const r=Vs(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=k1(e),{host:o,port:l}=FN(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),zN()}function k1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function FN(t){const e=k1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:j0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:j0(o)}}}function j0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,n){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}async function BN(t,e){return Qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(t,e){return _l(t,"POST","/v1/accounts:signInWithPassword",Ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){return _l(t,"POST","/v1/accounts:signInWithEmailLink",Ls(t,e))}async function HN(t,e){return _l(t,"POST","/v1/accounts:signInWithEmailLink",Ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends wm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ja(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ja(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tf(e,n,"signInWithPassword",$N);case"emailLink":return WN(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tf(e,r,"signUpPassword",BN);case"emailLink":return HN(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t,e){return _l(t,"POST","/v1/accounts:signInWithIdp",Ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN="http://localhost";class mi extends wm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=pm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new mi(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return no(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,no(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,no(e,n)}buildRequest(){const e={requestUri:KN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ol(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QN(t){const e=Zo(ea(t)).link,n=e?Zo(ea(e)).deep_link_id:null,r=Zo(ea(t)).deep_link_id;return(r?Zo(ea(r)).link:null)||r||n||e||t}class xm{constructor(e){var n,r,s,i,o,l;const c=Zo(ea(e)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=GN((s=c.mode)!==null&&s!==void 0?s:null);ae(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=QN(e);try{return new xm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.providerId=So.PROVIDER_ID}static credential(e,n){return Ja._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=xm.parseLink(n);return ae(r,"argument-error"),Ja._fromEmailAndCode(e,r.code,r.tenantId)}}So.PROVIDER_ID="password";So.EMAIL_PASSWORD_SIGN_IN_METHOD="password";So.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Em{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends wl{constructor(){super("facebook.com")}static credential(e){return mi._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return os.credential(e.oauthAccessToken)}catch{return null}}}os.FACEBOOK_SIGN_IN_METHOD="facebook.com";os.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return mi._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Nr.credential(n,r)}catch{return null}}}Nr.GOOGLE_SIGN_IN_METHOD="google.com";Nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends wl{constructor(){super("github.com")}static credential(e){return mi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.GITHUB_SIGN_IN_METHOD="github.com";as.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends wl{constructor(){super("twitter.com")}static credential(e,n){return mi._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YN(t,e){return _l(t,"POST","/v1/accounts:signUp",Ls(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await qr._fromIdTokenResponse(e,r,s),o=D0(r);return new gi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=D0(r);return new gi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function D0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends wr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,yc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new yc(e,n,r,s)}}function b1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?yc._fromErrorAndOperation(t,i,e,r):i})}async function XN(t,e,n=!1){const r=await _o(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e,n=!1){const{auth:r}=t;if(Zn(r.app))return Promise.reject(Mr(r));const s="reauthenticate";try{const i=await _o(t,b1(r,s,e,t),n);ae(i.idToken,r,"internal-error");const o=vm(i.idToken);ae(o,r,"internal-error");const{sub:l}=o;return ae(t.uid===l,r,"user-mismatch"),gi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(t,e,n=!1){if(Zn(t.app))return Promise.reject(Mr(t));const r="signIn",s=await b1(t,r,e),i=await gi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function ZN(t,e){return T1(Vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(t){const e=Vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function eC(t,e,n){if(Zn(t.app))return Promise.reject(Mr(t));const r=Vs(t),o=await Tf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&I1(t),c}),l=await gi._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function tC(t,e,n){return Zn(t.app)?Promise.reject(Mr(t)):ZN(Me(t),So.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&I1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(t,e){return Qr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Me(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await _o(r,nC(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t,e){return Me(t).setPersistence(e)}function iC(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function oC(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function aC(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}function lC(t){return Me(t).signOut()}const vc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vc,"1"),this.storage.removeItem(vc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=1e3,cC=10;class S1 extends A1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);TN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,cC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}S1.type="LOCAL";const N1=S1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1 extends A1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}C1.type="SESSION";const R1=C1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new sd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),c=await dC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const h=km("",20);s.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(y.data.response);break;default:clearTimeout(p),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(){return window}function fC(t){yr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function pC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gC(){return P1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="firebaseLocalStorageDb",yC=1,_c="firebaseLocalStorage",j1="fbase_key";class xl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function id(t,e){return t.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function vC(){const t=indexedDB.deleteDatabase(q1);return new xl(t).toPromise()}function If(){const t=indexedDB.open(q1,yC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_c,{keyPath:j1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_c)?e(r):(r.close(),await vC(),e(await If()))})})}async function O0(t,e,n){const r=id(t,!0).put({[j1]:e,value:n});return new xl(r).toPromise()}async function _C(t,e){const n=id(t,!1).get(e),r=await new xl(n).toPromise();return r===void 0?null:r.value}function M0(t,e){const n=id(t,!0).delete(e);return new xl(n).toPromise()}const wC=800,xC=3;class D1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await If(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>xC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sd._getInstance(gC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pC(),!this.activeServiceWorker)return;this.sender=new hC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await If();return await O0(e,vc,"1"),await M0(e,vc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>O0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_C(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>M0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=id(s,!1).getAll();return new xl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}D1.type="LOCAL";const EC=D1;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t,e){return e?jr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends wm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return no(e,this._buildIdpRequest())}_linkToIdToken(e,n){return no(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return no(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kC(t){return T1(t.auth,new bm(t),t.bypassAuthState)}function bC(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),JN(n,new bm(t),t.bypassAuthState)}async function TC(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),XN(n,new bm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kC;case"linkViaPopup":case"linkViaRedirect":return TC;case"reauthViaPopup":case"reauthViaRedirect":return bC;default:Bn(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new vl(2e3,1e4);async function AC(t,e,n){if(Zn(t.app))return Promise.reject(nr(t,"operation-not-supported-in-this-environment"));const r=Vs(t);oN(t,e,Em);const s=O1(r,n);return new ei(r,"signInViaPopup",e,s).executeNotNull()}class ei extends M1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ei.currentPopupAction&&ei.currentPopupAction.cancel(),ei.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ei.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IC.get())};e()}}ei.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="pendingRedirect",Su=new Map;class NC extends M1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Su.get(this.auth._key());if(!e){try{const r=await CC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Su.set(this.auth._key(),e)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function CC(t,e){const n=qC(e),r=PC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function RC(t,e){Su.set(t._key(),e)}function PC(t){return jr(t._redirectPersistence)}function qC(t){return Au(SC,t.config.apiKey,t.name)}async function jC(t,e,n=!1){if(Zn(t.app))return Promise.reject(Mr(t));const r=Vs(t),s=O1(r,e),o=await new NC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=10*60*1e3;class OC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!L1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DC&&this.cachedEventUids.clear(),this.cachedEventUids.has(L0(e))}saveEventToCache(e){this.cachedEventUids.add(L0(e)),this.lastProcessedEventTime=Date.now()}}function L0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function L1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function MC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t,e={}){return Qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UC=/^https?/;async function FC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await LC(t);for(const n of e)try{if(zC(n))return}catch{}Bn(t,"unauthorized-domain")}function zC(t){const e=kf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!UC.test(n))return!1;if(VC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new vl(3e4,6e4);function V0(){const t=yr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $C(t){return new Promise((e,n)=>{var r,s,i;function o(){V0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{V0(),n(nr(t,"network-request-failed"))},timeout:BC.get()})}if(!((s=(r=yr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=yr().gapi)===null||i===void 0)&&i.load)o();else{const l=jN("iframefcb");return yr()[l]=()=>{gapi.load?o():n(nr(t,"network-request-failed"))},E1(`${qN()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Nu=null,e})}let Nu=null;function WC(t){return Nu=Nu||$C(t),Nu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new vl(5e3,15e3),KC="__/auth/iframe",GC="emulator/auth/iframe",QC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XC(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ym(e,GC):`https://${t.config.authDomain}/${KC}`,r={apiKey:e.apiKey,appName:t.name,v:wi},s=YC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ol(r).slice(1)}`}async function JC(t){const e=await WC(t),n=yr().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:XC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=nr(t,"network-request-failed"),l=yr().setTimeout(()=>{i(o)},HC.get());function c(){yr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eR=500,tR=600,nR="_blank",rR="http://localhost";class U0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sR(t,e,n,r=eR,s=tR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},ZC),{width:r.toString(),height:s.toString(),top:i,left:o}),h=Zt().toLowerCase();n&&(l=m1(h)?nR:n),f1(h)&&(e=e||rR,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[I,R])=>`${y}${I}=${R},`,"");if(bN(h)&&l!=="_self")return iR(e||"",l),new U0(null);const m=window.open(e||"",l,p);ae(m,t,"popup-blocked");try{m.focus()}catch{}return new U0(m)}function iR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="__/auth/handler",aR="emulator/auth/handler",lR=encodeURIComponent("fac");async function F0(t,e,n,r,s,i){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:wi,eventId:s};if(e instanceof Em){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",G2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof wl){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${lR}=${encodeURIComponent(c)}`:"";return`${uR(t)}?${ol(l).slice(1)}${h}`}function uR({config:t}){return t.emulator?ym(t,aR):`https://${t.authDomain}/${oR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh="webStorageSupport";class cR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R1,this._completeRedirectFn=jC,this._overrideRedirectResult=RC}async _openPopup(e,n,r,s){var i;Wr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await F0(e,n,r,kf(),s);return sR(e,o,km())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await F0(e,n,r,kf(),s);return fC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await JC(e),r=new OC(e);return n.register("authEvent",s=>(ae(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eh,{type:eh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[eh];o!==void 0&&n(!!o),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=FC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return w1()||p1()||_m()}}const dR=cR;var z0="@firebase/auth",B0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pR(t){ci(new As("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:x1(t)},h=new CN(r,s,i,c);return VN(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ci(new As("auth-internal",e=>{const n=Vs(e.getProvider("auth").getImmediate());return(r=>new hR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(z0,B0,fR(t)),pr(z0,B0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=5*60,gR=Pw("authIdTokenMaxAge")||mR;let $0=null;const yR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gR)return;const s=n==null?void 0:n.token;$0!==s&&($0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function vR(t=Ap()){const e=Lc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LN(t,{popupRedirectResolver:dR,persistence:[EC,N1,R1]}),r=Pw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=yR(i.toString());oC(n,o,()=>o(n.currentUser)),iC(n,l=>o(l))}}const s=Nw("auth");return s&&UN(n,`http://${s}`),n}function _R(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=nr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",_R().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pR("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firebasestorage.googleapis.com",U1="storageBucket",wR=2*60*1e3,xR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st extends wr{constructor(e,n,r=0){super(th(e),`Firebase Storage: ${n} (${th(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,st.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return th(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rt||(rt={}));function th(t){return"storage/"+t}function Tm(){const t="An unknown error occurred, please check the error payload for server response.";return new st(rt.UNKNOWN,t)}function ER(t){return new st(rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function kR(t){return new st(rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function bR(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new st(rt.UNAUTHENTICATED,t)}function TR(){return new st(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IR(t){return new st(rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function AR(){return new st(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SR(){return new st(rt.CANCELED,"User canceled the upload/download.")}function NR(t){return new st(rt.INVALID_URL,"Invalid URL '"+t+"'.")}function CR(t){return new st(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function RR(){return new st(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+U1+"' property when initializing the app?")}function PR(){return new st(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qR(){return new st(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jR(t){return new st(rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Af(t){return new st(rt.INVALID_ARGUMENT,t)}function F1(){return new st(rt.APP_DELETED,"The Firebase app was deleted.")}function DR(t){return new st(rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xa(t,e){return new st(rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Go(t){throw new st(rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Tn.makeFromUrl(e,n)}catch{return new Tn(e,"")}if(r.path==="")return r;throw CR(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(q){q.path.charAt(q.path.length-1)==="/"&&(q.path_=q.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function h(q){q.path_=decodeURIComponent(q.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",I=new RegExp(`^https?://${m}/${p}/b/${s}/o${y}`,"i"),R={bucket:1,path:3},D=n===V1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",x=new RegExp(`^https?://${D}/${s}/${S}`,"i"),T=[{regex:l,indices:c,postModify:i},{regex:I,indices:R,postModify:h},{regex:x,indices:{bucket:1,path:2},postModify:h}];for(let q=0;q<T.length;q++){const W=T[q],$=W.regex.exec(e);if($){const w=$[W.indices.bucket];let g=$[W.indices.path];g||(g=""),r=new Tn(w,g),W.postModify(r);break}}if(r==null)throw NR(e);return r}}class OR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let h=!1;function p(...S){h||(h=!0,e.apply(null,S))}function m(S){s=setTimeout(()=>{s=null,t(I,c())},S)}function y(){i&&clearTimeout(i)}function I(S,...x){if(h){y();return}if(S){y(),p.call(null,S,...x);return}if(c()||o){y(),p.call(null,S,...x);return}r<64&&(r*=2);let T;l===1?(l=2,T=0):T=(r+Math.random())*1e3,m(T)}let R=!1;function D(S){R||(R=!0,y(),!h&&(s!==null?(S||(l=2),clearTimeout(s),m(0)):S||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,D(!0)},n),D}function LR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){return t!==void 0}function UR(t){return typeof t=="object"&&!Array.isArray(t)}function Im(t){return typeof t=="string"||t instanceof String}function W0(t){return Am()&&t instanceof Blob}function Am(){return typeof Blob<"u"}function H0(t,e,n,r){if(r<e)throw Af(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Af(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function z1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var si;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(si||(si={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,s,i,o,l,c,h,p,m,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,R)=>{this.resolve_=I,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ru(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===si.NO_ERROR,c=i.getStatus();if(!l||FR(c,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===si.ABORT;r(!1,new ru(!1,null,p));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new ru(h,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());VR(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=Tm();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?F1():SR();o(c)}else{const c=AR();o(c)}};this.canceled_?n(!1,new ru(!1,null,!0)):this.backoffId_=MR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&LR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ru{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function BR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $R(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function WR(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HR(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function KR(t,e,n,r,s,i,o=!0){const l=z1(t.urlParams),c=t.url+l,h=Object.assign({},t.headers);return WR(h,e),BR(h,n),$R(h,i),HR(h,r),new zR(c,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function QR(...t){const e=GR();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Am())return new Blob(t);throw new st(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function YR(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){if(typeof atob>"u")throw jR("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nh{constructor(e,n){this.data=e,this.contentType=n||null}}function JR(t,e){switch(t){case dr.RAW:return new nh(B1(e));case dr.BASE64:case dr.BASE64URL:return new nh($1(t,e));case dr.DATA_URL:return new nh(eP(e),tP(e))}throw Tm()}function B1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function ZR(t){let e;try{e=decodeURIComponent(t)}catch{throw xa(dr.DATA_URL,"Malformed data URL.")}return B1(e)}function $1(t,e){switch(t){case dr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw xa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case dr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw xa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XR(e)}catch(s){throw s.message.includes("polyfill")?s:xa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class W1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw xa(dr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=nP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function eP(t){const e=new W1(t);return e.base64?$1(dr.BASE64,e.rest):ZR(e.rest)}function tP(t){return new W1(t).contentType}function nP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){let r=0,s="";W0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(W0(this.data_)){const r=this.data_,s=YR(r,e,n);return s===null?null:new us(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new us(r,!0)}}static getBlob(...e){if(Am()){const n=e.map(r=>r instanceof us?r.data_:r);return new us(QR.apply(null,n))}else{const n=e.map(o=>Im(o)?JR(dr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new us(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){let e;try{e=JSON.parse(t)}catch{return null}return UR(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function sP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function K1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t,e){return e}class rn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||iP}}let su=null;function oP(t){return!Im(t)||t.length<2?t:K1(t)}function G1(){if(su)return su;const t=[];t.push(new rn("bucket")),t.push(new rn("generation")),t.push(new rn("metageneration")),t.push(new rn("name","fullPath",!0));function e(i,o){return oP(o)}const n=new rn("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new rn("size");return s.xform=r,t.push(s),t.push(new rn("timeCreated")),t.push(new rn("updated")),t.push(new rn("md5Hash",null,!0)),t.push(new rn("cacheControl",null,!0)),t.push(new rn("contentDisposition",null,!0)),t.push(new rn("contentEncoding",null,!0)),t.push(new rn("contentLanguage",null,!0)),t.push(new rn("contentType",null,!0)),t.push(new rn("metadata","customMetadata",!0)),su=t,su}function aP(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Tn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function lP(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return aP(r,t),r}function Q1(t,e,n){const r=H1(e);return r===null?null:lP(t,r,n)}function uP(t,e,n,r){const s=H1(e);if(s===null||!Im(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,y="/b/"+o(p)+"/o/"+o(m),I=Sm(y,n,r),R=z1({alt:"media",token:h});return I+R})[0]}function cP(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Y1{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){if(!t)throw Tm()}function dP(t,e){function n(r,s){const i=Q1(t,s,e);return X1(i!==null),i}return n}function hP(t,e){function n(r,s){const i=Q1(t,s,e);return X1(i!==null),uP(i,s,t.host,t._protocol)}return n}function J1(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=TR():s=bR():n.getStatus()===402?s=kR(t.bucket):n.getStatus()===403?s=IR(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function fP(t){const e=J1(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=ER(t.path)),i.serverResponse=s.serverResponse,i}return n}function pP(t,e,n){const r=e.fullServerUrl(),s=Sm(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new Y1(s,i,hP(t,n),o);return l.errorHandler=fP(e),l}function mP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function gP(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=mP(null,e)),r}function yP(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let T="";for(let q=0;q<2;q++)T=T+Math.random().toString().slice(2);return T}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const h=gP(e,r,s),p=cP(h,n),m="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+c+"--",I=us.getBlob(m,r,y);if(I===null)throw PR();const R={name:h.fullPath},D=Sm(i,t.host,t._protocol),S="POST",x=t.maxUploadRetryTime,_=new Y1(D,S,dP(t,n),x);return _.urlParams=R,_.headers=o,_.body=I.uploadData(),_.errorHandler=J1(e),_}class vP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=si.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=si.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=si.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Go("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Go("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Go("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Go("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Go("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _P extends vP{initXhr(){this.xhr_.responseType="text"}}function Z1(){return new _P}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this._service=e,n instanceof Tn?this._location=n:this._location=Tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new yi(e,n)}get root(){const e=new Tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return K1(this._location.path)}get storage(){return this._service}get parent(){const e=rP(this._location.path);if(e===null)return null;const n=new Tn(this._location.bucket,e);return new yi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw DR(e)}}function wP(t,e,n){t._throwIfRoot("uploadBytes");const r=yP(t.storage,t._location,G1(),new us(e,!0),n);return t.storage.makeRequestWithTokens(r,Z1).then(s=>({metadata:s,ref:t}))}function xP(t){t._throwIfRoot("getDownloadURL");const e=pP(t.storage,t._location,G1());return t.storage.makeRequestWithTokens(e,Z1).then(n=>{if(n===null)throw qR();return n})}function EP(t,e){const n=sP(t._location.path,e),r=new Tn(t._location.bucket,n);return new yi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(t){return/^[A-Za-z]+:\/\//.test(t)}function bP(t,e){return new yi(t,e)}function eE(t,e){if(t instanceof Nm){const n=t;if(n._bucket==null)throw RR();const r=new yi(n,n._bucket);return e!=null?eE(r,e):r}else return e!==void 0?EP(t,e):t}function TP(t,e){if(e&&kP(e)){if(t instanceof Nm)return bP(t,e);throw Af("To use ref(service, url), the first argument must be a Storage instance.")}else return eE(t,e)}function K0(t,e){const n=e==null?void 0:e[U1];return n==null?null:Tn.makeFromBucketSpec(n,t)}function IP(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:qw(s,t.app.options.projectId))}class Nm{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=V1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wR,this._maxUploadRetryTime=xR,this._requests=new Set,s!=null?this._bucket=Tn.makeFromBucketSpec(s,this._host):this._bucket=K0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tn.makeFromBucketSpec(this._url,e):this._bucket=K0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){H0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){H0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new yi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new OR(F1());{const o=KR(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const G0="@firebase/storage",Q0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="storage";function AP(t,e,n){return t=Me(t),wP(t,e,n)}function SP(t){return t=Me(t),xP(t)}function NP(t,e){return t=Me(t),TP(t,e)}function CP(t=Ap(),e){t=Me(t);const r=Lc(t,tE).getImmediate({identifier:e}),s=Cw("storage");return s&&RP(r,...s),r}function RP(t,e,n,r={}){IP(t,e,n,r)}function PP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Nm(n,r,s,e,wi)}function qP(){ci(new As(tE,PP,"PUBLIC").setMultipleInstances(!0)),pr(G0,Q0,""),pr(G0,Q0,"esm2017")}qP();const jP={apiKey:"AIzaSyCiTAiDphBPNjd4dKwEYArGY8pXWf55sZQ",authDomain:"irangram-79830.firebaseapp.com",projectId:"irangram-79830",storageBucket:"irangram-79830.firebasestorage.app",messagingSenderId:"355877653612",appId:"1:355877653612:web:5512841c0ab55b6b011c49",measurementId:"G-RZWEBR7XJ7"};let iu,U=null,Sn=null,Za=null;try{iu=Ow(jP),U=KS(iu),Sn=vR(iu);try{Za=CP(iu)}catch(t){console.warn("Firebase Storage not available. File uploads will be disabled.",t),Za=null}sC(Sn,N1).catch(t=>{console.error("Firebase Persistence Error:",t)}),console.log("Firebase Connected Successfully")}catch(t){console.error("Firebase Initialization Error:",t)}var Y0={};const Ln={USE_REAL_SERVER:!1,API_BASE_URL:Y0.REACT_APP_API_URL||"http://localhost:5000/api",SOCKET_URL:Y0.REACT_APP_SOCKET_URL||"http://localhost:5000",APP_NAME:"",VERSION:"1.8.0",OWNER_EMAIL:"amirrezaveisi45@gmail.com"},DP=t=>Sn?aC(Sn,t):()=>{},OP=async(t,e,n,r)=>{if(!Sn)throw new Error("Auth not initialized");const i=(await eC(Sn,t,e)).user,o=t===Ln.OWNER_EMAIL?"owner":"user";return await rC(i,{displayName:n}),U&&await Gr(ge(U,"users",i.uid),{name:n,email:t,phone:r,username:t.split("@")[0],bio:"  ",avatar:`https://ui-avatars.com/api/?name=${n}&background=random&color=fff&size=128`,role:o,isBanned:!1,createdAt:Ke(),lastSeen:Ke(),status:"online"}),i},MP=async(t,e)=>{if(!Sn)throw new Error("Auth not initialized");const n=await tC(Sn,t,e);if(U&&n.user){const r=ge(U,"users",n.user.uid),s={status:"online",lastSeen:Ke()};t===Ln.OWNER_EMAIL&&(s.role="owner"),dt(r,s).catch(i=>console.log("Status update error",i))}return n.user},LP=async()=>{if(!Sn)throw new Error("Auth not initialized");const t=new Nr;try{const n=(await AC(Sn,t)).user,r=n.email||"",s=r===Ln.OWNER_EMAIL?"owner":"user";if(U){const i=ge(U,"users",n.uid);if(!(await Ao(i)).exists())await Gr(i,{name:n.displayName||" ",email:r,phone:"",username:r.split("@")[0]||"user",bio:"  ",avatar:n.photoURL||`https://ui-avatars.com/api/?name=${n.displayName}&background=random&color=fff&size=128`,role:s,isBanned:!1,createdAt:Ke(),lastSeen:Ke(),status:"online"});else{const l={status:"online",lastSeen:Ke()};r===Ln.OWNER_EMAIL&&(l.role="owner"),await dt(i,l).catch(c=>console.log("Status update error",c))}}return n}catch(e){throw console.error("Google Sign-In Error",e),e}},rh=async t=>{Sn&&(t&&U&&await dt(ge(U,"users",t),{status:"offline",lastSeen:Ke()}).catch(()=>{}),await lC(Sn))},Sf=async t=>{if(!U)return null;try{const e=ge(U,"users",t),n=await Ao(e);if(n.exists())return n.data()}catch(e){console.error("Error fetching profile",e)}return null},VP=(t,e)=>{if(!U)return()=>{};const n=ge(U,"users",t);return ir(n,r=>{r.exists()&&e({uid:r.id,...r.data()})})},UP=async(t,e)=>{if(!U)return;const n=ge(U,"users",t),r={};Object.keys(e).forEach(s=>{e[s]!==void 0&&(r[s]=e[s])}),await dt(n,r)},X0=async t=>{if(!U)return null;let e=ct(qe(U,"users"),Rs("username","==",t.replace("@",""))),n=await zn(e);if(!n.empty){const r=n.docs[0];return{uid:r.id,...r.data()}}if(e=ct(qe(U,"users"),Rs("phone","==",t)),n=await zn(e),!n.empty){const r=n.docs[0];return{uid:r.id,...r.data()}}return null},FP=async t=>{if(!U||t.length===0)return[];const e=[],n=10;for(let r=0;r<t.length;r+=n){const i=t.slice(r,r+n).map(o=>o.replace(/\s+/g,""));try{const o=ct(qe(U,"users"),Rs("phone","in",i));(await zn(o)).forEach(c=>{e.push({uid:c.id,...c.data()})})}catch(o){console.error("Error syncing batch",o)}}return e},zP=async(t,e,n,r,s)=>{if(!U)return null;let i=`https://ui-avatars.com/api/?name=${t}&background=random&color=fff&size=128`;if(n&&Za)try{const c=`groups/${Date.now()}_${n.name}`;i=await Cm(n,c)}catch(c){console.error("Group image upload failed",c)}const o=[...new Set([...r,s])],l=await ki(qe(U,"groups"),{name:t,description:e,creatorId:s,avatar:i,members:o,createdAt:Ke(),type:"group"});return await Gr(ge(U,"chats",l.id),{participants:o,updatedAt:Ke(),lastMessage:"  ",type:"group",name:t,avatar:i,description:e}),{id:l.id,name:t,avatar:i,type:"group"}},ou=async(t,e)=>{if(!U)return;const n=ge(U,"users",t);try{await dt(n,{status:e,lastSeen:Ke()})}catch(r){console.error("Heartbeat error",r)}},BP=async(t,e)=>{if(!U)return;const n=ge(U,"users",t);try{await dt(n,{status:e?"typing...":"online"})}catch(r){console.error("Typing status error",r)}},$P=t=>{if(!U)return()=>{};const e=ct(qe(U,"users"));return ir(e,n=>{const r=n.docs.map(s=>({uid:s.id,status:s.data().status,lastSeen:s.data().lastSeen?s.data().lastSeen.toMillis():Date.now(),name:s.data().name,avatar:s.data().avatar}));t(r)})},Cm=async(t,e)=>{if(!Za)throw new Error("   (Storage)       .");const n=NP(Za,e),r=await AP(n,t);return await SP(r.ref)},WP=async(t,e,n)=>{U&&await ki(qe(U,"appeals"),{userId:t,userName:e,message:n,status:"pending",createdAt:Ke()})},HP=t=>{if(!U)return()=>{};const e=ct(qe(U,"appeals"),Ps("createdAt","desc"));return ir(e,n=>{const r=n.docs.map(s=>{const i=s.data();return{id:s.id,...i,createdAt:i.createdAt?i.createdAt.toMillis():Date.now()}});t(r)})},J0=async(t,e)=>{U&&(e?await dt(ge(U,"appeals",t),{status:"approved"}):await dt(ge(U,"appeals",t),{status:"rejected"}))},KP=async t=>{U&&await Ms(ge(U,"appeals",t))},GP=async(t,e,n)=>{if(!U)return;const r=ct(qe(U,"deletion_requests"),Rs("userId","==",t));if((await zn(r)).empty)await ki(qe(U,"deletion_requests"),{userId:t,userName:e,reason:n,createdAt:Ke()});else throw new Error("      .")},QP=t=>{if(!U)return()=>{};const e=ct(qe(U,"deletion_requests"),Ps("createdAt","desc"));return ir(e,n=>{const r=n.docs.map(s=>{const i=s.data();return{id:s.id,...i,createdAt:i.createdAt?i.createdAt.toMillis():Date.now()}});t(r)})},Z0=async(t,e,n)=>{U&&(n&&await aE(e),await Ms(ge(U,"deletion_requests",t)))},YP=async(t,e,n,r,s,i)=>{U&&await ki(qe(U,"reports"),{messageId:t,messageContent:e,reportedUserId:n,reportedUserName:r,reporterId:s,reason:i,status:"pending",createdAt:Ke()})},XP=t=>{if(!U)return()=>{};const e=ct(qe(U,"reports"),Ps("createdAt","desc"));return ir(e,n=>{const r=n.docs.map(s=>{const i=s.data();return{id:s.id,...i,createdAt:i.createdAt?i.createdAt.toMillis():Date.now(),handledAt:i.handledAt?i.handledAt.toMillis():void 0}});t(r)})},JP=async(t,e)=>{if(!U)return;const n=ge(U,"reports",t);await dt(n,{status:"handled",handledBy:e,handledAt:Ke()})},ev=async t=>{if(!U)return;const e=ge(U,"reports",t);await Ms(e)},ZP=async()=>{if(!U)return[];try{const t=ct(qe(U,"users"),Ps("createdAt","desc"));return(await zn(t)).docs.map(n=>({uid:n.id,...n.data()}))}catch(t){return console.error("Error fetching users",t),[]}},eq=async(t,e)=>{if(!U)return;const n=ge(U,"users",t);await dt(n,{role:e})},tq=async(t,e)=>{if(!U)return;const n=ge(U,"users",t);e?await dt(n,{isBanned:!1,banExpiresAt:null}):await dt(n,{isBanned:!0})},nq=async(t,e)=>{if(!U)return;const n=ge(U,"users",t),r=Date.now()+e*60*60*1e3;await dt(n,{isBanned:!0,banExpiresAt:r})},rq=async(t,e)=>{if(!(!U||!e.isBanned||!e.banExpiresAt)&&Date.now()>e.banExpiresAt){console.log("Ban expired, lifting ban for user:",t);const n=ge(U,"users",t);await dt(n,{isBanned:!1,banExpiresAt:null})}},nE=async t=>{if(U)try{await Ms(ge(U,"global_chat",t))}catch(e){console.error("Error deleting global message",e)}},sq=async(t,e)=>{if(U)try{await Ms(ge(U,"chats",t,"messages",e))}catch(n){console.error("Error deleting private message",n)}},iq=async t=>{if(U)try{await Ms(ge(U,"chats",t))}catch(e){console.error("Error deleting chat",e)}},tv=async t=>{if(U)try{const e=ct(qe(U,"chats",t,"messages"),pi(500)),n=await zn(e),r=nd(U);n.docs.forEach(s=>{r.delete(s.ref)}),await r.commit()}catch(e){console.error("Error clearing chat history",e)}},od=async(t,e)=>{if(U)try{await Gr(ge(U,"users",t,"blocked",e),{blockedAt:Ke(),uid:e})}catch(n){console.error("Error blocking user",n)}},Rm=async(t,e)=>{if(U)try{await Ms(ge(U,"users",t,"blocked",e))}catch(n){console.error("Error unblocking user",n)}},wc=async(t,e)=>{if(!U)return!1;try{const n=ge(U,"users",t,"blocked",e);return(await Ao(n)).exists()}catch{return!1}},rE=async(t,e)=>{if(!U)return;const n=ge(U,"global_chat",t);try{await dt(n,{text:e,edited:!0})}catch(r){console.error("Error editing global message",r)}},sE=async()=>{if(U)try{const t=ct(qe(U,"global_chat")),e=await zn(t),n=nd(U);let r=0;e.forEach(s=>{n.delete(s.ref),r++,r>=490}),await n.commit(),console.log(`Cleared ${r} messages.`)}catch(t){console.error("Error clearing chat",t)}},iE=async()=>{if(!U)return[];const t=ge(U,"settings","wordFilters"),e=await Ao(t);return e.exists()?e.data().bannedWords||[]:[]},nv=async t=>{if(!U)return;const e=ge(U,"settings","wordFilters");await Gr(e,{bannedWords:t},{merge:!0})},oq=async t=>{if(!U)return[];const e=[{id:"global_chat",name:"  ",avatar:"https://cdn-icons-png.flaticon.com/512/921/921490.png",status:"online",bio:"Surveillance View",username:"@global_world",phone:"",type:"group",isGlobal:!0}];try{const n=ct(qe(U,"chats"),Rs("participants","array-contains",t)),s=(await zn(n)).docs.map(async l=>{const p=(l.data().participants||[]).find(m=>m!==t);if(p){const m=await Sf(p);return{id:l.id,name:m?` : ${m.name}`:`User: ${p}`,avatar:(m==null?void 0:m.avatar)||"https://via.placeholder.com/150",status:"offline",bio:"Private Chat",username:(m==null?void 0:m.username)||"",phone:"",type:"user",isGlobal:!1}}return null}),o=(await Promise.all(s)).filter(l=>l!==null);return[...e,...o]}catch(n){return console.error("Error fetching spy chats",n),e}},aq=async(t,e)=>{if(!U)return[];try{let n;return e==="global_chat"?n=ct(qe(U,"global_chat"),Ps("createdAt","desc"),pi(100)):n=ct(qe(U,"chats",e,"messages"),Ps("createdAt","desc"),pi(100)),(await zn(n)).docs.map(s=>{const i=s.data();return{id:s.id,...i,timestamp:i.createdAt?i.createdAt.toMillis():Date.now()}}).reverse()}catch(n){return console.error("Error fetching spy messages",n),[]}},lq=async(t,e,n)=>{if(U)try{await ki(qe(U,"users",t,"notifications"),{title:e,message:n,type:"alert",read:!1,createdAt:Ke()})}catch(r){console.error("Error sending notification",r)}},uq=(t,e)=>{if(!U)return()=>{};const n=ct(qe(U,"users",t,"notifications"),Rs("read","==",!1));return ir(n,r=>{const s=r.docs.map(o=>{const l=o.data();return{id:o.id,...l,createdAt:l.createdAt?l.createdAt.toMillis():Date.now()}});s.sort((o,l)=>l.createdAt-o.createdAt);const i=s.slice(0,10);e(i)})},cq=async(t,e)=>{U&&await dt(ge(U,"users",t,"notifications",e),{read:!0})},dq=async(t,e)=>{if(!U)return;const n=ge(U,"chat_metadata",t);await Gr(n,{pinnedMessage:e,updatedAt:Ke()},{merge:!0})},hq=async t=>{if(!U)return;const e=ge(U,"chat_metadata",t);await dt(e,{pinnedMessage:null})},fq=(t,e)=>{if(!U)return()=>{};const n=ge(U,"chat_metadata",t);return ir(n,r=>{r.exists()?e(r.data().pinnedMessage):e(null)})},Ni=(t,e)=>e==="saved"?`saved_${t}`:[t,e].sort().join("_"),pq=t=>{if(!U)return()=>{};const e=ct(qe(U,"global_chat"),Ps("createdAt","desc"),pi(50));return ir(e,r=>{const s=[];r.forEach(i=>{const o=i.data();s.push({id:i.id,text:o.text,senderId:o.senderId,senderName:o.senderName,senderAvatar:o.senderAvatar,senderRole:o.senderRole||"user",timestamp:o.createdAt?o.createdAt.toMillis():Date.now(),status:"read",type:o.type||"text",imageUrl:o.imageUrl,fileUrl:o.fileUrl,fileName:o.fileName,fileSize:o.fileSize,audioDuration:o.audioDuration,isSticker:o.isSticker,replyToId:o.replyToId,edited:o.edited,reactions:o.reactions||{}})}),t(s.reverse())})},mq=async(t,e)=>{if(!U){console.error("Database not initialized");return}try{let n=t.text||"";n&&t.type==="text"&&(await iE()).forEach(s=>{const i=new RegExp(s,"gi");n=n.replace(i,"*".repeat(s.length))}),await ki(qe(U,"global_chat"),{text:n,senderId:t.senderId,senderName:e.name,senderAvatar:e.avatar||"",senderRole:e.role||"user",type:t.type||"text",imageUrl:t.imageUrl||null,fileUrl:t.fileUrl||null,fileName:t.fileName||null,fileSize:t.fileSize||null,audioDuration:t.audioDuration||null,isSticker:t.isSticker||!1,replyToId:t.replyToId||null,createdAt:Ke(),edited:!1,reactions:{}})}catch(n){console.error("Error adding document: ",n)}},gq=(t,e)=>{if(!U)return()=>{};const n=ct(qe(U,"chats",t,"messages"),Ps("createdAt","desc"),pi(50));return ir(n,r=>{const s=[];r.forEach(i=>{const o=i.data();s.push({id:i.id,text:o.text,senderId:o.senderId,senderName:o.senderName,senderAvatar:o.senderAvatar,timestamp:o.createdAt?o.createdAt.toMillis():Date.now(),status:"read",type:o.type||"text",imageUrl:o.imageUrl,fileUrl:o.fileUrl,fileName:o.fileName,fileSize:o.fileSize,audioDuration:o.audioDuration,isSticker:o.isSticker,replyToId:o.replyToId,edited:o.edited,reactions:o.reactions||{}})}),e(s.reverse())})},oE=async(t,e,n)=>{if(!U)return;const r=ge(U,"chats",t,"messages",e);try{await dt(r,{text:n,edited:!0})}catch(s){console.error("Error editing private message",s)}},yq=(t,e)=>{if(!U)return()=>{};const n=ct(qe(U,"chats"),Rs("participants","array-contains",t));return ir(n,r=>{const s=r.docs.map(i=>{const o=i.data();return{id:i.id,...o,updatedAt:o.updatedAt?o.updatedAt.toMillis():Date.now()}});s.sort((i,o)=>o.updatedAt-i.updatedAt),e(s)})},vq=async(t,e,n,r)=>{if(!U)return;const s=ge(U,"chats",t),i=Sn.currentUser,o=e==="saved"?[i==null?void 0:i.uid]:[i==null?void 0:i.uid,e];await Gr(s,{participants:o,updatedAt:Ke(),lastMessage:n.text||(n.type==="image"?"":n.type==="audio"?"":""),lastSenderId:i==null?void 0:i.uid},{merge:!0}),await ki(qe(U,"chats",t,"messages"),{text:n.text||"",senderId:n.senderId,senderName:r.name,senderAvatar:r.avatar||"",type:n.type||"text",imageUrl:n.imageUrl||null,fileUrl:n.fileUrl||null,fileName:n.fileName||null,fileSize:n.fileSize||null,audioDuration:n.audioDuration||null,isSticker:n.isSticker||!1,replyToId:n.replyToId||null,createdAt:Ke(),reactions:{}})},_q=async(t,e,n)=>{if(!U)return;const r=ge(U,"global_chat",t);try{const s=await Ao(r);if(s.exists()){const o=s.data().reactions||{},l=o[e]||[];let c={...o};l.includes(n)?(c[e]=l.filter(h=>h!==n),c[e].length===0&&delete c[e]):c[e]=[...l,n],await dt(r,{reactions:c})}}catch(s){console.error("Error toggling reaction:",s)}},wq=t=>{if(!U)return()=>{};const e=ge(U,"system","info");return ir(e,n=>{if(n.exists()){const r=n.data();t({currentVersion:r.currentVersion||Ln.VERSION,lastCleanup:r.lastCleanup?r.lastCleanup.toMillis():0,forceUpdate:r.forceUpdate?r.forceUpdate.toMillis():0})}else Gr(e,{currentVersion:Ln.VERSION,lastCleanup:Ke()})})},xq=async()=>{if(U)try{const t=ge(U,"system","info"),e=await Ao(t);if(e.exists()){const n=e.data(),r=n.lastCleanup?n.lastCleanup.toMillis():0,s=Date.now();if(s-r>864e5){console.log("Triggering 24h cleanup..."),await dt(t,{lastCleanup:Ke()});const i=new Date(s-864e5),o=ct(qe(U,"global_chat"),Rs("createdAt","<",i)),l=await zn(o),c=nd(U);let h=0;l.forEach(p=>{c.delete(p.ref),h++}),h>0&&(await c.commit(),console.log(`Cleanup: Deleted ${h} old messages.`))}}}catch(t){console.error("Error in auto cleanup:",t)}},Eq=async()=>{U&&await Gr(ge(U,"system","info"),{forceUpdate:Ke()},{merge:!0})},kq=async()=>{if(U){await sE();try{const t=ct(qe(U,"chats"),pi(100)),e=await zn(t);for(const n of e.docs){const r=ct(qe(U,"chats",n.id,"messages"),pi(500)),s=await zn(r);if(!s.empty){const i=nd(U);s.forEach(o=>i.delete(o.ref)),await i.commit()}await dt(n.ref,{lastMessage:"",lastSenderId:null,updatedAt:Ke()})}}catch(t){console.error("Wipe chats error",t)}}},aE=async t=>{if(U)try{await Ms(ge(U,"users",t))}catch(e){console.error("Delete user error",e)}},bq=({contacts:t,sessions:e,activeContactId:n,onSelectContact:r,toggleTheme:s,theme:i,userProfile:o,onOpenSettings:l,onOpenAdminPanel:c,onAddContact:h,showInstallButton:p,onInstall:m,storedAccounts:y,onAddAccount:I,onSwitchAccount:R,onCreateGroup:D,onDeleteChat:S})=>{var Hn;const[x,_]=O.useState(""),[T,q]=O.useState(!1),[W,$]=O.useState(!1),[w,g]=O.useState("all"),[E,b]=O.useState(!1),[A,N]=O.useState(!1),[k,Ae]=O.useState(null),[Ze,St]=O.useState(""),[ht,G]=O.useState(!1),[te,oe]=O.useState(null),[ye,fe]=O.useState(""),[ve,Ve]=O.useState(""),[vt,ft]=O.useState(""),[je,en]=O.useState(null),[it,Nt]=O.useState(null),[Ge,_t]=O.useState([]),[kt,tn]=O.useState(!1),De=O.useRef(null),[Rn,We]=O.useState(!1),[dn,pt]=O.useState([]),[Ut,Ft]=O.useState(!1),C=O.useRef(null),pe=O.useRef(null),[,ce]=O.useState(0);O.useEffect(()=>{const L=setInterval(()=>ce(ne=>ne+1),6e4);return()=>clearInterval(L)},[]),O.useEffect(()=>{const L=ne=>{C.current&&!C.current.contains(ne.target)&&q(!1),Ae(null)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]),O.useEffect(()=>{const L=setTimeout(async()=>{if(x.trim().length>2){Ft(!0);try{const ne=await X0(x);ne&&ne.username!==o.username?pt([ne]):pt([])}catch{pt([])}Ft(!1)}else pt([]),Ft(!1)},800);return()=>clearTimeout(L)},[x,o.username]);const Ue=async()=>{if(!Ze.trim())return;G(!0),fe(""),oe(null);const L=await X0(Ze);L?L.username===o.username?fe("     ."):oe(L):fe("     ."),G(!1)},ke=()=>{if(te){const L={id:te.uid,name:te.name,avatar:te.avatar,bio:te.bio,username:"@"+te.username,phone:te.phone,status:te.status||"offline",type:"user"};h(L),b(!1),oe(null),St("")}},ot=L=>{if(L.target.files&&L.target.files[0]){const ne=L.target.files[0];en(ne);const M=new FileReader;M.onload=F=>{var J;Nt((J=F.target)==null?void 0:J.result)},M.readAsDataURL(ne)}},$n=L=>{_t(ne=>ne.includes(L)?ne.filter(M=>M!==L):[...ne,L])},or=async()=>{if(ve.trim()){tn(!0);try{await D(ve,vt,je,Ge),Ve(""),ft(""),en(null),Nt(null),_t([]),N(!1)}catch(L){console.error(L)}finally{tn(!1)}}},Ct=async()=>{if(!("contacts"in navigator&&"ContactsManager"in window)){alert("       .      .");return}We(!0);try{const L=["name","tel"],ne={multiple:!0},M=await navigator.contacts.select(L,ne);if(M.length>0){const F=M.map(Y=>Y.tel[0]).filter(Boolean),J=await FP(F);let z=0;J.forEach(Y=>{const se={id:Y.uid,name:Y.name,avatar:Y.avatar,bio:Y.bio,username:"@"+Y.username,phone:Y.phone,status:Y.status,type:"user"};h(se),z++}),alert(`${z}      .`)}}catch(L){console.error(L)}finally{We(!1),q(!1)}},Yr=()=>{localStorage.setItem("last_forced_update",Date.now().toString()),window.location.reload()},nn=()=>{confirm("                .")&&(localStorage.clear(),window.location.reload())},Pn=L=>{const ne={id:L.uid,name:L.name,avatar:L.avatar,bio:L.bio,username:"@"+L.username,phone:L.phone,status:L.status||"offline",type:"user"};h(ne),_(""),pt([])},xr=(L,ne)=>{if(L.preventDefault(),ne.id==="saved")return;const M=L.clientX,F=L.clientY;Ae({x:M,y:F,contact:ne})},Er=async L=>{try{await wc(o.uid,L)?(await Rm(o.uid,L),alert("   .")):confirm("         ")&&(await od(o.uid,L),alert("  ."))}catch(ne){console.error("Block action failed",ne),alert("   .")}Ae(null)},Us=L=>{r(L),Ae(null)},Fs=()=>{window.history.back()},ar=t.filter(L=>{const ne=L.name.toLowerCase().includes(x.toLowerCase())||L.username.toLowerCase().includes(x.toLowerCase());let M=!0;return w==="personal"?M=L.type==="user":w==="groups"&&(M=L.type==="group"||L.type==="channel"),ne&&M}),kr=L=>{if(!L)return"";const ne=new Date(L);return Date.now()-L>24*60*60*1e3?ne.toLocaleDateString("fa-IR"):ne.toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"})},Xr=L=>L.type!=="user"||L.id==="saved"?!1:L.lastSeen?Date.now()-new Date(L.lastSeen).getTime()<12e4:!1,Wn=L=>{if(!L)return"";const ne=Date.now()-new Date(L).getTime();return ne<12e4?"":ne<36e5?`${Math.floor(ne/6e4)}  `:ne<864e5?`${Math.floor(ne/36e5)}  `:ne<1728e5?"":`${Math.floor(ne/864e5)}  `};return u.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-telegram-bgDark border-l border-gray-200 dark:border-telegram-borderDark relative",ref:pe,children:[k&&u.jsx("div",{className:"fixed inset-0 z-[100]",onClick:()=>Ae(null),onContextMenu:L=>{L.preventDefault(),Ae(null)},children:u.jsxs("div",{className:"absolute bg-white dark:bg-gray-800 rounded-xl shadow-2xl border dark:border-gray-700 py-1 w-48 animate-fade-in overflow-hidden",style:{top:Math.min(k.y,window.innerHeight-200),left:Math.min(k.x,window.innerWidth-200)},onClick:L=>L.stopPropagation(),children:[u.jsx("div",{className:"px-4 py-2 border-b dark:border-gray-700 bg-gray-50 dark:bg-white/5",children:u.jsx("p",{className:"font-bold text-sm text-gray-800 dark:text-gray-200 truncate",children:k.contact.name})}),u.jsxs("button",{onClick:()=>Us(k.contact.id),className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(hs,{size:18}),"  "]}),k.contact.id!=="global_chat"&&u.jsxs("button",{onClick:()=>Er(k.contact.id),className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(Sr,{size:18})," / "]}),k.contact.id!=="global_chat"&&u.jsxs("button",{onClick:()=>{S&&S(k.contact.id),Ae(null)},className:"w-full text-right px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-3 transition-colors border-t border-gray-100 dark:border-gray-700",children:[u.jsx(Jn,{size:18}),"  "]})]})}),u.jsxs("div",{className:`absolute top-0 right-0 h-full w-80 bg-white dark:bg-telegram-secondaryDark z-30 shadow-2xl transform transition-transform duration-300 ease-in-out ${T?"translate-x-0":"translate-x-full"}`,ref:C,children:[u.jsxs("div",{className:"bg-telegram-primary p-6 flex flex-col justify-end text-white relative overflow-hidden",children:[u.jsx("div",{className:"absolute -top-16 -left-16 w-48 h-48 bg-white/10 rounded-full blur-2xl"}),u.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[u.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center text-telegram-primary text-2xl font-bold shadow-lg overflow-hidden ring-4 ring-white/20",children:o.avatar?u.jsx("img",{src:o.avatar,className:"w-full h-full object-cover"}):((Hn=o.name)==null?void 0:Hn.charAt(0))||"U"}),u.jsx("button",{onClick:s,className:"p-2.5 bg-white/20 rounded-full hover:bg-white/30 transition-colors backdrop-blur-md",children:i===Qs.DARK?u.jsx(T2,{size:20}):u.jsx(g2,{size:20})})]}),u.jsxs("div",{className:"relative z-10 cursor-pointer",onClick:()=>$(!W),children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"font-bold text-lg truncate flex items-center gap-2",children:[o.name,o.role==="owner"&&u.jsx("span",{className:"bg-yellow-400 text-black text-[10px] px-2 py-0.5 rounded-full shadow-sm",children:"Owner"})]}),u.jsx(Jh,{size:18,className:`transition-transform duration-300 ${W?"rotate-180":""}`})]}),u.jsx("div",{className:"text-sm opacity-80 font-mono dir-ltr text-right mt-1",children:o.phone||o.username})]})]}),u.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:W?u.jsxs("div",{className:"animate-fade-in space-y-1",children:[y.filter(L=>L.uid!==o.uid).map(L=>u.jsxs("button",{onClick:()=>{R(L.uid),q(!1),$(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx("img",{src:L.avatar,className:"w-10 h-10 rounded-full bg-gray-200 object-cover"}),u.jsxs("div",{className:"text-right",children:[u.jsx("div",{className:"font-bold text-sm",children:L.name}),u.jsxs("div",{className:"text-xs opacity-60",children:["@",L.username]})]})]},L.uid)),u.jsxs("button",{onClick:()=>{I(),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx("div",{className:"w-10 h-10 rounded-full border-2 border-dashed border-gray-400 flex items-center justify-center",children:u.jsx(kw,{size:20})}),u.jsx("span",{className:"font-medium",children:"  "})]})]}):u.jsxs("div",{className:"flex flex-col animate-fade-in",children:[u.jsxs("button",{onClick:()=>{N(!0),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(tf,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:()=>{b(!0),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(Ay,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:Ct,className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[Rn?u.jsx(Hi,{size:22,className:"animate-spin text-gray-500"}):u.jsx(tc,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),u.jsxs("button",{onClick:()=>{r("saved"),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(Ey,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:"  "})]}),u.jsxs("button",{onClick:()=>{l(),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(bw,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:""})]}),u.jsxs("button",{onClick:Yr,className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(A2,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:"   "})]}),u.jsxs("button",{onClick:nn,className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(Zh,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:"  "})]}),p&&u.jsxs("button",{onClick:()=>{m(),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[u.jsx(bp,{size:22,className:"text-gray-500"}),u.jsx("span",{className:"font-medium",children:" "})]}),(o.role==="owner"||o.role==="admin")&&u.jsxs("button",{onClick:()=>{c(),q(!1)},className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-red-50 dark:hover:bg-red-900/10 text-red-600 dark:text-red-400 transition-colors border-t border-gray-100 dark:border-gray-800 mt-2",children:[u.jsx(za,{size:22}),u.jsx("span",{className:"font-bold",children:" "})]}),u.jsxs("button",{onClick:Fs,className:"w-full px-6 py-3.5 flex items-center gap-4 hover:bg-red-50 dark:hover:bg-red-900/10 text-red-600 dark:text-red-400 transition-colors border-t border-gray-100 dark:border-gray-800 mt-1",children:[u.jsx(Ua,{size:22}),u.jsx("span",{className:"font-bold",children:"  "})]})]})})]}),T&&u.jsx("div",{className:"absolute inset-0 bg-black/50 z-20 backdrop-blur-sm transition-opacity",onClick:()=>q(!1)}),E&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-3xl shadow-2xl p-6 border border-white/20",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),u.jsx("button",{onClick:()=>b(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full",children:u.jsx(Mn,{size:24,className:"text-gray-500"})})]}),u.jsxs("div",{className:"mb-6 relative",children:[u.jsx("label",{className:"text-sm font-medium text-gray-500 mb-2 block",children:" "}),u.jsx("input",{value:Ze,onChange:L=>St(L.target.value),placeholder:"@username   ",className:"w-full bg-gray-100 dark:bg-black/20 rounded-xl px-4 py-3.5 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white transition-all"})]}),ye&&u.jsxs("p",{className:"text-red-500 text-sm mb-4 bg-red-50 dark:bg-red-900/20 p-3 rounded-lg flex items-center gap-2",children:[u.jsx(za,{size:16})," ",ye]}),te&&u.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 p-3 rounded-xl flex items-center gap-3 mb-6 border border-blue-200 dark:border-blue-800",children:[u.jsx("img",{src:te.avatar,className:"w-12 h-12 rounded-full object-cover"}),u.jsxs("div",{children:[u.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:te.name}),u.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:["@",te.username]})]})]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:Ue,disabled:ht,className:"flex-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-bold py-3.5 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:ht?u.jsx(Hi,{className:"animate-spin mx-auto"}):""}),te&&u.jsx("button",{onClick:ke,className:"flex-1 bg-telegram-primary text-white font-bold py-3.5 rounded-xl hover:bg-telegram-primaryDark transition-colors shadow-lg shadow-telegram-primary/30",children:""})]})]})}),A&&u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-3xl shadow-2xl p-6 max-h-[90vh] overflow-y-auto border border-white/20",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:" "}),u.jsx("button",{onClick:()=>N(!1),className:"p-1 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full",children:u.jsx(Mn,{size:24,className:"text-gray-500"})})]}),u.jsxs("div",{className:"flex justify-center mb-8",children:[u.jsxs("div",{onClick:()=>{var L;return(L=De.current)==null?void 0:L.click()},className:"relative w-28 h-28 rounded-full bg-gray-100 dark:bg-black/20 flex items-center justify-center border-4 border-dashed border-gray-300 dark:border-gray-600 cursor-pointer overflow-hidden group transition-colors hover:border-telegram-primary",children:[it?u.jsx("img",{src:it,className:"w-full h-full object-cover"}):u.jsx(yw,{size:36,className:"text-gray-400 group-hover:text-telegram-primary transition-colors"}),u.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx("span",{className:"text-white text-xs font-bold",children:""})})]}),u.jsx("input",{type:"file",ref:De,className:"hidden",accept:"image/*",onChange:ot})]}),u.jsxs("div",{className:"space-y-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500 mb-1 block",children:" "}),u.jsx("input",{value:ve,onChange:L=>Ve(L.target.value),placeholder:":  ",className:"w-full bg-gray-100 dark:bg-black/20 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white transition-all"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-sm font-medium text-gray-500 mb-1 block",children:" ()"}),u.jsx("input",{value:vt,onChange:L=>ft(L.target.value),placeholder:" ...",className:"w-full bg-gray-100 dark:bg-black/20 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white transition-all"})]})]}),u.jsxs("div",{className:"mb-6",children:[u.jsxs("h4",{className:"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center justify-between",children:[u.jsx("span",{children:" "}),u.jsxs("span",{className:"bg-telegram-primary/10 text-telegram-primary px-2 py-0.5 rounded-full text-xs",children:[Ge.length," "]})]}),u.jsx("div",{className:"max-h-48 overflow-y-auto bg-gray-50 dark:bg-black/10 rounded-xl p-2 custom-scrollbar border border-gray-100 dark:border-gray-700",children:t.filter(L=>L.type==="user"&&L.id!=="saved").length===0?u.jsx("p",{className:"text-center text-gray-400 text-xs py-8",children:"    "}):t.filter(L=>L.type==="user"&&L.id!=="saved").map(L=>u.jsxs("div",{onClick:()=>$n(L.id),className:`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-all mb-1 ${Ge.includes(L.id)?"bg-telegram-primary/10 dark:bg-telegram-primary/20":"hover:bg-gray-100 dark:hover:bg-white/5"}`,children:[u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:L.avatar,className:"w-10 h-10 rounded-full bg-gray-200 object-cover"}),Ge.includes(L.id)&&u.jsx("div",{className:"absolute -bottom-1 -right-1 bg-telegram-primary text-white rounded-full p-0.5 border-2 border-white dark:border-gray-800 animate-scale-in",children:u.jsx(ky,{size:12,fill:"white"})})]}),u.jsx("div",{className:"flex-1",children:u.jsx("div",{className:"font-semibold text-sm text-gray-900 dark:text-white",children:L.name})}),Ge.includes(L.id)?u.jsx(ky,{className:"text-telegram-primary",size:20}):u.jsx(b2,{className:"text-gray-300 dark:text-gray-600",size:20})]},L.id))})]}),u.jsx("button",{onClick:or,disabled:!ve.trim()||kt,className:"w-full bg-telegram-primary hover:bg-telegram-primaryDark disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3.5 rounded-xl transition-all shadow-lg shadow-telegram-primary/30 flex justify-center items-center gap-2",children:kt?u.jsx(Hi,{className:"animate-spin"}):" "})]})}),u.jsxs("div",{className:"px-3 py-3 flex items-center gap-3 shrink-0",children:[u.jsx("button",{onClick:()=>{q(!0),$(!1)},className:"p-2.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-500 dark:text-gray-400 transition-colors",children:u.jsx(p2,{size:24})}),u.jsxs("div",{className:"relative flex-1 group",children:[u.jsx("input",{type:"text",placeholder:"...",value:x,onChange:L=>_(L.target.value),className:"w-full bg-gray-100 dark:bg-white/5 text-gray-900 dark:text-white rounded-full py-2.5 pr-10 pl-4 focus:outline-none focus:ring-2 focus:ring-telegram-primary/50 focus:bg-white dark:focus:bg-black/20 text-sm transition-all"}),Ut?u.jsx(Hi,{className:"absolute right-3.5 top-3 text-telegram-primary w-4 h-4 animate-spin"}):u.jsx(ef,{className:"absolute right-3.5 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors w-4 h-4"})]})]}),u.jsx("div",{className:"flex px-4 pb-1 shrink-0 border-b border-gray-100 dark:border-white/5 space-x-reverse space-x-4",children:["all","personal","groups"].map(L=>u.jsx("button",{onClick:()=>g(L),className:`flex-1 text-center py-2.5 border-b-2 font-medium text-sm transition-all ${w===L?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:L==="all"?"":L==="personal"?"":""},L))}),u.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2",children:[x&&dn.length>0&&u.jsxs("div",{className:"mb-4 animate-fade-in",children:[u.jsxs("div",{className:"px-4 py-2 text-xs font-bold text-telegram-primary bg-blue-50 dark:bg-blue-900/20 rounded-lg flex items-center gap-1.5 mx-2 mb-2",children:[u.jsx(_w,{size:12}),"  "]}),dn.map(L=>u.jsxs("div",{onClick:()=>Pn(L),className:"flex items-center gap-3 p-3 mx-2 rounded-2xl cursor-pointer hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:[u.jsx("img",{src:L.avatar,className:"w-12 h-12 rounded-full object-cover bg-gray-200"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("h3",{className:"font-semibold text-base truncate text-gray-900 dark:text-gray-100",children:L.name}),u.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",L.username]})]}),u.jsx("div",{className:"p-2 bg-telegram-primary/10 rounded-full text-telegram-primary",children:u.jsx(Fa,{size:16})})]},"global-"+L.uid))]}),ar.map(L=>{const ne=e[L.id],M=ne==null?void 0:ne.messages[ne.messages.length-1],F=n===L.id,J=Xr(L);return u.jsxs("div",{onClick:()=>r(L.id),onContextMenu:z=>xr(z,L),className:`group relative flex items-center gap-3 p-3 mx-1 mb-1 rounded-2xl cursor-pointer transition-all duration-200 select-none ${F?"bg-telegram-primary text-white shadow-lg shadow-telegram-primary/30 scale-[1.02]":"hover:bg-gray-100 dark:hover:bg-white/5"}`,children:[u.jsxs("div",{className:"relative shrink-0",children:[L.id==="saved"?u.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center text-white shadow-md",children:u.jsx(Ey,{size:24,fill:"currentColor"})}):u.jsx("img",{src:L.avatar,alt:L.name,className:"w-12 h-12 rounded-full object-cover bg-gray-200 shadow-sm"}),L.id!=="saved"&&J&&u.jsx("div",{className:`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 ${F?"bg-white border-telegram-primary":"bg-green-500 border-white dark:border-black"}`})]}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[u.jsx("h3",{className:`font-bold text-sm truncate ${F?"text-white":"text-gray-900 dark:text-gray-100"}`,children:L.name}),M&&u.jsx("span",{className:`text-[11px] font-medium ${F?"text-blue-100":"text-gray-400"}`,children:kr(M.timestamp)})]}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:`text-sm truncate pr-1 ${F?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:L.status==="typing..."?u.jsx("span",{className:`${F?"text-white":"text-telegram-primary"} animate-pulse font-medium`,children:"  ..."}):M?u.jsxs("span",{className:"flex items-center gap-1",children:[M.senderId==="me"&&u.jsx("span",{className:"opacity-80",children:":"}),M.type==="image"?" ":M.type==="audio"?" ":M.text]}):u.jsx("span",{className:"text-xs opacity-70 italic",children:L.id!=="saved"&&L.type==="user"?J?"":Wn(L.lastSeen):L.type==="group"?"":""})}),(ne==null?void 0:ne.unreadCount)>0&&u.jsx("span",{className:`min-w-[1.25rem] h-5 px-1.5 rounded-full text-[10px] font-bold flex items-center justify-center shadow-sm ${F?"bg-white text-telegram-primary":"bg-telegram-primary text-white"}`,children:ne.unreadCount})]})]})]},L.id)})]}),u.jsxs("div",{className:"absolute bottom-6 left-6 flex flex-col gap-4 z-10",children:[u.jsx("button",{onClick:()=>{N(!0)},className:"w-12 h-12 bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-200 rounded-full shadow-lg flex items-center justify-center hover:scale-110 transition-transform hover:text-telegram-primary",title:" ",children:u.jsx(tf,{size:20})}),u.jsx("button",{onClick:()=>{b(!0)},className:"w-14 h-14 bg-telegram-primary text-white rounded-full shadow-xl shadow-telegram-primary/40 flex items-center justify-center hover:scale-110 transition-transform",title:" ",children:u.jsx(Ay,{size:24})})]})]})},Tq=({imageUrl:t,onClose:e})=>u.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/95 flex items-center justify-center animate-fade-in backdrop-blur-sm",onClick:e,children:[u.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors z-50 backdrop-blur-md",children:u.jsx(Mn,{size:24})}),u.jsx("a",{href:t,download:!0,onClick:n=>n.stopPropagation(),className:"absolute top-4 left-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors z-50 backdrop-blur-md",title:" ",children:u.jsx(bp,{size:24})}),u.jsx("div",{className:"w-full h-full p-4 flex items-center justify-center",children:u.jsx("img",{src:t,alt:"Full view",className:"max-w-full max-h-full object-contain select-none shadow-2xl rounded-md",onClick:n=>n.stopPropagation()})})]}),Iq=["","","","","","","","","","","","","",""],Aq=["https://cdn-icons-png.flaticon.com/512/742/742751.png","https://cdn-icons-png.flaticon.com/512/742/742752.png","https://cdn-icons-png.flaticon.com/512/742/742822.png","https://cdn-icons-png.flaticon.com/512/742/742760.png","https://cdn-icons-png.flaticon.com/512/742/742920.png","https://cdn-icons-png.flaticon.com/512/742/742786.png","https://cdn-icons-png.flaticon.com/512/166/166538.png","https://cdn-icons-png.flaticon.com/512/190/190623.png","https://cdn-icons-png.flaticon.com/512/417/417779.png"],Sq=t=>{if(!t)return"#3390ec";const e=["#df3f4c","#4a9e56","#e08e0b","#8c52ff","#ff5ca8","#31b5d6","#3390ec"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]},Nq=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Cq=({contact:t,messages:e,myId:n,myRole:r,pinnedMessage:s,onSendMessage:i,onEditMessage:o,onDeleteMessage:l,onPinMessage:c,onUnpinMessage:h,onReaction:p,onBack:m,isMobile:y,onProfileClick:I,onAvatarClick:R,wallpaper:D,onCall:S,onClearHistory:x,onDeleteChat:_,onBlockUser:T,onTyping:q})=>{const[W,$]=O.useState(""),[w,g]=O.useState(null),[E,b]=O.useState(null),[A,N]=O.useState(null),[k,Ae]=O.useState(!1),[Ze,St]=O.useState("emoji"),[ht,G]=O.useState(!1),[te,oe]=O.useState(0),[ye,fe]=O.useState(null),[ve,Ve]=O.useState(!1),[vt,ft]=O.useState(!1),[je,en]=O.useState(!1),[it,Nt]=O.useState(!1),[Ge,_t]=O.useState(!1),[kt,tn]=O.useState(!1),[De,Rn]=O.useState(""),[We,dn]=O.useState([]),[pt,Ut]=O.useState(-1),[Ft,C]=O.useState(0),[,pe]=O.useState(0),ce=O.useRef(null),Ue=O.useRef(null),ke=O.useRef(null),ot=O.useRef(null),$n=O.useRef(null),or=O.useRef(null),Ct=O.useRef(null),Yr=t.type==="group",nn=t.id==="global_chat",Pn=`draft_${n}_${t.id}`,xr=r==="admin"||r==="owner";O.useEffect(()=>{const P=setInterval(()=>pe(le=>le+1),6e4);return()=>clearInterval(P)},[]),O.useEffect(()=>{(async()=>{if(t.id!=="global_chat"&&t.id!=="saved"&&t.type==="user"){const le=await wc(n,t.id);en(le);const _e=await wc(t.id,n);Nt(_e)}else en(!1),Nt(!1)})()},[t.id,n]),O.useEffect(()=>{const P=localStorage.getItem(Pn);P&&$(P)},[Pn]),O.useEffect(()=>{E||(W?localStorage.setItem(Pn,W):localStorage.removeItem(Pn))},[W,Pn,E]),O.useEffect(()=>()=>{Ct.current&&clearTimeout(Ct.current),t.id!=="saved"&&t.id!=="global_chat"&&q&&q(!1)},[t.id,n,q]),O.useEffect(()=>{var P;kt||(P=ce.current)==null||P.scrollIntoView({behavior:"auto"})},[e.length,w,kt]),O.useEffect(()=>{const P=()=>{var wn;const bt=((wn=navigator.connection)==null?void 0:wn.rtt)||45,hn=Math.floor(Math.random()*20)-10;C(Math.max(10,bt+hn))};P();const le=setInterval(P,5e3);return()=>clearInterval(le)},[]),O.useEffect(()=>{if(!De.trim()){dn([]),Ut(-1);return}const P=e.filter(le=>le.type==="text"&&le.text.toLowerCase().includes(De.toLowerCase())).map(le=>le.id);dn(P),P.length>0?Ut(P.length-1):Ut(-1)},[De,e]),O.useEffect(()=>{if(pt>=0&&pt<We.length){const P=We[pt],le=document.getElementById(`msg-${P}`);le&&le.scrollIntoView({behavior:"smooth",block:"center"})}},[pt,We]),O.useEffect(()=>{kt&&or.current?or.current.focus():(Rn(""),dn([]))},[kt]),O.useEffect(()=>{const P=()=>{N(null),Ae(!1),_t(!1)};return window.addEventListener("click",P),()=>window.removeEventListener("click",P)},[]);const Er=()=>{We.length!==0&&Ut(P=>P<We.length-1?P+1:0)},Us=()=>{We.length!==0&&Ut(P=>P>0?P-1:We.length-1)},Fs=()=>{if(!s)return;const P=document.getElementById(`msg-${s.id}`);P?(P.scrollIntoView({behavior:"smooth",block:"center"}),P.classList.add("bg-blue-100","dark:bg-blue-900/40"),setTimeout(()=>P.classList.remove("bg-blue-100","dark:bg-blue-900/40"),2e3)):alert("       .")},ar=P=>{$(P.target.value),t.id!=="saved"&&t.id!=="global_chat"&&q&&!je&&!it&&(Ct.current||q(!0),Ct.current&&clearTimeout(Ct.current),Ct.current=setTimeout(()=>{q(!1),Ct.current=null},2e3))},kr=()=>{W.trim()&&(je||it||(Ct.current&&(clearTimeout(Ct.current),Ct.current=null,t.id!=="saved"&&t.id!=="global_chat"&&q&&q(!1)),E?(o(E.id,W),b(null)):(i({text:W,type:"text"},w==null?void 0:w.id),g(null)),$("")))},Xr=P=>{je||it||(i({imageUrl:P,type:"image",isSticker:!0},w==null?void 0:w.id),g(null),Ae(!1))},Wn=()=>{alert("  ")},Hn=P=>{G(!1),oe(0)},L=()=>{var P;je||it||(P=$n.current)==null||P.click()},ne=(P,le="image")=>{if(P&&!je&&!it){const _e=(P.size/1024/1024).toFixed(2)+" MB";i({type:le,file:P,fileName:P.name,fileSize:_e,text:le==="image"?"":P.name},w==null?void 0:w.id),g(null)}},M=P=>{if(P.preventDefault(),P.stopPropagation(),Ve(!1),je||it)return;const le=P.dataTransfer.files;if(le&&le.length>0){const _e=le[0],bt=_e.type.startsWith("image/");ne(_e,bt?"image":"file")}},F=async()=>{nn&&r==="owner"&&confirm("              .")&&await sE()},J=async P=>{const le=prompt("    ");if(le)try{await YP(P.id,P.text||(P.type==="image"?"":""),P.senderId,P.senderName||"",n,le),alert("     .")}catch(_e){console.error(_e)}N(null)},z=(P,le,_e)=>{P.preventDefault(),P.stopPropagation();const bt=192,hn=240;let wn=P.clientX,Rt=P.clientY;wn+bt>window.innerWidth&&(wn=window.innerWidth-bt-20),Rt+hn>window.innerHeight&&(Rt=window.innerHeight-hn-20),N({x:wn,y:Rt,message:le,isMe:_e})},Y=P=>new Date(P).toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"}),se=P=>{if(it)return"    ";if(!P)return"";const le=new Date(P),_e=Date.now()-le.getTime();return _e<12e4?"":_e<36e5?`  ${Math.floor(_e/6e4)}  `:_e<864e5?`  ${Math.floor(_e/36e5)}  `:_e<1728e5?"  ":`  ${Math.floor(_e/864e5)}  `},be=!it&&t.lastSeen&&Date.now()-new Date(t.lastSeen).getTime()<12e4,Ce=()=>D==="default"||!D?{backgroundColor:"#99bad0"}:D.startsWith("http")||D.startsWith("data")?{backgroundImage:`url(${D})`,backgroundSize:"cover",backgroundPosition:"center"}:{backgroundColor:D},me=P=>{if(!De||!P)return P;const le=new RegExp(`(${Nq(De)})`,"gi");return P.split(le).map((bt,hn)=>bt.toLowerCase()===De.toLowerCase()?u.jsx("span",{className:"bg-yellow-300 text-black rounded px-0.5",children:bt},hn):bt)},at=t.id==="saved"||r==="admin"||r==="owner",zt=r==="admin"||r==="owner",et=async()=>{je?(await Rm(n,t.id),en(!1)):(await od(n,t.id),en(!0))};return u.jsxs("div",{className:"h-full flex flex-col relative bg-telegram-bg dark:bg-telegram-bgDark overflow-hidden",onDragOver:P=>{P.preventDefault(),Ve(!0)},onDragLeave:P=>{P.preventDefault(),P.currentTarget.contains(P.relatedTarget)||Ve(!1)},onDrop:M,children:[ve&&!je&&!it&&u.jsxs("div",{className:"absolute inset-0 z-50 bg-telegram-primary/80 backdrop-blur-sm flex flex-col items-center justify-center text-white animate-fade-in",children:[u.jsx(Ty,{size:64,className:"mb-4 animate-bounce"}),u.jsx("h2",{className:"text-2xl font-bold",children:"    "})]}),ye&&u.jsx(Tq,{imageUrl:ye,onClose:()=>fe(null)}),u.jsx("input",{type:"file",ref:ot,className:"hidden",accept:"image/*",onChange:P=>{var le;return ne((le=P.target.files)==null?void 0:le[0],"image")}}),u.jsx("input",{type:"file",ref:$n,className:"hidden",onChange:P=>{var le;return ne((le=P.target.files)==null?void 0:le[0],"file")}}),u.jsx("div",{className:"absolute inset-0 z-0",style:Ce(),children:(D==="default"||!D)&&u.jsx("div",{className:"absolute inset-0 opacity-40",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23000000' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E")`}})}),t.status==="connecting"&&u.jsx("div",{className:"absolute top-16 left-0 right-0 bg-red-500/90 text-white text-xs py-1 text-center z-20",children:"  ..."}),u.jsxs("div",{className:"relative z-50 flex flex-col shrink-0 bg-white/80 dark:bg-telegram-bgDark/80 backdrop-blur-xl border-b border-gray-100 dark:border-white/5 shadow-sm",children:[u.jsx("div",{className:"flex items-center justify-between px-3 py-2 h-16",children:kt?u.jsxs("div",{className:"flex-1 flex items-center gap-2 animate-fade-in w-full",children:[u.jsx("button",{onClick:()=>tn(!1),className:"p-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:u.jsx(Mn,{size:24})}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{ref:or,value:De,onChange:P=>Rn(P.target.value),placeholder:"   ...",className:"w-full bg-gray-100 dark:bg-white/10 text-gray-900 dark:text-white rounded-lg pl-3 pr-10 py-2 text-sm outline-none focus:ring-2 focus:ring-telegram-primary"}),u.jsx(ef,{size:16,className:"absolute right-3 top-3 text-gray-400"})]}),u.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-500 font-mono w-16 justify-center",children:We.length>0?u.jsxs("span",{children:[pt+1," / ",We.length]}):u.jsx("span",{children:"0 / 0"})}),u.jsxs("div",{className:"flex gap-1",children:[u.jsx("button",{onClick:Us,disabled:We.length===0,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full disabled:opacity-30",children:u.jsx(s2,{size:20})}),u.jsx("button",{onClick:Er,disabled:We.length===0,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full disabled:opacity-30",children:u.jsx(Jh,{size:20})})]})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 overflow-hidden cursor-pointer flex-1",onClick:I,children:[y&&u.jsx("button",{onClick:P=>{P.stopPropagation(),m()},className:"p-2 -mr-2 text-gray-500 dark:text-gray-300",children:u.jsx(ec,{size:22})}),u.jsx("img",{src:t.avatar||"",alt:"",className:"w-10 h-10 rounded-full bg-gray-200 object-cover shrink-0"}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("h2",{className:"font-bold text-gray-900 dark:text-white truncate text-base",children:t.name}),u.jsx("span",{className:`text-xs truncate ${be?"text-telegram-primary":"text-gray-500"}`,children:t.id==="saved"?"  ":Yr?`${t.bio||""}`:se(t.lastSeen)})]})]}),u.jsxs("div",{className:"hidden md:flex items-center gap-1 text-[10px] text-gray-400 font-mono mr-2 px-2 py-1 bg-gray-100 dark:bg-white/5 rounded-full",title:"  (Ping)",children:[u.jsx(x2,{size:12,className:Ft<100?"text-green-500":"text-yellow-500"}),u.jsxs("span",{children:[Ft,"ms"]})]}),u.jsxs("div",{className:"flex items-center text-gray-500 gap-1 relative",children:[u.jsx("button",{onClick:P=>{P.stopPropagation(),tn(!0)},className:"p-2.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-500 transition-colors",title:"  ",children:u.jsx(ef,{size:20})}),(!nn||xr)&&!je&&!it&&u.jsx("button",{onClick:P=>{P.stopPropagation(),S()},className:"p-2.5 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-telegram-primary transition-colors",children:u.jsx(co,{size:20})}),(!nn||xr)&&u.jsx("button",{onClick:P=>{P.stopPropagation(),_t(!Ge)},className:`p-2.5 rounded-full transition-colors ${Ge?"bg-gray-100 dark:bg-white/10 text-telegram-primary":"hover:bg-gray-100 dark:hover:bg-white/10"}`,children:u.jsx(y2,{size:20})}),Ge&&u.jsxs("div",{className:"absolute top-12 left-2 w-48 bg-white dark:bg-gray-800 rounded-xl shadow-xl border dark:border-gray-700 py-2 z-[100] animate-fade-in origin-top-left overflow-hidden",children:[nn&&r==="owner"&&u.jsxs("button",{onClick:P=>{P.stopPropagation(),F(),_t(!1)},className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2",children:[u.jsx(Jn,{size:16}),"   "]}),!nn&&t.id!=="saved"&&u.jsxs(u.Fragment,{children:[u.jsxs("button",{onClick:P=>{P.stopPropagation(),x&&x(),_t(!1)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[u.jsx(Zh,{size:16}),"   "]}),u.jsxs("button",{onClick:P=>{P.stopPropagation(),_&&_(),_t(!1)},className:"w-full text-right px-4 py-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-2",children:[u.jsx(Jn,{size:16}),"  "]}),t.type==="user"&&u.jsxs("button",{onClick:P=>{P.stopPropagation(),et(),_t(!1)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[u.jsx(Sr,{size:16})," ",je?" ":" "]})]}),t.id==="saved"&&u.jsxs("button",{onClick:P=>{P.stopPropagation(),x&&x(),_t(!1)},className:"w-full text-right px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[u.jsx(Zh,{size:16}),"   "]})]})]})]})}),s&&u.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-gray-50/80 dark:bg-black/40 border-t border-gray-100 dark:border-white/5 cursor-pointer hover:bg-gray-100 dark:hover:bg-black/50 transition-colors backdrop-blur-md",onClick:Fs,children:[u.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[u.jsx("div",{className:"w-0.5 self-stretch bg-telegram-primary rounded-full"}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("span",{className:"text-xs font-bold text-telegram-primary truncate",children:"  "}),u.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:s.text||(s.type==="image"?"":"")})]})]}),at&&u.jsx("button",{onClick:P=>{P.stopPropagation(),h()},className:"p-1 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full text-gray-500",children:u.jsx(Mn,{size:16})})]})]}),u.jsxs("div",{ref:Ue,className:"relative z-10 flex-1 overflow-y-auto p-2 sm:p-4 flex flex-col gap-1.5 scroll-smooth",onScroll:P=>ft(P.currentTarget.scrollHeight-P.currentTarget.scrollTop-P.currentTarget.clientHeight>200),children:[e.map((P,le)=>{var bi;const _e=P.senderId==="me",bt=Yr&&!_e&&(!e[le-1]||e[le-1].senderId!==P.senderId),hn=We.includes(P.id),wn=We[pt]===P.id,Rt=P.senderRole==="owner",zs=P.senderRole==="admin";let qn="px-3 py-2 rounded-2xl shadow-sm text-base break-words border min-w-[4rem] relative transition-all ";return wn?qn+="ring-4 ring-yellow-400 dark:ring-yellow-500/50 ":hn&&(qn+="ring-2 ring-yellow-200 dark:ring-yellow-500/20 "),Rt?qn+="bg-gradient-to-br from-amber-50 to-yellow-100 dark:from-yellow-900/40 dark:to-amber-800/40 text-gray-900 dark:text-white border-amber-400 dark:border-amber-600 shadow-[0_0_15px_rgba(251,191,36,0.3)] ring-1 ring-amber-300 dark:ring-amber-700 ":zs?qn+="bg-gradient-to-br from-red-50 to-rose-100 dark:from-red-900/40 dark:to-rose-800/40 text-gray-900 dark:text-white border-red-400 dark:border-red-600 shadow-[0_0_10px_rgba(244,63,94,0.3)] ring-1 ring-red-300 dark:ring-red-700 ":_e?qn+="bg-telegram-chatOut dark:bg-telegram-chatOutDark border-telegram-chatOut dark:border-telegram-chatOutDark text-gray-900 dark:text-white ":qn+="bg-white dark:bg-telegram-chatInDark border-white dark:border-telegram-chatInDark text-gray-900 dark:text-white ",_e?qn+="rounded-tr-2xl rounded-tl-none ":qn+="rounded-tl-2xl rounded-tr-none ",u.jsxs("div",{id:`msg-${P.id}`,className:`flex flex-col ${_e?"items-end self-end":"items-start self-start"} group max-w-[85%] sm:max-w-[75%] animate-slide-in`,onContextMenu:fn=>z(fn,P,_e),children:[bt&&u.jsxs("div",{className:"flex items-center gap-1 mb-1 pr-2",children:[Rt&&u.jsx(o2,{size:12,className:"text-amber-500 fill-amber-500"}),zs&&u.jsx(w2,{size:12,className:"text-red-500 fill-red-500"}),u.jsx("span",{className:`text-xs font-bold cursor-pointer hover:underline ${Rt?"text-amber-600 dark:text-amber-400":zs?"text-red-600 dark:text-red-400":"text-telegram-primary"}`,onClick:()=>R&&P.senderId!=="me"&&R({id:P.senderId,name:P.senderName,avatar:P.senderAvatar}),style:{color:!Rt&&!zs?Sq(P.senderId):void 0},children:P.senderName||""})]}),u.jsxs("div",{className:qn,children:[P.replyToId&&u.jsxs("div",{className:"mb-1 pl-2 border-l-2 border-telegram-primary/50 text-xs opacity-70 cursor-pointer",onClick:()=>{const fn=document.getElementById(`msg-${P.replyToId}`);fn&&fn.scrollIntoView({behavior:"smooth",block:"center"})},children:[u.jsx("div",{className:"font-bold",children:"  "}),u.jsx("div",{className:"truncate",children:((bi=e.find(fn=>fn.id===P.replyToId))==null?void 0:bi.text)||"..."})]}),P.type==="image"&&P.imageUrl&&u.jsx("div",{className:"mb-1 cursor-pointer",onClick:()=>fe(P.imageUrl||""),children:u.jsx("img",{src:P.imageUrl,alt:"Shared",className:`rounded-lg max-h-80 object-cover ${P.isSticker?"max-w-[150px] bg-transparent shadow-none border-none":"w-full min-w-[200px]"}`})}),P.type==="file"&&u.jsxs("div",{className:"flex items-center gap-3 bg-black/5 dark:bg-white/10 p-2 rounded-lg mb-1",children:[u.jsx("div",{className:"p-2 bg-telegram-primary rounded-full text-white",children:u.jsx(vw,{size:20})}),u.jsxs("div",{className:"flex flex-col overflow-hidden",children:[u.jsx("span",{className:"font-bold text-sm truncate max-w-[150px]",children:P.fileName||"File"}),u.jsx("span",{className:"text-xs opacity-70",children:P.fileSize||"Unknown size"})]}),u.jsx("a",{href:P.fileUrl,download:!0,className:"p-2 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx(bp,{size:18})})]}),!P.isSticker&&P.type!=="image"&&P.type!=="file"&&u.jsx("p",{className:"leading-relaxed whitespace-pre-wrap dir-auto",dir:"auto",children:me(P.text)}),u.jsxs("div",{className:`flex items-center justify-end gap-1 mt-1 select-none ${_e?"text-telegram-primaryDark dark:text-blue-200":"text-gray-500 dark:text-gray-400"}`,children:[P.edited&&u.jsx("span",{className:"text-[10px] italic opacity-70",children:" "}),u.jsx("span",{className:"text-[10px] opacity-80",children:Y(P.timestamp)}),_e&&(P.status==="read"?u.jsx(r2,{size:14}):P.status==="sent"?u.jsx(Va,{size:14}):u.jsx("div",{className:"w-2 h-2 rounded-full border border-current opacity-60"}))]}),P.reactions&&Object.keys(P.reactions).length>0&&u.jsx("div",{className:"absolute -bottom-3 left-2 flex gap-1 z-10",children:Object.entries(P.reactions).map(([fn,No])=>{const Co=Array.isArray(No)?No:[];return u.jsxs("button",{onClick:ad=>{ad.stopPropagation(),p(P.id,fn)},className:`text-xs px-1.5 py-0.5 rounded-full border shadow-sm flex items-center gap-1 transition-transform hover:scale-110 ${Co.includes("me")?"bg-telegram-primary text-white border-telegram-primary":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-600 text-gray-700 dark:text-gray-200"}`,children:[u.jsx("span",{children:fn}),u.jsx("span",{className:"font-bold",children:Co.length})]},fn)})})]})]},P.id)}),u.jsx("div",{ref:ce})]}),vt&&u.jsx("button",{onClick:()=>{var P;return(P=ce.current)==null?void 0:P.scrollIntoView({behavior:"smooth"})},className:"absolute bottom-20 right-4 p-3 bg-white dark:bg-gray-800 rounded-full shadow-lg text-gray-500 hover:text-telegram-primary transition-colors z-20 animate-fade-in border dark:border-gray-700",children:u.jsx(Jh,{size:24})}),w&&u.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-gray-50/90 dark:bg-black/40 border-t border-telegram-primary/20 animate-slide-in backdrop-blur-md",children:[u.jsx(Iy,{size:20,className:"text-telegram-primary"}),u.jsxs("div",{className:"flex-1 overflow-hidden",children:[u.jsxs("div",{className:"text-xs font-bold text-telegram-primary",children:["  ",w.senderName||""]}),u.jsx("div",{className:"text-sm truncate text-gray-500",children:w.text})]}),u.jsx("button",{onClick:()=>g(null),children:u.jsx(Mn,{size:18,className:"text-gray-400"})})]}),u.jsxs("div",{className:"p-2 sm:p-3 bg-white dark:bg-telegram-bgDark border-t border-gray-200 dark:border-white/5 relative z-20",children:[je?u.jsxs("button",{onClick:et,className:"w-full py-4 bg-gray-100 dark:bg-white/10 text-gray-600 dark:text-gray-300 rounded-2xl flex items-center justify-center gap-2 font-bold hover:bg-gray-200 dark:hover:bg-white/20 transition-colors uppercase",children:[u.jsx(Tw,{size:20}),"     .  "]}):it?u.jsxs("div",{className:"w-full py-4 bg-gray-50 dark:bg-white/5 text-gray-400 dark:text-gray-500 rounded-2xl flex items-center justify-center gap-2 text-sm italic cursor-not-allowed",children:[u.jsx(Sr,{size:18}),"       ."]}):u.jsxs("div",{className:"flex items-end gap-2 max-w-4xl mx-auto",children:[u.jsx("button",{className:"p-3 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",onClick:L,title:" ",children:u.jsx(Ty,{size:24,className:"transform rotate-0"})}),u.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-black/20 rounded-2xl flex items-center relative transition-shadow focus-within:ring-1 focus-within:ring-telegram-primary/50",children:[u.jsx("textarea",{ref:ke,value:W,onChange:ar,onKeyDown:P=>{P.key==="Enter"&&!P.shiftKey&&!y&&(P.preventDefault(),kr())},placeholder:"   ...",className:"w-full bg-transparent border-none focus:ring-0 resize-none py-3 px-4 max-h-32 min-h-[48px] text-gray-900 dark:text-white placeholder-gray-500 custom-scrollbar",rows:1,style:{height:"auto",minHeight:"48px"}}),u.jsx("button",{className:"p-2 text-gray-400 hover:text-yellow-500 transition-colors mr-1",onClick:()=>Ae(!k),children:u.jsx(k2,{size:24})})]}),W.trim()||E?u.jsx("button",{onClick:kr,className:"p-3 bg-telegram-primary text-white rounded-full shadow-lg hover:bg-telegram-primaryDark hover:scale-105 transition-all",children:E?u.jsx(Va,{size:24}):u.jsx(nc,{size:24,className:y?"":"ml-0.5"})}):u.jsx("button",{onMouseDown:Wn,onMouseUp:()=>Hn(),onMouseLeave:()=>ht&&Hn(),className:`p-3 rounded-full shadow-lg transition-all ${ht?"bg-red-500 scale-110 animate-pulse":"bg-telegram-primary hover:bg-telegram-primaryDark"} text-white`,children:u.jsx(xw,{size:24})})]}),k&&u.jsxs("div",{className:"absolute bottom-20 left-4 sm:left-auto sm:right-16 z-50 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border dark:border-gray-700 w-80 h-72 flex flex-col overflow-hidden animate-fade-in",children:[u.jsxs("div",{className:"flex border-b dark:border-gray-700",children:[u.jsx("button",{onClick:()=>St("emoji"),className:`flex-1 py-3 text-sm font-bold transition-colors ${Ze==="emoji"?"text-telegram-primary border-b-2 border-telegram-primary bg-gray-50 dark:bg-white/5":"text-gray-500 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:""}),u.jsx("button",{onClick:()=>St("sticker"),className:`flex-1 py-3 text-sm font-bold transition-colors ${Ze==="sticker"?"text-telegram-primary border-b-2 border-telegram-primary bg-gray-50 dark:bg-white/5":"text-gray-500 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:""})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-3 grid grid-cols-5 gap-2 content-start custom-scrollbar bg-gray-50/50 dark:bg-black/10",children:Ze==="emoji"?Iq.map(P=>u.jsx("button",{onClick:()=>{$(le=>le+P)},className:"text-2xl p-2 hover:bg-white dark:hover:bg-white/10 rounded-xl transition-colors shadow-sm hover:shadow-md",children:P},P)):Aq.map((P,le)=>u.jsx("button",{onClick:()=>Xr(P),className:"p-2 hover:bg-white dark:hover:bg-white/10 rounded-xl transition-colors shadow-sm hover:shadow-md",children:u.jsx("img",{src:P,className:"w-12 h-12 object-contain"})},le))})]})]}),A&&u.jsxs("div",{className:"fixed z-[200] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border dark:border-gray-700 py-1 w-48 animate-fade-in overflow-hidden",style:{top:A.y,left:A.x},onClick:P=>P.stopPropagation(),children:[u.jsxs("button",{onClick:()=>{var P;g(A.message),N(null),(P=ke.current)==null||P.focus()},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[u.jsx(Iy,{size:18})," "]}),A.message.type==="text"&&u.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(A.message.text),N(null)},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[u.jsx(i2,{size:18})," "]}),at&&u.jsxs("button",{onClick:()=>{c(A.message),N(null)},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[u.jsx(_2,{size:18}),"  "]}),A.isMe&&Date.now()-A.message.timestamp<864e5&&u.jsxs("button",{onClick:()=>{var P;b(A.message),$(A.message.text),N(null),(P=ke.current)==null||P.focus()},className:"w-full text-right px-4 py-3 hover:bg-gray-100 dark:hover:bg-white/5 flex items-center gap-3 text-gray-700 dark:text-gray-200",children:[u.jsx(Ew,{size:18})," "]}),(A.isMe||zt)&&u.jsxs("button",{onClick:()=>{confirm("  ")&&l(A.message.id),N(null)},className:"w-full text-right px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-3",children:[u.jsx(Jn,{size:18})," "]}),!A.isMe&&u.jsxs("button",{onClick:()=>J(A.message),className:"w-full text-right px-4 py-3 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 flex items-center gap-3 border-t border-gray-100 dark:border-gray-700",children:[u.jsx(wu,{size:18})," "]})]})]})},Rq=({contact:t,onClose:e,onStartChat:n,currentUserId:r})=>{const s=t.id==="global_chat",i=t.id==="saved",o=t.type==="group",[l,c]=sh.useState(!1);sh.useEffect(()=>{r&&!s&&!i&&!o&&wc(r,t.id).then(c)},[t.id,r,o]);const h=async()=>{r&&(l?(await Rm(r,t.id),c(!1),alert("   .")):confirm("  ")&&(await od(r,t.id),c(!0),alert("  .")))},p=()=>{alert("    .")},m=()=>{alert("      .")},y=()=>{confirm("      ")&&(alert("     ()."),e())};return u.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-telegram-secondaryDark border-l border-gray-200 dark:border-telegram-borderDark overflow-y-auto animate-slide-in",children:[u.jsxs("div",{className:"flex items-center gap-4 p-4 sticky top-0 bg-white/80 dark:bg-telegram-secondaryDark/80 backdrop-blur-md z-10 border-b border-gray-100 dark:border-white/5",children:[u.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 dark:hover:text-gray-200",children:u.jsx(Mn,{size:24})}),u.jsx("span",{className:"font-semibold text-lg",children:s?" ":o?" ":" "})]}),u.jsxs("div",{className:"px-6 py-8 flex flex-col items-center border-b-8 border-gray-50 dark:border-black/20 bg-gradient-to-b from-transparent to-gray-50/50 dark:to-black/10",children:[u.jsx("img",{src:t.avatar,alt:t.name,className:`w-32 h-32 object-cover mb-4 shadow-2xl ${s||i||o?"rounded-3xl p-2 bg-white dark:bg-white/5":"rounded-full ring-4 ring-white dark:ring-gray-700"}`}),u.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 text-center",children:t.name}),u.jsx("p",{className:"text-gray-500 text-sm font-medium mb-4",children:s?u.jsx("span",{className:"text-telegram-primary bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full",children:"  "}):o?u.jsxs("span",{className:"text-gray-500",children:[Math.floor(Math.random()*50)+1," "]}):t.status==="online"?u.jsx("span",{className:"text-telegram-primary bg-blue-50 dark:bg-blue-900/20 px-3 py-1 rounded-full",children:""}):u.jsxs("span",{className:"opacity-70",children:["  ",t.lastSeen||" "]})}),u.jsxs("div",{className:"flex gap-3 mt-2",children:[!o&&!s&&!i&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:p,className:"p-3 bg-telegram-primary text-white rounded-full hover:bg-telegram-primaryDark shadow-lg",title:" ",children:u.jsx(co,{size:20})}),u.jsx("button",{onClick:m,className:"p-3 bg-telegram-primary text-white rounded-full hover:bg-telegram-primaryDark shadow-lg",title:" ",children:u.jsx(I2,{size:20})})]}),n&&!s&&!i&&u.jsxs("button",{onClick:()=>{n(t),e()},className:"flex items-center gap-2 bg-telegram-primary hover:bg-telegram-primaryDark text-white px-6 py-2.5 rounded-full font-bold transition-all shadow-lg shadow-telegram-primary/30",children:[u.jsx(Fa,{size:20})," "]}),!s&&!i&&!o&&r&&u.jsx("button",{onClick:h,className:`flex items-center gap-2 px-4 py-2.5 rounded-full font-bold transition-colors ${l?"bg-green-100 text-green-700 hover:bg-green-200":"bg-red-50 text-red-600 hover:bg-red-100"}`,title:l?" ":" ",children:l?u.jsx(Tw,{size:20}):u.jsx(Sr,{size:20})})]})]}),u.jsxs("div",{className:"p-6 space-y-6 border-b-8 border-gray-50 dark:border-black/20",children:[u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(vw,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base leading-relaxed",children:t.bio||(o?"  ":" ")}),u.jsx("p",{className:"text-gray-500 text-xs mt-1",children:o?" ":""})]})]}),s?u.jsx(u.Fragment,{children:u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(_w,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium",children:" (Public)"}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:" "})]})]})}):o?u.jsx(u.Fragment,{children:u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(d2,{size:24})}),u.jsxs("div",{children:[u.jsxs("p",{className:"text-gray-900 dark:text-white text-base font-medium text-blue-500 cursor-pointer hover:underline",children:["https://t.me/",t.id.substring(0,8)]}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:" "})]})]})}):u.jsxs(u.Fragment,{children:[t.phone&&u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(co,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium font-mono",children:t.phone}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:""})]})]}),t.username&&u.jsxs("div",{className:"flex items-start gap-4 group",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(gw,{size:24})}),u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium font-mono",children:t.username}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:" "})]})]})]}),u.jsxs("div",{className:"flex items-start gap-4 group cursor-pointer",children:[u.jsx("div",{className:"mt-1 text-gray-400 group-hover:text-telegram-primary transition-colors",children:u.jsx(kp,{size:24})}),u.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-gray-900 dark:text-white text-base font-medium",children:""}),u.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:""})]}),u.jsx("div",{className:"w-11 h-6 bg-telegram-primary rounded-full relative cursor-pointer shadow-inner transition-colors",children:u.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 bg-white rounded-full shadow-sm"})})]})]}),o&&!s&&u.jsxs("button",{onClick:y,className:"flex items-center gap-4 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 w-full p-2 rounded-lg transition-colors",children:[u.jsx(Ua,{size:24}),u.jsx("span",{className:"font-bold",children:" "})]})]}),u.jsxs("div",{className:"p-4",children:[u.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-4",children:[u.jsx("button",{className:"flex-1 py-3 text-telegram-primary border-b-2 border-telegram-primary font-bold text-sm",children:""}),u.jsx("button",{className:"flex-1 py-3 text-gray-500 font-medium text-sm hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:""}),u.jsx("button",{className:"flex-1 py-3 text-gray-500 font-medium text-sm hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:""})]}),u.jsx("div",{className:"grid grid-cols-3 gap-1 rounded-xl overflow-hidden",children:[1,2,3,4,5,6].map(I=>u.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 cursor-pointer hover:opacity-80 transition-opacity",children:u.jsx("img",{src:`https://picsum.photos/200/200?random=${I+(t.id.length||10)}`,className:"w-full h-full object-cover",alt:"media"})},I))})]})]})},Pq=[{id:"default",name:"  ()",value:"default",color:"#99bad0"},{id:"blue",name:" ",value:"#dbeafe",color:"#dbeafe"},{id:"green",name:" ",value:"#dcfce7",color:"#dcfce7"},{id:"dark",name:"",value:"#18181b",color:"#18181b"},{id:"pink",name:"",value:"#fce7f3",color:"#fce7f3"},{id:"pattern1",name:" ",value:"https://img.freepik.com/free-vector/hand-drawn-contact-sheet-template_23-2150937449.jpg",color:"#e5e7eb"},{id:"pattern2",name:" ",value:"https://img.freepik.com/free-vector/seamless-pattern-with-cute-cats_23-2147665476.jpg",color:"#e5e7eb"}],qq=({isOpen:t,onClose:e,userProfile:n,onSave:r,wallpaper:s,onSaveWallpaper:i})=>{const[o,l]=O.useState(n),[c,h]=O.useState("profile"),[p,m]=O.useState(s),[y,I]=O.useState(""),[R,D]=O.useState(!1),S=O.useRef(null),[x,_]=O.useState(!1),[T,q]=O.useState("");if(O.useEffect(()=>{l(n),m(s)},[n,s,t]),!t)return null;const W=()=>{r(o),i(p),e()},$=async g=>{var b;const E=(b=g.target.files)==null?void 0:b[0];if(E){D(!0);try{const A=`avatars/${n.uid}/${Date.now()}_${E.name}`,N=await Cm(E,A);l(k=>({...k,avatar:N}))}catch(A){console.error("Storage failed, attempting base64 fallback",A);try{if(E.size>1024*1024)alert("  :             .");else{const N=new FileReader;N.onloadend=()=>{const k=N.result;l(Ae=>({...Ae,avatar:k}))},N.readAsDataURL(E)}}catch{alert("    .")}}finally{D(!1)}}},w=async()=>{if(!T.trim()){alert("     .");return}try{await GP(n.uid,n.name,T),alert("             ."),_(!1)}catch(g){alert(g.message||"   .")}};return u.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-telegram-secondaryDark w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex flex-col border-b border-gray-100 dark:border-white/10",children:[u.jsxs("div",{className:"flex items-center justify-center relative p-4",children:[u.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:""}),u.jsx("button",{onClick:e,className:"absolute left-4 p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:u.jsx(Mn,{size:24,className:"text-gray-500 dark:text-gray-300"})})]}),u.jsxs("div",{className:"flex px-4",children:[u.jsx("button",{onClick:()=>h("profile"),className:`flex-1 pb-3 text-sm font-medium border-b-2 transition-colors ${c==="profile"?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(hs,{size:18}),""]})}),u.jsx("button",{onClick:()=>h("chat"),className:`flex-1 pb-3 text-sm font-medium border-b-2 transition-colors ${c==="chat"?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(u2,{size:18})," "]})})]})]}),u.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:c==="profile"?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"relative bg-telegram-secondary dark:bg-black/20 p-6 flex flex-col items-center justify-center gap-4",children:[u.jsx("input",{type:"file",ref:S,className:"hidden",accept:"image/*",onChange:$}),u.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var g;return!R&&((g=S.current)==null?void 0:g.click())},children:[u.jsx("div",{className:"w-24 h-24 rounded-full bg-telegram-primary text-white flex items-center justify-center text-3xl font-bold shadow-lg overflow-hidden border-4 border-white dark:border-gray-700",children:R?u.jsx(Hi,{className:"animate-spin",size:32}):o.avatar?u.jsx("img",{src:o.avatar,alt:"Profile",className:"w-full h-full object-cover"}):o.name.charAt(0)}),u.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:u.jsx(yw,{size:24,className:"text-white"})})]}),u.jsx("div",{className:"text-center",children:u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"     "})})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(hs,{size:20})}),u.jsx("input",{type:"text",value:o.name,onChange:g=>l({...o,name:g.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white",placeholder:" "}),u.jsx("label",{className:"text-xs text-telegram-primary mt-1 block",children:" ()"})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(c2,{size:20})}),u.jsx("input",{type:"text",value:o.bio,onChange:g=>l({...o,bio:g.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white",placeholder:""}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"   "})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(gw,{size:20})}),u.jsx("input",{type:"text",value:o.username,onChange:g=>l({...o,username:g.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white dir-ltr text-right",placeholder:" "}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"  "})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:u.jsx(co,{size:20})}),u.jsx("input",{type:"tel",value:o.phone,onChange:g=>l({...o,phone:g.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white dir-ltr text-right",placeholder:" "}),u.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:" "})]}),u.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:x?u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/10 p-4 rounded-xl border border-red-200 dark:border-red-800 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-400 font-bold mb-2",children:[u.jsx(_u,{size:18}),"  "]}),u.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-3 leading-relaxed",children:"                  .     ."}),u.jsx("textarea",{value:T,onChange:g=>q(g.target.value),placeholder:"  ...",className:"w-full p-2 text-sm border rounded-lg mb-3 dark:bg-black/20 dark:border-gray-700 dark:text-white"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>_(!1),className:"flex-1 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm",children:""}),u.jsx("button",{onClick:w,className:"flex-1 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700",children:" "})]})]}):u.jsxs("button",{onClick:()=>_(!0),className:"w-full flex items-center justify-center gap-2 text-red-600 bg-red-50 dark:bg-red-900/10 py-3 rounded-xl hover:bg-red-100 dark:hover:bg-red-900/20 transition-colors font-medium",children:[u.jsx(Jn,{size:18}),"  "]})})]})]}):u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"       ."}),u.jsx("div",{className:"grid grid-cols-3 gap-3",children:Pq.map(g=>u.jsxs("div",{onClick:()=>m(g.value),className:`
                                    relative aspect-[3/4] rounded-lg cursor-pointer overflow-hidden border-2 transition-all shadow-sm
                                    ${p===g.value?"border-telegram-primary scale-105":"border-transparent hover:scale-105"}
                                `,children:[u.jsx("div",{className:"w-full h-full",style:{backgroundColor:g.color,backgroundImage:g.value.startsWith("http")?`url(${g.value})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:g.value==="default"&&u.jsx("div",{className:"w-full h-full opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7z' fill='%23ffffff' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E")`}})}),u.jsx("div",{className:"absolute bottom-0 w-full bg-black/40 text-white text-[10px] text-center py-1",children:g.name}),p===g.value&&u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:u.jsx(Va,{className:"text-white drop-shadow-md",size:32})})]},g.id))}),u.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-white/10",children:[u.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"  "}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("input",{type:"text",value:y,onChange:g=>I(g.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 bg-gray-100 dark:bg-white/5 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-telegram-primary"}),u.jsx("button",{onClick:()=>{y&&m(y)},className:"bg-telegram-secondary dark:bg-white/10 text-telegram-primary rounded-lg px-4 py-2 text-sm font-medium hover:bg-gray-200 dark:hover:bg-white/20",children:""})]})]})]})}),u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-black/20 flex justify-end gap-3",children:[u.jsx("button",{onClick:e,className:"px-4 py-2 text-telegram-primary hover:bg-telegram-primary/10 rounded-lg transition-colors font-medium",children:""}),u.jsxs("button",{onClick:W,disabled:R,className:"px-6 py-2 bg-telegram-primary hover:bg-telegram-primaryDark disabled:opacity-50 text-white rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[u.jsx(Va,{size:18})," "]})]})]})})},jq=({onClose:t,currentUserEmail:e,currentUserRole:n,onStartChat:r})=>{const[s,i]=O.useState("users"),[o,l]=O.useState([]),[c,h]=O.useState([]),[p,m]=O.useState([]),[y,I]=O.useState([]),[R,D]=O.useState(!0),[S,x]=O.useState({isOpen:!1,targetUid:null}),[_,T]=O.useState({isOpen:!1,report:null}),[q,W]=O.useState({isOpen:!1,targetUid:null,targetName:""}),[$,w]=O.useState([]),[g,E]=O.useState(null),[b,A]=O.useState([]),[N,k]=O.useState(""),[Ae,Ze]=O.useState([]),[St,ht]=O.useState("");O.useEffect(()=>{G(),te();const C=XP(h),pe=HP(m),ce=QP(I);return()=>{C(),pe(),ce()}},[]);const G=async()=>{D(!0);const C=await ZP();l(C),D(!1)},te=async()=>{const C=await iE();Ze(C)},oe=async(C,pe,ce)=>{if(n!=="owner"){alert("       .");return}const Ue=o.find(ke=>ke.uid===C);if((Ue==null?void 0:Ue.email)===Ln.OWNER_EMAIL){alert("       .");return}await eq(C,ce),l(o.map(ke=>ke.uid===C?{...ke,role:ce}:ke))},ye=async(C,pe)=>{const ce=o.find(Ue=>Ue.uid===C);if((ce==null?void 0:ce.role)==="owner"){alert("     .");return}if((ce==null?void 0:ce.role)==="admin"&&n!=="owner"){alert("      .");return}await tq(C,pe||!1),l(o.map(Ue=>Ue.uid===C?{...Ue,isBanned:!pe,banExpiresAt:void 0}:Ue))},fe=async C=>{if(n!=="owner"){alert("       .");return}confirm("             .")&&(await aE(C),l(pe=>pe.filter(ce=>ce.uid!==C)),alert("   ."))},ve=async(C,pe)=>{const ce=o.find(Ue=>Ue.uid===C);if((ce==null?void 0:ce.role)==="owner"||(ce==null?void 0:ce.role)==="admin"&&n!=="owner"){alert("     .");return}await nq(C,pe),alert(`   ${pe}   .`),G()},Ve=async(C,pe)=>{const ce=C||S.targetUid,Ue=pe||N;!ce||!Ue.trim()||(await lq(ce,"  ",Ue),pe||(x({isOpen:!1,targetUid:null}),k(""),alert("  .")))},vt=async()=>{if(!St.trim())return;const C=[...Ae,St.trim()];Ze(C),ht(""),await nv(C)},ft=async C=>{const pe=Ae.filter(ce=>ce!==C);Ze(pe),await nv(pe)},je=async C=>{if(C.role==="owner"||C.role==="admin"&&n!=="owner")return;W({isOpen:!0,targetUid:C.uid,targetName:C.name}),w([]),E(null),A([]);const pe=await oq(C.uid);w(pe)},en=async C=>{if(!q.targetUid)return;E(C);const pe=await aq(q.targetUid,C);A(pe)},it=async C=>{g&&confirm(" ")&&(g==="global_chat"?await nE(C):await sq(g,C),A(pe=>pe.filter(ce=>ce.id!==C)))},Nt=async(C,pe)=>{if(!g)return;const ce=prompt(" :",pe);ce&&ce!==pe&&(g==="global_chat"?await rE(C,ce):await oE(g,C,ce),A(Ue=>Ue.map(ke=>ke.id===C?{...ke,text:ce,edited:!0}:ke)))},Ge=async C=>{confirm("    ")&&await JP(C,n==="owner"?" ":"")},_t=async C=>{confirm("          .")&&(await ev(C),T({isOpen:!1,report:null}))},kt=async C=>{confirm(`    ${C.userName}  `)&&(await ye(C.userId,!0),await J0(C.id,!0),alert("       ."))},tn=async C=>{confirm("   ")&&await J0(C,!1)},De=async C=>{confirm(" ")&&await KP(C)},Rn=async C=>{if(n!=="owner"){alert("       .");return}confirm(`:   ${C.userName}         .   `)&&(await Z0(C.id,C.userId,!0),alert("   ."),G())},We=async C=>{confirm("     ")&&(await Z0(C.id,C.userId,!1),await Ve(C.userId,"       ."))},dn=async()=>{confirm("         ")&&(await Eq(),alert("   ."))},pt=async()=>{n==="owner"&&confirm("!            .     .   ")&&confirm("   .    ")&&(await kq(),alert("     ."))},Ut=c.filter(C=>n==="owner"?!0:C.status==="pending"),Ft=p.filter(C=>C.status==="pending");return u.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[u.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 flex justify-between items-center border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(za,{className:"text-red-600",size:24}),u.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"  "})]}),u.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:u.jsx(Mn,{size:24})})]}),u.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:[u.jsx("button",{onClick:()=>i("users"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="users"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(hs,{size:18})," "]})}),u.jsx("button",{onClick:()=>i("reports"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="reports"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(wu,{size:18})," ",c.filter(C=>C.status==="pending").length>0&&u.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 rounded-full",children:c.filter(C=>C.status==="pending").length})]})}),u.jsx("button",{onClick:()=>i("appeals"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="appeals"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(xy,{size:18})," ",Ft.length>0&&u.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-1.5 rounded-full",children:Ft.length})]})}),u.jsx("button",{onClick:()=>i("deletions"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="deletions"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(Sy,{size:18})," ",y.length>0&&u.jsx("span",{className:"bg-red-600 text-white text-[10px] px-1.5 rounded-full",children:y.length})]})}),u.jsx("button",{onClick:()=>i("filters"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="filters"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(bw,{size:18}),"  "]})}),n==="owner"&&u.jsx("button",{onClick:()=>i("maintenance"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="maintenance"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:u.jsxs("div",{className:"flex items-center justify-center gap-2",children:[u.jsx(a2,{size:18})," "]})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s==="users"?R?u.jsx("div",{className:"text-center py-10 text-gray-500",children:"    ..."}):u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-right",children:[u.jsx("thead",{className:"text-xs text-gray-500 bg-gray-50 dark:bg-gray-800 uppercase",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:" / "}),u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:""}),u.jsx("th",{className:"px-6 py-3",children:""})]})}),u.jsx("tbody",{children:o.map(C=>u.jsxs("tr",{className:"bg-white dark:bg-gray-900 border-b dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[u.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[u.jsx("img",{src:C.avatar,className:"w-8 h-8 rounded-full"}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:C.name}),C.email===Ln.OWNER_EMAIL&&u.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full w-fit",children:"Owner"})]})]}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{children:C.email}),u.jsx("span",{className:"text-xs",children:C.phone}),u.jsx("span",{className:"text-[10px] opacity-50",children:C.uid})]})}),u.jsx("td",{className:"px-6 py-4",children:n==="owner"&&C.email!==Ln.OWNER_EMAIL?u.jsxs("select",{value:C.role,onChange:pe=>oe(C.uid,C.role,pe.target.value),className:"bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",children:[u.jsx("option",{value:"user",children:""}),u.jsx("option",{value:"admin",children:""}),u.jsx("option",{value:"owner",children:" "})]}):u.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${C.role==="owner"?"bg-yellow-100 text-yellow-800":C.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:C.role==="owner"?" ":C.role==="admin"?"":""})}),u.jsx("td",{className:"px-6 py-4",children:C.isBanned?u.jsxs("div",{className:"flex flex-col",children:[u.jsxs("span",{className:"text-red-600 font-bold flex items-center gap-1",children:[u.jsx(Sr,{size:14})," "]}),C.banExpiresAt&&u.jsx("span",{className:"text-xs text-orange-500",children:" "})]}):u.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-1",children:[u.jsx(Xl,{size:14})," "]})}),u.jsxs("td",{className:"px-6 py-4 flex items-center gap-2",children:[C.email!==Ln.OWNER_EMAIL&&(n==="owner"||n==="admin"&&C.role==="user")&&u.jsxs(u.Fragment,{children:[u.jsx("button",{onClick:()=>ye(C.uid,C.isBanned||!1),title:C.isBanned?" ":" ",className:`p-2 rounded-lg text-white ${C.isBanned?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:u.jsx(Sr,{size:16})}),n==="owner"&&u.jsx("button",{onClick:()=>fe(C.uid),title:"   ",className:"p-2 rounded-lg bg-gray-600 hover:bg-gray-700 text-white",children:u.jsx(Jn,{size:16})})]}),u.jsx("button",{onClick:()=>x({isOpen:!0,targetUid:C.uid}),title:"  ",className:"p-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white",children:u.jsx(kp,{size:16})}),u.jsx("button",{onClick:()=>{r(C),t()},title:"",className:"p-2 rounded-lg bg-teal-500 hover:bg-teal-600 text-white",children:u.jsx(Fa,{size:16})}),(n==="owner"||n==="admin"&&C.role==="user")&&u.jsx("button",{onClick:()=>je(C),title:"  (Ghost Mode)",className:"p-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white",children:u.jsx(by,{size:16})})]})]},C.uid))})]})}):s==="appeals"?u.jsxs("div",{className:"space-y-4",children:[Ft.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-10 opacity-50",children:[u.jsx(xy,{size:48,className:"mb-2"}),u.jsx("p",{children:"      ."})]}):Ft.map(C=>u.jsxs("div",{className:"p-4 rounded-xl border border-orange-200 bg-orange-50 dark:bg-orange-900/10 dark:border-orange-800 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[u.jsx(hs,{size:16})," ",C.userName]}),u.jsx("span",{className:"text-xs text-gray-500 font-mono",children:C.userId})]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(C.createdAt).toLocaleString("fa-IR")})]}),u.jsx("div",{className:"bg-white dark:bg-black/20 p-3 rounded-lg text-sm leading-relaxed text-gray-800 dark:text-gray-200",children:C.message}),u.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[u.jsx("button",{onClick:()=>tn(C.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm hover:bg-red-200",children:" "}),u.jsxs("button",{onClick:()=>kt(C),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 flex items-center gap-2 shadow-sm",children:[u.jsx(Xl,{size:16}),"   "]})]})]},C.id)),p.filter(C=>C.status!=="pending").length>0&&u.jsxs("div",{className:"mt-8 border-t pt-4 dark:border-gray-700",children:[u.jsx("h4",{className:"text-sm font-bold text-gray-500 mb-4",children:" "}),p.filter(C=>C.status!=="pending").map(C=>u.jsxs("div",{className:"p-3 mb-2 rounded border dark:border-gray-700 opacity-60 hover:opacity-100 transition-opacity bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-sm",children:C.userName}),u.jsx("span",{className:`mx-2 text-xs px-2 py-0.5 rounded-full ${C.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.status==="approved"?" ":" "})]}),u.jsx("button",{onClick:()=>De(C.id),className:"text-red-400 hover:text-red-600",children:u.jsx(Jn,{size:16})})]},C.id))]})]}):s==="deletions"?u.jsx("div",{className:"space-y-4",children:y.length===0?u.jsxs("div",{className:"flex flex-col items-center justify-center py-10 opacity-50",children:[u.jsx(Sy,{size:48,className:"mb-2"}),u.jsx("p",{children:"     ."})]}):y.map(C=>u.jsxs("div",{className:"p-4 rounded-xl border border-red-200 bg-red-50 dark:bg-red-900/10 dark:border-red-800 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[u.jsx(hs,{size:16})," ",C.userName]}),u.jsx("span",{className:"text-xs text-gray-500 font-mono",children:C.userId})]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(C.createdAt).toLocaleString("fa-IR")})]}),u.jsxs("div",{className:"bg-white dark:bg-black/20 p-3 rounded-lg text-sm leading-relaxed text-gray-800 dark:text-gray-200",children:[u.jsx("span",{className:"block text-xs text-red-500 mb-1",children:" :"}),C.reason]}),u.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[u.jsx("button",{onClick:()=>We(C),className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm",children:" "}),u.jsxs("button",{onClick:()=>Rn(C),className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700 flex items-center gap-2 shadow-sm",children:[u.jsx(Jn,{size:16}),"  "]})]})]},C.id))}):s==="reports"?u.jsx("div",{className:"space-y-4",children:Ut.length===0?u.jsx("p",{className:"text-center text-gray-500 py-10",children:"   ."}):Ut.map(C=>u.jsxs("div",{className:`p-4 rounded-xl border flex flex-col md:flex-row gap-4 ${C.status==="handled"?"bg-green-50 border-green-200 dark:bg-green-900/10":"bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[C.status==="pending"?u.jsxs("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[u.jsx(wu,{size:10})," "]}):u.jsxs("span",{className:"bg-green-100 text-green-600 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[u.jsx(Va,{size:10}),"    ",C.handledBy]}),u.jsx("span",{className:"text-xs text-gray-400",children:new Date(C.createdAt).toLocaleString("fa-IR")})]}),u.jsxs("div",{className:"mb-2",children:[u.jsxs("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:[": ",u.jsx("span",{className:"font-mono text-xs opacity-70",children:C.reporterId})]}),u.jsxs("p",{className:"text-sm font-bold text-red-500",children:[": ",C.reportedUserName," ",u.jsxs("span",{className:"font-mono text-xs opacity-70 text-gray-400",children:["(",C.reportedUserId,")"]})]})]}),u.jsxs("div",{className:"bg-gray-100 dark:bg-black/20 p-2 rounded text-sm mb-2",children:[u.jsx("span",{className:"text-xs opacity-50 block mb-1",children:" :"}),C.messageContent]}),u.jsxs("div",{className:"text-xs text-red-500 bg-red-50 dark:bg-red-900/20 p-2 rounded inline-block",children:[": ",C.reason]})]}),u.jsxs("div",{className:"flex flex-row md:flex-col gap-2 justify-center border-t md:border-t-0 md:border-r border-gray-100 dark:border-gray-700 pt-2 md:pt-0 md:pr-4",children:[C.status==="pending"&&u.jsxs("button",{onClick:()=>T({isOpen:!0,report:C}),className:"flex items-center justify-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm",children:[u.jsx(h2,{size:16}),"  "]}),n==="owner"&&C.status==="handled"&&u.jsxs("button",{onClick:()=>_t(C.id),className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm",children:[u.jsx(Xl,{size:16}),"   "]})]})]},C.id))}):s==="maintenance"?u.jsxs("div",{className:"max-w-3xl mx-auto space-y-6 py-6",children:[u.jsx("div",{className:"p-6 bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-xl",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(tc,{size:32,className:"text-blue-600 mt-1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-blue-800 dark:text-blue-300 mb-2",children:" "}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:"                           ."}),u.jsx("button",{onClick:dn,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:"  "})]})]})}),u.jsx("div",{className:"p-6 bg-red-50 dark:bg-red-900/10 border border-red-200 dark:border-red-800 rounded-xl",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx(Jn,{size:32,className:"text-red-600 mt-1"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-bold text-red-800 dark:text-red-300 mb-2",children:"   ()"}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["           . ",u.jsx("br",{}),u.jsx("strong",{children:":"}),"   (Users)   .     ."]}),u.jsx("button",{onClick:pt,className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors shadow-sm",children:"  "})]})]})})]}):u.jsxs("div",{className:"max-w-2xl mx-auto",children:[u.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-sm text-yellow-800 flex items-start gap-3",children:[u.jsx(_u,{className:"shrink-0"}),u.jsx("p",{children:"               (***)   ."})]}),u.jsxs("div",{className:"flex gap-2 mb-6",children:[u.jsx("input",{type:"text",value:St,onChange:C=>ht(C.target.value),placeholder:"  ...",className:"flex-1 p-3 rounded-xl border bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-white"}),u.jsx("button",{onClick:vt,className:"bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 transition-colors",children:""})]}),u.jsx("div",{className:"flex flex-wrap gap-2",children:Ae.map((C,pe)=>u.jsxs("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full flex items-center gap-2",children:[u.jsx("span",{children:C}),u.jsx("button",{onClick:()=>ft(C),className:"hover:text-red-900",children:u.jsx(Mn,{size:14})})]},pe))})]})}),S.isOpen&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/70 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md shadow-2xl",children:[u.jsx("h3",{className:"text-lg font-bold mb-4",children:"    "}),u.jsx("textarea",{value:N,onChange:C=>k(C.target.value),placeholder:"   ...",className:"w-full h-32 p-3 border rounded-lg mb-4 bg-gray-50 dark:bg-gray-700 dark:border-gray-600 resize-none"}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>x({isOpen:!1,targetUid:null}),className:"px-4 py-2 text-gray-500",children:""}),u.jsxs("button",{onClick:()=>Ve(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2",children:[u.jsx(nc,{size:16})," "]})]})]})}),_.isOpen&&_.report&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/80 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-y-auto max-h-[90vh]",children:[u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 text-red-600",children:[u.jsx(za,{}),"   "]}),u.jsx("button",{onClick:()=>T({isOpen:!1,report:null}),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:u.jsx(Mn,{})})]}),u.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-200",children:[u.jsx(_u,{size:24,className:"text-red-600"}),u.jsxs("div",{children:[u.jsx("span",{className:"font-bold text-sm block",children:"  (  )"}),u.jsx("span",{className:"text-xs opacity-80",children:"          ."})]})]}),u.jsx("button",{onClick:()=>{confirm("        (  )   ")&&(ye(_.report.reportedUserId,!1),ye(_.report.reporterId,!1),alert("      ."))},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm whitespace-nowrap",children:"  "})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[u.jsxs("div",{className:"border border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/10 rounded-xl p-4",children:[u.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-3 flex items-center gap-2",children:[u.jsx(hs,{size:18})," : ",_.report.reportedUserName]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>ye(_.report.reportedUserId,!1),className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Sr,{size:16}),"  "]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("button",{onClick:()=>ve(_.report.reportedUserId,24),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ci,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>ve(_.report.reportedUserId,72),className:"bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ci,{size:14}),"   "]})]}),u.jsxs("button",{onClick:()=>ve(_.report.reportedUserId,168),className:"w-full bg-orange-700 hover:bg-orange-800 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ci,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>{const C=prompt("    :");C&&Ve(_.report.reportedUserId,` : ${C}`)},className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(_u,{size:16}),"  "]})]})]}),u.jsxs("div",{className:"border border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/10 rounded-xl p-4",children:[u.jsxs("h4",{className:"font-bold text-blue-700 dark:text-blue-400 mb-3 flex items-center gap-2",children:[u.jsx(wu,{size:18})," : ",_.report.reporterId]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("button",{onClick:()=>{const C=prompt("    ( ):");C&&Ve(_.report.reporterId,` : ${C}`)},className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(mw,{size:16}),"   "]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("button",{onClick:()=>ve(_.report.reporterId,24),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ci,{size:14}),"   "]}),u.jsxs("button",{onClick:()=>ve(_.report.reporterId,72),className:"bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[u.jsx(Ci,{size:14}),"   "]})]}),u.jsxs("button",{onClick:()=>ye(_.report.reporterId,!1),className:"w-full bg-gray-800 hover:bg-gray-900 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Sr,{size:16}),"  ( )"]})]}),u.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-200 dark:border-blue-800",children:[u.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"   :"}),u.jsxs("button",{onClick:()=>{Ge(_.report.id),T({isOpen:!1,report:null})},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Xl,{size:16}),"    "]}),u.jsxs("button",{onClick:()=>{ev(_.report.id),T({isOpen:!1,report:null})},className:"w-full mt-2 bg-red-100 hover:bg-red-200 text-red-600 py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[u.jsx(Jn,{size:16}),"   "]})]})]})]})]})}),q.isOpen&&u.jsx("div",{className:"absolute inset-0 z-[110] bg-black/70 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-6xl h-[80vh] shadow-2xl flex flex-col overflow-hidden border border-gray-300 dark:border-gray-700",children:[u.jsxs("div",{className:"p-4 bg-purple-700 text-white flex justify-between items-center shadow-md",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(by,{size:24,className:"animate-pulse"}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-bold",children:["  : ",q.targetName]}),u.jsx("p",{className:"text-xs opacity-80",children:"Ghost Mode: Viewing chats as user"})]})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>ye(q.targetUid,!0),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm flex items-center gap-1",children:[u.jsx(Sr,{size:14}),"   "]}),u.jsx("button",{onClick:()=>W({isOpen:!1,targetUid:null,targetName:""}),className:"bg-white/10 hover:bg-white/20 p-2 rounded-full",children:u.jsx(Mn,{size:20})})]})]}),u.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[u.jsxs("div",{className:"w-1/3 border-l border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:[u.jsx("h4",{className:"p-3 font-bold text-gray-500 text-sm border-b dark:border-gray-700",children:" "}),$.map(C=>u.jsxs("div",{onClick:()=>en(C.id),className:`flex items-center gap-3 p-3 cursor-pointer transition-colors border-b dark:border-gray-800 ${g===C.id?"bg-purple-100 dark:bg-purple-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[u.jsx("img",{src:C.avatar,className:"w-10 h-10 rounded-full bg-gray-300"}),u.jsxs("div",{className:"overflow-hidden",children:[u.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100 truncate",children:C.name}),u.jsx("div",{className:"text-xs text-gray-500",children:C.type==="group"?"":""})]}),g===C.id&&u.jsx(n2,{size:16,className:"mr-auto text-purple-500"})]},C.id)),$.length===0&&u.jsx("p",{className:"text-center p-4 text-sm text-gray-500",children:"  ."})]}),u.jsx("div",{className:"flex-1 bg-white dark:bg-black/20 overflow-y-auto p-4 flex flex-col",children:g?b.length>0?b.map(C=>u.jsxs("div",{className:`mb-2 p-3 rounded-lg max-w-[80%] border group relative ${C.senderId===q.targetUid?"self-end bg-purple-50 border-purple-200 dark:bg-purple-900/20 dark:border-purple-800":"self-start bg-gray-50 border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("span",{className:"text-xs font-bold text-gray-600 dark:text-gray-400",children:C.senderName||C.senderId}),u.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(C.timestamp).toLocaleTimeString("fa-IR")})]}),u.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-200 whitespace-pre-wrap",children:C.text}),u.jsxs("div",{className:"absolute top-1 left-1 hidden group-hover:flex gap-1 bg-white dark:bg-gray-800 p-1 rounded shadow-md border dark:border-gray-600",children:[u.jsx("button",{onClick:()=>Nt(C.id,C.text),className:"p-1 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded",title:"",children:u.jsx(Ew,{size:12})}),u.jsx("button",{onClick:()=>it(C.id),className:"p-1 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",title:"",children:u.jsx(Jn,{size:12})})]})]},C.id)):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[u.jsx(Fa,{size:40,className:"mb-2 opacity-50"}),u.jsx("p",{children:"     ."})]}):u.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[u.jsx(ec,{size:40,className:"mb-2 opacity-50"}),u.jsx("p",{children:"      ."})]})})]})]})})]})})},Dq=({onSuccess:t,storedAccounts:e=[],initialEmail:n=""})=>{const[r,s]=O.useState(!0),[i,o]=O.useState(!1),[l,c]=O.useState(""),[h,p]=O.useState(e.length>0&&!n),[m,y]=O.useState({name:"",email:n||"",phone:"",password:""});O.useEffect(()=>{n&&(y(x=>({...x,email:n})),p(!1))},[n]);const I=async x=>{x.preventDefault(),c(""),o(!0);try{if(r){if(!m.email||!m.password)throw new Error("       ");await MP(m.email,m.password)}else{if(!m.name||!m.email||!m.password||!m.phone)throw new Error("     ");if(m.password.length<6)throw new Error("      ");await OP(m.email,m.password,m.name,m.phone)}}catch(_){console.error(_),_.code==="auth/invalid-email"?c("   "):_.code==="auth/user-not-found"||_.code==="auth/wrong-password"||_.code==="auth/invalid-credential"?c("     "):_.code==="auth/email-already-in-use"?c("     "):c(_.message||"  .    .")}finally{o(!1)}},R=async()=>{c(""),o(!0);try{await LP()}catch(x){if(console.error("Google Login Error:",x),x.code==="auth/unauthorized-domain"){const _=window.location.hostname;c(` "${_}"  .      Authentication > Settings > Authorized domains    .`)}else x.code==="auth/popup-closed-by-user"?c("     ."):c(x.message||"    ")}finally{o(!1)}},D=x=>{y(_=>({..._,email:x.email})),p(!1),s(!0)},S=()=>u.jsx("div",{className:"absolute bottom-6 left-0 right-0 z-20 flex justify-center animate-fade-in pointer-events-none",children:u.jsxs("div",{className:"pointer-events-auto bg-white/10 dark:bg-black/40 backdrop-blur-md border border-white/20 dark:border-white/10 px-6 py-2.5 rounded-full shadow-2xl flex items-center gap-4 transition-transform hover:-translate-y-1 duration-300",children:[u.jsxs("a",{href:"https://github.com/mrv006",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-telegram-primary dark:hover:text-telegram-primary transition-colors group",children:[u.jsx("div",{className:"p-1.5 bg-white/20 rounded-full group-hover:bg-white/40 transition-colors",children:u.jsx(l2,{size:18})}),u.jsxs("div",{className:"flex flex-col",children:[u.jsx("span",{className:"text-[10px] opacity-60 font-medium leading-none mb-0.5",children:"Designed & Developed by"}),u.jsx("span",{className:"text-sm font-bold leading-none tracking-wide font-mono",children:"Mr.V"})]})]}),u.jsx("div",{className:"w-px h-8 bg-gray-400/30 dark:bg-white/20"}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[u.jsx(E2,{size:16,className:"opacity-70"}),u.jsx("span",{className:"text-xs font-mono font-bold tracking-wider opacity-90",children:"09902076468"})]})]})});return h&&e.length>0?u.jsxs("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark p-4 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 chat-bg-pattern pointer-events-none"}),u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-telegram-secondaryDark rounded-3xl shadow-2xl p-8 relative z-10 animate-fade-in",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-lg shadow-telegram-primary/30 p-2 overflow-hidden border-4 border-telegram-primary",children:u.jsx("img",{src:"https://www.tarhbama.com/cities-vector/147566",alt:"Logo",className:"w-full h-full object-cover"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"  "}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"         "})]}),u.jsxs("div",{className:"space-y-3 mb-6",children:[e.map(x=>u.jsxs("button",{onClick:()=>D(x),className:"w-full bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 p-3 rounded-xl flex items-center gap-4 transition-colors border border-gray-100 dark:border-gray-700",children:[u.jsx("img",{src:x.avatar,className:"w-12 h-12 rounded-full object-cover"}),u.jsxs("div",{className:"text-right flex-1",children:[u.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:x.name}),u.jsx("p",{className:"text-sm text-gray-500",children:x.email})]}),u.jsx(ec,{size:20,className:"text-gray-400 rotate-180"})]},x.uid)),u.jsxs("button",{onClick:()=>p(!1),className:"w-full bg-transparent hover:bg-gray-50 dark:hover:bg-white/5 p-3 rounded-xl flex items-center gap-4 transition-colors border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:text-telegram-primary",children:[u.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-white/5 flex items-center justify-center",children:u.jsx(kw,{size:24})}),u.jsx("div",{className:"text-right flex-1",children:u.jsx("h3",{className:"font-bold",children:"   "})})]})]})]}),S()]}):u.jsxs("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark p-4 relative overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 opacity-10 chat-bg-pattern pointer-events-none"}),u.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-telegram-secondaryDark rounded-3xl shadow-2xl p-8 relative z-10 animate-fade-in border border-white/50 dark:border-white/5",children:[u.jsxs("div",{className:"text-center mb-8 relative",children:[e.length>0&&u.jsx("button",{onClick:()=>p(!0),className:"absolute top-0 right-0 p-2 text-gray-400 hover:text-gray-600",title:"   ",children:u.jsx(tf,{size:20})}),u.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-xl shadow-telegram-primary/30 ring-4 ring-telegram-primary dark:ring-telegram-secondaryDark p-2 overflow-hidden transform hover:scale-105 transition-transform duration-500",children:u.jsx("img",{src:"https://www.tarhbama.com/cities-vector/147566",alt:"Logo",className:"w-full h-full object-cover"})}),u.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:r?"  ":"  "}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:r?"   ":"     "})]}),l&&u.jsxs("div",{className:"mb-6 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-start gap-2 text-right dir-rtl",dir:"rtl",children:[u.jsx(mw,{size:16,className:"mt-0.5 shrink-0"}),u.jsx("span",{children:l})]}),u.jsxs("form",{onSubmit:I,className:"space-y-4",children:[!r&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"relative group",children:[u.jsx(hs,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"text",name:"name",autoComplete:"name",placeholder:"   ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white font-medium placeholder:font-normal",value:m.name,onChange:x=>y({...m,name:x.target.value})})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(co,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"tel",name:"phone",autoComplete:"tel",placeholder:" ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.phone,onChange:x=>y({...m,phone:x.target.value})})]})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(f2,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"email",name:"email",autoComplete:"username",placeholder:"",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.email,onChange:x=>y({...m,email:x.target.value})})]}),u.jsxs("div",{className:"relative group",children:[u.jsx(ww,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),u.jsx("input",{type:"password",name:"password",autoComplete:r?"current-password":"new-password",placeholder:" ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.password,onChange:x=>y({...m,password:x.target.value})})]}),u.jsx("button",{type:"submit",disabled:i,className:"w-full bg-telegram-primary hover:bg-telegram-primaryDark text-white font-bold py-3 rounded-xl shadow-lg shadow-telegram-primary/30 flex items-center justify-center gap-2 transition-transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed mt-6",children:i?u.jsx(Hi,{className:"animate-spin"}):u.jsxs(u.Fragment,{children:[r?"":" ",u.jsx(ec,{size:20,className:"rotate-180"})]})})]}),u.jsxs("div",{className:"relative my-6",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-200 dark:border-white/10"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-2 bg-white dark:bg-telegram-secondaryDark text-gray-500",children:""})})]}),u.jsxs("button",{type:"button",onClick:R,disabled:i,className:"w-full bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/10 text-gray-700 dark:text-white font-medium py-3 rounded-xl flex items-center justify-center gap-3 transition-colors",children:[u.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"Google"}),"   "]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsx("button",{onClick:()=>{s(!r),c("")},className:"text-telegram-primary hover:underline text-sm font-medium",children:r?"     ":"     "})})]}),S()]})},Oq=({currentUser:t,onLogout:e,banExpiresAt:n})=>{const[r,s]=O.useState(""),[i,o]=O.useState(!1),[l,c]=O.useState(!1),[h,p]=O.useState("");O.useEffect(()=>{if(n){const y=setInterval(()=>{const R=Date.now(),D=n-R;if(D<=0)p("   .     ."),clearInterval(y);else{const S=Math.floor(D/36e5),x=Math.floor(D%(1e3*60*60)/(1e3*60));p(`${S}   ${x}  `)}},6e4),I=n-Date.now();if(I>0){const R=Math.floor(I/36e5),D=Math.floor(I%(1e3*60*60)/(1e3*60));p(`${R}   ${D}  `)}return()=>clearInterval(y)}},[n]);const m=async()=>{if(r.trim()){o(!0);try{await WP(t.uid,t.name,r),c(!0),s("")}catch(y){console.error("Error sending appeal",y),alert("   .    .")}finally{o(!1)}}};return u.jsx("div",{className:"fixed inset-0 z-[200] bg-gray-100 dark:bg-black flex flex-col items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-800",children:[u.jsxs("div",{className:"bg-red-600 p-8 flex flex-col items-center text-center text-white",children:[u.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mb-4 backdrop-blur-sm animate-pulse",children:u.jsx(za,{size:40})}),u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"   "}),n?u.jsxs("div",{className:"bg-red-800/50 px-4 py-2 rounded-lg mt-2 flex items-center gap-2",children:[u.jsx(Ci,{size:16}),u.jsx("span",{className:"font-mono text-sm",children:h||"  ..."})]}):u.jsx("p",{className:"opacity-90 text-sm leading-relaxed",children:"           ."})]}),u.jsxs("div",{className:"p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-start gap-3 bg-red-50 dark:bg-red-900/20 p-4 rounded-xl text-red-800 dark:text-red-200 text-sm border border-red-100 dark:border-red-800",children:[u.jsx(ww,{className:"shrink-0 mt-1",size:18}),u.jsxs("p",{className:"leading-relaxed",children:["        . ",n?"        .":"               ."]})]}),l?u.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 p-6 rounded-xl text-center animate-fade-in",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-800 text-green-600 dark:text-green-200 rounded-full flex items-center justify-center mx-auto mb-3",children:u.jsx(nc,{size:24,className:"rotate-180"})}),u.jsx("h3",{className:"font-bold text-green-700 dark:text-green-300 mb-1",children:"  "}),u.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"      .    ."}),u.jsx("button",{onClick:()=>c(!1),className:"text-xs text-gray-400 underline mt-4 hover:text-gray-600 dark:hover:text-gray-200",children:"  "})]}):u.jsxs("div",{className:"space-y-3",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300",children:[u.jsx(Fa,{size:16}),"    /"]}),u.jsx("textarea",{value:r,onChange:y=>s(y.target.value),placeholder:"       ...",className:"w-full h-32 p-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-black/20 focus:ring-2 focus:ring-red-500 outline-none resize-none text-gray-900 dark:text-white transition-all"}),u.jsx("button",{onClick:m,disabled:i||!r.trim(),className:"w-full bg-telegram-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg",children:i?"  ...":u.jsxs(u.Fragment,{children:[u.jsx(nc,{size:18,className:"rotate-180"})," "]})})]}),u.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800 pt-4",children:u.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 text-gray-500 hover:text-red-500 transition-colors py-2 text-sm",children:[u.jsx(Ua,{size:16}),"   "]})})]})]})})},Mq="data:audio/mpeg;base64,//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",ia=[{id:"global_chat",name:"   ",avatar:"https://cdn-icons-png.flaticon.com/512/921/921490.png",status:"online",bio:"        (   )",username:"@global_world",phone:"",type:"group",isGlobal:!0},{id:"saved",name:"  ",avatar:"",status:"online",bio:"       ",username:"@saved_messages",phone:"",type:"user"}],oa={};ia.forEach(t=>{oa[t.id]={contactId:t.id,messages:[],unreadCount:0,draft:""}});const Lq={uid:"",name:" ",email:"",bio:"...",username:"@guest",phone:"",role:"user",isBanned:!1,avatar:"",createdAt:Date.now(),lastSeen:Date.now(),status:"offline"},Vq=()=>{var L,ne;const[t,e]=O.useState(null),[n,r]=O.useState(!0),[s,i]=O.useState(ia),[o,l]=O.useState(oa),[c,h]=O.useState(Lq),[p,m]=O.useState([]),[y,I]=O.useState(""),[R,D]=O.useState("default"),[S,x]=O.useState(null),[_,T]=O.useState(()=>localStorage.getItem("irangram_theme")||Qs.LIGHT),[q,W]=O.useState(window.innerWidth<768),[$,w]=O.useState(!1),[g,E]=O.useState(null),[b,A]=O.useState(!1),[N,k]=O.useState(!1),[Ae,Ze]=O.useState(!1),[St,ht]=O.useState(""),[G,te]=O.useState(0),[oe,ye]=O.useState(null),[fe,ve]=O.useState(!1),[Ve,vt]=O.useState(0),[ft,je]=O.useState(!1),[en,it]=O.useState(null),[Nt,Ge]=O.useState(!1),_t=O.useRef(!1),kt=O.useRef(null),tn=O.useRef(null),De=O.useRef(null),Rn=O.useRef(new Audio(Mq)),We=O.useRef(new Set),dn=O.useRef(s),pt=O.useRef({activeContactId:S,isSettingsOpen:b,isAdminPanelOpen:N,showProfile:$,viewingContact:g,isCalling:fe,showExitConfirm:Nt});O.useEffect(()=>{dn.current=s},[s]),O.useEffect(()=>{pt.current={activeContactId:S,isSettingsOpen:b,isAdminPanelOpen:N,showProfile:$,viewingContact:g,isCalling:fe,showExitConfirm:Nt}},[S,b,N,$,g,fe,Nt]),O.useEffect(()=>{const M=J=>{J.preventDefault(),J.returnValue=""};window.addEventListener("beforeunload",M),window.history.pushState({app:!0},"",window.location.href);const F=J=>{if(_t.current)return;window.history.pushState({app:!0},"",window.location.href);const z=pt.current;if(z.showExitConfirm){Ge(!1);return}if(z.isCalling){ve(!1);return}if(z.isAdminPanelOpen){k(!1);return}if(z.isSettingsOpen){A(!1);return}if(z.showProfile||z.viewingContact){w(!1),E(null);return}if(z.activeContactId){x(null);return}Ge(!0)};return window.addEventListener("popstate",F),()=>{window.removeEventListener("beforeunload",M),window.removeEventListener("popstate",F)}},[]),O.useEffect(()=>{_===Qs.DARK?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[_]),O.useEffect(()=>{i(M=>{if(!M)return[];const F=new Map;return M.forEach(J=>F.set(J.id,J)),F.size!==M.length?Array.from(F.values()):M})},[]),O.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),O.useEffect(()=>{const M=F=>{F.preventDefault(),ye(F)};return window.addEventListener("beforeinstallprompt",M),()=>{window.removeEventListener("beforeinstallprompt",M)}},[]);const Ut=()=>{window.open("https://mrv006.github.io/Irangram/","_blank")};O.useEffect(()=>{const M=localStorage.getItem("irangram_accounts");M&&m(JSON.parse(M))},[]),O.useEffect(()=>{const M=DP(async F=>{var J;if(F){e(F);const z=await Sf(F.uid);h({uid:F.uid,name:(z==null?void 0:z.name)||F.displayName||"",email:F.email||"",bio:(z==null?void 0:z.bio)||"",username:(z==null?void 0:z.username)||((J=F.email)==null?void 0:J.split("@")[0])||"",phone:(z==null?void 0:z.phone)||"",role:(z==null?void 0:z.role)||"user",isBanned:(z==null?void 0:z.isBanned)||!1,banExpiresAt:z==null?void 0:z.banExpiresAt,avatar:(z==null?void 0:z.avatar)||F.photoURL||`https://ui-avatars.com/api/?name=${F.email}`,createdAt:z==null?void 0:z.createdAt,lastSeen:z==null?void 0:z.lastSeen,status:(z==null?void 0:z.status)||"online"});const Y=F.uid,se=localStorage.getItem(`irangram_contacts_${Y}`);let be=se?JSON.parse(se):ia;be.find(et=>et.id==="global_chat")||(be=[...ia,...be]);const Ce=Array.from(new Map(be.map(et=>[et.id,et])).values());i(Ce);const me=localStorage.getItem(`irangram_sessions_${Y}`);let at=JSON.parse(me||JSON.stringify(oa));at.global_chat||(at.global_chat=oa.global_chat),l(at);const zt=localStorage.getItem(`irangram_wallpaper_${Y}`);D(zt||"default"),m(et=>{var bt;const P={uid:F.uid,name:(z==null?void 0:z.name)||F.displayName||"",avatar:(z==null?void 0:z.avatar)||`https://ui-avatars.com/api/?name=${F.email}`,email:F.email||"",username:(z==null?void 0:z.username)||((bt=F.email)==null?void 0:bt.split("@")[0])||"",role:(z==null?void 0:z.role)||"user"},le=et.filter(hn=>hn.uid!==F.uid),_e=[P,...le];return localStorage.setItem("irangram_accounts",JSON.stringify(_e)),_e})}else e(null),i(ia),l(oa);r(!1)});return()=>M()},[]),O.useEffect(()=>{if(!t)return;const M=VP(t.uid,Y=>{Y.isBanned&&Y.banExpiresAt&&rq(t.uid,Y),h(se=>({...se,...Y}))});ou(t.uid,"online");const F=setInterval(()=>{ou(t.uid,"online")},3e4),J=()=>ou(t.uid,"offline");window.addEventListener("beforeunload",J);const z=$P(Y=>{i(se=>{const be=se.map(Ce=>{const me=Y.find(at=>at.uid===Ce.id);return me?{...Ce,status:me.status,lastSeen:new Date(me.lastSeen).toISOString(),avatar:me.avatar||Ce.avatar}:Ce});return JSON.stringify(be)!==JSON.stringify(se)?be:se})});return()=>{M(),z(),clearInterval(F),window.removeEventListener("beforeunload",J),ou(t.uid,"offline")}},[t]),O.useEffect(()=>{if(t){localStorage.setItem(`irangram_sessions_${t.uid}`,JSON.stringify(o));const M=Array.from(new Map(s.map(F=>[F.id,F])).values());localStorage.setItem(`irangram_contacts_${t.uid}`,JSON.stringify(M)),localStorage.setItem(`irangram_wallpaper_${t.uid}`,R)}},[o,s,R,t]),O.useEffect(()=>{localStorage.setItem("irangram_theme",_)},[_]),O.useEffect(()=>{if(!t||c.isBanned)return;const M=wq(z=>{if(z.currentVersion>Ln.VERSION&&Ze(!0),z.forceUpdate){const Y=Number(localStorage.getItem("last_forced_update")||0);z.forceUpdate>Y&&(ht("     .     ."),te(z.forceUpdate),Ze(!0))}}),F=uq(t.uid,z=>{if(z.length>0){const Y=z[0];it({title:Y.title,message:Y.message}),cq(t.uid,Y.id)}}),J=yq(t.uid,async z=>{for(const Y of z){Y.type==="group"&&(dn.current.some(me=>me.id===Y.id)||i(me=>[...me,{id:Y.id,name:Y.name,avatar:Y.avatar,bio:Y.description||"",username:"",phone:"",status:"online",type:"group"}]));const se=Y.participants.find(Ce=>Ce!==t.uid);!se||Y.type==="group"||Y.id.includes("saved")||!dn.current.some(me=>me.id===se)&&!We.current.has(se)&&(We.current.add(se),Sf(se).then(me=>{me&&i(at=>{if(!at)return[];const zt=new Map(at.map(et=>[et.id,et]));return zt.has(me.uid)?at:(zt.set(me.uid,{id:me.uid,name:me.name,avatar:me.avatar,bio:me.bio,username:"@"+me.username,phone:me.phone,status:me.status,type:"user"}),Array.from(zt.values()))}),We.current.delete(se)}));const be=Y.type==="group"?Y.id:se||"saved";l(Ce=>{const me=Ce[be]||{contactId:be,messages:[],unreadCount:0,draft:""};let at=me.messages;at.length===0&&Y.lastMessage&&(at=[{id:"preview-"+Date.now(),text:Y.lastMessage,senderId:Y.lastSenderId||"them",timestamp:Y.updatedAt,status:"read",type:"text",reactions:{}}]);let zt=me.unreadCount;return Y.lastSenderId&&Y.lastSenderId!==t.uid&&S!==be&&zt===0&&(zt=1),{...Ce,[be]:{...me,messages:at,unreadCount:S===be?0:zt}}})}});return xq(),()=>{M(),F(),J()}},[t,c.isBanned,S]),O.useEffect(()=>{if(!t||c.isBanned)return;const M=F=>{const J=F.map(z=>({...z,senderId:z.senderId===t.uid?"me":z.senderId,reactions:z.reactions||{}}));l(z=>{var Ce,me,at,zt,et,P;const Y=(me=(Ce=z.global_chat)==null?void 0:Ce.messages.slice(-1)[0])==null?void 0:me.id,se=(at=J.slice(-1)[0])==null?void 0:at.id;let be=((zt=z.global_chat)==null?void 0:zt.unreadCount)||0;if(Y!==se&&J.length>0&&J[J.length-1].senderId!=="me"){S!=="global_chat"&&(be+=1);try{Rn.current.currentTime=0,Rn.current.play().catch(()=>{})}catch{}}return{...z,global_chat:{contactId:"global_chat",messages:J,unreadCount:S==="global_chat"?0:be,draft:((et=z.global_chat)==null?void 0:et.draft)||"",pinnedMessage:(P=z.global_chat)==null?void 0:P.pinnedMessage}}})};return kt.current=pq(M),tn.current=fq("global_chat",F=>{l(J=>({...J,global_chat:{...J.global_chat,pinnedMessage:F}}))}),()=>{kt.current&&kt.current(),tn.current&&tn.current()}},[t,S,c.isBanned]),O.useEffect(()=>{if(!t||!S){De.current&&De.current();return}const M=S==="global_chat";if(s.find(F=>F.id===S),M)De.current&&(De.current(),De.current=null);else{De.current&&De.current();const F=Ni(t.uid,S);De.current=gq(F,J=>{const z=J.map(Y=>({...Y,senderId:Y.senderId===t.uid?"me":Y.senderId,reactions:Y.reactions||{}}));l(Y=>{var se;return{...Y,[S]:{contactId:S,messages:z,unreadCount:0,draft:((se=Y[S])==null?void 0:se.draft)||""}}})})}return()=>{De.current&&De.current()}},[S,t,s]),O.useEffect(()=>{let M;return fe?M=setInterval(()=>{vt(F=>F+1)},1e3):vt(0),()=>clearInterval(M)},[fe]);const Ft=()=>T(M=>M===Qs.LIGHT?Qs.DARK:Qs.LIGHT),C=M=>{x(M),w(!1),E(null),l(F=>({...F,[M]:{...F[M],unreadCount:0}}))},pe=M=>{i(F=>F.some(J=>J.id===M.id)?F:[...F,M]),l(F=>F[M.id]?F:{...F,[M.id]:{contactId:M.id,messages:[],unreadCount:0,draft:""}}),C(M.id)},ce=async(M,F,J,z)=>{if(t)try{const Y=await zP(M,F,J,z,t.uid);if(Y){const se={id:Y.id,name:Y.name,avatar:Y.avatar,bio:F||" ",username:"",phone:"",status:"online",type:"group"};pe(se)}}catch(Y){console.error("Error creating group",Y),alert("   ")}},Ue=O.useCallback(async(M,F)=>{!S||!t||(S==="global_chat"?await _q(M,F,t.uid):l(J=>{const z=J[S];if(!z)return J;const Y=z.messages.map(se=>{if(se.id!==M)return se;const be={...se.reactions},Ce=be[F]||[];return Ce.includes("me")?(be[F]=Ce.filter(me=>me!=="me"),be[F].length===0&&delete be[F]):be[F]=[...Ce,"me"],{...se,reactions:be}});return{...J,[S]:{...z,messages:Y}}}))},[S,t]),ke=O.useCallback(async M=>{S&&(S==="global_chat"?await nE(M):l(F=>({...F,[S]:{...F[S],messages:F[S].messages.filter(J=>J.id!==M)}})))},[S]),ot=O.useCallback(async M=>{if(!S)return;const F={id:M.id,text:M.type==="text"?M.text.substring(0,50):M.type==="image"?"":"",sender:M.senderName||"",type:M.type};S==="global_chat"?(c.role==="admin"||c.role==="owner")&&await dq("global_chat",F):l(J=>({...J,[S]:{...J[S],pinnedMessage:F}}))},[S,c]),$n=O.useCallback(async()=>{S&&(S==="global_chat"?(c.role==="admin"||c.role==="owner")&&await hq("global_chat"):l(M=>({...M,[S]:{...M[S],pinnedMessage:null}})))},[S,c]),or=O.useCallback(async(M,F)=>{if(!S||!t)return;if(S==="global_chat"){await rE(M,F);return}if(!(S==="global_chat")){const z=Ni(t.uid,S);await oE(z,M,F);return}l(z=>{const Y=z[S];if(!Y)return z;const se=Y.messages.map(be=>be.id===M?{...be,text:F,edited:!0}:be);return{...z,[S]:{...Y,messages:se}}})},[S,t,s]),Ct=O.useCallback(async(M,F)=>{if(!S||!t)return;let J=M.imageUrl,z=M.fileUrl;if(M.file)try{const se=M.type==="audio"?"audios":M.type==="image"?"images":"files",be=`uploads/${t.uid}/${se}/${Date.now()}_${M.fileName||"file"}`,Ce=await Cm(M.file,be);M.type==="image"?J=Ce:z=Ce}catch(se){console.error("Upload failed",se),alert("     .");return}if(S==="global_chat"){const se=c.name?`https://ui-avatars.com/api/?name=${c.name}&background=random&color=fff&size=64`:"";await mq({text:M.text,type:M.type,imageUrl:J,fileUrl:z,fileName:M.fileName,fileSize:M.fileSize,audioDuration:M.audioDuration,isSticker:M.isSticker,replyToId:F,senderId:t.uid},{name:c.name,avatar:se,role:c.role});return}if(!(S==="global_chat")){const se=Ni(t.uid,S);await vq(se,S,{text:M.text,type:M.type,senderId:t.uid,imageUrl:J,fileUrl:z,fileName:M.fileName,fileSize:M.fileSize,audioDuration:M.audioDuration,isSticker:M.isSticker,replyToId:F},{name:c.name,avatar:c.avatar});return}},[S,t,c,s]),Yr=async M=>{const F={...c,...M};if(h(F),t){await UP(t.uid,F),m(z=>z.map(Y=>Y.uid===t.uid?{...Y,name:F.name,username:F.username}:Y));const J=p.map(z=>z.uid===t.uid?{...z,name:F.name,username:F.username}:z);localStorage.setItem("irangram_accounts",JSON.stringify(J))}},nn=async()=>{Ge(!0)},Pn=async()=>{Ge(!1),I(""),await rh(t==null?void 0:t.uid),e(null)},xr=async()=>{I(""),await rh(t==null?void 0:t.uid),e(null)},Er=async M=>{const F=p.find(J=>J.uid===M);F&&I(F.email),await rh(t==null?void 0:t.uid),e(null)},Us=M=>{const F={id:M.uid,name:M.name,avatar:M.avatar,bio:M.bio,username:"@"+M.username,phone:M.phone,status:"offline",type:"user"};pe(F)},Fs=M=>{M.id==="me"||M.id===(t==null?void 0:t.uid)?A(!0):E({id:M.id,name:M.name||"",avatar:M.avatar||"",username:"",phone:"",bio:" ",type:"user",status:"offline"})},ar=async M=>{const F=M||S;if(F&&confirm("           ."))try{if(F!=="saved"&&F!=="global_chat"){const J=Ni(t.uid,F);await iq(J)}i(J=>J.filter(z=>z.id!==F)),l(J=>{const z={...J};return delete z[F],z}),S===F&&x(null)}catch(J){console.error("Delete chat failed",J)}},kr=async()=>{if(S&&confirm("       "))try{if(S==="saved"){const M=Ni(t.uid,"saved");await tv(M)}else if(S!=="global_chat"){const M=Ni(t.uid,S);await tv(M)}l(M=>({...M,[S]:{...M[S],messages:[]}}))}catch(M){console.error("Clear history failed",M)}},Xr=async()=>{if(S&&confirm("       "))try{await od(t.uid,S),alert("  .")}catch(M){console.error("Block user failed",M)}},Wn=M=>{t&&BP(t.uid,M)},Hn=()=>{G>0&&localStorage.setItem("last_forced_update",G.toString()),window.location.reload()};return n?u.jsx("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-white dark:bg-black text-telegram-primary",children:u.jsx(tc,{className:"animate-spin w-10 h-10"})}):t?c.isBanned?u.jsx(Oq,{currentUser:{uid:t.uid,name:c.name},onLogout:()=>Ge(!0),banExpiresAt:c.banExpiresAt}):u.jsxs("div",{className:"flex flex-col h-[100dvh] w-full overflow-hidden bg-white dark:bg-black font-sans relative",children:[Nt&&u.jsx("div",{className:"fixed inset-0 z-[200] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full border border-gray-200 dark:border-gray-700 text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 text-red-600 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx(Ua,{size:32})}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"  "}),u.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6 text-sm",children:"            ."}),u.jsxs("div",{className:"flex gap-3",children:[u.jsx("button",{onClick:()=>Ge(!1),className:"flex-1 py-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:""}),u.jsx("button",{onClick:()=>{S===null?Pn():(_t.current=!0,window.history.back())},className:"flex-1 py-3 rounded-xl bg-red-600 text-white font-bold hover:bg-red-700 transition-colors",children:" "})]})]})}),en&&u.jsx("div",{className:"fixed inset-0 z-[120] bg-black/60 flex items-center justify-center p-6 animate-fade-in backdrop-blur-sm",children:u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full border-t-4 border-blue-500",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-600 dark:text-blue-400",children:[u.jsx(kp,{size:28}),u.jsx("h3",{className:"text-xl font-bold",children:en.title})]}),u.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:en.message}),u.jsx("button",{onClick:()=>it(null),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-xl transition-colors",children:" "})]})}),Ae&&u.jsxs("div",{onClick:Hn,className:"fixed bottom-6 left-6 z-[100] bg-telegram-primary text-white p-4 rounded-2xl shadow-2xl shadow-blue-500/30 flex items-center gap-4 cursor-pointer hover:scale-105 transition-transform animate-slide-in",children:[u.jsx("div",{className:"bg-white/20 p-2.5 rounded-full",children:u.jsx(tc,{size:24,className:"animate-spin"})}),u.jsxs("div",{className:"text-right",children:[u.jsx("h3",{className:"font-bold text-sm",children:" "}),u.jsx("p",{className:"text-xs opacity-90 mt-0.5",children:St||"    "})]})]}),fe&&u.jsxs("div",{className:"fixed inset-0 z-[90] bg-gray-900/95 backdrop-blur-md flex flex-col items-center justify-between py-12 text-white animate-fade-in",children:[u.jsxs("div",{className:"flex flex-col items-center mt-10",children:[u.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white/20 mb-4 shadow-2xl",children:u.jsx("img",{src:((L=s.find(M=>M.id===S))==null?void 0:L.avatar)||"https://via.placeholder.com/150",className:"w-full h-full object-cover"})}),u.jsx("h2",{className:"text-3xl font-bold mb-2",children:((ne=s.find(M=>M.id===S))==null?void 0:ne.name)||" "}),u.jsx("p",{className:"text-white/60 text-lg animate-pulse",children:Ve>0?`${Math.floor(Ve/60)}:${(Ve%60).toString().padStart(2,"0")}`:"  ..."})]}),u.jsxs("div",{className:"flex items-center gap-8 mb-10",children:[u.jsx("button",{onClick:()=>je(!ft),className:`p-4 rounded-full transition-all ${ft?"bg-white text-gray-900":"bg-white/10 hover:bg-white/20"}`,children:ft?u.jsx(m2,{size:32}):u.jsx(xw,{size:32})}),u.jsx("button",{onClick:()=>{ve(!1)},className:"p-6 bg-red-500 rounded-full shadow-lg hover:bg-red-600 hover:scale-110 transition-all",children:u.jsx(v2,{size:40})}),u.jsx("button",{className:"p-4 bg-white/10 hover:bg-white/20 rounded-full transition-all",children:u.jsx(co,{size:32,className:"rotate-180"})})]})]}),N&&u.jsx(jq,{onClose:()=>k(!1),currentUserEmail:t.email,currentUserRole:c.role||"user",onStartChat:Us}),u.jsx(qq,{isOpen:b,onClose:()=>A(!1),userProfile:c,onSave:Yr,wallpaper:R,onSaveWallpaper:D}),u.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[u.jsxs("div",{className:`
            ${q&&S?"hidden":"flex"}
            ${q?"w-full":"w-80 lg:w-96"} 
            flex-col h-full z-20 transition-all duration-300 shadow-xl bg-white dark:bg-telegram-bgDark border-l border-gray-200 dark:border-white/5
          `,children:[u.jsx("div",{className:"flex-1 overflow-hidden",children:u.jsx(bq,{contacts:s,sessions:o,activeContactId:S,onSelectContact:C,toggleTheme:Ft,theme:_,userProfile:c,onOpenSettings:()=>A(!0),onOpenAdminPanel:()=>k(!0),onAddContact:pe,showInstallButton:!0,onInstall:Ut,storedAccounts:p,onAddAccount:xr,onSwitchAccount:Er,onCreateGroup:ce,onDeleteChat:ar})}),u.jsxs("div",{className:"p-2 border-t border-gray-100 dark:border-white/5 flex justify-between items-center bg-gray-50 dark:bg-black/20",children:[u.jsxs("span",{className:"text-xs text-gray-400 px-2 font-mono opacity-50",children:["v",Ln.VERSION]}),u.jsx("button",{onClick:nn,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-white/5 rounded-lg transition-colors",title:" ",children:u.jsx(Ua,{size:18})})]})]}),u.jsxs("div",{className:`
            ${q&&!S?"hidden":"flex"}
            flex-1 h-full relative flex-col min-w-0
          `,children:[u.jsx("div",{className:"flex-1 h-full relative flex flex-col min-w-0",children:S?u.jsx(Cq,{contact:s.find(M=>M.id===S),messages:o[S].messages,pinnedMessage:o[S].pinnedMessage,myId:"me",myRole:c.role||"user",onSendMessage:Ct,onEditMessage:or,onDeleteMessage:ke,onPinMessage:ot,onUnpinMessage:$n,onReaction:Ue,onBack:()=>{window.history.back()},isMobile:q,onProfileClick:()=>w(!0),onAvatarClick:Fs,wallpaper:R,onCall:()=>ve(!0),onDeleteChat:()=>ar(),onClearHistory:kr,onBlockUser:Xr,onTyping:Wn},S):u.jsx("div",{className:"h-full w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark text-gray-400 dark:text-gray-600 pattern-bg",children:u.jsxs("div",{className:"text-center p-8 bg-white/60 dark:bg-black/40 backdrop-blur-md rounded-3xl shadow-xl border border-white/20 dark:border-white/5 animate-scale-in",children:[u.jsx("span",{className:"text-5xl block mb-6 animate-bounce",children:""}),u.jsx("h3",{className:"font-bold text-xl mb-2 text-gray-800 dark:text-gray-100",children:"   "}),u.jsx("p",{className:"text-sm opacity-80",children:"    "})]})})}),($||g)&&u.jsx("div",{className:`
                    absolute inset-y-0 right-0 z-[60] bg-white dark:bg-telegram-secondaryDark shadow-2xl transition-transform duration-300
                    ${q?"w-full":"w-96 border-l border-gray-200 dark:border-white/5"}
                `,children:u.jsx(Rq,{contact:g||s.find(M=>M.id===S),onClose:()=>{w(!1),E(null)},onStartChat:g?M=>{pe(M),E(null)}:void 0,currentUserId:t.uid})})]})]})]}):u.jsx(Dq,{onSuccess:e,storedAccounts:p,initialEmail:y})},lE=document.getElementById("root");if(!lE)throw new Error("Could not find root element to mount to");const Uq=ih.createRoot(lE);Uq.render(u.jsx(sh.StrictMode,{children:u.jsx(Vq,{})}));
