(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function dE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var H0={exports:{}},ac={},K0={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ra=Symbol.for("react.element"),hE=Symbol.for("react.portal"),fE=Symbol.for("react.fragment"),pE=Symbol.for("react.strict_mode"),mE=Symbol.for("react.profiler"),gE=Symbol.for("react.provider"),yE=Symbol.for("react.context"),vE=Symbol.for("react.forward_ref"),_E=Symbol.for("react.suspense"),wE=Symbol.for("react.memo"),xE=Symbol.for("react.lazy"),rg=Symbol.iterator;function EE(t){return t===null||typeof t!="object"?null:(t=rg&&t[rg]||t["@@iterator"],typeof t=="function"?t:null)}var G0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q0=Object.assign,Y0={};function Yi(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||G0}Yi.prototype.isReactComponent={};Yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function X0(){}X0.prototype=Yi.prototype;function mf(t,e,n){this.props=t,this.context=e,this.refs=Y0,this.updater=n||G0}var gf=mf.prototype=new X0;gf.constructor=mf;Q0(gf,Yi.prototype);gf.isPureReactComponent=!0;var sg=Array.isArray,J0=Object.prototype.hasOwnProperty,yf={current:null},Z0={key:!0,ref:!0,__self:!0,__source:!0};function ev(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)J0.call(e,r)&&!Z0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ra,type:t,key:i,ref:o,props:s,_owner:yf.current}}function kE(t,e){return{$$typeof:Ra,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ra}function TE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ig=/\/+/g;function sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TE(""+t.key):e.toString(36)}function $l(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ra:case hE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sd(o,0):r,sg(s)?(n="",t!=null&&(n=t.replace(ig,"$&/")+"/"),$l(s,e,n,"",function(h){return h})):s!=null&&(vf(s)&&(s=kE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ig,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sg(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+sd(i,l);o+=$l(i,e,n,u,s)}else if(u=EE(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+sd(i,l++),o+=$l(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function gl(t,e,n){if(t==null)return t;var r=[],s=0;return $l(t,r,"","",function(i){return e.call(n,i,s++)}),r}function IE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Wl={transition:null},bE={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Wl,ReactCurrentOwner:yf};function tv(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:gl,forEach:function(t,e,n){gl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gl(t,function(){e++}),e},toArray:function(t){return gl(t,function(e){return e})||[]},only:function(t){if(!vf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ge.Component=Yi;ge.Fragment=fE;ge.Profiler=mE;ge.PureComponent=mf;ge.StrictMode=pE;ge.Suspense=_E;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bE;ge.act=tv;ge.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Q0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=yf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)J0.call(e,u)&&!Z0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ra,type:t.type,key:s,ref:i,props:r,_owner:o}};ge.createContext=function(t){return t={$$typeof:yE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gE,_context:t},t.Consumer=t};ge.createElement=ev;ge.createFactory=function(t){var e=ev.bind(null,t);return e.type=t,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(t){return{$$typeof:vE,render:t}};ge.isValidElement=vf;ge.lazy=function(t){return{$$typeof:xE,_payload:{_status:-1,_result:t},_init:IE}};ge.memo=function(t,e){return{$$typeof:wE,type:t,compare:e===void 0?null:e}};ge.startTransition=function(t){var e=Wl.transition;Wl.transition={};try{t()}finally{Wl.transition=e}};ge.unstable_act=tv;ge.useCallback=function(t,e){return Qt.current.useCallback(t,e)};ge.useContext=function(t){return Qt.current.useContext(t)};ge.useDebugValue=function(){};ge.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};ge.useEffect=function(t,e){return Qt.current.useEffect(t,e)};ge.useId=function(){return Qt.current.useId()};ge.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};ge.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};ge.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};ge.useMemo=function(t,e){return Qt.current.useMemo(t,e)};ge.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};ge.useRef=function(t){return Qt.current.useRef(t)};ge.useState=function(t){return Qt.current.useState(t)};ge.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};ge.useTransition=function(){return Qt.current.useTransition()};ge.version="18.3.1";K0.exports=ge;var M=K0.exports;const AE=dE(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=M,NE=Symbol.for("react.element"),RE=Symbol.for("react.fragment"),CE=Object.prototype.hasOwnProperty,PE=SE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qE={key:!0,ref:!0,__self:!0,__source:!0};function nv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CE.call(e,r)&&!qE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:NE,type:t,key:i,ref:o,props:s,_owner:PE.current}}ac.Fragment=RE;ac.jsx=nv;ac.jsxs=nv;H0.exports=ac;var c=H0.exports,Kd={},rv={exports:{}},yn={},sv={exports:{}},iv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,J){var ne=W.length;W.push(J);e:for(;0<ne;){var me=ne-1>>>1,he=W[me];if(0<s(he,J))W[me]=J,W[ne]=he,ne=me;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var J=W[0],ne=W.pop();if(ne!==J){W[0]=ne;e:for(var me=0,he=W.length,Re=he>>>1;me<Re;){var et=2*(me+1)-1,vt=W[et],ct=et+1,Me=W[ct];if(0>s(vt,ne))ct<he&&0>s(Me,vt)?(W[me]=Me,W[ct]=ne,me=ct):(W[me]=vt,W[et]=ne,me=et);else if(ct<he&&0>s(Me,ne))W[me]=Me,W[ct]=ne,me=ct;else break e}}return J}function s(W,J){var ne=W.sortIndex-J.sortIndex;return ne!==0?ne:W.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,g=3,b=!1,N=!1,j=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var J=n(h);J!==null;){if(J.callback===null)r(h);else if(J.startTime<=W)r(h),J.sortIndex=J.expirationTime,e(u,J);else break;J=n(h)}}function D(W){if(j=!1,x(W),!N)if(n(u)!==null)N=!0,ut($);else{var J=n(h);J!==null&&Qe(D,J.startTime-W)}}function $(W,J){N=!1,j&&(j=!1,E(v),v=-1),b=!0;var ne=g;try{for(x(J),m=n(u);m!==null&&(!(m.expirationTime>J)||W&&!S());){var me=m.callback;if(typeof me=="function"){m.callback=null,g=m.priorityLevel;var he=me(m.expirationTime<=J);J=t.unstable_now(),typeof he=="function"?m.callback=he:m===n(u)&&r(u),x(J)}else r(u);m=n(u)}if(m!==null)var Re=!0;else{var et=n(h);et!==null&&Qe(D,et.startTime-J),Re=!1}return Re}finally{m=null,g=ne,b=!1}}var U=!1,w=null,v=-1,k=5,I=-1;function S(){return!(t.unstable_now()-I<k)}function R(){if(w!==null){var W=t.unstable_now();I=W;var J=!0;try{J=w(!0,W)}finally{J?T():(U=!1,w=null)}}else U=!1}var T;if(typeof _=="function")T=function(){_(R)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,yt=qe.port2;qe.port1.onmessage=R,T=function(){yt.postMessage(null)}}else T=function(){A(R,0)};function ut(W){w=W,U||(U=!0,T())}function Qe(W,J){v=A(function(){W(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){N||b||(N=!0,ut($))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(W){switch(g){case 1:case 2:case 3:var J=3;break;default:J=g}var ne=g;g=J;try{return W()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,J){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ne=g;g=W;try{return J()}finally{g=ne}},t.unstable_scheduleCallback=function(W,J,ne){var me=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?me+ne:me):ne=me,W){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ne+he,W={id:p++,callback:J,priorityLevel:W,startTime:ne,expirationTime:he,sortIndex:-1},ne>me?(W.sortIndex=ne,e(h,W),n(u)===null&&W===n(h)&&(j?(E(v),v=-1):j=!0,Qe(D,ne-me))):(W.sortIndex=he,e(u,W),N||b||(N=!0,ut($))),W},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(W){var J=g;return function(){var ne=g;g=J;try{return W.apply(this,arguments)}finally{g=ne}}}})(iv);sv.exports=iv;var jE=sv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE=M,pn=jE;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ov=new Set,ta={};function Gs(t,e){ji(t,e),ji(t+"Capture",e)}function ji(t,e){for(ta[t]=e,t=0;t<e.length;t++)ov.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gd=Object.prototype.hasOwnProperty,OE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,og={},ag={};function ME(t){return Gd.call(ag,t)?!0:Gd.call(og,t)?!1:OE.test(t)?ag[t]=!0:(og[t]=!0,!1)}function LE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VE(t,e,n,r){if(e===null||typeof e>"u"||LE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Nt[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Nt[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Nt[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Nt[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Nt[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Nt[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Nt[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Nt[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Nt[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var _f=/[\-:]([a-z])/g;function wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_f,wf);Nt[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_f,wf);Nt[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_f,wf);Nt[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Nt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Nt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Nt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xf(t,e,n,r){var s=Nt.hasOwnProperty(e)?Nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VE(e,n,s,r)&&(n=null),r||s===null?ME(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Sr=DE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yl=Symbol.for("react.element"),ci=Symbol.for("react.portal"),di=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),Qd=Symbol.for("react.profiler"),av=Symbol.for("react.provider"),lv=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Yd=Symbol.for("react.suspense"),Xd=Symbol.for("react.suspense_list"),Tf=Symbol.for("react.memo"),Ur=Symbol.for("react.lazy"),uv=Symbol.for("react.offscreen"),lg=Symbol.iterator;function vo(t){return t===null||typeof t!="object"?null:(t=lg&&t[lg]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,id;function No(t){if(id===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);id=e&&e[1]||""}return`
`+id+t}var od=!1;function ad(t,e){if(!t||od)return"";od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?No(t):""}function UE(t){switch(t.tag){case 5:return No(t.type);case 16:return No("Lazy");case 13:return No("Suspense");case 19:return No("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function Jd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case di:return"Fragment";case ci:return"Portal";case Qd:return"Profiler";case Ef:return"StrictMode";case Yd:return"Suspense";case Xd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lv:return(t.displayName||"Context")+".Consumer";case av:return(t._context.displayName||"Context")+".Provider";case kf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tf:return e=t.displayName||null,e!==null?e:Jd(t.type)||"Memo";case Ur:e=t._payload,t=t._init;try{return Jd(t(e))}catch{}}return null}function FE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jd(e);case 8:return e===Ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function zE(t){var e=cv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vl(t){t._valueTracker||(t._valueTracker=zE(t))}function dv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function pu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Zd(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ug(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function hv(t,e){e=e.checked,e!=null&&xf(t,"checked",e,!1)}function eh(t,e){hv(t,e);var n=ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?th(t,e.type,n):e.hasOwnProperty("defaultValue")&&th(t,e.type,ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function th(t,e,n){(e!=="number"||pu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ro=Array.isArray;function ki(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ls(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function nh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(Ro(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ls(n)}}function fv(t,e){var n=ls(e.value),r=ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _l,mv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_l=_l||document.createElement("div"),_l.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_l.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function na(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BE=["Webkit","ms","Moz","O"];Object.keys(Uo).forEach(function(t){BE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Uo[e]=Uo[t]})});function gv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Uo.hasOwnProperty(t)&&Uo[t]?(""+e).trim():e+"px"}function yv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=gv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var $E=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sh(t,e){if(e){if($E[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function ih(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oh=null;function If(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ah=null,Ti=null,Ii=null;function fg(t){if(t=qa(t)){if(typeof ah!="function")throw Error(H(280));var e=t.stateNode;e&&(e=hc(e),ah(t.stateNode,t.type,e))}}function vv(t){Ti?Ii?Ii.push(t):Ii=[t]:Ti=t}function _v(){if(Ti){var t=Ti,e=Ii;if(Ii=Ti=null,fg(t),e)for(t=0;t<e.length;t++)fg(e[t])}}function wv(t,e){return t(e)}function xv(){}var ld=!1;function Ev(t,e,n){if(ld)return t(e,n);ld=!0;try{return wv(t,e,n)}finally{ld=!1,(Ti!==null||Ii!==null)&&(xv(),_v())}}function ra(t,e){var n=t.stateNode;if(n===null)return null;var r=hc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var lh=!1;if(wr)try{var _o={};Object.defineProperty(_o,"passive",{get:function(){lh=!0}}),window.addEventListener("test",_o,_o),window.removeEventListener("test",_o,_o)}catch{lh=!1}function WE(t,e,n,r,s,i,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Fo=!1,mu=null,gu=!1,uh=null,HE={onError:function(t){Fo=!0,mu=t}};function KE(t,e,n,r,s,i,o,l,u){Fo=!1,mu=null,WE.apply(HE,arguments)}function GE(t,e,n,r,s,i,o,l,u){if(KE.apply(this,arguments),Fo){if(Fo){var h=mu;Fo=!1,mu=null}else throw Error(H(198));gu||(gu=!0,uh=h)}}function Qs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pg(t){if(Qs(t)!==t)throw Error(H(188))}function QE(t){var e=t.alternate;if(!e){if(e=Qs(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return pg(s),t;if(i===r)return pg(s),e;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function Tv(t){return t=QE(t),t!==null?Iv(t):null}function Iv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Iv(t);if(e!==null)return e;t=t.sibling}return null}var bv=pn.unstable_scheduleCallback,mg=pn.unstable_cancelCallback,YE=pn.unstable_shouldYield,XE=pn.unstable_requestPaint,st=pn.unstable_now,JE=pn.unstable_getCurrentPriorityLevel,bf=pn.unstable_ImmediatePriority,Av=pn.unstable_UserBlockingPriority,yu=pn.unstable_NormalPriority,ZE=pn.unstable_LowPriority,Sv=pn.unstable_IdlePriority,lc=null,Gn=null;function ek(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(lc,t,void 0,(t.current.flags&128)===128)}catch{}}var Mn=Math.clz32?Math.clz32:rk,tk=Math.log,nk=Math.LN2;function rk(t){return t>>>=0,t===0?32:31-(tk(t)/nk|0)|0}var wl=64,xl=4194304;function Co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Co(l):(i&=o,i!==0&&(r=Co(i)))}else o=n&~s,o!==0?r=Co(o):i!==0&&(r=Co(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Mn(e),s=1<<n,r|=t[n],e&=~s;return r}function sk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ik(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Mn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=sk(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ch(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Nv(){var t=wl;return wl<<=1,!(wl&4194240)&&(wl=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ca(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mn(e),t[e]=n}function ok(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ce=0;function Rv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cv,Sf,Pv,qv,jv,dh=!1,El=[],Xr=null,Jr=null,Zr=null,sa=new Map,ia=new Map,zr=[],ak="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gg(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ia.delete(e.pointerId)}}function wo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=qa(e),e!==null&&Sf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function lk(t,e,n,r,s){switch(e){case"focusin":return Xr=wo(Xr,t,e,n,r,s),!0;case"dragenter":return Jr=wo(Jr,t,e,n,r,s),!0;case"mouseover":return Zr=wo(Zr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return sa.set(i,wo(sa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ia.set(i,wo(ia.get(i)||null,t,e,n,r,s)),!0}return!1}function Dv(t){var e=As(t.target);if(e!==null){var n=Qs(e);if(n!==null){if(e=n.tag,e===13){if(e=kv(n),e!==null){t.blockedOn=e,jv(t.priority,function(){Pv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);oh=r,n.target.dispatchEvent(r),oh=null}else return e=qa(n),e!==null&&Sf(e),t.blockedOn=n,!1;e.shift()}return!0}function yg(t,e,n){Hl(t)&&n.delete(e)}function uk(){dh=!1,Xr!==null&&Hl(Xr)&&(Xr=null),Jr!==null&&Hl(Jr)&&(Jr=null),Zr!==null&&Hl(Zr)&&(Zr=null),sa.forEach(yg),ia.forEach(yg)}function xo(t,e){t.blockedOn===e&&(t.blockedOn=null,dh||(dh=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,uk)))}function oa(t){function e(s){return xo(s,t)}if(0<El.length){xo(El[0],t);for(var n=1;n<El.length;n++){var r=El[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xr!==null&&xo(Xr,t),Jr!==null&&xo(Jr,t),Zr!==null&&xo(Zr,t),sa.forEach(e),ia.forEach(e),n=0;n<zr.length;n++)r=zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<zr.length&&(n=zr[0],n.blockedOn===null);)Dv(n),n.blockedOn===null&&zr.shift()}var bi=Sr.ReactCurrentBatchConfig,_u=!0;function ck(t,e,n,r){var s=Ce,i=bi.transition;bi.transition=null;try{Ce=1,Nf(t,e,n,r)}finally{Ce=s,bi.transition=i}}function dk(t,e,n,r){var s=Ce,i=bi.transition;bi.transition=null;try{Ce=4,Nf(t,e,n,r)}finally{Ce=s,bi.transition=i}}function Nf(t,e,n,r){if(_u){var s=hh(t,e,n,r);if(s===null)_d(t,e,r,wu,n),gg(t,r);else if(lk(s,t,e,n,r))r.stopPropagation();else if(gg(t,r),e&4&&-1<ak.indexOf(t)){for(;s!==null;){var i=qa(s);if(i!==null&&Cv(i),i=hh(t,e,n,r),i===null&&_d(t,e,r,wu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else _d(t,e,r,null,n)}}var wu=null;function hh(t,e,n,r){if(wu=null,t=If(r),t=As(t),t!==null)if(e=Qs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wu=t,null}function Ov(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JE()){case bf:return 1;case Av:return 4;case yu:case ZE:return 16;case Sv:return 536870912;default:return 16}default:return 16}}var Gr=null,Rf=null,Kl=null;function Mv(){if(Kl)return Kl;var t,e=Rf,n=e.length,r,s="value"in Gr?Gr.value:Gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kl=s.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kl(){return!0}function vg(){return!1}function vn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?kl:vg,this.isPropagationStopped=vg,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),e}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cf=vn(Xi),Pa=Ke({},Xi,{view:0,detail:0}),hk=vn(Pa),cd,dd,Eo,uc=Ke({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eo&&(Eo&&t.type==="mousemove"?(cd=t.screenX-Eo.screenX,dd=t.screenY-Eo.screenY):dd=cd=0,Eo=t),cd)},movementY:function(t){return"movementY"in t?t.movementY:dd}}),_g=vn(uc),fk=Ke({},uc,{dataTransfer:0}),pk=vn(fk),mk=Ke({},Pa,{relatedTarget:0}),hd=vn(mk),gk=Ke({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),yk=vn(gk),vk=Ke({},Xi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_k=vn(vk),wk=Ke({},Xi,{data:0}),wg=vn(wk),xk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ek={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=kk[t])?!!e[t]:!1}function Pf(){return Tk}var Ik=Ke({},Pa,{key:function(t){if(t.key){var e=xk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ek[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pf,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bk=vn(Ik),Ak=Ke({},uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xg=vn(Ak),Sk=Ke({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pf}),Nk=vn(Sk),Rk=Ke({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ck=vn(Rk),Pk=Ke({},uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qk=vn(Pk),jk=[9,13,27,32],qf=wr&&"CompositionEvent"in window,zo=null;wr&&"documentMode"in document&&(zo=document.documentMode);var Dk=wr&&"TextEvent"in window&&!zo,Lv=wr&&(!qf||zo&&8<zo&&11>=zo),Eg=" ",kg=!1;function Vv(t,e){switch(t){case"keyup":return jk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hi=!1;function Ok(t,e){switch(t){case"compositionend":return Uv(e);case"keypress":return e.which!==32?null:(kg=!0,Eg);case"textInput":return t=e.data,t===Eg&&kg?null:t;default:return null}}function Mk(t,e){if(hi)return t==="compositionend"||!qf&&Vv(t,e)?(t=Mv(),Kl=Rf=Gr=null,hi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lv&&e.locale!=="ko"?null:e.data;default:return null}}var Lk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Lk[t.type]:e==="textarea"}function Fv(t,e,n,r){vv(r),e=xu(e,"onChange"),0<e.length&&(n=new Cf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bo=null,aa=null;function Vk(t){Jv(t,0)}function cc(t){var e=mi(t);if(dv(e))return t}function Uk(t,e){if(t==="change")return e}var zv=!1;if(wr){var fd;if(wr){var pd="oninput"in document;if(!pd){var Ig=document.createElement("div");Ig.setAttribute("oninput","return;"),pd=typeof Ig.oninput=="function"}fd=pd}else fd=!1;zv=fd&&(!document.documentMode||9<document.documentMode)}function bg(){Bo&&(Bo.detachEvent("onpropertychange",Bv),aa=Bo=null)}function Bv(t){if(t.propertyName==="value"&&cc(aa)){var e=[];Fv(e,aa,t,If(t)),Ev(Vk,e)}}function Fk(t,e,n){t==="focusin"?(bg(),Bo=e,aa=n,Bo.attachEvent("onpropertychange",Bv)):t==="focusout"&&bg()}function zk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cc(aa)}function Bk(t,e){if(t==="click")return cc(e)}function $k(t,e){if(t==="input"||t==="change")return cc(e)}function Wk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:Wk;function la(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gd.call(e,s)||!Un(t[s],e[s]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sg(t,e){var n=Ag(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ag(n)}}function $v(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$v(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wv(){for(var t=window,e=pu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=pu(t.document)}return e}function jf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Hk(t){var e=Wv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$v(n.ownerDocument.documentElement,n)){if(r!==null&&jf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Sg(n,i);var o=Sg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Kk=wr&&"documentMode"in document&&11>=document.documentMode,fi=null,fh=null,$o=null,ph=!1;function Ng(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ph||fi==null||fi!==pu(r)||(r=fi,"selectionStart"in r&&jf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$o&&la($o,r)||($o=r,r=xu(fh,"onSelect"),0<r.length&&(e=new Cf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fi)))}function Tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pi={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},md={},Hv={};wr&&(Hv=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function dc(t){if(md[t])return md[t];if(!pi[t])return t;var e=pi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hv)return md[t]=e[n];return t}var Kv=dc("animationend"),Gv=dc("animationiteration"),Qv=dc("animationstart"),Yv=dc("transitionend"),Xv=new Map,Rg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ps(t,e){Xv.set(t,e),Gs(e,[t])}for(var gd=0;gd<Rg.length;gd++){var yd=Rg[gd],Gk=yd.toLowerCase(),Qk=yd[0].toUpperCase()+yd.slice(1);ps(Gk,"on"+Qk)}ps(Kv,"onAnimationEnd");ps(Gv,"onAnimationIteration");ps(Qv,"onAnimationStart");ps("dblclick","onDoubleClick");ps("focusin","onFocus");ps("focusout","onBlur");ps(Yv,"onTransitionEnd");ji("onMouseEnter",["mouseout","mouseover"]);ji("onMouseLeave",["mouseout","mouseover"]);ji("onPointerEnter",["pointerout","pointerover"]);ji("onPointerLeave",["pointerout","pointerover"]);Gs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Po));function Cg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GE(r,e,void 0,t),t.currentTarget=null}function Jv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Cg(s,l,h),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Cg(s,l,h),i=u}}}if(gu)throw t=uh,gu=!1,uh=null,t}function Ve(t,e){var n=e[_h];n===void 0&&(n=e[_h]=new Set);var r=t+"__bubble";n.has(r)||(Zv(e,t,2,!1),n.add(r))}function vd(t,e,n){var r=0;e&&(r|=4),Zv(n,t,r,e)}var Il="_reactListening"+Math.random().toString(36).slice(2);function ua(t){if(!t[Il]){t[Il]=!0,ov.forEach(function(n){n!=="selectionchange"&&(Yk.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Il]||(e[Il]=!0,vd("selectionchange",!1,e))}}function Zv(t,e,n,r){switch(Ov(e)){case 1:var s=ck;break;case 4:s=dk;break;default:s=Nf}n=s.bind(null,e,n,t),s=void 0,!lh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function _d(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=As(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Ev(function(){var h=i,p=If(n),m=[];e:{var g=Xv.get(t);if(g!==void 0){var b=Cf,N=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":b=bk;break;case"focusin":N="focus",b=hd;break;case"focusout":N="blur",b=hd;break;case"beforeblur":case"afterblur":b=hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=_g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=pk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Nk;break;case Kv:case Gv:case Qv:b=yk;break;case Yv:b=Ck;break;case"scroll":b=hk;break;case"wheel":b=qk;break;case"copy":case"cut":case"paste":b=_k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=xg}var j=(e&4)!==0,A=!j&&t==="scroll",E=j?g!==null?g+"Capture":null:g;j=[];for(var _=h,x;_!==null;){x=_;var D=x.stateNode;if(x.tag===5&&D!==null&&(x=D,E!==null&&(D=ra(_,E),D!=null&&j.push(ca(_,D,x)))),A)break;_=_.return}0<j.length&&(g=new b(g,N,null,n,p),m.push({event:g,listeners:j}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",b=t==="mouseout"||t==="pointerout",g&&n!==oh&&(N=n.relatedTarget||n.fromElement)&&(As(N)||N[xr]))break e;if((b||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,b?(N=n.relatedTarget||n.toElement,b=h,N=N?As(N):null,N!==null&&(A=Qs(N),N!==A||N.tag!==5&&N.tag!==6)&&(N=null)):(b=null,N=h),b!==N)){if(j=_g,D="onMouseLeave",E="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(j=xg,D="onPointerLeave",E="onPointerEnter",_="pointer"),A=b==null?g:mi(b),x=N==null?g:mi(N),g=new j(D,_+"leave",b,n,p),g.target=A,g.relatedTarget=x,D=null,As(p)===h&&(j=new j(E,_+"enter",N,n,p),j.target=x,j.relatedTarget=A,D=j),A=D,b&&N)t:{for(j=b,E=N,_=0,x=j;x;x=ii(x))_++;for(x=0,D=E;D;D=ii(D))x++;for(;0<_-x;)j=ii(j),_--;for(;0<x-_;)E=ii(E),x--;for(;_--;){if(j===E||E!==null&&j===E.alternate)break t;j=ii(j),E=ii(E)}j=null}else j=null;b!==null&&Pg(m,g,b,j,!1),N!==null&&A!==null&&Pg(m,A,N,j,!0)}}e:{if(g=h?mi(h):window,b=g.nodeName&&g.nodeName.toLowerCase(),b==="select"||b==="input"&&g.type==="file")var $=Uk;else if(Tg(g))if(zv)$=$k;else{$=zk;var U=Fk}else(b=g.nodeName)&&b.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&($=Bk);if($&&($=$(t,h))){Fv(m,$,n,p);break e}U&&U(t,g,h),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&th(g,"number",g.value)}switch(U=h?mi(h):window,t){case"focusin":(Tg(U)||U.contentEditable==="true")&&(fi=U,fh=h,$o=null);break;case"focusout":$o=fh=fi=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,Ng(m,n,p);break;case"selectionchange":if(Kk)break;case"keydown":case"keyup":Ng(m,n,p)}var w;if(qf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else hi?Vv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Lv&&n.locale!=="ko"&&(hi||v!=="onCompositionStart"?v==="onCompositionEnd"&&hi&&(w=Mv()):(Gr=p,Rf="value"in Gr?Gr.value:Gr.textContent,hi=!0)),U=xu(h,v),0<U.length&&(v=new wg(v,t,null,n,p),m.push({event:v,listeners:U}),w?v.data=w:(w=Uv(n),w!==null&&(v.data=w)))),(w=Dk?Ok(t,n):Mk(t,n))&&(h=xu(h,"onBeforeInput"),0<h.length&&(p=new wg("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=w))}Jv(m,e)})}function ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ra(t,n),i!=null&&r.unshift(ca(t,i,s)),i=ra(t,e),i!=null&&r.push(ca(t,i,s))),t=t.return}return r}function ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,s?(u=ra(n,i),u!=null&&o.unshift(ca(n,u,l))):s||(u=ra(n,i),u!=null&&o.push(ca(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Xk=/\r\n?/g,Jk=/\u0000|\uFFFD/g;function qg(t){return(typeof t=="string"?t:""+t).replace(Xk,`
`).replace(Jk,"")}function bl(t,e,n){if(e=qg(e),qg(t)!==e&&n)throw Error(H(425))}function Eu(){}var mh=null,gh=null;function yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vh=typeof setTimeout=="function"?setTimeout:void 0,Zk=typeof clearTimeout=="function"?clearTimeout:void 0,jg=typeof Promise=="function"?Promise:void 0,eT=typeof queueMicrotask=="function"?queueMicrotask:typeof jg<"u"?function(t){return jg.resolve(null).then(t).catch(tT)}:vh;function tT(t){setTimeout(function(){throw t})}function wd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),oa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);oa(e)}function es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ji=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Ji,da="__reactProps$"+Ji,xr="__reactContainer$"+Ji,_h="__reactEvents$"+Ji,nT="__reactListeners$"+Ji,rT="__reactHandles$"+Ji;function As(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[xr]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dg(t);t!==null;){if(n=t[Hn])return n;t=Dg(t)}return e}t=n,n=t.parentNode}return null}function qa(t){return t=t[Hn]||t[xr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function hc(t){return t[da]||null}var wh=[],gi=-1;function ms(t){return{current:t}}function Fe(t){0>gi||(t.current=wh[gi],wh[gi]=null,gi--)}function Oe(t,e){gi++,wh[gi]=t.current,t.current=e}var us={},Ft=ms(us),en=ms(!1),Os=us;function Di(t,e){var n=t.type.contextTypes;if(!n)return us;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function tn(t){return t=t.childContextTypes,t!=null}function ku(){Fe(en),Fe(Ft)}function Og(t,e,n){if(Ft.current!==us)throw Error(H(168));Oe(Ft,e),Oe(en,n)}function e_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(H(108,FE(t)||"Unknown",s));return Ke({},n,r)}function Tu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||us,Os=Ft.current,Oe(Ft,t),Oe(en,en.current),!0}function Mg(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=e_(t,e,Os),r.__reactInternalMemoizedMergedChildContext=t,Fe(en),Fe(Ft),Oe(Ft,t)):Fe(en),Oe(en,n)}var cr=null,fc=!1,xd=!1;function t_(t){cr===null?cr=[t]:cr.push(t)}function sT(t){fc=!0,t_(t)}function gs(){if(!xd&&cr!==null){xd=!0;var t=0,e=Ce;try{var n=cr;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}cr=null,fc=!1}catch(s){throw cr!==null&&(cr=cr.slice(t+1)),bv(bf,gs),s}finally{Ce=e,xd=!1}}return null}var yi=[],vi=0,Iu=null,bu=0,wn=[],xn=0,Ms=null,hr=1,fr="";function Ts(t,e){yi[vi++]=bu,yi[vi++]=Iu,Iu=t,bu=e}function n_(t,e,n){wn[xn++]=hr,wn[xn++]=fr,wn[xn++]=Ms,Ms=t;var r=hr;t=fr;var s=32-Mn(r)-1;r&=~(1<<s),n+=1;var i=32-Mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,hr=1<<32-Mn(e)+s|n<<s|r,fr=i+t}else hr=1<<i|n<<s|r,fr=t}function Df(t){t.return!==null&&(Ts(t,1),n_(t,1,0))}function Of(t){for(;t===Iu;)Iu=yi[--vi],yi[vi]=null,bu=yi[--vi],yi[vi]=null;for(;t===Ms;)Ms=wn[--xn],wn[xn]=null,fr=wn[--xn],wn[xn]=null,hr=wn[--xn],wn[xn]=null}var fn=null,cn=null,ze=!1,Dn=null;function r_(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Lg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,cn=es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ms!==null?{id:hr,overflow:fr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,cn=null,!0):!1;default:return!1}}function xh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Eh(t){if(ze){var e=cn;if(e){var n=e;if(!Lg(t,e)){if(xh(t))throw Error(H(418));e=es(n.nextSibling);var r=fn;e&&Lg(t,e)?r_(r,n):(t.flags=t.flags&-4097|2,ze=!1,fn=t)}}else{if(xh(t))throw Error(H(418));t.flags=t.flags&-4097|2,ze=!1,fn=t}}}function Vg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Al(t){if(t!==fn)return!1;if(!ze)return Vg(t),ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yh(t.type,t.memoizedProps)),e&&(e=cn)){if(xh(t))throw s_(),Error(H(418));for(;e;)r_(t,e),e=es(e.nextSibling)}if(Vg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cn=es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cn=null}}else cn=fn?es(t.stateNode.nextSibling):null;return!0}function s_(){for(var t=cn;t;)t=es(t.nextSibling)}function Oi(){cn=fn=null,ze=!1}function Mf(t){Dn===null?Dn=[t]:Dn.push(t)}var iT=Sr.ReactCurrentBatchConfig;function ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Sl(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ug(t){var e=t._init;return e(t._payload)}function i_(t){function e(E,_){if(t){var x=E.deletions;x===null?(E.deletions=[_],E.flags|=16):x.push(_)}}function n(E,_){if(!t)return null;for(;_!==null;)e(E,_),_=_.sibling;return null}function r(E,_){for(E=new Map;_!==null;)_.key!==null?E.set(_.key,_):E.set(_.index,_),_=_.sibling;return E}function s(E,_){return E=ss(E,_),E.index=0,E.sibling=null,E}function i(E,_,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<_?(E.flags|=2,_):x):(E.flags|=2,_)):(E.flags|=1048576,_)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,_,x,D){return _===null||_.tag!==6?(_=Sd(x,E.mode,D),_.return=E,_):(_=s(_,x),_.return=E,_)}function u(E,_,x,D){var $=x.type;return $===di?p(E,_,x.props.children,D,x.key):_!==null&&(_.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Ur&&Ug($)===_.type)?(D=s(_,x.props),D.ref=ko(E,_,x),D.return=E,D):(D=tu(x.type,x.key,x.props,null,E.mode,D),D.ref=ko(E,_,x),D.return=E,D)}function h(E,_,x,D){return _===null||_.tag!==4||_.stateNode.containerInfo!==x.containerInfo||_.stateNode.implementation!==x.implementation?(_=Nd(x,E.mode,D),_.return=E,_):(_=s(_,x.children||[]),_.return=E,_)}function p(E,_,x,D,$){return _===null||_.tag!==7?(_=qs(x,E.mode,D,$),_.return=E,_):(_=s(_,x),_.return=E,_)}function m(E,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Sd(""+_,E.mode,x),_.return=E,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case yl:return x=tu(_.type,_.key,_.props,null,E.mode,x),x.ref=ko(E,null,_),x.return=E,x;case ci:return _=Nd(_,E.mode,x),_.return=E,_;case Ur:var D=_._init;return m(E,D(_._payload),x)}if(Ro(_)||vo(_))return _=qs(_,E.mode,x,null),_.return=E,_;Sl(E,_)}return null}function g(E,_,x,D){var $=_!==null?_.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return $!==null?null:l(E,_,""+x,D);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case yl:return x.key===$?u(E,_,x,D):null;case ci:return x.key===$?h(E,_,x,D):null;case Ur:return $=x._init,g(E,_,$(x._payload),D)}if(Ro(x)||vo(x))return $!==null?null:p(E,_,x,D,null);Sl(E,x)}return null}function b(E,_,x,D,$){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(x)||null,l(_,E,""+D,$);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case yl:return E=E.get(D.key===null?x:D.key)||null,u(_,E,D,$);case ci:return E=E.get(D.key===null?x:D.key)||null,h(_,E,D,$);case Ur:var U=D._init;return b(E,_,x,U(D._payload),$)}if(Ro(D)||vo(D))return E=E.get(x)||null,p(_,E,D,$,null);Sl(_,D)}return null}function N(E,_,x,D){for(var $=null,U=null,w=_,v=_=0,k=null;w!==null&&v<x.length;v++){w.index>v?(k=w,w=null):k=w.sibling;var I=g(E,w,x[v],D);if(I===null){w===null&&(w=k);break}t&&w&&I.alternate===null&&e(E,w),_=i(I,_,v),U===null?$=I:U.sibling=I,U=I,w=k}if(v===x.length)return n(E,w),ze&&Ts(E,v),$;if(w===null){for(;v<x.length;v++)w=m(E,x[v],D),w!==null&&(_=i(w,_,v),U===null?$=w:U.sibling=w,U=w);return ze&&Ts(E,v),$}for(w=r(E,w);v<x.length;v++)k=b(w,E,v,x[v],D),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?v:k.key),_=i(k,_,v),U===null?$=k:U.sibling=k,U=k);return t&&w.forEach(function(S){return e(E,S)}),ze&&Ts(E,v),$}function j(E,_,x,D){var $=vo(x);if(typeof $!="function")throw Error(H(150));if(x=$.call(x),x==null)throw Error(H(151));for(var U=$=null,w=_,v=_=0,k=null,I=x.next();w!==null&&!I.done;v++,I=x.next()){w.index>v?(k=w,w=null):k=w.sibling;var S=g(E,w,I.value,D);if(S===null){w===null&&(w=k);break}t&&w&&S.alternate===null&&e(E,w),_=i(S,_,v),U===null?$=S:U.sibling=S,U=S,w=k}if(I.done)return n(E,w),ze&&Ts(E,v),$;if(w===null){for(;!I.done;v++,I=x.next())I=m(E,I.value,D),I!==null&&(_=i(I,_,v),U===null?$=I:U.sibling=I,U=I);return ze&&Ts(E,v),$}for(w=r(E,w);!I.done;v++,I=x.next())I=b(w,E,v,I.value,D),I!==null&&(t&&I.alternate!==null&&w.delete(I.key===null?v:I.key),_=i(I,_,v),U===null?$=I:U.sibling=I,U=I);return t&&w.forEach(function(R){return e(E,R)}),ze&&Ts(E,v),$}function A(E,_,x,D){if(typeof x=="object"&&x!==null&&x.type===di&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case yl:e:{for(var $=x.key,U=_;U!==null;){if(U.key===$){if($=x.type,$===di){if(U.tag===7){n(E,U.sibling),_=s(U,x.props.children),_.return=E,E=_;break e}}else if(U.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Ur&&Ug($)===U.type){n(E,U.sibling),_=s(U,x.props),_.ref=ko(E,U,x),_.return=E,E=_;break e}n(E,U);break}else e(E,U);U=U.sibling}x.type===di?(_=qs(x.props.children,E.mode,D,x.key),_.return=E,E=_):(D=tu(x.type,x.key,x.props,null,E.mode,D),D.ref=ko(E,_,x),D.return=E,E=D)}return o(E);case ci:e:{for(U=x.key;_!==null;){if(_.key===U)if(_.tag===4&&_.stateNode.containerInfo===x.containerInfo&&_.stateNode.implementation===x.implementation){n(E,_.sibling),_=s(_,x.children||[]),_.return=E,E=_;break e}else{n(E,_);break}else e(E,_);_=_.sibling}_=Nd(x,E.mode,D),_.return=E,E=_}return o(E);case Ur:return U=x._init,A(E,_,U(x._payload),D)}if(Ro(x))return N(E,_,x,D);if(vo(x))return j(E,_,x,D);Sl(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,_!==null&&_.tag===6?(n(E,_.sibling),_=s(_,x),_.return=E,E=_):(n(E,_),_=Sd(x,E.mode,D),_.return=E,E=_),o(E)):n(E,_)}return A}var Mi=i_(!0),o_=i_(!1),Au=ms(null),Su=null,_i=null,Lf=null;function Vf(){Lf=_i=Su=null}function Uf(t){var e=Au.current;Fe(Au),t._currentValue=e}function kh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ai(t,e){Su=t,Lf=_i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(Lf!==t)if(t={context:t,memoizedValue:e,next:null},_i===null){if(Su===null)throw Error(H(308));_i=t,Su.dependencies={lanes:0,firstContext:t}}else _i=_i.next=t;return e}var Ss=null;function Ff(t){Ss===null?Ss=[t]:Ss.push(t)}function a_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Ff(e)):(n.next=s.next,s.next=n),e.interleaved=n,Er(t,r)}function Er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fr=!1;function zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ts(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Er(t,n)}return s=r.interleaved,s===null?(e.next=e,Ff(r)):(e.next=s.next,s.next=e),r.interleaved=e,Er(t,n)}function Ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function Fg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nu(t,e,n,r){var s=t.updateQueue;Fr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?i=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=h=u=null,l=i;do{var g=l.lane,b=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,j=l;switch(g=e,b=n,j.tag){case 1:if(N=j.payload,typeof N=="function"){m=N.call(b,m,g);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=j.payload,g=typeof N=="function"?N.call(b,m,g):N,g==null)break e;m=Ke({},m,g);break e;case 2:Fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else b={eventTime:b,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=b,u=m):p=p.next=b,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vs|=o,t.lanes=o,t.memoizedState=m}}function zg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var ja={},Qn=ms(ja),ha=ms(ja),fa=ms(ja);function Ns(t){if(t===ja)throw Error(H(174));return t}function Bf(t,e){switch(Oe(fa,e),Oe(ha,t),Oe(Qn,ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rh(e,t)}Fe(Qn),Oe(Qn,e)}function Li(){Fe(Qn),Fe(ha),Fe(fa)}function u_(t){Ns(fa.current);var e=Ns(Qn.current),n=rh(e,t.type);e!==n&&(Oe(ha,t),Oe(Qn,n))}function $f(t){ha.current===t&&(Fe(Qn),Fe(ha))}var We=ms(0);function Ru(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ed=[];function Wf(){for(var t=0;t<Ed.length;t++)Ed[t]._workInProgressVersionPrimary=null;Ed.length=0}var Yl=Sr.ReactCurrentDispatcher,kd=Sr.ReactCurrentBatchConfig,Ls=0,He=null,ht=null,wt=null,Cu=!1,Wo=!1,pa=0,oT=0;function jt(){throw Error(H(321))}function Hf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function Kf(t,e,n,r,s,i){if(Ls=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?cT:dT,t=n(r,s),Wo){i=0;do{if(Wo=!1,pa=0,25<=i)throw Error(H(301));i+=1,wt=ht=null,e.updateQueue=null,Yl.current=hT,t=n(r,s)}while(Wo)}if(Yl.current=Pu,e=ht!==null&&ht.next!==null,Ls=0,wt=ht=He=null,Cu=!1,e)throw Error(H(300));return t}function Gf(){var t=pa!==0;return pa=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?He.memoizedState=wt=t:wt=wt.next=t,wt}function An(){if(ht===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=wt===null?He.memoizedState:wt.next;if(e!==null)wt=e,ht=t;else{if(t===null)throw Error(H(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},wt===null?He.memoizedState=wt=t:wt=wt.next=t}return wt}function ma(t,e){return typeof e=="function"?e(t):e}function Td(t){var e=An(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=ht,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,h=i;do{var p=h.lane;if((Ls&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,He.lanes|=p,Vs|=p}h=h.next}while(h!==null&&h!==i);u===null?o=r:u.next=l,Un(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,He.lanes|=i,Vs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Id(t){var e=An(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Un(i,e.memoizedState)||(Zt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function c_(){}function d_(t,e){var n=He,r=An(),s=e(),i=!Un(r.memoizedState,s);if(i&&(r.memoizedState=s,Zt=!0),r=r.queue,Qf(p_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||wt!==null&&wt.memoizedState.tag&1){if(n.flags|=2048,ga(9,f_.bind(null,n,r,s,e),void 0,null),xt===null)throw Error(H(349));Ls&30||h_(n,e,s)}return s}function h_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f_(t,e,n,r){e.value=n,e.getSnapshot=r,m_(e)&&g_(t)}function p_(t,e,n){return n(function(){m_(e)&&g_(t)})}function m_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function g_(t){var e=Er(t,1);e!==null&&Ln(e,t,1,-1)}function Bg(t){var e=Wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},e.queue=t,t=t.dispatch=uT.bind(null,He,t),[e.memoizedState,t]}function ga(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function y_(){return An().memoizedState}function Xl(t,e,n,r){var s=Wn();He.flags|=t,s.memoizedState=ga(1|e,n,void 0,r===void 0?null:r)}function pc(t,e,n,r){var s=An();r=r===void 0?null:r;var i=void 0;if(ht!==null){var o=ht.memoizedState;if(i=o.destroy,r!==null&&Hf(r,o.deps)){s.memoizedState=ga(e,n,i,r);return}}He.flags|=t,s.memoizedState=ga(1|e,n,i,r)}function $g(t,e){return Xl(8390656,8,t,e)}function Qf(t,e){return pc(2048,8,t,e)}function v_(t,e){return pc(4,2,t,e)}function __(t,e){return pc(4,4,t,e)}function w_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function x_(t,e,n){return n=n!=null?n.concat([t]):null,pc(4,4,w_.bind(null,e,t),n)}function Yf(){}function E_(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function k_(t,e){var n=An();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function T_(t,e,n){return Ls&21?(Un(n,e)||(n=Nv(),He.lanes|=n,Vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function aT(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=kd.transition;kd.transition={};try{t(!1),e()}finally{Ce=n,kd.transition=r}}function I_(){return An().memoizedState}function lT(t,e,n){var r=rs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},b_(t))A_(e,n);else if(n=a_(t,e,n,r),n!==null){var s=Ht();Ln(n,t,r,s),S_(n,e,r)}}function uT(t,e,n){var r=rs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(b_(t))A_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Un(l,o)){var u=e.interleaved;u===null?(s.next=s,Ff(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=a_(t,e,s,r),n!==null&&(s=Ht(),Ln(n,t,r,s),S_(n,e,r))}}function b_(t){var e=t.alternate;return t===He||e!==null&&e===He}function A_(t,e){Wo=Cu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function S_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var Pu={readContext:bn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},cT={readContext:bn,useCallback:function(t,e){return Wn().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:$g,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,w_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=Wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=lT.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Wn();return t={current:t},e.memoizedState=t},useState:Bg,useDebugValue:Yf,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=Bg(!1),e=t[0];return t=aT.bind(null,t[1]),Wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,s=Wn();if(ze){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),xt===null)throw Error(H(349));Ls&30||h_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,$g(p_.bind(null,r,i,t),[t]),r.flags|=2048,ga(9,f_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wn(),e=xt.identifierPrefix;if(ze){var n=fr,r=hr;n=(r&~(1<<32-Mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=oT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dT={readContext:bn,useCallback:E_,useContext:bn,useEffect:Qf,useImperativeHandle:x_,useInsertionEffect:v_,useLayoutEffect:__,useMemo:k_,useReducer:Td,useRef:y_,useState:function(){return Td(ma)},useDebugValue:Yf,useDeferredValue:function(t){var e=An();return T_(e,ht.memoizedState,t)},useTransition:function(){var t=Td(ma)[0],e=An().memoizedState;return[t,e]},useMutableSource:c_,useSyncExternalStore:d_,useId:I_,unstable_isNewReconciler:!1},hT={readContext:bn,useCallback:E_,useContext:bn,useEffect:Qf,useImperativeHandle:x_,useInsertionEffect:v_,useLayoutEffect:__,useMemo:k_,useReducer:Id,useRef:y_,useState:function(){return Id(ma)},useDebugValue:Yf,useDeferredValue:function(t){var e=An();return ht===null?e.memoizedState=t:T_(e,ht.memoizedState,t)},useTransition:function(){var t=Id(ma)[0],e=An().memoizedState;return[t,e]},useMutableSource:c_,useSyncExternalStore:d_,useId:I_,unstable_isNewReconciler:!1};function qn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Th(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mc={isMounted:function(t){return(t=t._reactInternals)?Qs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ht(),s=rs(t),i=yr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ts(t,i,s),e!==null&&(Ln(e,t,s,r),Ql(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ht(),s=rs(t),i=yr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ts(t,i,s),e!==null&&(Ln(e,t,s,r),Ql(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),r=rs(t),s=yr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ts(t,s,r),e!==null&&(Ln(e,t,r,n),Ql(e,t,r))}};function Wg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!la(n,r)||!la(s,i):!0}function N_(t,e,n){var r=!1,s=us,i=e.contextType;return typeof i=="object"&&i!==null?i=bn(i):(s=tn(e)?Os:Ft.current,r=e.contextTypes,i=(r=r!=null)?Di(t,s):us),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mc.enqueueReplaceState(e,e.state,null)}function Ih(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},zf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=bn(i):(i=tn(e)?Os:Ft.current,s.context=Di(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Th(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mc.enqueueReplaceState(s,s.state,null),Nu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Vi(t,e){try{var n="",r=e;do n+=UE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var fT=typeof WeakMap=="function"?WeakMap:Map;function R_(t,e,n){n=yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ju||(ju=!0,Oh=r),bh(t,e)},n}function C_(t,e,n){n=yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bh(t,e),typeof r!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Kg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new fT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=AT.bind(null,t,e,n),e.then(t,t))}function Gg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yr(-1,1),e.tag=2,ts(n,e,1))),n.lanes|=1),t)}var pT=Sr.ReactCurrentOwner,Zt=!1;function Wt(t,e,n,r){e.child=t===null?o_(e,null,n,r):Mi(e,t.child,n,r)}function Yg(t,e,n,r,s){n=n.render;var i=e.ref;return Ai(e,s),r=Kf(t,e,n,r,i,s),n=Gf(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,kr(t,e,s)):(ze&&n&&Df(e),e.flags|=1,Wt(t,e,r,s),e.child)}function Xg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!sp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,P_(t,e,i,r,s)):(t=tu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:la,n(o,r)&&t.ref===e.ref)return kr(t,e,s)}return e.flags|=1,t=ss(i,r),t.ref=e.ref,t.return=e,e.child=t}function P_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(la(i,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,kr(t,e,s)}return Ah(t,e,n,r,s)}function q_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(xi,un),un|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(xi,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Oe(xi,un),un|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Oe(xi,un),un|=r;return Wt(t,e,s,n),e.child}function j_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ah(t,e,n,r,s){var i=tn(n)?Os:Ft.current;return i=Di(e,i),Ai(e,s),n=Kf(t,e,n,r,i,s),r=Gf(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,kr(t,e,s)):(ze&&r&&Df(e),e.flags|=1,Wt(t,e,n,s),e.child)}function Jg(t,e,n,r,s){if(tn(n)){var i=!0;Tu(e)}else i=!1;if(Ai(e,s),e.stateNode===null)Jl(t,e),N_(e,n,r),Ih(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=bn(h):(h=tn(n)?Os:Ft.current,h=Di(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Hg(e,o,r,h),Fr=!1;var g=e.memoizedState;o.state=g,Nu(e,r,o,s),u=e.memoizedState,l!==r||g!==u||en.current||Fr?(typeof p=="function"&&(Th(e,n,p,r),u=e.memoizedState),(l=Fr||Wg(e,n,l,r,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l_(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:qn(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bn(u):(u=tn(n)?Os:Ft.current,u=Di(e,u));var b=n.getDerivedStateFromProps;(p=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Hg(e,o,r,u),Fr=!1,g=e.memoizedState,o.state=g,Nu(e,r,o,s);var N=e.memoizedState;l!==m||g!==N||en.current||Fr?(typeof b=="function"&&(Th(e,n,b,r),N=e.memoizedState),(h=Fr||Wg(e,n,h,r,g,N,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Sh(t,e,n,r,i,s)}function Sh(t,e,n,r,s,i){j_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Mg(e,n,!1),kr(t,e,i);r=e.stateNode,pT.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mi(e,t.child,null,i),e.child=Mi(e,null,l,i)):Wt(t,e,l,i),e.memoizedState=r.state,s&&Mg(e,n,!0),e.child}function D_(t){var e=t.stateNode;e.pendingContext?Og(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Og(t,e.context,!1),Bf(t,e.containerInfo)}function Zg(t,e,n,r,s){return Oi(),Mf(s),e.flags|=256,Wt(t,e,n,r),e.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function Rh(t){return{baseLanes:t,cachePool:null,transitions:null}}function O_(t,e,n){var r=e.pendingProps,s=We.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Oe(We,s&1),t===null)return Eh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vc(o,r,0,null),t=qs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rh(n),e.memoizedState=Nh,t):Xf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return mT(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=ss(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ss(l,i):(i=qs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Rh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nh,r}return i=t.child,t=i.sibling,r=ss(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xf(t,e){return e=vc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nl(t,e,n,r){return r!==null&&Mf(r),Mi(e,t.child,null,n),t=Xf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function mT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=bd(Error(H(422))),Nl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=vc({mode:"visible",children:r.children},s,0,null),i=qs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Mi(e,t.child,null,o),e.child.memoizedState=Rh(o),e.memoizedState=Nh,i);if(!(e.mode&1))return Nl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=bd(i,r,void 0),Nl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Zt||l){if(r=xt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Er(t,s),Ln(r,t,s,-1))}return rp(),r=bd(Error(H(421))),Nl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ST.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,cn=es(s.nextSibling),fn=e,ze=!0,Dn=null,t!==null&&(wn[xn++]=hr,wn[xn++]=fr,wn[xn++]=Ms,hr=t.id,fr=t.overflow,Ms=e),e=Xf(e,r.children),e.flags|=4096,e)}function ey(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kh(t.return,e,n)}function Ad(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function M_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Wt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ey(t,n,e);else if(t.tag===19)ey(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(We,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ru(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ad(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ru(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ad(e,!0,n,null,i);break;case"together":Ad(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function gT(t,e,n){switch(e.tag){case 3:D_(e),Oi();break;case 5:u_(e);break;case 1:tn(e.type)&&Tu(e);break;case 4:Bf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Oe(Au,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?O_(t,e,n):(Oe(We,We.current&1),t=kr(t,e,n),t!==null?t.sibling:null);Oe(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return M_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,q_(t,e,n)}return kr(t,e,n)}var L_,Ch,V_,U_;L_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ch=function(){};V_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ns(Qn.current);var i=null;switch(n){case"input":s=Zd(t,s),r=Zd(t,r),i=[];break;case"select":s=Ke({},s,{value:void 0}),r=Ke({},r,{value:void 0}),i=[];break;case"textarea":s=nh(t,s),r=nh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Eu)}sh(n,r);var o;n=null;for(h in s)if(!r.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ta.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in r){var u=r[h];if(l=s!=null?s[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(ta.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&Ve("scroll",t),i||l===u||(i=[])):(i=i||[]).push(h,u))}n&&(i=i||[]).push("style",n);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};U_=function(t,e,n,r){n!==r&&(e.flags|=4)};function To(t,e){if(!ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yT(t,e,n){var r=e.pendingProps;switch(Of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return tn(e.type)&&ku(),Dt(e),null;case 3:return r=e.stateNode,Li(),Fe(en),Fe(Ft),Wf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(Vh(Dn),Dn=null))),Ch(t,e),Dt(e),null;case 5:$f(e);var s=Ns(fa.current);if(n=e.type,t!==null&&e.stateNode!=null)V_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Dt(e),null}if(t=Ns(Qn.current),Al(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Hn]=e,r[da]=i,t=(e.mode&1)!==0,n){case"dialog":Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":case"embed":Ve("load",r);break;case"video":case"audio":for(s=0;s<Po.length;s++)Ve(Po[s],r);break;case"source":Ve("error",r);break;case"img":case"image":case"link":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"input":ug(r,i),Ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",r);break;case"textarea":dg(r,i),Ve("invalid",r)}sh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&bl(r.textContent,l,t),s=["children",""+l]):ta.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ve("scroll",r)}switch(n){case"input":vl(r),cg(r,i,!0);break;case"textarea":vl(r),hg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Eu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hn]=e,t[da]=r,L_(t,e,!1,!1),e.stateNode=t;e:{switch(o=ih(n,r),n){case"dialog":Ve("cancel",t),Ve("close",t),s=r;break;case"iframe":case"object":case"embed":Ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<Po.length;s++)Ve(Po[s],t);s=r;break;case"source":Ve("error",t),s=r;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),s=r;break;case"details":Ve("toggle",t),s=r;break;case"input":ug(t,r),s=Zd(t,r),Ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ke({},r,{value:void 0}),Ve("invalid",t);break;case"textarea":dg(t,r),s=nh(t,r),Ve("invalid",t);break;default:s=r}sh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?yv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&mv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&na(t,u):typeof u=="number"&&na(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ta.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ve("scroll",t):u!=null&&xf(t,i,u,o))}switch(n){case"input":vl(t),cg(t,r,!1);break;case"textarea":vl(t),hg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ls(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ki(t,!!r.multiple,i,!1):r.defaultValue!=null&&ki(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Eu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)U_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ns(fa.current),Ns(Qn.current),Al(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(i=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:bl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return Dt(e),null;case 13:if(Fe(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ze&&cn!==null&&e.mode&1&&!(e.flags&128))s_(),Oi(),e.flags|=98560,i=!1;else if(i=Al(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[Hn]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),i=!1}else Dn!==null&&(Vh(Dn),Dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?ft===0&&(ft=3):rp())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Li(),Ch(t,e),t===null&&ua(e.stateNode.containerInfo),Dt(e),null;case 10:return Uf(e.type._context),Dt(e),null;case 17:return tn(e.type)&&ku(),Dt(e),null;case 19:if(Fe(We),i=e.memoizedState,i===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)To(i,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ru(t),o!==null){for(e.flags|=128,To(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(We,We.current&1|2),e.child}t=t.sibling}i.tail!==null&&st()>Ui&&(e.flags|=128,r=!0,To(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ru(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),To(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ze)return Dt(e),null}else 2*st()-i.renderingStartTime>Ui&&n!==1073741824&&(e.flags|=128,r=!0,To(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=st(),e.sibling=null,n=We.current,Oe(We,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return np(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?un&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function vT(t,e){switch(Of(e),e.tag){case 1:return tn(e.type)&&ku(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Li(),Fe(en),Fe(Ft),Wf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $f(e),null;case 13:if(Fe(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(We),null;case 4:return Li(),null;case 10:return Uf(e.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var Rl=!1,Lt=!1,_T=typeof WeakSet=="function"?WeakSet:Set,X=null;function wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function Ph(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var ty=!1;function wT(t,e){if(mh=_u,t=Wv(),jf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,g=null;t:for(;;){for(var b;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)g=m,m=b;for(;;){if(m===t)break t;if(g===n&&++h===s&&(l=o),g===i&&++p===r&&(u=o),(b=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=b}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(gh={focusedElem:t,selectionRange:n},_u=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var j=N.memoizedProps,A=N.memoizedState,E=e.stateNode,_=E.getSnapshotBeforeUpdate(e.elementType===e.type?j:qn(e.type,j),A);E.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(D){Xe(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return N=ty,ty=!1,N}function Ho(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ph(e,n,i)}s=s.next}while(s!==r)}}function gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function qh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function F_(t){var e=t.alternate;e!==null&&(t.alternate=null,F_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[da],delete e[_h],delete e[nT],delete e[rT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function z_(t){return t.tag===5||t.tag===3||t.tag===4}function ny(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Eu));else if(r!==4&&(t=t.child,t!==null))for(jh(t,e,n),t=t.sibling;t!==null;)jh(t,e,n),t=t.sibling}function Dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dh(t,e,n),t=t.sibling;t!==null;)Dh(t,e,n),t=t.sibling}var Tt=null,jn=!1;function Lr(t,e,n){for(n=n.child;n!==null;)B_(t,e,n),n=n.sibling}function B_(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(lc,n)}catch{}switch(n.tag){case 5:Lt||wi(n,e);case 6:var r=Tt,s=jn;Tt=null,Lr(t,e,n),Tt=r,jn=s,Tt!==null&&(jn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(jn?(t=Tt,n=n.stateNode,t.nodeType===8?wd(t.parentNode,n):t.nodeType===1&&wd(t,n),oa(t)):wd(Tt,n.stateNode));break;case 4:r=Tt,s=jn,Tt=n.stateNode.containerInfo,jn=!0,Lr(t,e,n),Tt=r,jn=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ph(n,e,o),s=s.next}while(s!==r)}Lr(t,e,n);break;case 1:if(!Lt&&(wi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Xe(n,e,l)}Lr(t,e,n);break;case 21:Lr(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,Lr(t,e,n),Lt=r):Lr(t,e,n);break;default:Lr(t,e,n)}}function ry(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _T),e.forEach(function(r){var s=NT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Pn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Tt=l.stateNode,jn=!1;break e;case 3:Tt=l.stateNode.containerInfo,jn=!0;break e;case 4:Tt=l.stateNode.containerInfo,jn=!0;break e}l=l.return}if(Tt===null)throw Error(H(160));B_(i,o,s),Tt=null,jn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(h){Xe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$_(e,t),e=e.sibling}function $_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pn(e,t),$n(t),r&4){try{Ho(3,t,t.return),gc(3,t)}catch(j){Xe(t,t.return,j)}try{Ho(5,t,t.return)}catch(j){Xe(t,t.return,j)}}break;case 1:Pn(e,t),$n(t),r&512&&n!==null&&wi(n,n.return);break;case 5:if(Pn(e,t),$n(t),r&512&&n!==null&&wi(n,n.return),t.flags&32){var s=t.stateNode;try{na(s,"")}catch(j){Xe(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&hv(s,i),ih(l,o);var h=ih(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?yv(s,m):p==="dangerouslySetInnerHTML"?mv(s,m):p==="children"?na(s,m):xf(s,p,m,h)}switch(l){case"input":eh(s,i);break;case"textarea":fv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?ki(s,!!i.multiple,b,!1):g!==!!i.multiple&&(i.defaultValue!=null?ki(s,!!i.multiple,i.defaultValue,!0):ki(s,!!i.multiple,i.multiple?[]:"",!1))}s[da]=i}catch(j){Xe(t,t.return,j)}}break;case 6:if(Pn(e,t),$n(t),r&4){if(t.stateNode===null)throw Error(H(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){Xe(t,t.return,j)}}break;case 3:if(Pn(e,t),$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oa(e.containerInfo)}catch(j){Xe(t,t.return,j)}break;case 4:Pn(e,t),$n(t);break;case 13:Pn(e,t),$n(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ep=st())),r&4&&ry(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(h=Lt)||p,Pn(e,t),Lt=h):Pn(e,t),$n(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(X=t,p=t.child;p!==null;){for(m=X=p;X!==null;){switch(g=X,b=g.child,g.tag){case 0:case 11:case 14:case 15:Ho(4,g,g.return);break;case 1:wi(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(j){Xe(r,n,j)}}break;case 5:wi(g,g.return);break;case 22:if(g.memoizedState!==null){iy(m);continue}}b!==null?(b.return=g,X=b):iy(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,h?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=gv("display",o))}catch(j){Xe(t,t.return,j)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(j){Xe(t,t.return,j)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Pn(e,t),$n(t),r&4&&ry(t);break;case 21:break;default:Pn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(z_(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(na(s,""),r.flags&=-33);var i=ny(t);Dh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ny(t);jh(t,l,o);break;default:throw Error(H(161))}}catch(u){Xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function xT(t,e,n){X=t,W_(t)}function W_(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Rl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Lt;l=Rl;var h=Lt;if(Rl=o,(Lt=u)&&!h)for(X=s;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?oy(s):u!==null?(u.return=o,X=u):oy(s);for(;i!==null;)X=i,W_(i),i=i.sibling;X=s,Rl=l,Lt=h}sy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):sy(t)}}function sy(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||gc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&zg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&oa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Lt||e.flags&512&&qh(e)}catch(g){Xe(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function iy(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function oy(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gc(4,e)}catch(u){Xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Xe(e,s,u)}}var i=e.return;try{qh(e)}catch(u){Xe(e,i,u)}break;case 5:var o=e.return;try{qh(e)}catch(u){Xe(e,o,u)}}}catch(u){Xe(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var ET=Math.ceil,qu=Sr.ReactCurrentDispatcher,Jf=Sr.ReactCurrentOwner,In=Sr.ReactCurrentBatchConfig,Te=0,xt=null,ot=null,At=0,un=0,xi=ms(0),ft=0,ya=null,Vs=0,yc=0,Zf=0,Ko=null,Xt=null,ep=0,Ui=1/0,ur=null,ju=!1,Oh=null,ns=null,Cl=!1,Qr=null,Du=0,Go=0,Mh=null,Zl=-1,eu=0;function Ht(){return Te&6?st():Zl!==-1?Zl:Zl=st()}function rs(t){return t.mode&1?Te&2&&At!==0?At&-At:iT.transition!==null?(eu===0&&(eu=Nv()),eu):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:Ov(t.type)),t):1}function Ln(t,e,n,r){if(50<Go)throw Go=0,Mh=null,Error(H(185));Ca(t,n,r),(!(Te&2)||t!==xt)&&(t===xt&&(!(Te&2)&&(yc|=n),ft===4&&Br(t,At)),nn(t,r),n===1&&Te===0&&!(e.mode&1)&&(Ui=st()+500,fc&&gs()))}function nn(t,e){var n=t.callbackNode;ik(t,e);var r=vu(t,t===xt?At:0);if(r===0)n!==null&&mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&mg(n),e===1)t.tag===0?sT(ay.bind(null,t)):t_(ay.bind(null,t)),eT(function(){!(Te&6)&&gs()}),n=null;else{switch(Rv(r)){case 1:n=bf;break;case 4:n=Av;break;case 16:n=yu;break;case 536870912:n=Sv;break;default:n=yu}n=Z_(n,H_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function H_(t,e){if(Zl=-1,eu=0,Te&6)throw Error(H(327));var n=t.callbackNode;if(Si()&&t.callbackNode!==n)return null;var r=vu(t,t===xt?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ou(t,r);else{e=r;var s=Te;Te|=2;var i=G_();(xt!==t||At!==e)&&(ur=null,Ui=st()+500,Ps(t,e));do try{IT();break}catch(l){K_(t,l)}while(!0);Vf(),qu.current=i,Te=s,ot!==null?e=0:(xt=null,At=0,e=ft)}if(e!==0){if(e===2&&(s=ch(t),s!==0&&(r=s,e=Lh(t,s))),e===1)throw n=ya,Ps(t,0),Br(t,r),nn(t,st()),n;if(e===6)Br(t,r);else{if(s=t.current.alternate,!(r&30)&&!kT(s)&&(e=Ou(t,r),e===2&&(i=ch(t),i!==0&&(r=i,e=Lh(t,i))),e===1))throw n=ya,Ps(t,0),Br(t,r),nn(t,st()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Is(t,Xt,ur);break;case 3:if(Br(t,r),(r&130023424)===r&&(e=ep+500-st(),10<e)){if(vu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ht(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=vh(Is.bind(null,t,Xt,ur),e);break}Is(t,Xt,ur);break;case 4:if(Br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=st()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ET(r/1960))-r,10<r){t.timeoutHandle=vh(Is.bind(null,t,Xt,ur),r);break}Is(t,Xt,ur);break;case 5:Is(t,Xt,ur);break;default:throw Error(H(329))}}}return nn(t,st()),t.callbackNode===n?H_.bind(null,t):null}function Lh(t,e){var n=Ko;return t.current.memoizedState.isDehydrated&&(Ps(t,e).flags|=256),t=Ou(t,e),t!==2&&(e=Xt,Xt=n,e!==null&&Vh(e)),t}function Vh(t){Xt===null?Xt=t:Xt.push.apply(Xt,t)}function kT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~Zf,e&=~yc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Mn(e),r=1<<n;t[n]=-1,e&=~r}}function ay(t){if(Te&6)throw Error(H(327));Si();var e=vu(t,0);if(!(e&1))return nn(t,st()),null;var n=Ou(t,e);if(t.tag!==0&&n===2){var r=ch(t);r!==0&&(e=r,n=Lh(t,r))}if(n===1)throw n=ya,Ps(t,0),Br(t,e),nn(t,st()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Is(t,Xt,ur),nn(t,st()),null}function tp(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(Ui=st()+500,fc&&gs())}}function Us(t){Qr!==null&&Qr.tag===0&&!(Te&6)&&Si();var e=Te;Te|=1;var n=In.transition,r=Ce;try{if(In.transition=null,Ce=1,t)return t()}finally{Ce=r,In.transition=n,Te=e,!(Te&6)&&gs()}}function np(){un=xi.current,Fe(xi)}function Ps(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Zk(n)),ot!==null)for(n=ot.return;n!==null;){var r=n;switch(Of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ku();break;case 3:Li(),Fe(en),Fe(Ft),Wf();break;case 5:$f(r);break;case 4:Li();break;case 13:Fe(We);break;case 19:Fe(We);break;case 10:Uf(r.type._context);break;case 22:case 23:np()}n=n.return}if(xt=t,ot=t=ss(t.current,null),At=un=e,ft=0,ya=null,Zf=yc=Vs=0,Xt=Ko=null,Ss!==null){for(e=0;e<Ss.length;e++)if(n=Ss[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ss=null}return t}function K_(t,e){do{var n=ot;try{if(Vf(),Yl.current=Pu,Cu){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Cu=!1}if(Ls=0,wt=ht=He=null,Wo=!1,pa=0,Jf.current=null,n===null||n.return===null){ft=1,ya=e,ot=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=At,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var b=Gg(o);if(b!==null){b.flags&=-257,Qg(b,o,l,i,e),b.mode&1&&Kg(i,h,e),e=b,u=h;var N=e.updateQueue;if(N===null){var j=new Set;j.add(u),e.updateQueue=j}else N.add(u);break e}else{if(!(e&1)){Kg(i,h,e),rp();break e}u=Error(H(426))}}else if(ze&&l.mode&1){var A=Gg(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Qg(A,o,l,i,e),Mf(Vi(u,l));break e}}i=u=Vi(u,l),ft!==4&&(ft=2),Ko===null?Ko=[i]:Ko.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=R_(i,u,e);Fg(i,E);break e;case 1:l=u;var _=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(ns===null||!ns.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=C_(i,l,e);Fg(i,D);break e}}i=i.return}while(i!==null)}Y_(n)}catch($){e=$,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function G_(){var t=qu.current;return qu.current=Pu,t===null?Pu:t}function rp(){(ft===0||ft===3||ft===2)&&(ft=4),xt===null||!(Vs&268435455)&&!(yc&268435455)||Br(xt,At)}function Ou(t,e){var n=Te;Te|=2;var r=G_();(xt!==t||At!==e)&&(ur=null,Ps(t,e));do try{TT();break}catch(s){K_(t,s)}while(!0);if(Vf(),Te=n,qu.current=r,ot!==null)throw Error(H(261));return xt=null,At=0,ft}function TT(){for(;ot!==null;)Q_(ot)}function IT(){for(;ot!==null&&!YE();)Q_(ot)}function Q_(t){var e=J_(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?Y_(t):ot=e,Jf.current=null}function Y_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vT(n,e),n!==null){n.flags&=32767,ot=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,ot=null;return}}else if(n=yT(n,e,un),n!==null){ot=n;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ft===0&&(ft=5)}function Is(t,e,n){var r=Ce,s=In.transition;try{In.transition=null,Ce=1,bT(t,e,n,r)}finally{In.transition=s,Ce=r}return null}function bT(t,e,n,r){do Si();while(Qr!==null);if(Te&6)throw Error(H(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ok(t,i),t===xt&&(ot=xt=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Cl||(Cl=!0,Z_(yu,function(){return Si(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=In.transition,In.transition=null;var o=Ce;Ce=1;var l=Te;Te|=4,Jf.current=null,wT(t,n),$_(n,t),Hk(gh),_u=!!mh,gh=mh=null,t.current=n,xT(n),XE(),Te=l,Ce=o,In.transition=i}else t.current=n;if(Cl&&(Cl=!1,Qr=t,Du=s),i=t.pendingLanes,i===0&&(ns=null),ek(n.stateNode),nn(t,st()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ju)throw ju=!1,t=Oh,Oh=null,t;return Du&1&&t.tag!==0&&Si(),i=t.pendingLanes,i&1?t===Mh?Go++:(Go=0,Mh=t):Go=0,gs(),null}function Si(){if(Qr!==null){var t=Rv(Du),e=In.transition,n=Ce;try{if(In.transition=null,Ce=16>t?16:t,Qr===null)var r=!1;else{if(t=Qr,Qr=null,Du=0,Te&6)throw Error(H(331));var s=Te;for(Te|=4,X=t.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(X=h;X!==null;){var p=X;switch(p.tag){case 0:case 11:case 15:Ho(8,p,i)}var m=p.child;if(m!==null)m.return=p,X=m;else for(;X!==null;){p=X;var g=p.sibling,b=p.return;if(F_(p),p===h){X=null;break}if(g!==null){g.return=b,X=g;break}X=b}}}var N=i.alternate;if(N!==null){var j=N.child;if(j!==null){N.child=null;do{var A=j.sibling;j.sibling=null,j=A}while(j!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ho(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,X=E;break e}X=i.return}}var _=t.current;for(X=_;X!==null;){o=X;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,X=x;else e:for(o=_;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:gc(9,l)}}catch($){Xe(l,l.return,$)}if(l===o){X=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,X=D;break e}X=l.return}}if(Te=s,gs(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(lc,t)}catch{}r=!0}return r}finally{Ce=n,In.transition=e}}return!1}function ly(t,e,n){e=Vi(n,e),e=R_(t,e,1),t=ts(t,e,1),e=Ht(),t!==null&&(Ca(t,1,e),nn(t,e))}function Xe(t,e,n){if(t.tag===3)ly(t,t,n);else for(;e!==null;){if(e.tag===3){ly(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ns===null||!ns.has(r))){t=Vi(n,t),t=C_(e,t,1),e=ts(e,t,1),t=Ht(),e!==null&&(Ca(e,1,t),nn(e,t));break}}e=e.return}}function AT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,xt===t&&(At&n)===n&&(ft===4||ft===3&&(At&130023424)===At&&500>st()-ep?Ps(t,0):Zf|=n),nn(t,e)}function X_(t,e){e===0&&(t.mode&1?(e=xl,xl<<=1,!(xl&130023424)&&(xl=4194304)):e=1);var n=Ht();t=Er(t,e),t!==null&&(Ca(t,e,n),nn(t,n))}function ST(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X_(t,n)}function NT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),X_(t,n)}var J_;J_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||en.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,gT(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,ze&&e.flags&1048576&&n_(e,bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jl(t,e),t=e.pendingProps;var s=Di(e,Ft.current);Ai(e,n),s=Kf(null,e,r,t,s,n);var i=Gf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tn(r)?(i=!0,Tu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zf(e),s.updater=mc,e.stateNode=s,s._reactInternals=e,Ih(e,r,t,n),e=Sh(null,e,r,!0,i,n)):(e.tag=0,ze&&i&&Df(e),Wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=CT(r),t=qn(r,t),s){case 0:e=Ah(null,e,r,t,n);break e;case 1:e=Jg(null,e,r,t,n);break e;case 11:e=Yg(null,e,r,t,n);break e;case 14:e=Xg(null,e,r,qn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Ah(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Jg(t,e,r,s,n);case 3:e:{if(D_(e),t===null)throw Error(H(387));r=e.pendingProps,i=e.memoizedState,s=i.element,l_(t,e),Nu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Vi(Error(H(423)),e),e=Zg(t,e,r,n,s);break e}else if(r!==s){s=Vi(Error(H(424)),e),e=Zg(t,e,r,n,s);break e}else for(cn=es(e.stateNode.containerInfo.firstChild),fn=e,ze=!0,Dn=null,n=o_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===s){e=kr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return u_(e),t===null&&Eh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,yh(r,s)?o=null:i!==null&&yh(r,i)&&(e.flags|=32),j_(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&Eh(e),null;case 13:return O_(t,e,n);case 4:return Bf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mi(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Yg(t,e,r,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Oe(Au,r._currentValue),r._currentValue=o,i!==null)if(Un(i.value,o)){if(i.children===s.children&&!en.current){e=kr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=yr(-1,n&-n),u.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),kh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),kh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ai(e,n),s=bn(s),r=r(s),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,s=qn(r,e.pendingProps),s=qn(r.type,s),Xg(t,e,r,s,n);case 15:return P_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:qn(r,s),Jl(t,e),e.tag=1,tn(r)?(t=!0,Tu(e)):t=!1,Ai(e,n),N_(e,r,s),Ih(e,r,s,n),Sh(null,e,r,!0,t,n);case 19:return M_(t,e,n);case 22:return q_(t,e,n)}throw Error(H(156,e.tag))};function Z_(t,e){return bv(t,e)}function RT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,r){return new RT(t,e,n,r)}function sp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CT(t){if(typeof t=="function")return sp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kf)return 11;if(t===Tf)return 14}return 2}function ss(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")sp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case di:return qs(n.children,s,i,e);case Ef:o=8,s|=8;break;case Qd:return t=En(12,n,e,s|2),t.elementType=Qd,t.lanes=i,t;case Yd:return t=En(13,n,e,s),t.elementType=Yd,t.lanes=i,t;case Xd:return t=En(19,n,e,s),t.elementType=Xd,t.lanes=i,t;case uv:return vc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case av:o=10;break e;case lv:o=9;break e;case kf:o=11;break e;case Tf:o=14;break e;case Ur:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=En(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qs(t,e,n,r){return t=En(7,t,r,e),t.lanes=n,t}function vc(t,e,n,r){return t=En(22,t,r,e),t.elementType=uv,t.lanes=n,t.stateNode={isHidden:!1},t}function Sd(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Nd(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ip(t,e,n,r,s,i,o,l,u){return t=new PT(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=En(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zf(i),t}function qT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ci,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ew(t){if(!t)return us;t=t._reactInternals;e:{if(Qs(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(tn(n))return e_(t,n,e)}return e}function tw(t,e,n,r,s,i,o,l,u){return t=ip(n,r,!0,t,s,i,o,l,u),t.context=ew(null),n=t.current,r=Ht(),s=rs(n),i=yr(r,s),i.callback=e??null,ts(n,i,s),t.current.lanes=s,Ca(t,s,r),nn(t,r),t}function _c(t,e,n,r){var s=e.current,i=Ht(),o=rs(s);return n=ew(n),e.context===null?e.context=n:e.pendingContext=n,e=yr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ts(s,e,o),t!==null&&(Ln(t,s,o,i),Ql(t,s,o)),o}function Mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function op(t,e){uy(t,e),(t=t.alternate)&&uy(t,e)}function jT(){return null}var nw=typeof reportError=="function"?reportError:function(t){console.error(t)};function ap(t){this._internalRoot=t}wc.prototype.render=ap.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));_c(t,e,null,null)};wc.prototype.unmount=ap.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Us(function(){_c(null,t,null,null)}),e[xr]=null}};function wc(t){this._internalRoot=t}wc.prototype.unstable_scheduleHydration=function(t){if(t){var e=qv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zr.length&&e!==0&&e<zr[n].priority;n++);zr.splice(n,0,t),n===0&&Dv(t)}};function lp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cy(){}function DT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var h=Mu(o);i.call(h)}}var o=tw(e,r,t,0,null,!1,!1,"",cy);return t._reactRootContainer=o,t[xr]=o.current,ua(t.nodeType===8?t.parentNode:t),Us(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var h=Mu(u);l.call(h)}}var u=ip(t,0,!1,null,null,!1,!1,"",cy);return t._reactRootContainer=u,t[xr]=u.current,ua(t.nodeType===8?t.parentNode:t),Us(function(){_c(e,u,n,r)}),u}function Ec(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Mu(o);l.call(u)}}_c(e,o,t,s)}else o=DT(n,e,t,s,r);return Mu(o)}Cv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Co(e.pendingLanes);n!==0&&(Af(e,n|1),nn(e,st()),!(Te&6)&&(Ui=st()+500,gs()))}break;case 13:Us(function(){var r=Er(t,1);if(r!==null){var s=Ht();Ln(r,t,1,s)}}),op(t,1)}};Sf=function(t){if(t.tag===13){var e=Er(t,134217728);if(e!==null){var n=Ht();Ln(e,t,134217728,n)}op(t,134217728)}};Pv=function(t){if(t.tag===13){var e=rs(t),n=Er(t,e);if(n!==null){var r=Ht();Ln(n,t,e,r)}op(t,e)}};qv=function(){return Ce};jv=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};ah=function(t,e,n){switch(e){case"input":if(eh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=hc(r);if(!s)throw Error(H(90));dv(r),eh(r,s)}}}break;case"textarea":fv(t,n);break;case"select":e=n.value,e!=null&&ki(t,!!n.multiple,e,!1)}};wv=tp;xv=Us;var OT={usingClientEntryPoint:!1,Events:[qa,mi,hc,vv,_v,tp]},Io={findFiberByHostInstance:As,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MT={bundleType:Io.bundleType,version:Io.version,rendererPackageName:Io.rendererPackageName,rendererConfig:Io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Tv(t),t===null?null:t.stateNode},findFiberByHostInstance:Io.findFiberByHostInstance||jT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{lc=Pl.inject(MT),Gn=Pl}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OT;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lp(e))throw Error(H(200));return qT(t,e,null,n)};yn.createRoot=function(t,e){if(!lp(t))throw Error(H(299));var n=!1,r="",s=nw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ip(t,1,!1,null,null,n,!1,r,s),t[xr]=e.current,ua(t.nodeType===8?t.parentNode:t),new ap(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=Tv(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return Us(t)};yn.hydrate=function(t,e,n){if(!xc(e))throw Error(H(200));return Ec(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!lp(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=nw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tw(e,null,t,1,n??null,s,!1,i,o),t[xr]=e.current,ua(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wc(e)};yn.render=function(t,e,n){if(!xc(e))throw Error(H(200));return Ec(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!xc(t))throw Error(H(40));return t._reactRootContainer?(Us(function(){Ec(null,null,t,!1,function(){t._reactRootContainer=null,t[xr]=null})}),!0):!1};yn.unstable_batchedUpdates=tp;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Ec(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function rw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rw)}catch(t){console.error(t)}}rw(),rv.exports=yn;var LT=rv.exports,dy=LT;Kd.createRoot=dy.createRoot,Kd.hydrateRoot=dy.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),te=(t,e)=>{const n=M.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...h},p)=>M.createElement("svg",{ref:p,...VT,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${UT(t)}`,l].join(" "),...h},[...e.map(([m,g])=>M.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=te("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=te("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=te("BookOpenCheck",[["path",{d:"M8 3H2v15h7c1.7 0 3 1.3 3 3V7c0-2.2-1.8-4-4-4Z",key:"1i8u0n"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V3h-6c-2.2 0-4 1.8-4 4v14c0-1.7 1.3-3 3-3h7v-2.3",key:"jb5l51"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=te("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=te("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=te("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=te("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=te("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=te("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=te("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=te("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=te("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=te("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=te("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=te("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=te("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=te("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=te("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=te("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=te("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=te("Pin",[["line",{x1:"12",x2:"12",y1:"17",y2:"22",key:"1jrz49"}],["path",{d:"M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z",key:"13yl11"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=te("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=te("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=te("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=te("Signal",[["path",{d:"M2 20h.01",key:"4haj6o"}],["path",{d:"M7 20v-4",key:"j294jx"}],["path",{d:"M12 20v-8",key:"i3yub9"}],["path",{d:"M17 20V8",key:"1tkaf5"}],["path",{d:"M22 4v16",key:"sih9yq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=te("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=te("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Ei=(t=>(t.LIGHT="light",t.DARK="dark",t))(Ei||{}),wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},fw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,h=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,b=h&63;u||(b=64,o||(g=64)),r.push(n[p],n[m],n[g],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||h==null||m==null)throw new hI;const g=i<<2|l>>4;if(r.push(g),h!==64){const b=l<<4&240|h>>2;if(r.push(b),m!==64){const N=h<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fI=function(t){const e=hw(t);return fw.encodeByteArray(e,!0)},Bu=function(t){return fI(t).replace(/\./g,"")},pw=function(t){try{return fw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=()=>pI().__FIREBASE_DEFAULTS__,gI=()=>{if(typeof process>"u"||typeof wy>"u")return;const t=wy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pw(t[1]);return e&&JSON.parse(e)},kc=()=>{try{return mI()||gI()||yI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mw=t=>{var e,n;return(n=(e=kc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gw=t=>{const e=mw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yw=()=>{var t;return(t=kc())===null||t===void 0?void 0:t.config},vw=t=>{var e;return(e=kc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bu(JSON.stringify(n)),Bu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _I(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zt())}function wI(){var t;const e=(t=kc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TI(){const t=zt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function II(){return!wI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bI(){try{return typeof indexedDB=="object"}catch{return!1}}function AI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="FirebaseError";class nr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=SI,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Oa.prototype.create)}}class Oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?NI(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new nr(s,l,r)}}function NI(t,e){return t.replace(RI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RI=/\{\$([^}]+)}/g;function CI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $u(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xy(i)&&xy(o)){if(!$u(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function qo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function PI(t,e){const n=new qI(t,e);return n.subscribe.bind(n)}class qI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Cd),s.error===void 0&&(s.error=Cd),s.complete===void 0&&(s.complete=Cd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Cd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t){return t&&t._delegate?t._delegate:t}class cs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MI(e))try{this.getOrInitializeService({instanceIdentifier:bs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bs){return this.instances.has(e)}getOptions(e=bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bs){return this.component?this.component.multipleInstances?e:bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OI(t){return t===bs?void 0:t}function MI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new DI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const VI={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},UI=xe.INFO,FI={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},zI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=FI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hp{constructor(e){this.name=e,this._logLevel=UI,this._logHandler=zI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const BI=(t,e)=>e.some(n=>t instanceof n);let Ey,ky;function $I(){return Ey||(Ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WI(){return ky||(ky=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ww=new WeakMap,Bh=new WeakMap,xw=new WeakMap,Pd=new WeakMap,fp=new WeakMap;function HI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(is(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ww.set(n,t)}).catch(()=>{}),fp.set(e,t),e}function KI(t){if(Bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bh.set(t,e)}let $h={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GI(t){$h=t($h)}function QI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qd(this),e,...n);return xw.set(r,e.sort?e.sort():[e]),is(r)}:WI().includes(t)?function(...e){return t.apply(qd(this),e),is(ww.get(this))}:function(...e){return is(t.apply(qd(this),e))}}function YI(t){return typeof t=="function"?QI(t):(t instanceof IDBTransaction&&KI(t),BI(t,$I())?new Proxy(t,$h):t)}function is(t){if(t instanceof IDBRequest)return HI(t);if(Pd.has(t))return Pd.get(t);const e=YI(t);return e!==t&&(Pd.set(t,e),fp.set(e,t)),e}const qd=t=>fp.get(t);function XI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=is(o);return r&&o.addEventListener("upgradeneeded",u=>{r(is(o.result),u.oldVersion,u.newVersion,is(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const JI=["get","getKey","getAll","getAllKeys","count"],ZI=["put","add","delete","clear"],jd=new Map;function Ty(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ZI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||JI.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&u.done]))[0]};return jd.set(e,i),i}GI(t=>({...t,get:(e,n,r)=>Ty(e,n)||t.get(e,n,r),has:(e,n)=>!!Ty(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",Iy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new hp("@firebase/app"),nb="@firebase/app-compat",rb="@firebase/analytics-compat",sb="@firebase/analytics",ib="@firebase/app-check-compat",ob="@firebase/app-check",ab="@firebase/auth",lb="@firebase/auth-compat",ub="@firebase/database",cb="@firebase/data-connect",db="@firebase/database-compat",hb="@firebase/functions",fb="@firebase/functions-compat",pb="@firebase/installations",mb="@firebase/installations-compat",gb="@firebase/messaging",yb="@firebase/messaging-compat",vb="@firebase/performance",_b="@firebase/performance-compat",wb="@firebase/remote-config",xb="@firebase/remote-config-compat",Eb="@firebase/storage",kb="@firebase/storage-compat",Tb="@firebase/firestore",Ib="@firebase/vertexai-preview",bb="@firebase/firestore-compat",Ab="firebase",Sb="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",Nb={[Wh]:"fire-core",[nb]:"fire-core-compat",[sb]:"fire-analytics",[rb]:"fire-analytics-compat",[ob]:"fire-app-check",[ib]:"fire-app-check-compat",[ab]:"fire-auth",[lb]:"fire-auth-compat",[ub]:"fire-rtdb",[cb]:"fire-data-connect",[db]:"fire-rtdb-compat",[hb]:"fire-fn",[fb]:"fire-fn-compat",[pb]:"fire-iid",[mb]:"fire-iid-compat",[gb]:"fire-fcm",[yb]:"fire-fcm-compat",[vb]:"fire-perf",[_b]:"fire-perf-compat",[wb]:"fire-rc",[xb]:"fire-rc-compat",[Eb]:"fire-gcs",[kb]:"fire-gcs-compat",[Tb]:"fire-fst",[bb]:"fire-fst-compat",[Ib]:"fire-vertex","fire-js":"fire-js",[Ab]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=new Map,Rb=new Map,Kh=new Map;function by(t,e){try{t.container.addComponent(e)}catch(n){Tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Fs(t){const e=t.name;if(Kh.has(e))return Tr.debug(`There were multiple attempts to register component ${e}.`),!1;Kh.set(e,t);for(const n of Wu.values())by(n,t);for(const n of Rb.values())by(n,t);return!0}function Tc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function On(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new Oa("app","Firebase",Cb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=Sb;function Ew(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw os.create("bad-app-name",{appName:String(s)});if(n||(n=yw()),!n)throw os.create("no-options");const i=Wu.get(s);if(i){if($u(n,i.options)&&$u(r,i.config))return i;throw os.create("duplicate-app",{appName:s})}const o=new LI(s);for(const u of Kh.values())o.addComponent(u);const l=new Pb(n,r,o);return Wu.set(s,l),l}function pp(t=Hh){const e=Wu.get(t);if(!e&&t===Hh&&yw())return Ew();if(!e)throw os.create("no-app",{appName:t});return e}function Yn(t,e,n){var r;let s=(r=Nb[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Tr.warn(l.join(" "));return}Fs(new cs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firebase-heartbeat-database",jb=1,_a="firebase-heartbeat-store";let Dd=null;function kw(){return Dd||(Dd=XI(qb,jb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_a)}catch(n){console.warn(n)}}}}).catch(t=>{throw os.create("idb-open",{originalErrorMessage:t.message})})),Dd}async function Db(t){try{const n=(await kw()).transaction(_a),r=await n.objectStore(_a).get(Tw(t));return await n.done,r}catch(e){if(e instanceof nr)Tr.warn(e.message);else{const n=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Tr.warn(n.message)}}}async function Ay(t,e){try{const r=(await kw()).transaction(_a,"readwrite");await r.objectStore(_a).put(e,Tw(t)),await r.done}catch(n){if(n instanceof nr)Tr.warn(n.message);else{const r=os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Tr.warn(r.message)}}}function Tw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=1024,Mb=30*24*60*60*1e3;class Lb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ub(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Mb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Tr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sy(),{heartbeatsToSend:r,unsentEntries:s}=Vb(this._heartbeatsCache.heartbeats),i=Bu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Tr.warn(n),""}}}function Sy(){return new Date().toISOString().substring(0,10)}function Vb(t,e=Ob){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ny(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ny(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ub{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bI()?AI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Db(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ay(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Ny(t){return Bu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(t){Fs(new cs("platform-logger",e=>new eb(e),"PRIVATE")),Fs(new cs("heartbeat",e=>new Lb(e),"PRIVATE")),Yn(Wh,Iy,t),Yn(Wh,Iy,"esm2017"),Yn("fire-js","")}Fb("");var zb="firebase",Bb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(zb,Bb,"app");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var js,Iw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,v){function k(){}k.prototype=v.prototype,w.D=v.prototype,w.prototype=new k,w.prototype.constructor=w,w.C=function(I,S,R){for(var T=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)T[qe-2]=arguments[qe];return v.prototype[S].apply(I,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,v,k){k||(k=0);var I=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)I[S]=v.charCodeAt(k++)|v.charCodeAt(k++)<<8|v.charCodeAt(k++)<<16|v.charCodeAt(k++)<<24;else for(S=0;16>S;++S)I[S]=v[k++]|v[k++]<<8|v[k++]<<16|v[k++]<<24;v=w.g[0],k=w.g[1],S=w.g[2];var R=w.g[3],T=v+(R^k&(S^R))+I[0]+3614090360&4294967295;v=k+(T<<7&4294967295|T>>>25),T=R+(S^v&(k^S))+I[1]+3905402710&4294967295,R=v+(T<<12&4294967295|T>>>20),T=S+(k^R&(v^k))+I[2]+606105819&4294967295,S=R+(T<<17&4294967295|T>>>15),T=k+(v^S&(R^v))+I[3]+3250441966&4294967295,k=S+(T<<22&4294967295|T>>>10),T=v+(R^k&(S^R))+I[4]+4118548399&4294967295,v=k+(T<<7&4294967295|T>>>25),T=R+(S^v&(k^S))+I[5]+1200080426&4294967295,R=v+(T<<12&4294967295|T>>>20),T=S+(k^R&(v^k))+I[6]+2821735955&4294967295,S=R+(T<<17&4294967295|T>>>15),T=k+(v^S&(R^v))+I[7]+4249261313&4294967295,k=S+(T<<22&4294967295|T>>>10),T=v+(R^k&(S^R))+I[8]+1770035416&4294967295,v=k+(T<<7&4294967295|T>>>25),T=R+(S^v&(k^S))+I[9]+2336552879&4294967295,R=v+(T<<12&4294967295|T>>>20),T=S+(k^R&(v^k))+I[10]+4294925233&4294967295,S=R+(T<<17&4294967295|T>>>15),T=k+(v^S&(R^v))+I[11]+2304563134&4294967295,k=S+(T<<22&4294967295|T>>>10),T=v+(R^k&(S^R))+I[12]+1804603682&4294967295,v=k+(T<<7&4294967295|T>>>25),T=R+(S^v&(k^S))+I[13]+4254626195&4294967295,R=v+(T<<12&4294967295|T>>>20),T=S+(k^R&(v^k))+I[14]+2792965006&4294967295,S=R+(T<<17&4294967295|T>>>15),T=k+(v^S&(R^v))+I[15]+1236535329&4294967295,k=S+(T<<22&4294967295|T>>>10),T=v+(S^R&(k^S))+I[1]+4129170786&4294967295,v=k+(T<<5&4294967295|T>>>27),T=R+(k^S&(v^k))+I[6]+3225465664&4294967295,R=v+(T<<9&4294967295|T>>>23),T=S+(v^k&(R^v))+I[11]+643717713&4294967295,S=R+(T<<14&4294967295|T>>>18),T=k+(R^v&(S^R))+I[0]+3921069994&4294967295,k=S+(T<<20&4294967295|T>>>12),T=v+(S^R&(k^S))+I[5]+3593408605&4294967295,v=k+(T<<5&4294967295|T>>>27),T=R+(k^S&(v^k))+I[10]+38016083&4294967295,R=v+(T<<9&4294967295|T>>>23),T=S+(v^k&(R^v))+I[15]+3634488961&4294967295,S=R+(T<<14&4294967295|T>>>18),T=k+(R^v&(S^R))+I[4]+3889429448&4294967295,k=S+(T<<20&4294967295|T>>>12),T=v+(S^R&(k^S))+I[9]+568446438&4294967295,v=k+(T<<5&4294967295|T>>>27),T=R+(k^S&(v^k))+I[14]+3275163606&4294967295,R=v+(T<<9&4294967295|T>>>23),T=S+(v^k&(R^v))+I[3]+4107603335&4294967295,S=R+(T<<14&4294967295|T>>>18),T=k+(R^v&(S^R))+I[8]+1163531501&4294967295,k=S+(T<<20&4294967295|T>>>12),T=v+(S^R&(k^S))+I[13]+2850285829&4294967295,v=k+(T<<5&4294967295|T>>>27),T=R+(k^S&(v^k))+I[2]+4243563512&4294967295,R=v+(T<<9&4294967295|T>>>23),T=S+(v^k&(R^v))+I[7]+1735328473&4294967295,S=R+(T<<14&4294967295|T>>>18),T=k+(R^v&(S^R))+I[12]+2368359562&4294967295,k=S+(T<<20&4294967295|T>>>12),T=v+(k^S^R)+I[5]+4294588738&4294967295,v=k+(T<<4&4294967295|T>>>28),T=R+(v^k^S)+I[8]+2272392833&4294967295,R=v+(T<<11&4294967295|T>>>21),T=S+(R^v^k)+I[11]+1839030562&4294967295,S=R+(T<<16&4294967295|T>>>16),T=k+(S^R^v)+I[14]+4259657740&4294967295,k=S+(T<<23&4294967295|T>>>9),T=v+(k^S^R)+I[1]+2763975236&4294967295,v=k+(T<<4&4294967295|T>>>28),T=R+(v^k^S)+I[4]+1272893353&4294967295,R=v+(T<<11&4294967295|T>>>21),T=S+(R^v^k)+I[7]+4139469664&4294967295,S=R+(T<<16&4294967295|T>>>16),T=k+(S^R^v)+I[10]+3200236656&4294967295,k=S+(T<<23&4294967295|T>>>9),T=v+(k^S^R)+I[13]+681279174&4294967295,v=k+(T<<4&4294967295|T>>>28),T=R+(v^k^S)+I[0]+3936430074&4294967295,R=v+(T<<11&4294967295|T>>>21),T=S+(R^v^k)+I[3]+3572445317&4294967295,S=R+(T<<16&4294967295|T>>>16),T=k+(S^R^v)+I[6]+76029189&4294967295,k=S+(T<<23&4294967295|T>>>9),T=v+(k^S^R)+I[9]+3654602809&4294967295,v=k+(T<<4&4294967295|T>>>28),T=R+(v^k^S)+I[12]+3873151461&4294967295,R=v+(T<<11&4294967295|T>>>21),T=S+(R^v^k)+I[15]+530742520&4294967295,S=R+(T<<16&4294967295|T>>>16),T=k+(S^R^v)+I[2]+3299628645&4294967295,k=S+(T<<23&4294967295|T>>>9),T=v+(S^(k|~R))+I[0]+4096336452&4294967295,v=k+(T<<6&4294967295|T>>>26),T=R+(k^(v|~S))+I[7]+1126891415&4294967295,R=v+(T<<10&4294967295|T>>>22),T=S+(v^(R|~k))+I[14]+2878612391&4294967295,S=R+(T<<15&4294967295|T>>>17),T=k+(R^(S|~v))+I[5]+4237533241&4294967295,k=S+(T<<21&4294967295|T>>>11),T=v+(S^(k|~R))+I[12]+1700485571&4294967295,v=k+(T<<6&4294967295|T>>>26),T=R+(k^(v|~S))+I[3]+2399980690&4294967295,R=v+(T<<10&4294967295|T>>>22),T=S+(v^(R|~k))+I[10]+4293915773&4294967295,S=R+(T<<15&4294967295|T>>>17),T=k+(R^(S|~v))+I[1]+2240044497&4294967295,k=S+(T<<21&4294967295|T>>>11),T=v+(S^(k|~R))+I[8]+1873313359&4294967295,v=k+(T<<6&4294967295|T>>>26),T=R+(k^(v|~S))+I[15]+4264355552&4294967295,R=v+(T<<10&4294967295|T>>>22),T=S+(v^(R|~k))+I[6]+2734768916&4294967295,S=R+(T<<15&4294967295|T>>>17),T=k+(R^(S|~v))+I[13]+1309151649&4294967295,k=S+(T<<21&4294967295|T>>>11),T=v+(S^(k|~R))+I[4]+4149444226&4294967295,v=k+(T<<6&4294967295|T>>>26),T=R+(k^(v|~S))+I[11]+3174756917&4294967295,R=v+(T<<10&4294967295|T>>>22),T=S+(v^(R|~k))+I[2]+718787259&4294967295,S=R+(T<<15&4294967295|T>>>17),T=k+(R^(S|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,w.g[2]=w.g[2]+S&4294967295,w.g[3]=w.g[3]+R&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var k=v-this.blockSize,I=this.B,S=this.h,R=0;R<v;){if(S==0)for(;R<=k;)s(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<v;)if(I[S++]=w.charCodeAt(R++),S==this.blockSize){s(this,I),S=0;break}}else for(;R<v;)if(I[S++]=w[R++],S==this.blockSize){s(this,I),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var k=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=k&255,k/=256;for(this.u(w),w=Array(16),v=k=0;4>v;++v)for(var I=0;32>I;I+=8)w[k++]=this.g[v]>>>I&255;return w};function i(w,v){var k=l;return Object.prototype.hasOwnProperty.call(k,w)?k[w]:k[w]=v(w)}function o(w,v){this.h=v;for(var k=[],I=!0,S=w.length-1;0<=S;S--){var R=w[S]|0;I&&R==v||(k[S]=R,I=!1)}this.g=k}var l={};function u(w){return-128<=w&&128>w?i(w,function(v){return new o([v|0],0>v?-1:0)}):new o([w|0],0>w?-1:0)}function h(w){if(isNaN(w)||!isFinite(w))return m;if(0>w)return A(h(-w));for(var v=[],k=1,I=0;w>=k;I++)v[I]=w/k|0,k*=4294967296;return new o(v,0)}function p(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return A(p(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=h(Math.pow(v,8)),I=m,S=0;S<w.length;S+=8){var R=Math.min(8,w.length-S),T=parseInt(w.substring(S,S+R),v);8>R?(R=h(Math.pow(v,R)),I=I.j(R).add(h(T))):(I=I.j(k),I=I.add(h(T)))}return I}var m=u(0),g=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(j(this))return-A(this).m();for(var w=0,v=1,k=0;k<this.g.length;k++){var I=this.i(k);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(N(this))return"0";if(j(this))return"-"+A(this).toString(w);for(var v=h(Math.pow(w,6)),k=this,I="";;){var S=D(k,v).g;k=E(k,S.j(v));var R=((0<k.g.length?k.g[0]:k.h)>>>0).toString(w);if(k=S,N(k))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function N(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function j(w){return w.h==-1}t.l=function(w){return w=E(this,w),j(w)?-1:N(w)?0:1};function A(w){for(var v=w.g.length,k=[],I=0;I<v;I++)k[I]=~w.g[I];return new o(k,~w.h).add(g)}t.abs=function(){return j(this)?A(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),k=[],I=0,S=0;S<=v;S++){var R=I+(this.i(S)&65535)+(w.i(S)&65535),T=(R>>>16)+(this.i(S)>>>16)+(w.i(S)>>>16);I=T>>>16,R&=65535,T&=65535,k[S]=T<<16|R}return new o(k,k[k.length-1]&-2147483648?-1:0)};function E(w,v){return w.add(A(v))}t.j=function(w){if(N(this)||N(w))return m;if(j(this))return j(w)?A(this).j(A(w)):A(A(this).j(w));if(j(w))return A(this.j(A(w)));if(0>this.l(b)&&0>w.l(b))return h(this.m()*w.m());for(var v=this.g.length+w.g.length,k=[],I=0;I<2*v;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(var S=0;S<w.g.length;S++){var R=this.i(I)>>>16,T=this.i(I)&65535,qe=w.i(S)>>>16,yt=w.i(S)&65535;k[2*I+2*S]+=T*yt,_(k,2*I+2*S),k[2*I+2*S+1]+=R*yt,_(k,2*I+2*S+1),k[2*I+2*S+1]+=T*qe,_(k,2*I+2*S+1),k[2*I+2*S+2]+=R*qe,_(k,2*I+2*S+2)}for(I=0;I<v;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=v;I<2*v;I++)k[I]=0;return new o(k,0)};function _(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function x(w,v){this.g=w,this.h=v}function D(w,v){if(N(v))throw Error("division by zero");if(N(w))return new x(m,m);if(j(w))return v=D(A(w),v),new x(A(v.g),A(v.h));if(j(v))return v=D(w,A(v)),new x(A(v.g),v.h);if(30<w.g.length){if(j(w)||j(v))throw Error("slowDivide_ only works with positive integers.");for(var k=g,I=v;0>=I.l(w);)k=$(k),I=$(I);var S=U(k,1),R=U(I,1);for(I=U(I,2),k=U(k,2);!N(I);){var T=R.add(I);0>=T.l(w)&&(S=S.add(k),R=T),I=U(I,1),k=U(k,1)}return v=E(w,S.j(v)),new x(S,v)}for(S=m;0<=w.l(v);){for(k=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=h(k),T=R.j(v);j(T)||0<T.l(w);)k-=I,R=h(k),T=R.j(v);N(R)&&(R=g),S=S.add(R),w=E(w,T)}return new x(S,w)}t.A=function(w){return D(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),k=[],I=0;I<v;I++)k[I]=this.i(I)&w.i(I);return new o(k,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),k=[],I=0;I<v;I++)k[I]=this.i(I)|w.i(I);return new o(k,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),k=[],I=0;I<v;I++)k[I]=this.i(I)^w.i(I);return new o(k,this.h^w.h)};function $(w){for(var v=w.g.length+1,k=[],I=0;I<v;I++)k[I]=w.i(I)<<1|w.i(I-1)>>>31;return new o(k,w.h)}function U(w,v){var k=v>>5;v%=32;for(var I=w.g.length-k,S=[],R=0;R<I;R++)S[R]=0<v?w.i(R+k)>>>v|w.i(R+k+1)<<32-v:w.i(R+k);return new o(S,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Iw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,js=o}).apply(typeof Ry<"u"?Ry:typeof self<"u"?self:typeof window<"u"?window:{});var jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bw,Do,Aw,su,Gh,Sw,Nw,Rw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof jl=="object"&&jl];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var q=a[y];if(!(q in f))break e;f=f[q]}a=a[a.length-1],y=f[a],d=d(y),d!=y&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,y=!1,q={next:function(){if(!y&&f<a.length){var O=f++;return{value:d(O,a[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function h(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,y),a.apply(d,q)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function b(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var y=f.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function N(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(y,q,O){for(var G=Array(arguments.length-2),je=2;je<arguments.length;je++)G[je-2]=arguments[je];return d.prototype[q].apply(y,G)}}function j(a){const d=a.length;if(0<d){const f=Array(d);for(let y=0;y<d;y++)f[y]=a[y];return f}return[]}function A(a,d){for(let f=1;f<arguments.length;f++){const y=arguments[f];if(u(y)){const q=a.length||0,O=y.length||0;a.length=q+O;for(let G=0;G<O;G++)a[q+G]=y[G]}else a.push(y)}}class E{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var $=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function U(a,d,f){for(const y in a)d.call(f,a[y],y,a)}function w(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let f,y;for(let q=1;q<arguments.length;q++){y=arguments[q];for(f in y)a[f]=y[f];for(let O=0;O<k.length;O++)f=k[O],Object.prototype.hasOwnProperty.call(y,f)&&(a[f]=y[f])}}function S(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function R(a){l.setTimeout(()=>{throw a},0)}function T(){var a=J;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class qe{constructor(){this.h=this.g=null}add(d,f){const y=yt.get();y.set(d,f),this.h?this.h.next=y:this.g=y,this.h=y}}var yt=new E(()=>new ut,a=>a.reset());class ut{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Qe,W=!1,J=new qe,ne=()=>{const a=l.Promise.resolve(void 0);Qe=()=>{a.then(me)}};var me=()=>{for(var a;a=T();){try{a.h.call(a.g)}catch(f){R(f)}var d=yt;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}W=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var et=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function vt(a,d){if(Re.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if($){e:{try{D(d.nodeName);var q=!0;break e}catch{}q=!1}q||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:ct[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&vt.aa.h.call(this)}}N(vt,Re);var ct={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),dt=0;function Et(a,d,f,y,q){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!y,this.ha=q,this.key=++dt,this.da=this.fa=!1}function Y(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function de(a){this.src=a,this.g={},this.h=0}de.prototype.add=function(a,d,f,y,q){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var G=C(a,d,y,q);return-1<G?(d=a[G],f||(d.fa=!1)):(d=new Et(d,this.src,O,!!y,q),d.fa=f,a.push(d)),d};function Se(a,d){var f=d.type;if(f in a.g){var y=a.g[f],q=Array.prototype.indexOf.call(y,d,void 0),O;(O=0<=q)&&Array.prototype.splice.call(y,q,1),O&&(Y(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function C(a,d,f,y){for(var q=0;q<a.length;++q){var O=a[q];if(!O.da&&O.listener==d&&O.capture==!!f&&O.ha==y)return q}return-1}var Ee="closure_lm_"+(1e6*Math.random()|0),Ne={};function tt(a,d,f,y,q){if(Array.isArray(d)){for(var O=0;O<d.length;O++)tt(a,d[O],f,y,q);return null}return f=zn(f),a&&a[Me]?a.K(d,f,h(y)?!!y.capture:!1,q):rn(a,d,f,!1,y,q)}function rn(a,d,f,y,q,O){if(!d)throw Error("Invalid event type");var G=h(q)?!!q.capture:!!q,je=sr(a);if(je||(a[Ee]=je=new de(a)),f=je.add(d,f,y,G,O),f.proxy)return f;if(y=ao(),f.proxy=y,y.src=a,y.listener=f,a.addEventListener)et||(q=G),q===void 0&&(q=!1),a.addEventListener(d.toString(),y,q);else if(a.attachEvent)a.attachEvent(ws(d.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return f}function ao(){function a(f){return d.call(a.src,a.listener,f)}const d=Pr;return a}function Zs(a,d,f,y,q){if(Array.isArray(d))for(var O=0;O<d.length;O++)Zs(a,d[O],f,y,q);else y=h(y)?!!y.capture:!!y,f=zn(f),a&&a[Me]?(a=a.i,d=String(d).toString(),d in a.g&&(O=a.g[d],f=C(O,f,y,q),-1<f&&(Y(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete a.g[d],a.h--)))):a&&(a=sr(a))&&(d=a.g[d.toString()],a=-1,d&&(a=C(d,f,y,q)),(f=-1<a?d[a]:null)&&Cr(f))}function Cr(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Me])Se(d.i,a);else{var f=a.type,y=a.proxy;d.removeEventListener?d.removeEventListener(f,y,a.capture):d.detachEvent?d.detachEvent(ws(f),y):d.addListener&&d.removeListener&&d.removeListener(y),(f=sr(d))?(Se(f,a),f.h==0&&(f.src=null,d[Ee]=null)):Y(a)}}}function ws(a){return a in Ne?Ne[a]:Ne[a]="on"+a}function Pr(a,d){if(a.da)a=!0;else{d=new vt(d,this);var f=a.listener,y=a.ha||a.src;a.fa&&Cr(a),a=f.call(y,d)}return a}function sr(a){return a=a[Ee],a instanceof de?a:null}var Ct="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(a){return typeof a=="function"?a:(a[Ct]||(a[Ct]=function(d){return a.handleEvent(d)}),a[Ct])}function Be(){he.call(this),this.i=new de(this),this.M=this,this.F=null}N(Be,he),Be.prototype[Me]=!0,Be.prototype.removeEventListener=function(a,d,f,y){Zs(this,a,d,f,y)};function $e(a,d){var f,y=a.F;if(y)for(f=[];y;y=y.F)f.push(y);if(a=a.M,y=d.type||d,typeof d=="string")d=new Re(d,a);else if(d instanceof Re)d.target=d.target||a;else{var q=d;d=new Re(y,a),I(d,q)}if(q=!0,f)for(var O=f.length-1;0<=O;O--){var G=d.g=f[O];q=Bn(G,y,!0,d)&&q}if(G=d.g=a,q=Bn(G,y,!0,d)&&q,q=Bn(G,y,!1,d)&&q,f)for(O=0;O<f.length;O++)G=d.g=f[O],q=Bn(G,y,!1,d)&&q}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],y=0;y<f.length;y++)Y(f[y]);delete a.g[d],a.h--}}this.F=null},Be.prototype.K=function(a,d,f,y){return this.i.add(String(a),d,!1,f,y)},Be.prototype.L=function(a,d,f,y){return this.i.add(String(a),d,!0,f,y)};function Bn(a,d,f,y){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var q=!0,O=0;O<d.length;++O){var G=d[O];if(G&&!G.da&&G.capture==f){var je=G.listener,kt=G.ha||G.src;G.fa&&Se(a.i,G),q=je.call(kt,y)!==!1&&q}}return q&&!y.defaultPrevented}function L(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function K(a){a.g=L(()=>{a.g=null,a.i&&(a.i=!1,K(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class ie extends he{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:K(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function F(a){he.call(this),this.h=a,this.g={}}N(F,he);var fe=[];function ae(a){U(a.g,function(d,f){this.g.hasOwnProperty(f)&&Cr(d)},a),a.g={}}F.prototype.N=function(){F.aa.N.call(this),ae(this)},F.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var le=l.JSON.stringify,_e=l.JSON.parse,ye=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function we(){}we.prototype.h=null;function Bt(a){return a.h||(a.h=a.i())}function _n(){}var sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ir(){Re.call(this,"d")}N(ir,Re);function qr(){Re.call(this,"c")}N(qr,Re);var or={},el=null;function ei(){return el=el||new Be}or.La="serverreachability";function tl(a){Re.call(this,or.La,a)}N(tl,Re);function jr(a){const d=ei();$e(d,new tl(d))}or.STAT_EVENT="statevent";function P(a,d){Re.call(this,or.STAT_EVENT,a),this.stat=d}N(P,Re);function Z(a){const d=ei();$e(d,new P(d,a))}or.Ma="timingevent";function pe(a,d){Re.call(this,or.Ma,a),this.size=d}N(pe,Re);function nt(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function on(){this.g=!0}on.prototype.xa=function(){this.g=!1};function ti(a,d,f,y,q,O){a.info(function(){if(a.g)if(O)for(var G="",je=O.split("&"),kt=0;kt<je.length;kt++){var Ie=je[kt].split("=");if(1<Ie.length){var Pt=Ie[0];Ie=Ie[1];var qt=Pt.split("_");G=2<=qt.length&&qt[1]=="type"?G+(Pt+"="+Ie+"&"):G+(Pt+"=redacted&")}}else G=null;else G=O;return"XMLHTTP REQ ("+y+") [attempt "+q+"]: "+d+`
`+f+`
`+G})}function Wc(a,d,f,y,q,O,G){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+q+"]: "+d+`
`+f+`
`+O+" "+G})}function Nn(a,d,f,y){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Rn(a,f)+(y?" "+y:"")})}function lo(a,d){a.info(function(){return"TIMEOUT: "+d})}on.prototype.info=function(){};function Rn(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var y=f[a];if(!(2>y.length)){var q=y[1];if(Array.isArray(q)&&!(1>q.length)){var O=q[0];if(O!="noop"&&O!="stop"&&O!="close")for(var G=1;G<q.length;G++)q[G]=""}}}}return le(f)}catch{return d}}var an={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hc;function rl(){}N(rl,we),rl.prototype.g=function(){return new XMLHttpRequest},rl.prototype.i=function(){return{}},Hc=new rl;function Dr(a,d,f,y){this.j=a,this.i=d,this.l=f,this.R=y||1,this.U=new F(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _m}function _m(){this.i=null,this.g="",this.h=!1}var wm={},Kc={};function Gc(a,d,f){a.L=1,a.v=al(ar(d)),a.m=f,a.P=!0,xm(a,null)}function xm(a,d){a.F=Date.now(),sl(a),a.A=ar(a.v);var f=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Dm(f.i,"t",y),a.C=0,f=a.j.J,a.h=new _m,a.g=Zm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new ie(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,y=a.ca;var q="readystatechange";Array.isArray(q)||(q&&(fe[0]=q.toString()),q=fe);for(var O=0;O<q.length;O++){var G=tt(f,q[O],y||d.handleEvent,!1,d.h||d);if(!G)break;d.g[G.key]=G}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),jr(),ti(a.i,a.u,a.A,a.l,a.R,a.m)}Dr.prototype.ca=function(a){a=a.target;const d=this.M;d&&lr(a)==3?d.j():this.Y(a)},Dr.prototype.Y=function(a){try{if(a==this.g)e:{const qt=lr(this.g);var d=this.g.Ba();const si=this.g.Z();if(!(3>qt)&&(qt!=3||this.g&&(this.h.h||this.g.oa()||zm(this.g)))){this.J||qt!=4||d==7||(d==8||0>=si?jr(3):jr(2)),Qc(this);var f=this.g.Z();this.X=f;t:if(Em(this)){var y=zm(this.g);a="";var q=y.length,O=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xs(this),uo(this);var G="";break t}this.h.i=new l.TextDecoder}for(d=0;d<q;d++)this.h.h=!0,a+=this.h.i.decode(y[d],{stream:!(O&&d==q-1)});y.length=0,this.h.g+=a,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=f==200,Wc(this.i,this.u,this.A,this.l,this.R,qt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var je,kt=this.g;if((je=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(je)){var Ie=je;break t}}Ie=null}if(f=Ie)Nn(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yc(this,f);else{this.o=!1,this.s=3,Z(12),xs(this),uo(this);break e}}if(this.P){f=!0;let Cn;for(;!this.J&&this.C<G.length;)if(Cn=H1(this,G),Cn==Kc){qt==4&&(this.s=4,Z(14),f=!1),Nn(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==wm){this.s=4,Z(15),Nn(this.i,this.l,G,"[Invalid Chunk]"),f=!1;break}else Nn(this.i,this.l,Cn,null),Yc(this,Cn);if(Em(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qt!=4||G.length!=0||this.h.h||(this.s=1,Z(16),f=!1),this.o=this.o&&f,!f)Nn(this.i,this.l,G,"[Invalid Chunked Response]"),xs(this),uo(this);else if(0<G.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),nd(Pt),Pt.M=!0,Z(11))}}else Nn(this.i,this.l,G,null),Yc(this,G);qt==4&&xs(this),this.o&&!this.J&&(qt==4?Qm(this.j,this):(this.o=!1,sl(this)))}else uE(this.g),f==400&&0<G.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),xs(this),uo(this)}}}catch{}finally{}};function Em(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function H1(a,d){var f=a.C,y=d.indexOf(`
`,f);return y==-1?Kc:(f=Number(d.substring(f,y)),isNaN(f)?wm:(y+=1,y+f>d.length?Kc:(d=d.slice(y,y+f),a.C=y+f,d)))}Dr.prototype.cancel=function(){this.J=!0,xs(this)};function sl(a){a.S=Date.now()+a.I,km(a,a.I)}function km(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=nt(g(a.ba,a),d)}function Qc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Dr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(lo(this.i,this.A),this.L!=2&&(jr(),Z(17)),xs(this),this.s=2,uo(this)):km(this,this.S-a)};function uo(a){a.j.G==0||a.J||Qm(a.j,a)}function xs(a){Qc(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,ae(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Yc(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||Xc(f.h,a))){if(!a.K&&Xc(f.h,a)&&f.G==3){try{var y=f.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var q=y;if(q[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)fl(f),dl(f);else break e;td(f),Z(18)}}else f.za=q[1],0<f.za-f.T&&37500>q[2]&&f.F&&f.v==0&&!f.C&&(f.C=nt(g(f.Za,f),6e3));if(1>=bm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ks(f,11)}else if((a.K||f.g==a)&&fl(f),!_(d))for(q=f.Da.g.parse(d),d=0;d<q.length;d++){let Ie=q[d];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];const Pt=Ie[3];Pt!=null&&(f.la=Pt,f.j.info("VER="+f.la));const qt=Ie[4];qt!=null&&(f.Aa=qt,f.j.info("SVER="+f.Aa));const si=Ie[5];si!=null&&typeof si=="number"&&0<si&&(y=1.5*si,f.L=y,f.j.info("backChannelRequestTimeoutMs_="+y)),y=f;const Cn=a.g;if(Cn){const ml=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ml){var O=y.h;O.g||ml.indexOf("spdy")==-1&&ml.indexOf("quic")==-1&&ml.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Jc(O,O.h),O.h=null))}if(y.D){const rd=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;rd&&(y.ya=rd,Le(y.I,y.D,rd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),y=f;var G=a;if(y.qa=Jm(y,y.J?y.ia:null,y.W),G.K){Am(y.h,G);var je=G,kt=y.L;kt&&(je.I=kt),je.B&&(Qc(je),sl(je)),y.g=G}else Km(y);0<f.i.length&&hl(f)}else Ie[0]!="stop"&&Ie[0]!="close"||ks(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ks(f,7):ed(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}jr(4)}catch{}}var K1=class{constructor(a,d){this.g=a,this.map=d}};function Tm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Im(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function bm(a){return a.h?1:a.g?a.g.size:0}function Xc(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function Jc(a,d){a.g?a.g.add(d):a.h=d}function Am(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Tm.prototype.cancel=function(){if(this.i=Sm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Sm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return j(a.i)}function G1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,y=0;y<f;y++)d.push(a[y]);return d}d=[],f=0;for(y in a)d[f++]=a[y];return d}function Q1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const y in a)d[f++]=y;return d}}}function Nm(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=Q1(a),y=G1(a),q=y.length,O=0;O<q;O++)d.call(void 0,y[O],f&&f[O],a)}var Rm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Y1(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var y=a[f].indexOf("="),q=null;if(0<=y){var O=a[f].substring(0,y);q=a[f].substring(y+1)}else O=a[f];d(O,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Es(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Es){this.h=a.h,il(this,a.j),this.o=a.o,this.g=a.g,ol(this,a.s),this.l=a.l;var d=a.i,f=new fo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Cm(this,f),this.m=a.m}else a&&(d=String(a).match(Rm))?(this.h=!1,il(this,d[1]||"",!0),this.o=co(d[2]||""),this.g=co(d[3]||"",!0),ol(this,d[4]),this.l=co(d[5]||"",!0),Cm(this,d[6]||"",!0),this.m=co(d[7]||"")):(this.h=!1,this.i=new fo(null,this.h))}Es.prototype.toString=function(){var a=[],d=this.j;d&&a.push(ho(d,Pm,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(ho(d,Pm,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ho(f,f.charAt(0)=="/"?Z1:J1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ho(f,tE)),a.join("")};function ar(a){return new Es(a)}function il(a,d,f){a.j=f?co(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ol(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Cm(a,d,f){d instanceof fo?(a.i=d,nE(a.i,a.h)):(f||(d=ho(d,eE)),a.i=new fo(d,a.h))}function Le(a,d,f){a.i.set(d,f)}function al(a){return Le(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function co(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ho(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,X1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function X1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Pm=/[#\/\?@]/g,J1=/[#\?:]/g,Z1=/[#\?]/g,eE=/[#\?@]/g,tE=/#/g;function fo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Or(a){a.g||(a.g=new Map,a.h=0,a.i&&Y1(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=fo.prototype,t.add=function(a,d){Or(this),this.i=null,a=ni(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function qm(a,d){Or(a),d=ni(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function jm(a,d){return Or(a),d=ni(a,d),a.g.has(d)}t.forEach=function(a,d){Or(this),this.g.forEach(function(f,y){f.forEach(function(q){a.call(d,q,y,this)},this)},this)},t.na=function(){Or(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let y=0;y<d.length;y++){const q=a[y];for(let O=0;O<q.length;O++)f.push(d[y])}return f},t.V=function(a){Or(this);let d=[];if(typeof a=="string")jm(this,a)&&(d=d.concat(this.g.get(ni(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Or(this),this.i=null,a=ni(this,a),jm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Dm(a,d,f){qm(a,d),0<f.length&&(a.i=null,a.g.set(ni(a,d),j(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var y=d[f];const O=encodeURIComponent(String(y)),G=this.V(y);for(y=0;y<G.length;y++){var q=O;G[y]!==""&&(q+="="+encodeURIComponent(String(G[y]))),a.push(q)}}return this.i=a.join("&")};function ni(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function nE(a,d){d&&!a.j&&(Or(a),a.i=null,a.g.forEach(function(f,y){var q=y.toLowerCase();y!=q&&(qm(this,y),Dm(this,q,f))},a)),a.j=d}function rE(a,d){const f=new on;if(l.Image){const y=new Image;y.onload=b(Mr,f,"TestLoadImage: loaded",!0,d,y),y.onerror=b(Mr,f,"TestLoadImage: error",!1,d,y),y.onabort=b(Mr,f,"TestLoadImage: abort",!1,d,y),y.ontimeout=b(Mr,f,"TestLoadImage: timeout",!1,d,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else d(!1)}function sE(a,d){const f=new on,y=new AbortController,q=setTimeout(()=>{y.abort(),Mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:y.signal}).then(O=>{clearTimeout(q),O.ok?Mr(f,"TestPingServer: ok",!0,d):Mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(q),Mr(f,"TestPingServer: error",!1,d)})}function Mr(a,d,f,y,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),y(f)}catch{}}function iE(){this.g=new ye}function oE(a,d,f){const y=f||"";try{Nm(a,function(q,O){let G=q;h(q)&&(G=le(q)),d.push(y+O+"="+encodeURIComponent(G))})}catch(q){throw d.push(y+"type="+encodeURIComponent("_badmap")),q}}function ll(a){this.l=a.Ub||null,this.j=a.eb||!1}N(ll,we),ll.prototype.g=function(){return new ul(this.l,this.j)},ll.prototype.i=function(a){return function(){return a}}({});function ul(a,d){Be.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ul,Be),t=ul.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,mo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,po(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,mo(this)),this.g&&(this.readyState=3,mo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Om(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Om(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?po(this):mo(this),this.readyState==3&&Om(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,po(this))},t.Qa=function(a){this.g&&(this.response=a,po(this))},t.ga=function(){this.g&&po(this)};function po(a){a.readyState=4,a.l=null,a.j=null,a.v=null,mo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function mo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Mm(a){let d="";return U(a,function(f,y){d+=y,d+=":",d+=f,d+=`\r
`}),d}function Zc(a,d,f){e:{for(y in f){var y=!1;break e}y=!0}y||(f=Mm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):Le(a,d,f))}function Ye(a){Be.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ye,Be);var aE=/^https?$/i,lE=["POST","PUT"];t=Ye.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hc.g(),this.v=this.o?Bt(this.o):Bt(Hc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(O){Lm(this,O);return}if(a=f||"",f=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var q in y)f.set(q,y[q]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const O of y.keys())f.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),q=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(lE,d,void 0))||y||q||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,G]of f)this.g.setRequestHeader(O,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fm(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Lm(this,O)}};function Lm(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Vm(a),cl(a)}function Vm(a){a.A||(a.A=!0,$e(a,"complete"),$e(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,$e(this,"complete"),$e(this,"abort"),cl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cl(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Um(this):this.bb())},t.bb=function(){Um(this)};function Um(a){if(a.h&&typeof o<"u"&&(!a.v[1]||lr(a)!=4||a.Z()!=2)){if(a.u&&lr(a)==4)L(a.Ea,0,a);else if($e(a,"readystatechange"),lr(a)==4){a.h=!1;try{const G=a.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var y;if(y=G===0){var q=String(a.D).match(Rm)[1]||null;!q&&l.self&&l.self.location&&(q=l.self.location.protocol.slice(0,-1)),y=!aE.test(q?q.toLowerCase():"")}f=y}if(f)$e(a,"complete"),$e(a,"success");else{a.m=6;try{var O=2<lr(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Vm(a)}}finally{cl(a)}}}}function cl(a,d){if(a.g){Fm(a);const f=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||$e(a,"ready");try{f.onreadystatechange=y}catch{}}}function Fm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function lr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),_e(d)}};function zm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function uE(a){const d={};a=(a.g&&2<=lr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(_(a[y]))continue;var f=S(a[y]);const q=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=d[q]||[];d[q]=O,O.push(f)}w(d,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function go(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Bm(a){this.Aa=0,this.i=[],this.j=new on,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=go("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=go("baseRetryDelayMs",5e3,a),this.cb=go("retryDelaySeedMs",1e4,a),this.Wa=go("forwardChannelMaxRetries",2,a),this.wa=go("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Tm(a&&a.concurrentRequestLimit),this.Da=new iE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bm.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,y){Z(0),this.W=a,this.H=d||{},f&&y!==void 0&&(this.H.OSID=f,this.H.OAID=y),this.F=this.X,this.I=Jm(this,null,this.W),hl(this)};function ed(a){if($m(a),a.G==3){var d=a.U++,f=ar(a.I);if(Le(f,"SID",a.K),Le(f,"RID",d),Le(f,"TYPE","terminate"),yo(a,f),d=new Dr(a,a.j,d),d.L=2,d.v=al(ar(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=Zm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),sl(d)}Xm(a)}function dl(a){a.g&&(nd(a),a.g.cancel(),a.g=null)}function $m(a){dl(a),a.u&&(l.clearTimeout(a.u),a.u=null),fl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function hl(a){if(!Im(a.h)&&!a.s){a.s=!0;var d=a.Ga;Qe||ne(),W||(Qe(),W=!0),J.add(d,a),a.B=0}}function cE(a,d){return bm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=nt(g(a.Ga,a,d),Ym(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const q=new Dr(this,this.j,a);let O=this.o;if(this.S&&(O?(O=v(O),I(O,this.S)):O=this.S),this.m!==null||this.O||(q.H=O,O=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var y=this.i[f];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Hm(this,q,d),f=ar(this.I),Le(f,"RID",a),Le(f,"CVER",22),this.D&&Le(f,"X-HTTP-Session-Id",this.D),yo(this,f),O&&(this.O?d="headers="+encodeURIComponent(String(Mm(O)))+"&"+d:this.m&&Zc(f,this.m,O)),Jc(this.h,q),this.Ua&&Le(f,"TYPE","init"),this.P?(Le(f,"$req",d),Le(f,"SID","null"),q.T=!0,Gc(q,f,null)):Gc(q,f,d),this.G=2}}else this.G==3&&(a?Wm(this,a):this.i.length==0||Im(this.h)||Wm(this))};function Wm(a,d){var f;d?f=d.l:f=a.U++;const y=ar(a.I);Le(y,"SID",a.K),Le(y,"RID",f),Le(y,"AID",a.T),yo(a,y),a.m&&a.o&&Zc(y,a.m,a.o),f=new Dr(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Hm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Jc(a.h,f),Gc(f,y,d)}function yo(a,d){a.H&&U(a.H,function(f,y){Le(d,y,f)}),a.l&&Nm({},function(f,y){Le(d,y,f)})}function Hm(a,d,f){f=Math.min(a.i.length,f);var y=a.l?g(a.l.Na,a.l,a):null;e:{var q=a.i;let O=-1;for(;;){const G=["count="+f];O==-1?0<f?(O=q[0].g,G.push("ofs="+O)):O=0:G.push("ofs="+O);let je=!0;for(let kt=0;kt<f;kt++){let Ie=q[kt].g;const Pt=q[kt].map;if(Ie-=O,0>Ie)O=Math.max(0,q[kt].g-100),je=!1;else try{oE(Pt,G,"req"+Ie+"_")}catch{y&&y(Pt)}}if(je){y=G.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,y}function Km(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Qe||ne(),W||(Qe(),W=!0),J.add(d,a),a.v=0}}function td(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=nt(g(a.Fa,a),Ym(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Gm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=nt(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),dl(this),Gm(this))};function nd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Gm(a){a.g=new Dr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=ar(a.qa);Le(d,"RID","rpc"),Le(d,"SID",a.K),Le(d,"AID",a.T),Le(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&Le(d,"TO",a.ja),Le(d,"TYPE","xmlhttp"),yo(a,d),a.m&&a.o&&Zc(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=al(ar(d)),f.m=null,f.P=!0,xm(f,a)}t.Za=function(){this.C!=null&&(this.C=null,dl(this),td(this),Z(19))};function fl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Qm(a,d){var f=null;if(a.g==d){fl(a),nd(a),a.g=null;var y=2}else if(Xc(a.h,d))f=d.D,Am(a.h,d),y=1;else return;if(a.G!=0){if(d.o)if(y==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var q=a.B;y=ei(),$e(y,new pe(y,f)),hl(a)}else Km(a);else if(q=d.s,q==3||q==0&&0<d.X||!(y==1&&cE(a,d)||y==2&&td(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),q){case 1:ks(a,5);break;case 4:ks(a,10);break;case 3:ks(a,6);break;default:ks(a,2)}}}function Ym(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function ks(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),y=a.Xa;const q=!y;y=new Es(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||il(y,"https"),al(y),q?rE(y.toString(),f):sE(y.toString(),f)}else Z(2);a.G=0,a.l&&a.l.sa(d),Xm(a),$m(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function Xm(a){if(a.G=0,a.ka=[],a.l){const d=Sm(a.h);(d.length!=0||a.i.length!=0)&&(A(a.ka,d),A(a.ka,a.i),a.h.i.length=0,j(a.i),a.i.length=0),a.l.ra()}}function Jm(a,d,f){var y=f instanceof Es?ar(f):new Es(f);if(y.g!="")d&&(y.g=d+"."+y.g),ol(y,y.s);else{var q=l.location;y=q.protocol,d=d?d+"."+q.hostname:q.hostname,q=+q.port;var O=new Es(null);y&&il(O,y),d&&(O.g=d),q&&ol(O,q),f&&(O.l=f),y=O}return f=a.D,d=a.ya,f&&d&&Le(y,f,d),Le(y,"VER",a.la),yo(a,y),y}function Zm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ye(new ll({eb:f})):new Ye(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function eg(){}t=eg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pl(){}pl.prototype.g=function(a,d){return new ln(a,d)};function ln(a,d){Be.call(this),this.g=new Bm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ri(this)}N(ln,Be),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){ed(this.g)},ln.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=le(a),a=f);d.i.push(new K1(d.Ya++,a)),d.G==3&&hl(d)},ln.prototype.N=function(){this.g.l=null,delete this.j,ed(this.g),delete this.g,ln.aa.N.call(this)};function tg(a){ir.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}N(tg,ir);function ng(){qr.call(this),this.status=1}N(ng,qr);function ri(a){this.g=a}N(ri,eg),ri.prototype.ua=function(){$e(this.g,"a")},ri.prototype.ta=function(a){$e(this.g,new tg(a))},ri.prototype.sa=function(a){$e(this.g,new ng)},ri.prototype.ra=function(){$e(this.g,"b")},pl.prototype.createWebChannel=pl.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Rw=function(){return new pl},Nw=function(){return ei()},Sw=or,Gh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,su=an,nl.COMPLETE="complete",Aw=nl,_n.EventType=sn,sn.OPEN="a",sn.CLOSE="b",sn.ERROR="c",sn.MESSAGE="d",Be.prototype.listen=Be.prototype.K,Do=_n,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,bw=Ye}).apply(typeof jl<"u"?jl:typeof self<"u"?self:typeof window<"u"?window:{});const Cy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new hp("@firebase/firestore");function Ao(){return zs.logLevel}function ee(t,...e){if(zs.logLevel<=xe.DEBUG){const n=e.map(mp);zs.debug(`Firestore (${Zi}): ${t}`,...n)}}function Ir(t,...e){if(zs.logLevel<=xe.ERROR){const n=e.map(mp);zs.error(`Firestore (${Zi}): ${t}`,...n)}}function Fi(t,...e){if(zs.logLevel<=xe.WARN){const n=e.map(mp);zs.warn(`Firestore (${Zi}): ${t}`,...n)}}function mp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: `+t;throw Ir(e),new Error(e)}function Pe(t,e){t||oe()}function ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends nr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $b{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class Wb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Hb{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new Cw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new Mt(e)}}class Kb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Kb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);const r=i=>{i.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new Qb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Xb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function zi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new pt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new pt(0,0))}static max(){return new ue(new pt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends wa{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const Jb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends wa{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return Jb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Q(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Q(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Ue.fromString(e))}static fromName(e){return new re(Ue.fromString(e).popFirst(5))}static empty(){return new re(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Ue(e.slice()))}}function Zb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new ds(s,re.empty(),e)}function eA(t){return new ds(t.readTime,t.key,-1)}class ds{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ds(ue.min(),re.empty(),-1)}static max(){return new ds(ue.max(),re.empty(),-1)}}function tA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==nA)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(s=>s?z.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new z((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new z((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Va(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}gp.oe=-1;function Ic(t){return t==null}function Hu(t){return t===0&&1/t==-1/0}function iA(t){return typeof t=="number"&&Number.isInteger(t)&&!Hu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dl(this.root,e,this.comparator,!0)}}class Dl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??It.RED,this.left=s??It.EMPTY,this.right=i??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new It(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new It(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qy(this.data.getIterator())}getIteratorFrom(e){return new qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new St(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jw("Invalid base64 string: "+i):i}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const oA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(t){if(Pe(!!t),typeof t=="string"){let e=0;const n=oA.exec(t);if(Pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bs(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vp(t){const e=t.mapValue.fields.__previous_value__;return yp(e)?vp(e):e}function xa(t){const e=hs(t.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,s,i,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class Ea{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ea("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol={mapValue:{}};function $s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yp(t)?4:uA(t)?9007199254740991:lA(t)?10:11:oe()}function er(t,e){if(t===e)return!0;const n=$s(t);if(n!==$s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xa(t).isEqual(xa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=hs(s.timestampValue),l=hs(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Bs(s.bytesValue).isEqual(Bs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=rt(s.doubleValue),l=rt(i.doubleValue);return o===l?Hu(o)===Hu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return zi(t.arrayValue.values||[],e.arrayValue.values||[],er);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Py(o)!==Py(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!er(o[u],l[u])))return!1;return!0}(t,e);default:return oe()}}function ka(t,e){return(t.values||[]).find(n=>er(n,e))!==void 0}function Bi(t,e){if(t===e)return 0;const n=$s(t),r=$s(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=rt(i.integerValue||i.doubleValue),u=rt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return jy(t.timestampValue,e.timestampValue);case 4:return jy(xa(t),xa(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Bs(i),u=Bs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=be(l[h],u[h]);if(p!==0)return p}return be(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=be(rt(i.latitude),rt(o.latitude));return l!==0?l:be(rt(i.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,h,p;const m=i.fields||{},g=o.fields||{},b=(l=m.value)===null||l===void 0?void 0:l.arrayValue,N=(u=g.value)===null||u===void 0?void 0:u.arrayValue,j=be(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((p=N==null?void 0:N.values)===null||p===void 0?void 0:p.length)||0);return j!==0?j:Dy(b,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ol.mapValue&&o===Ol.mapValue)return 0;if(i===Ol.mapValue)return 1;if(o===Ol.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=be(u[m],p[m]);if(g!==0)return g;const b=Bi(l[u[m]],h[p[m]]);if(b!==0)return b}return be(u.length,p.length)}(t.mapValue,e.mapValue);default:throw oe()}}function jy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=hs(t),r=hs(e),s=be(n.seconds,r.seconds);return s!==0?s:be(n.nanos,r.nanos)}function Dy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Bi(n[s],r[s]);if(i)return i}return be(n.length,r.length)}function $i(t){return Qh(t)}function Qh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Qh(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function Oy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Yh(t){return!!t&&"integerValue"in t}function _p(t){return!!t&&"arrayValue"in t}function My(t){return!!t&&"nullValue"in t}function Ly(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function iu(t){return!!t&&"mapValue"in t}function lA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Qo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Xs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qo(n)}setAll(e){let n=bt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Qo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];iu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Xs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Jt(Qo(this.value))}}function Dw(t){const e=[];return Xs(t.fields,(n,r)=>{const s=new bt([n]);if(iu(r)){const i=Dw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Vt(e,0,ue.min(),ue.min(),ue.min(),Jt.empty(),0)}static newFoundDocument(e,n,r,s){return new Vt(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new Vt(e,2,n,ue.min(),ue.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,ue.min(),ue.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.position=e,this.inclusive=n}}function Vy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=Bi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!er(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n="asc"){this.field=e,this.dir=n}}function cA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{}class at extends Ow{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hA(e,n,r):n==="array-contains"?new mA(e,r):n==="in"?new gA(e,r):n==="not-in"?new yA(e,r):n==="array-contains-any"?new vA(e,r):new at(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fA(e,r):new pA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bi(n,this.value)):n!==null&&$s(this.value)===$s(n)&&this.matchesComparison(Bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends Ow{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Fn(e,n)}matches(e){return Mw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Mw(t){return t.op==="and"}function Lw(t){return dA(t)&&Mw(t)}function dA(t){for(const e of t.filters)if(e instanceof Fn)return!1;return!0}function Xh(t){if(t instanceof at)return t.field.canonicalString()+t.op.toString()+$i(t.value);if(Lw(t))return t.filters.map(e=>Xh(e)).join(",");{const e=t.filters.map(n=>Xh(n)).join(",");return`${t.op}(${e})`}}function Vw(t,e){return t instanceof at?function(r,s){return s instanceof at&&r.op===s.op&&r.field.isEqual(s.field)&&er(r.value,s.value)}(t,e):t instanceof Fn?function(r,s){return s instanceof Fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Vw(o,s.filters[l]),!0):!1}(t,e):void oe()}function Uw(t){return t instanceof at?function(n){return`${n.field.canonicalString()} ${n.op} ${$i(n.value)}`}(t):t instanceof Fn?function(n){return n.op.toString()+" {"+n.getFilters().map(Uw).join(" ,")+"}"}(t):"Filter"}class hA extends at{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class fA extends at{constructor(e,n){super(e,"in",n),this.keys=Fw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pA extends at{constructor(e,n){super(e,"not-in",n),this.keys=Fw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Fw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class mA extends at{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return _p(n)&&ka(n.arrayValue,this.value)}}class gA extends at{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ka(this.value.arrayValue,n)}}class yA extends at{constructor(e,n){super(e,"not-in",n)}matches(e){if(ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ka(this.value.arrayValue,n)}}class vA extends at{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!_p(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Fy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _A(t,e,n,r,s,i,o)}function wp(t){const e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ic(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$i(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$i(r)).join(",")),e.ue=n}return e.ue}function xp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uy(t.startAt,e.startAt)&&Uy(t.endAt,e.endAt)}function Jh(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wA(t,e,n,r,s,i,o,l){return new eo(t,e,n,r,s,i,o,l)}function bc(t){return new eo(t)}function zy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zw(t){return t.collectionGroup!==null}function Yo(t){const e=ce(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new St(bt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ta(i,r))}),n.has(bt.keyField().canonicalString())||e.ce.push(new Ta(bt.keyField(),r))}return e.ce}function Xn(t){const e=ce(t);return e.le||(e.le=xA(e,Yo(t))),e.le}function xA(t,e){if(t.limitType==="F")return Fy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ta(s.field,i)});const n=t.endAt?new Ku(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ku(t.startAt.position,t.startAt.inclusive):null;return Fy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Zh(t,e){const n=t.filters.concat([e]);return new eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gu(t,e,n){return new eo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ac(t,e){return xp(Xn(t),Xn(e))&&t.limitType===e.limitType}function Bw(t){return`${wp(Xn(t))}|lt:${t.limitType}`}function ai(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Uw(s)).join(", ")}]`),Ic(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>$i(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>$i(s)).join(",")),`Target(${r})`}(Xn(t))}; limitType=${t.limitType})`}function Sc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Yo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const h=Vy(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Yo(r),s)||r.endAt&&!function(o,l,u){const h=Vy(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Yo(r),s))}(t,e)}function EA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $w(t){return(e,n)=>{let r=!1;for(const s of Yo(t)){const i=kA(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function kA(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),h=l.data.field(i);return u!==null&&h!==null?Bi(u,h):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return qw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=new Ge(re.comparator);function br(){return TA}const Ww=new Ge(re.comparator);function Oo(...t){let e=Ww;for(const n of t)e=e.insert(n.key,n);return e}function Hw(t){let e=Ww;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rs(){return Xo()}function Kw(){return Xo()}function Xo(){return new to(t=>t.toString(),(t,e)=>t.isEqual(e))}const IA=new Ge(re.comparator),bA=new St(re.comparator);function ve(...t){let e=bA;for(const n of t)e=e.add(n);return e}const AA=new St(be);function SA(){return AA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function Gw(t){return{integerValue:""+t}}function NA(t,e){return iA(e)?Gw(e):Ep(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function RA(t,e,n){return t instanceof Ia?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&yp(i)&&(i=vp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ba?Yw(t,e):t instanceof Aa?Xw(t,e):function(s,i){const o=Qw(s,i),l=By(o)+By(s.Pe);return Yh(o)&&Yh(s.Pe)?Gw(l):Ep(s.serializer,l)}(t,e)}function CA(t,e,n){return t instanceof ba?Yw(t,e):t instanceof Aa?Xw(t,e):n}function Qw(t,e){return t instanceof Qu?function(r){return Yh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ia extends Nc{}class ba extends Nc{constructor(e){super(),this.elements=e}}function Yw(t,e){const n=Jw(e);for(const r of t.elements)n.some(s=>er(s,r))||n.push(r);return{arrayValue:{values:n}}}class Aa extends Nc{constructor(e){super(),this.elements=e}}function Xw(t,e){let n=Jw(e);for(const r of t.elements)n=n.filter(s=>!er(s,r));return{arrayValue:{values:n}}}class Qu extends Nc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function By(t){return rt(t.integerValue||t.doubleValue)}function Jw(t){return _p(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n){this.field=e,this.transform=n}}function qA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ba&&s instanceof ba||r instanceof Aa&&s instanceof Aa?zi(r.elements,s.elements,er):r instanceof Qu&&s instanceof Qu?er(r.Pe,s.Pe):r instanceof Ia&&s instanceof Ia}(t.transform,e.transform)}class jA{constructor(e,n){this.version=e,this.transformResults=n}}class Kt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ou(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rc{}function Zw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cc(t.key,Kt.none()):new Ua(t.key,t.data,Kt.none());{const n=t.data,r=Jt.empty();let s=new St(bt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ys(t.key,r,new dn(s.toArray()),Kt.none())}}function DA(t,e,n){t instanceof Ua?function(s,i,o){const l=s.value.clone(),u=Wy(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ys?function(s,i,o){if(!ou(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Wy(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(ex(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Jo(t,e,n,r){return t instanceof Ua?function(i,o,l,u){if(!ou(i.precondition,o))return l;const h=i.value.clone(),p=Hy(i.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof ys?function(i,o,l,u){if(!ou(i.precondition,o))return l;const h=Hy(i.fieldTransforms,u,o),p=o.data;return p.setAll(ex(i)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return ou(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function OA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Qw(r.transform,s||null);i!=null&&(n===null&&(n=Jt.empty()),n.set(r.field,i))}return n||null}function $y(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zi(r,s,(i,o)=>qA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ua extends Rc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ys extends Rc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ex(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Wy(t,e,n){const r=new Map;Pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,CA(o,l,n[s]))}return r}function Hy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,RA(i,o,e))}return r}class Cc extends Rc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MA extends Rc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&DA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Kw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Zw(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(n,r)=>$y(n,r))&&zi(this.baseMutations,e.baseMutations,(n,r)=>$y(n,r))}}class kp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Pe(e.mutations.length===r.length);let s=function(){return IA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new kp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,ke;function FA(t){switch(t){default:return oe();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function tx(t){if(t===void 0)return Ir("GRPC error has no .code"),V.UNKNOWN;switch(t){case it.OK:return V.OK;case it.CANCELLED:return V.CANCELLED;case it.UNKNOWN:return V.UNKNOWN;case it.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case it.INTERNAL:return V.INTERNAL;case it.UNAVAILABLE:return V.UNAVAILABLE;case it.UNAUTHENTICATED:return V.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case it.NOT_FOUND:return V.NOT_FOUND;case it.ALREADY_EXISTS:return V.ALREADY_EXISTS;case it.PERMISSION_DENIED:return V.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case it.ABORTED:return V.ABORTED;case it.OUT_OF_RANGE:return V.OUT_OF_RANGE;case it.UNIMPLEMENTED:return V.UNIMPLEMENTED;case it.DATA_LOSS:return V.DATA_LOSS;default:return oe()}}(ke=it||(it={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=new js([4294967295,4294967295],0);function Ky(t){const e=zA().encode(t),n=new Iw;return n.update(e),new Uint8Array(n.digest())}function Gy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new js([n,r],0),new js([s,i],0)]}class Tp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mo(`Invalid padding: ${n}`);if(r<0)throw new Mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=js.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(js.fromNumber(r)));return s.compare(BA)===1&&(s=new js([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ky(e),[r,s]=Gy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Tp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Ky(e),[r,s]=Gy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Fa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pc(ue.min(),s,new Ge(be),br(),ve())}}class Fa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fa(r,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class nx{constructor(e,n){this.targetId=e,this.me=n}}class rx{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Qy{constructor(){this.fe=0,this.ge=Xy(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),r=ve();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new Fa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Xy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $A{constructor(e){this.Le=e,this.Be=new Map,this.ke=br(),this.qe=Yy(),this.Qe=new Ge(be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Jh(i))if(r===0){const o=new re(i.path);this.Ue(n,o,Vt.newNoDocument(o,ue.min()))}else Pe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Bs(r).toUint8Array()}catch(u){if(u instanceof jw)return Fi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Tp(o,s,i)}catch(u){return Fi(u instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Jh(l.target)){const u=new re(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Vt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ve();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Pc(e,n,this.Qe,this.ke,r);return this.ke=br(),this.qe=Yy(),this.Qe=new Ge(be),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Qy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Yy(){return new Ge(re.comparator)}function Xy(){return new Ge(re.comparator)}const WA={asc:"ASCENDING",desc:"DESCENDING"},HA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KA={and:"AND",or:"OR"};class GA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ef(t,e){return t.useProto3Json||Ic(e)?e:{value:e}}function Yu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QA(t,e){return Yu(t,e.toTimestamp())}function Jn(t){return Pe(!!t),ue.fromTimestamp(function(n){const r=hs(n);return new pt(r.seconds,r.nanos)}(t))}function Ip(t,e){return tf(t,e).canonicalString()}function tf(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ix(t){const e=Ue.fromString(t);return Pe(cx(e)),e}function nf(t,e){return Ip(t.databaseId,e.path)}function Od(t,e){const n=ix(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(ax(n))}function ox(t,e){return Ip(t.databaseId,e)}function YA(t){const e=ix(t);return e.length===4?Ue.emptyPath():ax(e)}function rf(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ax(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jy(t,e,n){return{name:nf(t,e),fields:n.value.mapValue.fields}}function XA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(h,p){return h.useProto3Json?(Pe(p===void 0||typeof p=="string"),Rt.fromBase64String(p||"")):(Pe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Rt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?V.UNKNOWN:tx(h.code);return new Q(p,h.message||"")}(o);n=new rx(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Od(t,r.document.name),i=Jn(r.document.updateTime),o=r.document.createTime?Jn(r.document.createTime):ue.min(),l=new Jt({mapValue:{fields:r.document.fields}}),u=Vt.newFoundDocument(s,i,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new au(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Od(t,r.document),i=r.readTime?Jn(r.readTime):ue.min(),o=Vt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new au([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Od(t,r.document),i=r.removedTargetIds||[];n=new au([],i,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new UA(s,i),l=r.targetId;n=new nx(l,o)}}return n}function JA(t,e){let n;if(e instanceof Ua)n={update:Jy(t,e.key,e.value)};else if(e instanceof Cc)n={delete:nf(t,e.key)};else if(e instanceof ys)n={update:Jy(t,e.key,e.data),updateMask:a2(e.fieldMask)};else{if(!(e instanceof MA))return oe();n={verify:nf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ba)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Aa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:oe()}(t,e.precondition)),n}function ZA(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Jn(s.updateTime):Jn(i);return o.isEqual(ue.min())&&(o=Jn(i)),new jA(o,s.transformResults||[])}(n,e))):[]}function e2(t,e){return{documents:[ox(t,e.path)]}}function t2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ox(t,s);const i=function(h){if(h.length!==0)return ux(Fn.create(h,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(h){if(h.length!==0)return h.map(p=>function(g){return{field:li(g.field),direction:s2(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ef(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:s}}function n2(t){let e=YA(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Pe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=lx(m);return g instanceof Fn&&Lw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(N){return new Ta(ui(N.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Ic(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,b=m.values||[];return new Ku(b,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,b=m.values||[];return new Ku(b,g)}(n.endAt)),wA(e,s,o,i,l,"F",u,h)}function r2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ui(n.unaryFilter.field);return at.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ui(n.unaryFilter.field);return at.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ui(n.unaryFilter.field);return at.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ui(n.unaryFilter.field);return at.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return at.create(ui(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fn.create(n.compositeFilter.filters.map(r=>lx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function s2(t){return WA[t]}function i2(t){return HA[t]}function o2(t){return KA[t]}function li(t){return{fieldPath:t.canonicalString()}}function ui(t){return bt.fromServerFormat(t.fieldPath)}function ux(t){return t instanceof at?function(n){if(n.op==="=="){if(Ly(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NAN"}};if(My(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ly(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NAN"}};if(My(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:li(n.field),op:i2(n.op),value:n.value}}}(t):t instanceof Fn?function(n){const r=n.getFilters().map(s=>ux(s));return r.length===1?r[0]:{compositeFilter:{op:o2(n.op),filters:r}}}(t):oe()}function a2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,r,s,i=ue.min(),o=ue.min(),l=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.ct=e}}function u2(t){const e=n2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.un=new d2}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(ds.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class d2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(Ue.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wi(0)}static kn(){return new Wi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(){this.changes=new to(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Jo(r.mutation,s,dn.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){const s=Rs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Oo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=br();const o=Xo(),l=function(){return Xo()}();return n.forEach((u,h)=>{const p=r.get(h.key);s.has(h.key)&&(p===void 0||p.mutation instanceof ys)?i=i.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),Jo(p.mutation,h,p.mutation.getFieldMask(),pt.now())):o.set(h.key,dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>{var m;return l.set(h,new f2(p,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Xo();let s=new Ge((o,l)=>o-l),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||dn.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(s.get(l.batchId)||ve()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=Kw();p.forEach(g=>{if(!i.has(g)){const b=Zw(n.get(g),r.get(g));b!==null&&m.set(g,b),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):z.resolve(Rs());let l=-1,u=i;return o.next(h=>z.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?z.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,h,i)).next(()=>this.computeViews(e,u,h,ve())).next(p=>({batchId:l,changes:Hw(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let s=Oo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Oo();return this.indexManager.getCollectionParents(e,i).next(l=>z.forEach(l,u=>{const h=function(m,g){return new eo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,h,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Vt.newInvalidDocument(p)))});let l=Oo();return o.forEach((u,h)=>{const p=i.get(u);p!==void 0&&Jo(p.mutation,h,dn.empty(),pt.now()),Sc(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Jn(s.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:u2(s.bundledQuery),readTime:Jn(s.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.overlays=new Ge(re.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rs();return z.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const s=Rs(),i=n.length+1,o=new re(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return z.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ge((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=i.get(h.largestBatchId);p===null&&(p=Rs(),i=i.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Rs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=s)););return z.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VA(n,r));let i=this.Ir.get(n);i===void 0&&(i=ve(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.Tr=new St(_t.Er),this.dr=new St(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new _t(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new re(new Ue([])),r=new _t(n,e),s=new _t(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new Ue([])),r=new _t(n,e),s=new _t(n,e+1);let i=ve();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new _t(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||be(e.wr,n.wr)}static Ar(e,n){return be(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(_t.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new LA(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new _t(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return z.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),z.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(be);return n.forEach(s=>{const i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new _t(new re(i),0);let l=new St(be);return this.br.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(u.wr)),!0)},o),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,s=>{const i=new _t(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new _t(n,0),s=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.Mr=e,this.docs=function(){return new Ge(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=br();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Vt.newInvalidDocument(s))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=br();const o=n.path,l=new re(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||tA(eA(p),r)<=0||(s.has(p.key)||Sc(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return z.resolve(i)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new w2(this)}getSize(e){return z.resolve(this.size)}}class w2 extends h2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.persistence=e,this.Nr=new to(n=>wp(n),xp),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bp,this.targetCount=0,this.kr=Wi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Wi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),z.waitFor(i).next(()=>s)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),z.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new gp(0),this.Kr=!1,this.Kr=!0,this.$r=new y2,this.referenceDelegate=e(this),this.Ur=new x2(this),this.indexManager=new c2,this.remoteDocumentCache=function(s){return new _2(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new l2(n),this.Gr=new m2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new v2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const s=new k2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class k2 extends rA{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Jr=new bp,this.Yr=null}static Zr(e){return new Ap(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const s=re.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ve(),s=ve();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Sp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return II()?8:sA(zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new T2;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ao()<=xe.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",ai(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Ao()<=xe.DEBUG&&ee("QueryEngine","Query:",ai(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ao()<=xe.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",ai(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):z.resolve())}Yi(e,n){if(zy(n))return z.resolve(null);let r=Xn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gu(n,null,"F"),r=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ve(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Gu(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,r,s){return zy(n)||s.isEqual(ue.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?z.resolve(null):(Ao()<=xe.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ai(n)),this.rs(e,o,n,Zb(s,-1)).next(l=>l))})}ts(e,n){let r=new St($w(e));return n.forEach((s,i)=>{Sc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ao()<=xe.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",ai(n)),this.Ji.getDocumentsMatchingQuery(e,n,ds.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ge(be),this._s=new to(i=>wp(i),xp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function A2(t,e,n,r){return new b2(t,e,n,r)}async function dx(t,e){const n=ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ve();for(const h of s){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of i){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function S2(t,e){const n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,g=m.keys();let b=z.resolve();return g.forEach(N=>{b=b.next(()=>p.getEntry(u,N)).next(j=>{const A=h.docVersions.get(N);Pe(A!==null),j.version.compareTo(A)<0&&(m.applyToRemoteDocument(j,h),j.isValidDocument()&&(j.setReadTime(h.commitVersion),p.addEntry(j)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ve();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function hx(t){const e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function N2(t,e){const n=ce(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let b=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?b=b.withResumeToken(Rt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),s=s.insert(m,b),function(j,A,E){return j.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,b,p)&&l.push(n.Ur.updateTargetData(i,b))});let u=br(),h=ve();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(R2(i,o,e.documentUpdates).next(p=>{u=p.Ps,h=p.Is})),!r.isEqual(ue.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return z.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,h)).next(()=>u)}).then(i=>(n.os=s,i))}function R2(t,e,n){let r=ve(),s=ve();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=br();return n.forEach((l,u)=>{const h=i.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ee("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function C2(t,e){const n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function P2(t,e){const n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,z.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Yr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function sf(t,e,n){const r=ce(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Va(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Zy(t,e,n){const r=ce(t);let s=ue.min(),i=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=ce(u),g=m._s.get(p);return g!==void 0?z.resolve(m.os.get(g)):m.Ur.getTargetData(h,p)}(r,o,Xn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ue.min(),n?i:ve())).next(l=>(q2(r,EA(e),l),{documents:l,Ts:i})))}function q2(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class e0{constructor(){this.activeTargetIds=SA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j2{constructor(){this.so=new e0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new e0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml=null;function Md(){return Ml===null?Ml=function(){return 268435456+Math.round(2147483648*Math.random())}():Ml++,"0x"+Ml.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class L2 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Md(),u=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,i,o),this.No(n,u,h,s).then(p=>(ee("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw Fi("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=O2[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Md();return new Promise((o,l)=>{const u=new bw;u.setWithCredentials(!0),u.listenOnce(Aw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case su.NO_ERROR:const p=u.getResponseJson();ee(Ot,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case su.TIMEOUT:ee(Ot,`RPC '${e}' ${i} timed out`),l(new Q(V.DEADLINE_EXCEEDED,"Request time out"));break;case su.HTTP_ERROR:const m=u.getStatus();if(ee(Ot,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const N=function(A){const E=A.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(E)>=0?E:V.UNKNOWN}(b.status);l(new Q(N,b.message))}else l(new Q(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Q(V.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{ee(Ot,`RPC '${e}' ${i} completed.`)}});const h=JSON.stringify(s);ee(Ot,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)})}Bo(e,n,r){const s=Md(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Rw(),l=Nw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");ee(Ot,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let g=!1,b=!1;const N=new M2({Io:A=>{b?ee(Ot,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(g||(ee(Ot,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),ee(Ot,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},To:()=>m.close()}),j=(A,E,_)=>{A.listen(E,x=>{try{_(x)}catch(D){setTimeout(()=>{throw D},0)}})};return j(m,Do.EventType.OPEN,()=>{b||(ee(Ot,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),j(m,Do.EventType.CLOSE,()=>{b||(b=!0,ee(Ot,`RPC '${e}' stream ${s} transport closed`),N.So())}),j(m,Do.EventType.ERROR,A=>{b||(b=!0,Fi(Ot,`RPC '${e}' stream ${s} transport errored:`,A),N.So(new Q(V.UNAVAILABLE,"The operation could not be completed")))}),j(m,Do.EventType.MESSAGE,A=>{var E;if(!b){const _=A.data[0];Pe(!!_);const x=_,D=x.error||((E=x[0])===null||E===void 0?void 0:E.error);if(D){ee(Ot,`RPC '${e}' stream ${s} received error:`,D);const $=D.status;let U=function(k){const I=it[k];if(I!==void 0)return tx(I)}($),w=D.message;U===void 0&&(U=V.INTERNAL,w="Unknown error status: "+$+" with message "+D.message),b=!0,N.So(new Q(U,w)),m.close()}else ee(Ot,`RPC '${e}' stream ${s} received:`,_),N.bo(_)}}),j(l,Sw.STAT_EVENT,A=>{A.stat===Gh.PROXY?ee(Ot,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Gh.NOPROXY&&ee(Ot,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function Ld(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){return new GA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ee("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new fx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Ir(n.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Q(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V2 extends px{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=XA(this.serializer,e),r=function(i){if(!("targetChange"in i))return ue.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?Jn(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=rf(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Jh(u)?{documents:e2(i,u)}:{query:t2(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=sx(i,o.resumeToken);const h=ef(i,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(ue.min())>0){l.readTime=Yu(i,o.snapshotVersion.toTimestamp());const h=ef(i,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=r2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=rf(this.serializer),n.removeTarget=e,this.a_(n)}}class U2 extends px{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ZA(e.writeResults,e.commitTime),r=Jn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=rf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>JA(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Q(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,tf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,tf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class z2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ir(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Js(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=ce(u);h.L_.add(4),await za(h),h.q_.set("Unknown"),h.L_.delete(4),await jc(h)}(this))})}),this.q_=new z2(r,s)}}async function jc(t){if(Js(t))for(const e of t.B_)await e(!0)}async function za(t){for(const e of t.B_)await e(!1)}function mx(t,e){const n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Pp(n)?Cp(n):no(n).r_()&&Rp(n,e))}function Np(t,e){const n=ce(t),r=no(n);n.N_.delete(e),r.r_()&&gx(n,e),n.N_.size===0&&(r.r_()?r.o_():Js(n)&&n.q_.set("Unknown"))}function Rp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}no(t).A_(e)}function gx(t,e){t.Q_.xe(e),no(t).R_(e)}function Cp(t){t.Q_=new $A({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),no(t).start(),t.q_.v_()}function Pp(t){return Js(t)&&!no(t).n_()&&t.N_.size>0}function Js(t){return ce(t).L_.size===0}function yx(t){t.Q_=void 0}async function $2(t){t.q_.set("Online")}async function W2(t){t.N_.forEach((e,n)=>{Rp(t,e)})}async function H2(t,e){yx(t),Pp(t)?(t.q_.M_(e),Cp(t)):t.q_.set("Unknown")}async function K2(t,e,n){if(t.q_.set("Online"),e instanceof rx&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xu(t,r)}else if(e instanceof au?t.Q_.Ke(e):e instanceof nx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await hx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(h);p&&i.N_.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(Rt.EMPTY_BYTE_STRING,p.snapshotVersion)),gx(i,u);const m=new Yr(p.target,u,h,p.sequenceNumber);Rp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await Xu(t,r)}}async function Xu(t,e,n){if(!Va(e))throw e;t.L_.add(1),await za(t),t.q_.set("Offline"),n||(n=()=>hx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await jc(t)})}function vx(t,e){return e().catch(n=>Xu(t,n,e))}async function Dc(t){const e=ce(t),n=fs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;G2(e);)try{const s=await C2(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Q2(e,s)}catch(s){await Xu(e,s)}_x(e)&&wx(e)}function G2(t){return Js(t)&&t.O_.length<10}function Q2(t,e){t.O_.push(e);const n=fs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function _x(t){return Js(t)&&!fs(t).n_()&&t.O_.length>0}function wx(t){fs(t).start()}async function Y2(t){fs(t).p_()}async function X2(t){const e=fs(t);for(const n of t.O_)e.m_(n.mutations)}async function J2(t,e,n){const r=t.O_.shift(),s=kp.from(r,e,n);await vx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Dc(t)}async function Z2(t,e){e&&fs(t).V_&&await async function(r,s){if(function(o){return FA(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();fs(r).s_(),await vx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Dc(r)}}(t,e),_x(t)&&wx(t)}async function n0(t,e){const n=ce(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=Js(n);n.L_.add(3),await za(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await jc(n)}async function eS(t,e){const n=ce(t);e?(n.L_.delete(2),await jc(n)):e||(n.L_.add(2),await za(n),n.q_.set("Unknown"))}function no(t){return t.K_||(t.K_=function(n,r,s){const i=ce(n);return i.w_(),new V2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:$2.bind(null,t),Ro:W2.bind(null,t),mo:H2.bind(null,t),d_:K2.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Pp(t)?Cp(t):t.q_.set("Unknown")):(await t.K_.stop(),yx(t))})),t.K_}function fs(t){return t.U_||(t.U_=function(n,r,s){const i=ce(n);return i.w_(),new U2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Y2.bind(null,t),mo:Z2.bind(null,t),f_:X2.bind(null,t),g_:J2.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Dc(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new qp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jp(t,e){if(Ir("AsyncQueue",`${e}: ${t}`),Va(t))return new Q(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=Oo(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new Ri(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ri)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ri;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(){this.W_=new Ge(re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Hi{constructor(e,n,r,s,i,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Hi(e,n,Ri.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nS{constructor(){this.queries=s0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ce(n),i=s.queries;s.queries=s0(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Q(V.ABORTED,"Firestore shutting down"))}}function s0(){return new to(t=>Bw(t),Ac)}async function Dp(t,e){const n=ce(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new tS,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=jp(o,`Initialization of query '${ai(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Mp(n)}async function Op(t,e){const n=ce(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rS(t,e){const n=ce(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Mp(n)}function sS(t,e,n){const r=ce(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Mp(t){t.Y_.forEach(e=>{e.next()})}var of,i0;(i0=of||(of={})).ea="default",i0.Cache="cache";class Lp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Hi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Hi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.key=e}}class Ex{constructor(e){this.key=e}}class iS{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=$w(e),this.Ra=new Ri(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new r0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),b=Sc(this.query,m)?m:null,N=!!g&&this.mutatedKeys.has(g.key),j=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let A=!1;g&&b?g.data.isEqual(b.data)?N!==j&&(r.track({type:3,doc:b}),A=!0):this.ga(g,b)||(r.track({type:2,doc:b}),A=!0,(u&&this.Aa(b,u)>0||h&&this.Aa(b,h)<0)&&(l=!0)):!g&&b?(r.track({type:0,doc:b}),A=!0):g&&!b&&(r.track({type:1,doc:g}),A=!0,(u||h)&&(l=!0)),A&&(b?(o=o.add(b),i=j?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(b,N){const j=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return j(b)-j(N)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Hi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new r0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ex(r))}),this.da.forEach(r=>{e.has(r)||n.push(new xx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ve();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Hi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class oS{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aS{constructor(e){this.key=e,this.va=!1}}class lS{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new to(l=>Bw(l),Ac),this.Ma=new Map,this.xa=new Set,this.Oa=new Ge(re.comparator),this.Na=new Map,this.La=new bp,this.Ba={},this.ka=new Map,this.qa=Wi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uS(t,e,n=!0){const r=Sx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await kx(r,e,n,!0),s}async function cS(t,e){const n=Sx(t);await kx(n,e,!0,!1)}async function kx(t,e,n,r){const s=await P2(t.localStore,Xn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await dS(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&mx(t.remoteStore,s),l}async function dS(t,e,n,r,s){t.Ka=(m,g,b)=>async function(j,A,E,_){let x=A.view.ma(E);x.ns&&(x=await Zy(j.localStore,A.query,!1).then(({documents:w})=>A.view.ma(w,x)));const D=_&&_.targetChanges.get(A.targetId),$=_&&_.targetMismatches.get(A.targetId)!=null,U=A.view.applyChanges(x,j.isPrimaryClient,D,$);return a0(j,A.targetId,U.wa),U.snapshot}(t,m,g,b);const i=await Zy(t.localStore,e,!0),o=new iS(e,i.Ts),l=o.ma(i.documents),u=Fa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),h=o.applyChanges(l,t.isPrimaryClient,u);a0(t,n,h.wa);const p=new oS(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function hS(t,e,n){const r=ce(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ac(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await sf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Np(r.remoteStore,s.targetId),af(r,s.targetId)}).catch(La)):(af(r,s.targetId),await sf(r.localStore,s.targetId,!0))}async function fS(t,e){const n=ce(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Np(n.remoteStore,r.targetId))}async function pS(t,e,n){const r=xS(t);try{const s=await function(o,l){const u=ce(o),h=pt.now(),p=l.reduce((b,N)=>b.add(N.key),ve());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let N=br(),j=ve();return u.cs.getEntries(b,p).next(A=>{N=A,N.forEach((E,_)=>{_.isValidDocument()||(j=j.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,N)).next(A=>{m=A;const E=[];for(const _ of l){const x=OA(_,m.get(_.key).overlayedDocument);x!=null&&E.push(new ys(_.key,x,Dw(x.value.mapValue),Kt.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,E,l)}).next(A=>{g=A;const E=A.applyToLocalDocumentSet(m,j);return u.documentOverlayCache.saveOverlays(b,A.batchId,E)})}).then(()=>({batchId:g.batchId,changes:Hw(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new Ge(be)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(r,s.batchId,n),await Ba(r,s.changes),await Dc(r.remoteStore)}catch(s){const i=jp(s,"Failed to persist write");n.reject(i)}}async function Tx(t,e){const n=ce(t);try{const r=await N2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Pe(o.va):s.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),await Ba(n,r,e)}catch(r){await La(r)}}function o0(t,e,n){const r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ce(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const g of m.j_)g.Z_(l)&&(h=!0)}),h&&Mp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mS(t,e,n){const r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ge(re.comparator);o=o.insert(i,Vt.newNoDocument(i,ue.min()));const l=ve().add(i),u=new Pc(ue.min(),new Map,new Ge(be),o,l);await Tx(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Vp(r)}else await sf(r.localStore,e,!1).then(()=>af(r,e,n)).catch(La)}async function gS(t,e){const n=ce(t),r=e.batch.batchId;try{const s=await S2(n.localStore,e);bx(n,r,null),Ix(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ba(n,s)}catch(s){await La(s)}}async function yS(t,e,n){const r=ce(t);try{const s=await function(o,l){const u=ce(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(Pe(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);bx(r,e,n),Ix(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ba(r,s)}catch(s){await La(s)}}function Ix(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function bx(t,e,n){const r=ce(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function af(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Ax(t,r)})}function Ax(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Np(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Vp(t))}function a0(t,e,n){for(const r of n)r instanceof xx?(t.La.addReference(r.key,e),vS(t,r)):r instanceof Ex?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Ax(t,r.key)):oe()}function vS(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),Vp(t))}function Vp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(Ue.fromString(e)),r=t.qa.next();t.Na.set(r,new aS(n)),t.Oa=t.Oa.insert(n,r),mx(t.remoteStore,new Yr(Xn(bc(n.path)),r,"TargetPurposeLimboResolution",gp.oe))}}async function Ba(t,e,n){const r=ce(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){s.push(h);const m=Sp.Wi(u.targetId,h);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,h){const p=ce(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(h,g=>z.forEach(g.$i,b=>p.persistence.referenceDelegate.addReference(m,g.targetId,b)).next(()=>z.forEach(g.Ui,b=>p.persistence.referenceDelegate.removeReference(m,g.targetId,b)))))}catch(m){if(!Va(m))throw m;ee("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const b=p.os.get(g),N=b.snapshotVersion,j=b.withLastLimboFreeSnapshotVersion(N);p.os=p.os.insert(g,j)}}}(r.localStore,i))}async function _S(t,e){const n=ce(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await dx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new Q(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ba(n,r.hs)}}function wS(t,e){const n=ce(t),r=n.Na.get(e);if(r&&r.va)return ve().add(r.key);{let s=ve();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function Sx(t){const e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mS.bind(null,e),e.Ca.d_=rS.bind(null,e.eventManager),e.Ca.$a=sS.bind(null,e.eventManager),e}function xS(t){const e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yS.bind(null,e),e}class Ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return A2(this.persistence,new I2,e.initialUser,this.serializer)}Ga(e){return new E2(Ap.Zr,this.serializer)}Wa(e){return new j2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ju.provider={build:()=>new Ju};class lf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_S.bind(null,this.syncEngine),await eS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nS}()}createDatastore(e){const n=qc(e.databaseInfo.databaseId),r=function(i){return new L2(i)}(e.databaseInfo);return function(i,o,l,u){return new F2(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new B2(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>o0(this.syncEngine,n,0),function(){return t0.D()?new t0:new D2}())}createSyncEngine(e,n){return function(s,i,o,l,u,h,p){const m=new lS(s,i,o,l,u,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ce(s);ee("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await za(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}lf.provider={build:()=>new lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=Pw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=jp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vd(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await dx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kS(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>n0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>n0(e.remoteStore,s)),t._onlineComponents=e}async function kS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Fi("Error using user provided cache. Falling back to memory cache: "+n),await Vd(t,new Ju)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Vd(t,new Ju);return t._offlineComponents}async function Nx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await l0(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await l0(t,new lf))),t._onlineComponents}function TS(t){return Nx(t).then(e=>e.syncEngine)}async function Zu(t){const e=await Nx(t),n=e.eventManager;return n.onListen=uS.bind(null,e.syncEngine),n.onUnlisten=hS.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cS.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fS.bind(null,e.syncEngine),n}function IS(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const p=new Up({next:g=>{p.Za(),o.enqueueAndForget(()=>Op(i,m));const b=g.docs.has(l);!b&&g.fromCache?h.reject(new Q(V.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&g.fromCache&&u&&u.source==="server"?h.reject(new Q(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Lp(bc(l.path),p,{includeMetadataChanges:!0,_a:!0});return Dp(i,m)}(await Zu(t),t.asyncQueue,e,n,r)),r.promise}function bS(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,h){const p=new Up({next:g=>{p.Za(),o.enqueueAndForget(()=>Op(i,m)),g.fromCache&&u.source==="server"?h.reject(new Q(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Lp(l,p,{includeMetadataChanges:!0,_a:!0});return Dp(i,m)}(await Zu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t,e,n){if(!n)throw new Q(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AS(t,e,n,r){if(e===!0&&r===!0)throw new Q(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function c0(t){if(!re.isDocumentKey(t))throw new Q(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function d0(t){if(re.isDocumentKey(t))throw new Q(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Oc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Gt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Oc(t);throw new Q(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function SS(t,e){if(e<=0)throw new Q(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $b;switch(r.type){case"firstParty":return new Gb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=u0.get(n);r&&(ee("ComponentProvider","Removing Datastore"),u0.delete(n),r.terminate())}(this),Promise.resolve()}}function NS(t,e,n,r={}){var s;const i=(t=Gt(t,Mc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Mt.MOCK_USER;else{l=_w(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new Q(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mt(h)}t._authCredentials=new Wb(new Cw(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nr(this.firestore,e,this._query)}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class as extends Nr{constructor(e,n,r){super(e,n,bc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new re(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function gt(t,e,...n){if(t=De(t),Cx("collection","path",e),t instanceof Mc){const r=Ue.fromString(e,...n);return d0(r),new as(t,null,r)}{if(!(t instanceof Ut||t instanceof as))throw new Q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return d0(r),new as(t.firestore,null,r)}}function Ae(t,e,...n){if(t=De(t),arguments.length===1&&(e=Pw.newId()),Cx("doc","path",e),t instanceof Mc){const r=Ue.fromString(e,...n);return c0(r),new Ut(t,null,new re(r))}{if(!(t instanceof Ut||t instanceof as))throw new Q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return c0(r),new Ut(t.firestore,t instanceof as?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new fx(this,"async_queue_retry"),this.Vu=()=>{const r=Ld();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ld();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ld();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new vr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Va(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Ir("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=qp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function p0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class tr extends Mc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new f0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f0(e),this._firestoreClient=void 0,await e}}}function RS(t,e){const n=typeof t=="object"?t:pp(),r=typeof t=="string"?t:"(default)",s=Tc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gw("firestore");i&&NS(s,...i)}return s}function $a(t){if(t._terminated)throw new Q(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CS(t),t._firestoreClient}function CS(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,h,p){return new aA(l,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Rx(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ES(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ki(Rt.fromBase64String(e))}catch(n){throw new Q(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ki(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=/^__.*__$/;class qS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ua(e,this.data,n,this.fieldTransforms)}}class Px{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Bp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ec(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qx(this.Cu)&&PS.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class jS{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qc(e)}Qu(e,n,r,s=!1){return new Bp({Cu:e,methodName:n,qu:r,path:bt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ha(t){const e=t._freezeSettings(),n=qc(t._databaseId);return new jS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $p(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Hp("Data must be an object, but it was:",o,r);const l=Ox(r,o);let u,h;if(i.merge)u=new dn(o.fieldMask),h=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=uf(e,m,n);if(!o.contains(g))throw new Q(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Lx(p,g)||p.push(g)}u=new dn(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new qS(new Jt(l),u,h)}class Vc extends Lc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vc}}class Wp extends Lc{_toFieldTransform(e){return new PA(e.path,new Ia)}isEqual(e){return e instanceof Wp}}function jx(t,e,n,r){const s=t.Qu(1,e,n);Hp("Data must be an object, but it was:",s,r);const i=[],o=Jt.empty();Xs(r,(u,h)=>{const p=Kp(e,u,n);h=De(h);const m=s.Nu(p);if(h instanceof Vc)i.push(p);else{const g=Ka(h,m);g!=null&&(i.push(p),o.set(p,g))}});const l=new dn(i);return new Px(o,l,s.fieldTransforms)}function Dx(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[uf(e,r,n)],u=[s];if(i.length%2!=0)throw new Q(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(uf(e,i[g])),u.push(i[g+1]);const h=[],p=Jt.empty();for(let g=l.length-1;g>=0;--g)if(!Lx(h,l[g])){const b=l[g];let N=u[g];N=De(N);const j=o.Nu(b);if(N instanceof Vc)h.push(b);else{const A=Ka(N,j);A!=null&&(h.push(b),p.set(b,A))}}const m=new dn(h);return new Px(p,m,o.fieldTransforms)}function DS(t,e,n,r=!1){return Ka(n,t.Qu(r?4:3,e))}function Ka(t,e){if(Mx(t=De(t)))return Hp("Unsupported field value:",e,t),Ox(t,e);if(t instanceof Lc)return function(r,s){if(!qx(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Ka(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=pt.fromDate(r);return{timestampValue:Yu(s.serializer,i)}}if(r instanceof pt){const i=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yu(s.serializer,i)}}if(r instanceof Fp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ki)return{bytesValue:sx(s.serializer,r._byteString)};if(r instanceof Ut){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ip(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof zp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Ep(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Oc(r)}`)}(t,e)}function Ox(t,e){const n={};return qw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(t,(r,s)=>{const i=Ka(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Mx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Fp||t instanceof Ki||t instanceof Ut||t instanceof Lc||t instanceof zp)}function Hp(t,e,n){if(!Mx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Oc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function uf(t,e,n){if((e=De(e))instanceof Wa)return e._internalPath;if(typeof e=="string")return Kp(t,e);throw ec("Field path arguments must be of type string or ",t,!1,void 0,n)}const OS=new RegExp("[~\\*/\\[\\]]");function Kp(t,e,n){if(e.search(OS)>=0)throw ec(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wa(...e.split("."))._internalPath}catch{throw ec(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ec(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Q(V.INVALID_ARGUMENT,l+t+u)}function Lx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Uc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MS extends Vx{data(){return super.data()}}function Uc(t,e){return typeof e=="string"?Kp(t,e):e instanceof Wa?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gp{}class Qp extends Gp{}function mn(t,e,...n){let r=[];e instanceof Gp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Yp).length,l=i.filter(u=>u instanceof Fc).length;if(o>1||o>0&&l>0)throw new Q(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Fc extends Qp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fc(e,n,r)}_apply(e){const n=this._parse(e);return Fx(e._query,n),new Nr(e.firestore,e.converter,Zh(e._query,n))}_parse(e){const n=Ha(e.firestore);return function(i,o,l,u,h,p,m){let g;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Q(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){g0(m,p);const b=[];for(const N of m)b.push(m0(u,i,N));g={arrayValue:{values:b}}}else g=m0(u,i,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||g0(m,p),g=DS(l,o,m,p==="in"||p==="not-in");return at.create(h,p,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Sa(t,e,n){const r=e,s=Uc("where",t);return Fc._create(s,r,n)}class Yp extends Gp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Yp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)Fx(o,u),o=Zh(o,u)}(e._query,n),new Nr(e.firestore,e.converter,Zh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xp extends Qp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Xp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Q(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Q(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ta(i,o)}(e._query,this._field,this._direction);return new Nr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new eo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ro(t,e="asc"){const n=e,r=Uc("orderBy",t);return Xp._create(r,n)}class Jp extends Qp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Jp(e,n,r)}_apply(e){return new Nr(e.firestore,e.converter,Gu(e._query,this._limit,this._limitType))}}function Zp(t){return SS("limit",t),Jp._create("limit",t,"F")}function m0(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new Q(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zw(e)&&n.indexOf("/")!==-1)throw new Q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!re.isDocumentKey(r))throw new Q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Oy(t,new re(r))}if(n instanceof Ut)return Oy(t,n._key);throw new Q(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Oc(n)}.`)}function g0(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fx(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class LS{convertValue(e,n="none"){switch($s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Xs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>rt(o.doubleValue));return new zp(i)}convertGeoPoint(e){return new Fp(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xa(e));default:return null}}convertTimestamp(e){const n=hs(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);Pe(cx(r));const s=new Ea(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||Ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zx extends Vx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Uc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class lu extends zx{data(e={}){return super.data(e)}}class Bx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lu(this._firestore,this._userDataWriter,r.key,r,new Lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new lu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Lo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new lu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Lo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:VS(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){t=Gt(t,Ut);const e=Gt(t.firestore,tr);return IS($a(e),t._key).then(n=>$x(e,t,n))}class tm extends LS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function Gi(t){t=Gt(t,Nr);const e=Gt(t.firestore,tr),n=$a(e),r=new tm(e);return Ux(t._query),bS(n,t._query).then(s=>new Bx(e,r,t,s))}function so(t,e,n){t=Gt(t,Ut);const r=Gt(t.firestore,tr),s=em(t.converter,e,n);return Qa(r,[$p(Ha(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Kt.none())])}function lt(t,e,n,...r){t=Gt(t,Ut);const s=Gt(t.firestore,tr),i=Ha(s);let o;return o=typeof(e=De(e))=="string"||e instanceof Wa?Dx(i,"updateDoc",t._key,e,n,r):jx(i,"updateDoc",t._key,e),Qa(s,[o.toMutation(t._key,Kt.exists(!0))])}function nm(t){return Qa(Gt(t.firestore,tr),[new Cc(t._key,Kt.none())])}function io(t,e){const n=Gt(t.firestore,tr),r=Ae(t),s=em(t.converter,e);return Qa(n,[$p(Ha(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Kt.exists(!1))]).then(()=>r)}function rr(t,...e){var n,r,s;t=De(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||p0(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(p0(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,h,p;if(t instanceof Ut)h=Gt(t.firestore,tr),p=bc(t._key.path),u={next:m=>{e[o]&&e[o]($x(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Gt(t,Nr);h=Gt(m.firestore,tr),p=m._query;const g=new tm(h);u={next:b=>{e[o]&&e[o](new Bx(h,g,m,b))},error:e[o+1],complete:e[o+2]},Ux(t._query)}return function(g,b,N,j){const A=new Up(j),E=new Lp(b,A,N);return g.asyncQueue.enqueueAndForget(async()=>Dp(await Zu(g),E)),()=>{A.Za(),g.asyncQueue.enqueueAndForget(async()=>Op(await Zu(g),E))}}($a(h),p,l,u)}function Qa(t,e){return function(r,s){const i=new vr;return r.asyncQueue.enqueueAndForget(async()=>pS(await TS(r),s,i)),i.promise}($a(t),e)}function $x(t,e,n){const r=n.docs.get(e._key),s=new tm(t);return new zx(t,s,e._key,r,new Lo(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ha(e)}set(e,n,r){this._verifyNotCommitted();const s=Ud(e,this._firestore),i=em(s.converter,n,r),o=$p(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Kt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Ud(e,this._firestore);let o;return o=typeof(n=De(n))=="string"||n instanceof Wa?Dx(this._dataReader,"WriteBatch.update",i._key,n,r,s):jx(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Kt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Ud(e,this._firestore);return this._mutations=this._mutations.concat(new Cc(n._key,Kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ud(t,e){if((t=De(t)).firestore!==e)throw new Q(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function mt(){return new Wp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){return $a(t=Gt(t,tr)),new US(t,e=>Qa(t,e))}(function(e,n=!0){(function(s){Zi=s})(Ys),Fs(new cs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new tr(new Hb(r.getProvider("auth-internal")),new Yb(r.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Q(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(h.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Yn(Cy,"4.7.3",e),Yn(Cy,"4.7.3","esm2017")})();function rm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Hx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FS=Hx,Kx=new Oa("auth","Firebase",Hx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new hp("@firebase/auth");function zS(t,...e){tc.logLevel<=xe.WARN&&tc.warn(`Auth (${Ys}): ${t}`,...e)}function uu(t,...e){tc.logLevel<=xe.ERROR&&tc.error(`Auth (${Ys}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw im(t,...e)}function Vn(t,...e){return im(t,...e)}function sm(t,e,n){const r=Object.assign(Object.assign({},FS()),{[e]:n});return new Oa("auth","Firebase",r).create(e,{appName:t.name})}function _r(t){return sm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sn(t,"argument-error"),sm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function im(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Kx.create(t,...e)}function se(t,e,...n){if(!t)throw im(e,...n)}function pr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw uu(e),new Error(e)}function Ar(t,e){t||pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $S(){return y0()==="http:"||y0()==="https:"}function y0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($S()||EI()||"connection"in navigator)?navigator.onLine:!0}function HS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ar(n>e,"Short delay should be less than long delay!"),this.isMobile=_I()||kI()}get(){return WS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){Ar(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new Ya(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rr(t,e,n,r,s={}){return Qx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Ma(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},i);return xI()||(h.referrerPolicy="no-referrer"),Gx.fetch()(Yx(t,t.config.apiHost,n,l),h)})}async function Qx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},KS),e);try{const s=new YS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ll(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ll(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ll(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ll(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw sm(t,p,h);Sn(t,p)}}catch(s){if(s instanceof nr)throw s;Sn(t,"network-request-failed",{message:String(s)})}}async function Xa(t,e,n,r,s={}){const i=await Rr(t,e,n,r,s);return"mfaPendingCredential"in i&&Sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Yx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?om(t.config,s):`${t.config.apiScheme}://${s}`}function QS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Vn(this.auth,"network-request-failed")),GS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ll(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Vn(t,e,r);return s.customData._tokenResponse=n,s}function v0(t){return t!==void 0&&t.enterprise!==void 0}class XS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function JS(t,e){return Rr(t,"GET","/v2/recaptchaConfig",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(t,e){return Rr(t,"POST","/v1/accounts:delete",e)}async function Xx(t,e){return Rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eN(t,e=!1){const n=De(t),r=await n.getIdToken(e),s=am(r);se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Zo(Fd(s.auth_time)),issuedAtTime:Zo(Fd(s.iat)),expirationTime:Zo(Fd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Fd(t){return Number(t)*1e3}function am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return uu("JWT malformed, contained fewer than 3 sections"),null;try{const s=pw(n);return s?JSON.parse(s):(uu("Failed to decode base64 JWT payload"),null)}catch(s){return uu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function _0(t){const e=am(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof nr&&tN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zo(this.lastLoginAt),this.creationTime=Zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Qi(t,Xx(n,{idToken:r}));se(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Jx(i.providerUserInfo):[],l=sN(t.providerData,o),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=u?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new df(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function rN(t){const e=De(t);await nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Jx(t){return t.map(e=>{var{providerId:n}=e,r=rm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t,e){const n=await Qx(t,{},async()=>{const r=Ma({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Yx(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Gx.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oN(t,e){return Rr(t,"POST","/v2/accounts:revokeToken",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=_0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ci;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(se(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(se(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ci,this.toJSON())}_performRefresh(){return pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=rm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new df(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Qi(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eN(this,e)}reload(){return rN(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(_r(this.auth));const e=await this.getIdToken();return await Qi(this,ZS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,h,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,b=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,j=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(h=n.createdAt)!==null&&h!==void 0?h:void 0,_=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:x,emailVerified:D,isAnonymous:$,providerData:U,stsTokenManager:w}=n;se(x&&w,e,"internal-error");const v=Ci.fromJSON(this.name,w);se(typeof x=="string",e,"internal-error"),Vr(m,e.name),Vr(g,e.name),se(typeof D=="boolean",e,"internal-error"),se(typeof $=="boolean",e,"internal-error"),Vr(b,e.name),Vr(N,e.name),Vr(j,e.name),Vr(A,e.name),Vr(E,e.name),Vr(_,e.name);const k=new mr({uid:x,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:$,photoURL:N,phoneNumber:b,tenantId:j,stsTokenManager:v,createdAt:E,lastLoginAt:_});return U&&Array.isArray(U)&&(k.providerData=U.map(I=>Object.assign({},I))),A&&(k._redirectEventId=A),k}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ci;s.updateFromServerResponse(n);const i=new mr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await nc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];se(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Jx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ci;l.updateFromIdToken(r);const u=new mr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new df(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=new Map;function gr(t){Ar(t instanceof Function,"Expected a class definition");let e=w0.get(t);return e?(Ar(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,w0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Zx.type="NONE";const x0=Zx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t,e,n){return`firebase:${t}:${e}:${n}`}class Pi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=cu(this.userKey,s.apiKey,i),this.fullPersistenceKey=cu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pi(gr(x0),e,r);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let i=s[0]||gr(x0);const o=cu(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){const m=mr._fromJSON(e,p);h!==i&&(l=m),i=h;break}}catch{}const u=s.filter(h=>h._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Pi(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==i)try{await h._remove(o)}catch{}})),new Pi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(r1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(e1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(i1(e))return"Blackberry";if(o1(e))return"Webos";if(t1(e))return"Safari";if((e.includes("chrome/")||n1(e))&&!e.includes("edge/"))return"Chrome";if(s1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function e1(t=zt()){return/firefox\//i.test(t)}function t1(t=zt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function n1(t=zt()){return/crios\//i.test(t)}function r1(t=zt()){return/iemobile/i.test(t)}function s1(t=zt()){return/android/i.test(t)}function i1(t=zt()){return/blackberry/i.test(t)}function o1(t=zt()){return/webos/i.test(t)}function lm(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aN(t=zt()){var e;return lm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lN(){return TI()&&document.documentMode===10}function a1(t=zt()){return lm(t)||s1(t)||o1(t)||i1(t)||/windows phone/i.test(t)||r1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e=[]){let n;switch(t){case"Browser":n=E0(zt());break;case"Worker":n=`${E0(zt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ys}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=6;class hN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:dN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k0(this),this.idTokenSubscription=new k0(this),this.beforeStateQueue=new uN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Kx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=gr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Pi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Xx(this,{idToken:e}),r=await mr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(_r(this));const n=e?De(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(_r(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(_r(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cN(this),n=new hN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&gr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Pi.create(this,[gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _s(t){return De(t)}class k0{constructor(e){this.auth=e,this.observer=null,this.addObserver=PI(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pN(t){zc=t}function u1(t){return zc.loadJS(t)}function mN(){return zc.recaptchaEnterpriseScript}function gN(){return zc.gapiScript}function yN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const vN="recaptcha-enterprise",_N="NO_RECAPTCHA";class wN{constructor(e){this.type=vN,this.auth=_s(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{JS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new XS(u);return i.tenantId==null?i._agentRecaptchaConfig=h:i._tenantRecaptchaConfigs[i.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;v0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(h=>{o(h)}).catch(()=>{o(_N)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&v0(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mN();u.length!==0&&(u+=l),u1(u).then(()=>{s(l,i,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function T0(t,e,n,r=!1){const s=new wN(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function hf(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await T0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await T0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e){const n=Tc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if($u(i,e??{}))return s;Sn(s,"already-initialized")}return n.initialize({options:e})}function EN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kN(t,e,n){const r=_s(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=c1(e),{host:o,port:l}=TN(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),IN()}function c1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TN(t){const e=c1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:I0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:I0(o)}}}function I0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,n){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}}async function bN(t,e){return Rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e){return Xa(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}async function NN(t,e){return Xa(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends um{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Na(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Na(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hf(e,n,"signInWithPassword",AN);case"emailLink":return SN(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hf(e,r,"signUpPassword",bN);case"emailLink":return NN(e,{idToken:n,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t,e){return Xa(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="http://localhost";class Ws extends um{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=rm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ws(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qi(e,n)}buildRequest(){const e={requestUri:RN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ma(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PN(t){const e=qo(jo(t)).link,n=e?qo(jo(e)).deep_link_id:null,r=qo(jo(t)).deep_link_id;return(r?qo(jo(r)).link:null)||r||n||e||t}class cm{constructor(e){var n,r,s,i,o,l;const u=qo(jo(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,p=(r=u.oobCode)!==null&&r!==void 0?r:null,m=CN((s=u.mode)!==null&&s!==void 0?s:null);se(h&&p&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=p,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=PN(e);try{return new cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.providerId=oo.PROVIDER_ID}static credential(e,n){return Na._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=cm.parseLink(n);return se(r,"argument-error"),Na._fromEmailAndCode(e,r.code,r.tenantId)}}oo.PROVIDER_ID="password";oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends dm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Ja{constructor(){super("facebook.com")}static credential(e){return Ws._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ws._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return dr.credential(n,r)}catch{return null}}}dr.GOOGLE_SIGN_IN_METHOD="google.com";dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Ja{constructor(){super("github.com")}static credential(e){return Ws._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.GITHUB_SIGN_IN_METHOD="github.com";Wr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Ja{constructor(){super("twitter.com")}static credential(e,n){return Ws._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Hr.credential(n,r)}catch{return null}}}Hr.TWITTER_SIGN_IN_METHOD="twitter.com";Hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(t,e){return Xa(t,"POST","/v1/accounts:signUp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await mr._fromIdTokenResponse(e,r,s),o=b0(r);return new Hs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=b0(r);return new Hs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function b0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends nr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,rc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new rc(e,n,r,s)}}function d1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?rc._fromErrorAndOperation(t,i,e,r):i})}async function jN(t,e,n=!1){const r=await Qi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(t,e,n=!1){const{auth:r}=t;if(On(r.app))return Promise.reject(_r(r));const s="reauthenticate";try{const i=await Qi(t,d1(r,s,e,t),n);se(i.idToken,r,"internal-error");const o=am(i.idToken);se(o,r,"internal-error");const{sub:l}=o;return se(t.uid===l,r,"user-mismatch"),Hs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Sn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(t,e,n=!1){if(On(t.app))return Promise.reject(_r(t));const r="signIn",s=await d1(t,r,e),i=await Hs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function ON(t,e){return h1(_s(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(t){const e=_s(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MN(t,e,n){if(On(t.app))return Promise.reject(_r(t));const r=_s(t),o=await hf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qN).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&f1(t),u}),l=await Hs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function LN(t,e,n){return On(t.app)?Promise.reject(_r(t)):ON(De(t),oo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&f1(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(t,e){return Rr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=De(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Qi(r,VN(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t,e){return De(t).setPersistence(e)}function zN(t,e,n,r){return De(t).onIdTokenChanged(e,n,r)}function BN(t,e,n){return De(t).beforeAuthStateChanged(e,n)}function $N(t,e,n,r){return De(t).onAuthStateChanged(e,n,r)}function WN(t){return De(t).signOut()}const sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sc,"1"),this.storage.removeItem(sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=1e3,KN=10;class m1 extends p1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=a1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);lN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KN):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}m1.type="LOCAL";const g1=m1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1 extends p1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}y1.type="SESSION";const v1=y1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Bc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async h=>h(n.origin,i)),u=await GN(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const h=hm("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function YN(t){Zn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function XN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ZN(){return _1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firebaseLocalStorageDb",eR=1,ic="firebaseLocalStorage",x1="fbase_key";class Za{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $c(t,e){return t.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function tR(){const t=indexedDB.deleteDatabase(w1);return new Za(t).toPromise()}function ff(){const t=indexedDB.open(w1,eR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ic,{keyPath:x1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ic)?e(r):(r.close(),await tR(),e(await ff()))})})}async function A0(t,e,n){const r=$c(t,!0).put({[x1]:e,value:n});return new Za(r).toPromise()}async function nR(t,e){const n=$c(t,!1).get(e),r=await new Za(n).toPromise();return r===void 0?null:r.value}function S0(t,e){const n=$c(t,!0).delete(e);return new Za(n).toPromise()}const rR=800,sR=3;class E1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ff(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bc._getInstance(ZN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XN(),!this.activeServiceWorker)return;this.sender=new QN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ff();return await A0(e,sc,"1"),await S0(e,sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>A0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>S0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$c(s,!1).getAll();return new Za(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}E1.type="LOCAL";const iR=E1;new Ya(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t,e){return e?gr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm extends um{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oR(t){return h1(t.auth,new fm(t),t.bypassAuthState)}function aR(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),DN(n,new fm(t),t.bypassAuthState)}async function lR(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),jN(n,new fm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oR;case"linkViaPopup":case"linkViaRedirect":return lR;case"reauthViaPopup":case"reauthViaRedirect":return aR;default:Sn(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new Ya(2e3,1e4);async function cR(t,e,n){if(On(t.app))return Promise.reject(Vn(t,"operation-not-supported-in-this-environment"));const r=_s(t);BS(t,e,dm);const s=k1(r,n);return new Cs(r,"signInViaPopup",e,s).executeNotNull()}class Cs extends T1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Cs.currentPopupAction&&Cs.currentPopupAction.cancel(),Cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Ar(this.filter.length===1,"Popup operations only handle one event");const e=hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uR.get())};e()}}Cs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="pendingRedirect",du=new Map;class hR extends T1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=du.get(this.auth._key());if(!e){try{const r=await fR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}du.set(this.auth._key(),e)}return this.bypassAuthState||du.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function fR(t,e){const n=gR(e),r=mR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function pR(t,e){du.set(t._key(),e)}function mR(t){return gr(t._redirectPersistence)}function gR(t){return cu(dR,t.config.apiKey,t.name)}async function yR(t,e,n=!1){if(On(t.app))return Promise.reject(_r(t));const r=_s(t),s=k1(r,e),o=await new hR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=10*60*1e3;class _R{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!I1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Vn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vR&&this.cachedEventUids.clear(),this.cachedEventUids.has(N0(e))}saveEventToCache(e){this.cachedEventUids.add(N0(e)),this.lastProcessedEventTime=Date.now()}}function N0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function I1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return I1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(t,e={}){return Rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kR=/^https?/;async function TR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xR(t);for(const n of e)try{if(IR(n))return}catch{}Sn(t,"unauthorized-domain")}function IR(t){const e=cf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kR.test(n))return!1;if(ER.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new Ya(3e4,6e4);function R0(){const t=Zn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function AR(t){return new Promise((e,n)=>{var r,s,i;function o(){R0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R0(),n(Vn(t,"network-request-failed"))},timeout:bR.get()})}if(!((s=(r=Zn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Zn().gapi)===null||i===void 0)&&i.load)o();else{const l=yN("iframefcb");return Zn()[l]=()=>{gapi.load?o():n(Vn(t,"network-request-failed"))},u1(`${gN()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw hu=null,e})}let hu=null;function SR(t){return hu=hu||AR(t),hu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=new Ya(5e3,15e3),RR="__/auth/iframe",CR="emulator/auth/iframe",PR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jR(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?om(e,CR):`https://${t.config.authDomain}/${RR}`,r={apiKey:e.apiKey,appName:t.name,v:Ys},s=qR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ma(r).slice(1)}`}async function DR(t){const e=await SR(t),n=Zn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:jR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Vn(t,"network-request-failed"),l=Zn().setTimeout(()=>{i(o)},NR.get());function u(){Zn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MR=500,LR=600,VR="_blank",UR="http://localhost";class C0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FR(t,e,n,r=MR,s=LR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},OR),{width:r.toString(),height:s.toString(),top:i,left:o}),h=zt().toLowerCase();n&&(l=n1(h)?VR:n),e1(h)&&(e=e||UR,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[b,N])=>`${g}${b}=${N},`,"");if(aN(h)&&l!=="_self")return zR(e||"",l),new C0(null);const m=window.open(e||"",l,p);se(m,t,"popup-blocked");try{m.focus()}catch{}return new C0(m)}function zR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="__/auth/handler",$R="emulator/auth/handler",WR=encodeURIComponent("fac");async function P0(t,e,n,r,s,i){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ys,eventId:s};if(e instanceof dm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",CI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof Ja){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),h=u?`#${WR}=${encodeURIComponent(u)}`:"";return`${HR(t)}?${Ma(l).slice(1)}${h}`}function HR({config:t}){return t.emulator?om(t,$R):`https://${t.authDomain}/${BR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class KR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=v1,this._completeRedirectFn=yR,this._overrideRedirectResult=pR}async _openPopup(e,n,r,s){var i;Ar((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await P0(e,n,r,cf(),s);return FR(e,o,hm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await P0(e,n,r,cf(),s);return YN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ar(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DR(e),r=new _R(e);return n.register("authEvent",s=>(se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[zd];o!==void 0&&n(!!o),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return a1()||t1()||lm()}}const GR=KR;var q0="@firebase/auth",j0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XR(t){Fs(new cs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l1(t)},h=new fN(r,s,i,u);return EN(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Fs(new cs("auth-internal",e=>{const n=_s(e.getProvider("auth").getImmediate());return(r=>new QR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(q0,j0,YR(t)),Yn(q0,j0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=5*60,ZR=vw("authIdTokenMaxAge")||JR;let D0=null;const eC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ZR)return;const s=n==null?void 0:n.token;D0!==s&&(D0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tC(t=pp()){const e=Tc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xN(t,{popupRedirectResolver:GR,persistence:[iR,g1,v1]}),r=vw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=eC(i.toString());BN(n,o,()=>o(n.currentUser)),zN(n,l=>o(l))}}const s=mw("auth");return s&&kN(n,`http://${s}`),n}function nC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Vn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",nC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XR("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1="firebasestorage.googleapis.com",A1="storageBucket",rC=2*60*1e3,sC=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends nr{constructor(e,n,r=0){super(Bd(e),`Firebase Storage: ${n} (${Bd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ze.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Je||(Je={}));function Bd(t){return"storage/"+t}function pm(){const t="An unknown error occurred, please check the error payload for server response.";return new Ze(Je.UNKNOWN,t)}function iC(t){return new Ze(Je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oC(t){return new Ze(Je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function aC(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ze(Je.UNAUTHENTICATED,t)}function lC(){return new Ze(Je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function uC(t){return new Ze(Je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cC(){return new Ze(Je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dC(){return new Ze(Je.CANCELED,"User canceled the upload/download.")}function hC(t){return new Ze(Je.INVALID_URL,"Invalid URL '"+t+"'.")}function fC(t){return new Ze(Je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function pC(){return new Ze(Je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+A1+"' property when initializing the app?")}function mC(){return new Ze(Je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gC(){return new Ze(Je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yC(t){return new Ze(Je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pf(t){return new Ze(Je.INVALID_ARGUMENT,t)}function S1(){return new Ze(Je.APP_DELETED,"The Firebase app was deleted.")}function vC(t){return new Ze(Je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ea(t,e){return new Ze(Je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function So(t){throw new Ze(Je.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=hn.makeFromUrl(e,n)}catch{return new hn(e,"")}if(r.path==="")return r;throw fC(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function h(D){D.path_=decodeURIComponent(D.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",b=new RegExp(`^https?://${m}/${p}/b/${s}/o${g}`,"i"),N={bucket:1,path:3},j=n===b1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",E=new RegExp(`^https?://${j}/${s}/${A}`,"i"),x=[{regex:l,indices:u,postModify:i},{regex:b,indices:N,postModify:h},{regex:E,indices:{bucket:1,path:2},postModify:h}];for(let D=0;D<x.length;D++){const $=x[D],U=$.regex.exec(e);if(U){const w=U[$.indices.bucket];let v=U[$.indices.path];v||(v=""),r=new hn(w,v),$.postModify(r);break}}if(r==null)throw hC(e);return r}}class _C{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let h=!1;function p(...A){h||(h=!0,e.apply(null,A))}function m(A){s=setTimeout(()=>{s=null,t(b,u())},A)}function g(){i&&clearTimeout(i)}function b(A,...E){if(h){g();return}if(A){g(),p.call(null,A,...E);return}if(u()||o){g(),p.call(null,A,...E);return}r<64&&(r*=2);let x;l===1?(l=2,x=0):x=(r+Math.random())*1e3,m(x)}let N=!1;function j(A){N||(N=!0,g(),!h&&(s!==null?(A||(l=2),clearTimeout(s),m(0)):A||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,j(!0)},n),j}function xC(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t){return t!==void 0}function kC(t){return typeof t=="object"&&!Array.isArray(t)}function mm(t){return typeof t=="string"||t instanceof String}function O0(t){return gm()&&t instanceof Blob}function gm(){return typeof Blob<"u"}function M0(t,e,n,r){if(r<e)throw pf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw pf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function N1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ds;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ds||(Ds={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,r,s,i,o,l,u,h,p,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,N)=>{this.resolve_=b,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Vl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Ds.NO_ERROR,u=i.getStatus();if(!l||TC(u,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===Ds.ABORT;r(!1,new Vl(!1,null,p));return}const h=this.successCodes_.indexOf(u)!==-1;r(!0,new Vl(h,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());EC(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=pm();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?S1():dC();o(u)}else{const u=cC();o(u)}};this.canceled_?n(!1,new Vl(!1,null,!0)):this.backoffId_=wC(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function bC(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function AC(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function SC(t,e){e&&(t["X-Firebase-GMPID"]=e)}function NC(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function RC(t,e,n,r,s,i,o=!0){const l=N1(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return SC(h,e),bC(h,n),AC(h,i),NC(h,r),new IC(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function PC(...t){const e=CC();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(gm())return new Blob(t);throw new Ze(Je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qC(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){if(typeof atob>"u")throw yC("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $d{constructor(e,n){this.data=e,this.contentType=n||null}}function DC(t,e){switch(t){case Kn.RAW:return new $d(R1(e));case Kn.BASE64:case Kn.BASE64URL:return new $d(C1(t,e));case Kn.DATA_URL:return new $d(MC(e),LC(e))}throw pm()}function R1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function OC(t){let e;try{e=decodeURIComponent(t)}catch{throw ea(Kn.DATA_URL,"Malformed data URL.")}return R1(e)}function C1(t,e){switch(t){case Kn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ea(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Kn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ea(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jC(e)}catch(s){throw s.message.includes("polyfill")?s:ea(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class P1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ea(Kn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=VC(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function MC(t){const e=new P1(t);return e.base64?C1(Kn.BASE64,e.rest):OC(e.rest)}function LC(t){return new P1(t).contentType}function VC(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n){let r=0,s="";O0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(O0(this.data_)){const r=this.data_,s=qC(r,e,n);return s===null?null:new Kr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Kr(r,!0)}}static getBlob(...e){if(gm()){const n=e.map(r=>r instanceof Kr?r.data_:r);return new Kr(PC.apply(null,n))}else{const n=e.map(o=>mm(o)?DC(Kn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Kr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){let e;try{e=JSON.parse(t)}catch{return null}return kC(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function FC(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function j1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e){return e}class $t{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||zC}}let Ul=null;function BC(t){return!mm(t)||t.length<2?t:j1(t)}function D1(){if(Ul)return Ul;const t=[];t.push(new $t("bucket")),t.push(new $t("generation")),t.push(new $t("metageneration")),t.push(new $t("name","fullPath",!0));function e(i,o){return BC(o)}const n=new $t("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new $t("size");return s.xform=r,t.push(s),t.push(new $t("timeCreated")),t.push(new $t("updated")),t.push(new $t("md5Hash",null,!0)),t.push(new $t("cacheControl",null,!0)),t.push(new $t("contentDisposition",null,!0)),t.push(new $t("contentEncoding",null,!0)),t.push(new $t("contentLanguage",null,!0)),t.push(new $t("contentType",null,!0)),t.push(new $t("metadata","customMetadata",!0)),Ul=t,Ul}function $C(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new hn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function WC(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return $C(r,t),r}function O1(t,e,n){const r=q1(e);return r===null?null:WC(t,r,n)}function HC(t,e,n,r){const s=q1(e);if(s===null||!mm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(h=>{const p=t.bucket,m=t.fullPath,g="/b/"+o(p)+"/o/"+o(m),b=ym(g,n,r),N=N1({alt:"media",token:h});return b+N})[0]}function KC(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class M1{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t){if(!t)throw pm()}function GC(t,e){function n(r,s){const i=O1(t,s,e);return L1(i!==null),i}return n}function QC(t,e){function n(r,s){const i=O1(t,s,e);return L1(i!==null),HC(i,s,t.host,t._protocol)}return n}function V1(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=lC():s=aC():n.getStatus()===402?s=oC(t.bucket):n.getStatus()===403?s=uC(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function YC(t){const e=V1(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=iC(t.path)),i.serverResponse=s.serverResponse,i}return n}function XC(t,e,n){const r=e.fullServerUrl(),s=ym(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new M1(s,i,QC(t,n),o);return l.errorHandler=YC(e),l}function JC(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function ZC(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=JC(null,e)),r}function eP(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let x="";for(let D=0;D<2;D++)x=x+Math.random().toString().slice(2);return x}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const h=ZC(e,r,s),p=KC(h,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+u+`\r
Content-Type: `+h.contentType+`\r
\r
`,g=`\r
--`+u+"--",b=Kr.getBlob(m,r,g);if(b===null)throw mC();const N={name:h.fullPath},j=ym(i,t.host,t._protocol),A="POST",E=t.maxUploadRetryTime,_=new M1(j,A,GC(t,n),E);return _.urlParams=N,_.headers=o,_.body=b.uploadData(),_.errorHandler=V1(e),_}class tP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ds.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ds.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ds.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw So("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw So("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw So("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw So("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw So("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class nP extends tP{initXhr(){this.xhr_.responseType="text"}}function U1(){return new nP}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this._service=e,n instanceof hn?this._location=n:this._location=hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ks(e,n)}get root(){const e=new hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j1(this._location.path)}get storage(){return this._service}get parent(){const e=UC(this._location.path);if(e===null)return null;const n=new hn(this._location.bucket,e);return new Ks(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vC(e)}}function rP(t,e,n){t._throwIfRoot("uploadBytes");const r=eP(t.storage,t._location,D1(),new Kr(e,!0),n);return t.storage.makeRequestWithTokens(r,U1).then(s=>({metadata:s,ref:t}))}function sP(t){t._throwIfRoot("getDownloadURL");const e=XC(t.storage,t._location,D1());return t.storage.makeRequestWithTokens(e,U1).then(n=>{if(n===null)throw gC();return n})}function iP(t,e){const n=FC(t._location.path,e),r=new hn(t._location.bucket,n);return new Ks(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(t){return/^[A-Za-z]+:\/\//.test(t)}function aP(t,e){return new Ks(t,e)}function F1(t,e){if(t instanceof vm){const n=t;if(n._bucket==null)throw pC();const r=new Ks(n,n._bucket);return e!=null?F1(r,e):r}else return e!==void 0?iP(t,e):t}function lP(t,e){if(e&&oP(e)){if(t instanceof vm)return aP(t,e);throw pf("To use ref(service, url), the first argument must be a Storage instance.")}else return F1(t,e)}function L0(t,e){const n=e==null?void 0:e[A1];return n==null?null:hn.makeFromBucketSpec(n,t)}function uP(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:_w(s,t.app.options.projectId))}class vm{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=b1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rC,this._maxUploadRetryTime=sC,this._requests=new Set,s!=null?this._bucket=hn.makeFromBucketSpec(s,this._host):this._bucket=L0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hn.makeFromBucketSpec(this._url,e):this._bucket=L0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){M0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){M0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ks(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new _C(S1());{const o=RC(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const V0="@firebase/storage",U0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="storage";function cP(t,e,n){return t=De(t),rP(t,e,n)}function dP(t){return t=De(t),sP(t)}function hP(t,e){return t=De(t),lP(t,e)}function fP(t=pp(),e){t=De(t);const r=Tc(t,z1).getImmediate({identifier:e}),s=gw("storage");return s&&pP(r,...s),r}function pP(t,e,n,r={}){uP(t,e,n,r)}function mP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new vm(n,r,s,e,Ys)}function gP(){Fs(new cs(z1,mP,"PUBLIC").setMultipleInstances(!0)),Yn(V0,U0,""),Yn(V0,U0,"esm2017")}gP();const yP={apiKey:"AIzaSyCiTAiDphBPNjd4dKwEYArGY8pXWf55sZQ",authDomain:"irangram-79830.firebaseapp.com",projectId:"irangram-79830",storageBucket:"irangram-79830.firebasestorage.app",messagingSenderId:"355877653612",appId:"1:355877653612:web:5512841c0ab55b6b011c49",measurementId:"G-RZWEBR7XJ7"};let Fl,B=null,gn=null,oc=null;try{Fl=Ew(yP),B=RS(Fl),gn=tC(Fl);try{oc=fP(Fl)}catch(t){console.warn("Firebase Storage not available. File uploads will be disabled.",t),oc=null}FN(gn,g1).catch(t=>{console.error("Firebase Persistence Error:",t)}),console.log("Firebase Connected Successfully")}catch(t){console.error("Firebase Initialization Error:",t)}var F0={};const Tn={USE_REAL_SERVER:!1,API_BASE_URL:F0.REACT_APP_API_URL||"http://localhost:5000/api",SOCKET_URL:F0.REACT_APP_SOCKET_URL||"http://localhost:5000",APP_NAME:"",VERSION:"1.7.0",OWNER_EMAIL:"amirrezaveisi45@gmail.com"},vP=t=>gn?$N(gn,t):()=>{},_P=async(t,e,n,r)=>{if(!gn)throw new Error("Auth not initialized");const i=(await MN(gn,t,e)).user,o=t===Tn.OWNER_EMAIL?"owner":"user";return await UN(i,{displayName:n}),B&&await so(Ae(B,"users",i.uid),{name:n,email:t,phone:r,username:t.split("@")[0],bio:"  ",avatar:`https://ui-avatars.com/api/?name=${n}&background=random&color=fff&size=128`,role:o,isBanned:!1,createdAt:mt(),lastSeen:mt(),status:"online"}),i},wP=async(t,e)=>{if(!gn)throw new Error("Auth not initialized");const n=await LN(gn,t,e);if(B&&n.user){const r=Ae(B,"users",n.user.uid),s={status:"online",lastSeen:mt()};t===Tn.OWNER_EMAIL&&(s.role="owner"),lt(r,s).catch(i=>console.log("Status update error",i))}return n.user},xP=async()=>{if(!gn)throw new Error("Auth not initialized");const t=new dr;try{const n=(await cR(gn,t)).user,r=n.email||"",s=r===Tn.OWNER_EMAIL?"owner":"user";if(B){const i=Ae(B,"users",n.uid);if(!(await Ga(i)).exists())await so(i,{name:n.displayName||" ",email:r,phone:"",username:r.split("@")[0]||"user",bio:"  ",avatar:n.photoURL||`https://ui-avatars.com/api/?name=${n.displayName}&background=random&color=fff&size=128`,role:s,isBanned:!1,createdAt:mt(),lastSeen:mt(),status:"online"});else{const l={status:"online",lastSeen:mt()};r===Tn.OWNER_EMAIL&&(l.role="owner"),await lt(i,l).catch(u=>console.log("Status update error",u))}}return n}catch(e){throw console.error("Google Sign-In Error",e),e}},Wd=async t=>{gn&&(t&&B&&await lt(Ae(B,"users",t),{status:"offline",lastSeen:mt()}).catch(()=>{}),await WN(gn))},z0=async t=>{if(!B)return null;try{const e=Ae(B,"users",t),n=await Ga(e);if(n.exists())return n.data()}catch(e){console.error("Error fetching profile",e)}return null},EP=(t,e)=>{if(!B)return()=>{};const n=Ae(B,"users",t);return rr(n,r=>{r.exists()&&e({uid:r.id,...r.data()})})},kP=async(t,e)=>{if(!B)return;const n=Ae(B,"users",t),r={};Object.keys(e).forEach(s=>{e[s]!==void 0&&(r[s]=e[s])}),await lt(n,r)},TP=async t=>{if(!B)return null;let e=mn(gt(B,"users"),Sa("username","==",t.replace("@",""))),n=await Gi(e);if(!n.empty){const r=n.docs[0];return{uid:r.id,...r.data()}}if(e=mn(gt(B,"users"),Sa("phone","==",t)),n=await Gi(e),!n.empty){const r=n.docs[0];return{uid:r.id,...r.data()}}return null},IP=async(t,e)=>B?{id:(await io(gt(B,"groups"),{name:t,creatorId:e,avatar:`https://ui-avatars.com/api/?name=${t}&background=random&color=fff&size=128`,createdAt:mt(),type:"group"})).id,name:t,avatar:`https://ui-avatars.com/api/?name=${t}&background=random&color=fff&size=128`,type:"group"}:null,zl=async(t,e)=>{if(!B)return;const n=Ae(B,"users",t);try{await lt(n,{status:e,lastSeen:mt()})}catch(r){console.error("Heartbeat error",r)}},Bl=async(t,e)=>{if(!B)return;const n=Ae(B,"users",t);try{await lt(n,{status:e?"typing...":"online"})}catch(r){console.error("Typing status error",r)}},bP=t=>{if(!B)return()=>{};const e=mn(gt(B,"users"));return rr(e,n=>{const r=n.docs.map(s=>({uid:s.id,status:s.data().status,lastSeen:s.data().lastSeen?s.data().lastSeen.toMillis():Date.now(),name:s.data().name,avatar:s.data().avatar}));t(r)})},B1=async(t,e)=>{if(!oc)throw new Error("   (Storage)       .");const n=hP(oc,e),r=await cP(n,t);return await dP(r.ref)},AP=async(t,e,n)=>{B&&await io(gt(B,"appeals"),{userId:t,userName:e,message:n,status:"pending",createdAt:mt()})},SP=t=>{if(!B)return()=>{};const e=mn(gt(B,"appeals"),ro("createdAt","desc"));return rr(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt?s.data().createdAt.toMillis():Date.now()}));t(r)})},B0=async(t,e)=>{B&&(e?await lt(Ae(B,"appeals",t),{status:"approved"}):await lt(Ae(B,"appeals",t),{status:"rejected"}))},NP=async t=>{B&&await nm(Ae(B,"appeals",t))},RP=async(t,e,n,r,s,i)=>{B&&await io(gt(B,"reports"),{messageId:t,messageContent:e,reportedUserId:n,reportedUserName:r,reporterId:s,reason:i,status:"pending",createdAt:mt()})},CP=t=>{if(!B)return()=>{};const e=mn(gt(B,"reports"),ro("createdAt","desc"));return rr(e,n=>{const r=n.docs.map(s=>({id:s.id,...s.data(),createdAt:s.data().createdAt?s.data().createdAt.toMillis():Date.now(),handledAt:s.data().handledAt?s.data().handledAt.toMillis():void 0}));t(r)})},PP=async(t,e)=>{if(!B)return;const n=Ae(B,"reports",t);await lt(n,{status:"handled",handledBy:e,handledAt:mt()})},$0=async t=>{if(!B)return;const e=Ae(B,"reports",t);await nm(e)},qP=async()=>{if(!B)return[];try{const t=mn(gt(B,"users"),ro("createdAt","desc"));return(await Gi(t)).docs.map(n=>({uid:n.id,...n.data()}))}catch(t){return console.error("Error fetching users",t),[]}},jP=async(t,e)=>{if(!B)return;const n=Ae(B,"users",t);await lt(n,{role:e})},DP=async(t,e)=>{if(!B)return;const n=Ae(B,"users",t);e?await lt(n,{isBanned:!1,banExpiresAt:null}):await lt(n,{isBanned:!0})},OP=async(t,e)=>{if(!B)return;const n=Ae(B,"users",t),r=Date.now()+e*60*60*1e3;await lt(n,{isBanned:!0,banExpiresAt:r})},MP=async(t,e)=>{if(!(!B||!e.isBanned||!e.banExpiresAt)&&Date.now()>e.banExpiresAt){console.log("Ban expired, lifting ban for user:",t);const n=Ae(B,"users",t);await lt(n,{isBanned:!1,banExpiresAt:null})}},LP=async t=>{if(B)try{await nm(Ae(B,"global_chat",t))}catch(e){console.error("Error deleting global message",e)}},VP=async(t,e)=>{if(!B)return;const n=Ae(B,"global_chat",t);try{await lt(n,{text:e,edited:!0})}catch(r){console.error("Error editing global message",r)}},UP=async()=>{if(B)try{const t=mn(gt(B,"global_chat")),e=await Gi(t),n=Wx(B);let r=0;e.forEach(s=>{n.delete(s.ref),r++,r>=490}),await n.commit(),console.log(`Cleared ${r} messages.`)}catch(t){console.error("Error clearing chat",t)}},$1=async()=>{if(!B)return[];const t=Ae(B,"settings","wordFilters"),e=await Ga(t);return e.exists()?e.data().bannedWords||[]:[]},W0=async t=>{if(!B)return;const e=Ae(B,"settings","wordFilters");await so(e,{bannedWords:t},{merge:!0})},FP=async t=>[{id:"global_chat",name:"  ",avatar:"https://cdn-icons-png.flaticon.com/512/921/921490.png",status:"online",bio:"Surveillance View",username:"@global_world",phone:"",type:"group",isGlobal:!0}],zP=async(t,e)=>{if(!B)return[];if(e==="global_chat"){const n=mn(gt(B,"global_chat"),ro("createdAt","desc"),Zp(100));return(await Gi(n)).docs.map(s=>{const i=s.data();return{id:s.id,...i,timestamp:i.createdAt?i.createdAt.toMillis():Date.now()}}).reverse()}return[]},BP=async(t,e,n)=>{if(B)try{await io(gt(B,"users",t,"notifications"),{title:e,message:n,type:"alert",read:!1,createdAt:mt()})}catch(r){console.error("Error sending notification",r)}},$P=(t,e)=>{if(!B)return()=>{};const n=mn(gt(B,"users",t,"notifications"),Sa("read","==",!1));return rr(n,r=>{const s=r.docs.map(o=>{const l=o.data();return{id:o.id,...l,createdAt:l.createdAt?l.createdAt.toMillis():Date.now()}});s.sort((o,l)=>l.createdAt-o.createdAt);const i=s.slice(0,10);e(i)})},WP=async(t,e)=>{B&&await lt(Ae(B,"users",t,"notifications",e),{read:!0})},HP=async(t,e)=>{if(!B)return;const n=Ae(B,"chat_metadata",t);await so(n,{pinnedMessage:e,updatedAt:mt()},{merge:!0})},KP=async t=>{if(!B)return;const e=Ae(B,"chat_metadata",t);await lt(e,{pinnedMessage:null})},GP=(t,e)=>{if(!B)return()=>{};const n=Ae(B,"chat_metadata",t);return rr(n,r=>{r.exists()?e(r.data().pinnedMessage):e(null)})},Hd=(t,e)=>[t,e].sort().join("_"),QP=t=>{if(!B)return()=>{};const e=mn(gt(B,"global_chat"),ro("createdAt","desc"),Zp(50));return rr(e,r=>{const s=[];r.forEach(i=>{const o=i.data();s.push({id:i.id,text:o.text,senderId:o.senderId,senderName:o.senderName,senderAvatar:o.senderAvatar,senderRole:o.senderRole||"user",timestamp:o.createdAt?o.createdAt.toMillis():Date.now(),status:"read",type:o.type||"text",imageUrl:o.imageUrl,fileUrl:o.fileUrl,fileName:o.fileName,fileSize:o.fileSize,audioDuration:o.audioDuration,isSticker:o.isSticker,replyToId:o.replyToId,edited:o.edited,reactions:o.reactions||{}})}),t(s.reverse())})},YP=async(t,e)=>{if(!B){console.error("Database not initialized");return}try{let n=t.text||"";n&&t.type==="text"&&(await $1()).forEach(s=>{const i=new RegExp(s,"gi");n=n.replace(i,"*".repeat(s.length))}),await io(gt(B,"global_chat"),{text:n,senderId:t.senderId,senderName:e.name,senderAvatar:e.avatar||"",senderRole:e.role||"user",type:t.type||"text",imageUrl:t.imageUrl||null,fileUrl:t.fileUrl||null,fileName:t.fileName||null,fileSize:t.fileSize||null,audioDuration:t.audioDuration||null,isSticker:t.isSticker||!1,replyToId:t.replyToId||null,createdAt:mt(),edited:!1,reactions:{}})}catch(n){console.error("Error adding document: ",n)}},XP=(t,e)=>{if(!B)return()=>{};const n=mn(gt(B,"chats",t,"messages"),ro("createdAt","desc"),Zp(50));return rr(n,r=>{const s=[];r.forEach(i=>{const o=i.data();s.push({id:i.id,text:o.text,senderId:o.senderId,senderName:o.senderName,senderAvatar:o.senderAvatar,timestamp:o.createdAt?o.createdAt.toMillis():Date.now(),status:"read",type:o.type||"text",imageUrl:o.imageUrl,fileUrl:o.fileUrl,fileName:o.fileName,fileSize:o.fileSize,audioDuration:o.audioDuration,isSticker:o.isSticker,replyToId:o.replyToId,edited:o.edited,reactions:o.reactions||{}})}),e(s.reverse())})},JP=async(t,e,n)=>{if(!B)return;const r=Ae(B,"chats",t,"messages",e);try{await lt(r,{text:n,edited:!0})}catch(s){console.error("Error editing private message",s)}},ZP=(t,e)=>{if(!B)return()=>{};const n=mn(gt(B,"chats"),Sa("participants","array-contains",t));return rr(n,r=>{const s=r.docs.map(i=>({chatId:i.id,...i.data(),updatedAt:i.data().updatedAt?i.data().updatedAt.toMillis():Date.now()}));s.sort((i,o)=>o.updatedAt-i.updatedAt),e(s)})},eq=async(t,e,n,r)=>{if(!B)return;const s=Ae(B,"chats",t),i=gn.currentUser;await so(s,{participants:[i==null?void 0:i.uid,e],updatedAt:mt(),lastMessage:n.text||(n.type==="image"?"":n.type==="audio"?"":""),lastSenderId:i==null?void 0:i.uid},{merge:!0}),await io(gt(B,"chats",t,"messages"),{text:n.text||"",senderId:n.senderId,senderName:r.name,senderAvatar:r.avatar||"",type:n.type||"text",imageUrl:n.imageUrl||null,fileUrl:n.fileUrl||null,fileName:n.fileName||null,fileSize:n.fileSize||null,audioDuration:n.audioDuration||null,isSticker:n.isSticker||!1,replyToId:n.replyToId||null,createdAt:mt(),reactions:{}})},tq=async(t,e,n)=>{if(!B)return;const r=Ae(B,"global_chat",t);try{const s=await Ga(r);if(s.exists()){const o=s.data().reactions||{},l=o[e]||[];let u={...o};l.includes(n)?(u[e]=l.filter(h=>h!==n),u[e].length===0&&delete u[e]):u[e]=[...l,n],await lt(r,{reactions:u})}}catch(s){console.error("Error toggling reaction:",s)}},nq=t=>{if(!B)return()=>{};const e=Ae(B,"system","info");return rr(e,n=>{if(n.exists()){const r=n.data();t({currentVersion:r.currentVersion||Tn.VERSION,lastCleanup:r.lastCleanup?r.lastCleanup.toMillis():0})}else so(e,{currentVersion:Tn.VERSION,lastCleanup:mt()})})},rq=async()=>{if(B)try{const t=Ae(B,"system","info"),e=await Ga(t);if(e.exists()){const n=e.data(),r=n.lastCleanup?n.lastCleanup.toMillis():0,s=Date.now();if(s-r>864e5){console.log("Triggering 24h cleanup..."),await lt(t,{lastCleanup:mt()});const i=new Date(s-864e5),o=mn(gt(B,"global_chat"),Sa("createdAt","<",i)),l=await Gi(o),u=Wx(B);let h=0;l.forEach(p=>{u.delete(p.ref),h++}),h>0&&(await u.commit(),console.log(`Cleanup: Deleted ${h} old messages.`))}}}catch(t){console.error("Error in auto cleanup:",t)}},sq=({contacts:t,sessions:e,activeContactId:n,onSelectContact:r,toggleTheme:s,theme:i,userProfile:o,onOpenSettings:l,onOpenAdminPanel:u,onAddContact:h,showInstallButton:p,onInstall:m,storedAccounts:g,onAddAccount:b,onSwitchAccount:N,onCreateGroup:j})=>{var Et;const[A,E]=M.useState(""),[_,x]=M.useState(!1),[D,$]=M.useState(!1),[U,w]=M.useState("all"),[v,k]=M.useState(!1),[I,S]=M.useState(!1),[R,T]=M.useState(""),[qe,yt]=M.useState(""),[ut,Qe]=M.useState(!1),[W,J]=M.useState(null),[ne,me]=M.useState(""),he=M.useRef(null);M.useEffect(()=>{const Y=de=>{he.current&&!he.current.contains(de.target)&&x(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const Re=async()=>{if(!R.trim())return;Qe(!0),me(""),J(null);const Y=await TP(R);Y?Y.username===o.username?me("     ."):J(Y):me("     ."),Qe(!1)},et=()=>{if(W){const Y={id:W.uid,name:W.name,avatar:W.avatar,bio:W.bio,username:"@"+W.username,phone:W.phone,status:W.status||"offline",type:"user"};h(Y),k(!1),J(null),T("")}},vt=()=>{qe.trim()&&(j(qe),yt(""),S(!1))},ct=t.filter(Y=>{const de=Y.name.toLowerCase().includes(A.toLowerCase())||Y.username.toLowerCase().includes(A.toLowerCase());let Se=!0;return U==="personal"?Se=Y.type==="user":U==="groups"&&(Se=Y.type==="group"||Y.type==="channel"),de&&Se}),Me=Y=>{if(!Y)return"";const de=new Date(Y);return Date.now()-Y>24*60*60*1e3?de.toLocaleDateString("fa-IR"):de.toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"})},dt=(Y,de)=>{if(Y==="online")return"";if(!de)return"";const Se=new Date(de),C=Date.now()-Se.getTime();return C<12e4?"":C<36e5?`${Math.floor(C/6e4)}  `:C<864e5?`${Math.floor(C/36e5)}  `:""};return c.jsxs("div",{className:"h-full flex flex-col bg-telegram-bg dark:bg-telegram-bgDark border-l border-telegram-border dark:border-telegram-borderDark relative",children:[c.jsxs("div",{className:`absolute top-0 right-0 h-full w-72 bg-white dark:bg-telegram-secondaryDark z-30 shadow-2xl transform transition-transform duration-300 ease-in-out ${_?"translate-x-0":"translate-x-full"}`,ref:he,children:[c.jsxs("div",{className:"bg-telegram-primary p-5 flex flex-col justify-end text-white relative overflow-hidden transition-all duration-300",children:[c.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-white/10 rounded-full"}),c.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[c.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center text-telegram-primary mb-3 text-2xl font-bold shadow-md uppercase overflow-hidden",children:((Et=o.name)==null?void 0:Et.charAt(0))||"U"}),c.jsx("button",{onClick:s,className:"p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors",children:i===Ei.DARK?c.jsx(cI,{size:20}):c.jsx(ZT,{size:20})})]}),c.jsxs("div",{className:"relative z-10 cursor-pointer",onClick:()=>$(!D),children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"font-bold text-lg truncate flex items-center gap-2",children:[o.name,o.role==="owner"&&c.jsx("span",{className:"bg-yellow-400 text-black text-[10px] px-1.5 rounded-full",children:"Owner"}),o.role==="admin"&&c.jsx("span",{className:"bg-blue-400 text-black text-[10px] px-1.5 rounded-full",children:"Admin"})]}),c.jsx(Uh,{size:18,className:`transition-transform duration-300 ${D?"rotate-180":""}`})]}),c.jsx("div",{className:"text-sm opacity-80 font-mono dir-ltr text-right",children:o.phone||o.username})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto",children:[D?c.jsxs("div",{className:"py-2 animate-fade-in",children:[g.filter(Y=>Y.username!==o.username).map(Y=>c.jsxs("button",{onClick:()=>{N(Y.uid),x(!1),$(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[c.jsx("img",{src:Y.avatar,className:"w-9 h-9 rounded-full bg-gray-200"}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"font-bold text-sm",children:Y.name}),c.jsxs("div",{className:"text-xs opacity-60",children:["@",Y.username]})]})]},Y.uid)),c.jsxs("button",{onClick:()=>{b(),x(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[c.jsx("div",{className:"w-9 h-9 rounded-full border-2 border-dashed border-gray-400 flex items-center justify-center",children:c.jsx(cw,{size:18})}),c.jsx("span",{className:"font-medium",children:"  "})]})]}):c.jsxs("div",{className:"py-2 flex flex-col animate-fade-in",children:[c.jsxs("button",{onClick:()=>{S(!0),x(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[c.jsx(ru,{size:22,className:"text-gray-500"}),c.jsx("span",{className:"font-medium",children:" "})]}),c.jsxs("button",{onClick:()=>{k(!0),x(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[c.jsx(_y,{size:22,className:"text-gray-500"}),c.jsx("span",{className:"font-medium",children:" "})]}),c.jsxs("button",{onClick:()=>{r("saved"),x(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[c.jsx(fy,{size:22,className:"text-gray-500"}),c.jsx("span",{className:"font-medium",children:"  "})]}),c.jsxs("button",{onClick:()=>{l(),x(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[c.jsx(dw,{size:22,className:"text-gray-500"}),c.jsx("span",{className:"font-medium",children:""})]}),p&&c.jsxs("button",{onClick:()=>{m(),x(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-gray-100 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200 transition-colors",children:[c.jsx(cp,{size:22,className:"text-gray-500"}),c.jsx("span",{className:"font-medium",children:" "})]}),(o.role==="owner"||o.role==="admin")&&c.jsxs("button",{onClick:()=>{u(),x(!1)},className:"w-full px-5 py-3 flex items-center gap-4 hover:bg-red-50 dark:hover:bg-red-900/10 text-red-600 dark:text-red-400 transition-colors border-t border-gray-100 dark:border-gray-700 mt-2",children:[c.jsx(Fu,{size:22}),c.jsx("span",{className:"font-bold",children:" "})]})]}),c.jsx("div",{className:"mt-auto p-4 border-t border-gray-100 dark:border-gray-700 text-center",children:c.jsx("a",{href:"https://github.com/mrv006",target:"_blank",className:"flex flex-col items-center gap-1 opacity-50 hover:opacity-100 transition-opacity",children:c.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold font-mono",children:[c.jsx(WT,{size:12}),c.jsx("span",{children:"Mr.V"})]})})})]})]}),_&&c.jsx("div",{className:"absolute inset-0 bg-black/50 z-20 backdrop-blur-sm transition-opacity",onClick:()=>x(!1)}),v&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-2xl shadow-2xl p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"  "}),c.jsx("button",{onClick:()=>k(!1),children:c.jsx(kn,{size:20,className:"text-gray-500"})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"text-sm text-gray-500 block mb-2",children:"    "}),c.jsx("input",{value:R,onChange:Y=>T(Y.target.value),placeholder:"@username  0912...",className:"w-full bg-gray-100 dark:bg-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white"})]}),ne&&c.jsx("p",{className:"text-red-500 text-sm mb-4",children:ne}),W&&c.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-xl flex items-center gap-3 mb-4 border border-green-200 dark:border-green-800",children:[c.jsx("img",{src:W.avatar,className:"w-10 h-10 rounded-full"}),c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:W.name}),c.jsx("p",{className:"text-xs text-gray-500",children:W.username})]}),c.jsx(iq,{className:"mr-auto text-green-500"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:Re,disabled:ut,className:"flex-1 bg-telegram-secondary dark:bg-gray-700 text-telegram-primary font-bold py-3 rounded-xl",children:ut?c.jsx(dp,{className:"animate-spin mx-auto"}):""}),W&&c.jsx("button",{onClick:et,className:"flex-1 bg-telegram-primary text-white font-bold py-3 rounded-xl hover:bg-blue-600 transition-colors",children:""})]})]})}),I&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-sm rounded-2xl shadow-2xl p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"  "}),c.jsx("button",{onClick:()=>S(!1),children:c.jsx(kn,{size:20,className:"text-gray-500"})})]}),c.jsx("div",{className:"flex justify-center mb-6",children:c.jsx("div",{className:"w-20 h-20 rounded-full bg-telegram-primary/20 flex items-center justify-center text-telegram-primary border-2 border-dashed border-telegram-primary cursor-pointer hover:bg-telegram-primary/30 transition-colors",children:c.jsx(ru,{size:32})})}),c.jsxs("div",{className:"mb-6",children:[c.jsx("label",{className:"text-sm text-gray-500 block mb-2",children:" "}),c.jsx("input",{value:qe,onChange:Y=>yt(Y.target.value),placeholder:"    ...",className:"w-full bg-gray-100 dark:bg-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 ring-telegram-primary text-gray-900 dark:text-white"})]}),c.jsx("button",{onClick:vt,disabled:!qe.trim(),className:"w-full bg-telegram-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl transition-colors",children:" "})]})}),c.jsxs("div",{className:"px-3 py-2 flex items-center gap-2 shrink-0",children:[c.jsx("button",{onClick:()=>{x(!0),$(!1)},className:"p-2 hover:bg-telegram-secondary dark:hover:bg-telegram-secondaryDark rounded-full text-gray-500 dark:text-gray-400",children:c.jsx(XT,{size:24})}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",placeholder:"...",value:A,onChange:Y=>E(Y.target.value),className:"w-full bg-telegram-secondary dark:bg-telegram-secondaryDark text-gray-900 dark:text-white rounded-full py-2 pr-9 pl-4 focus:outline-none focus:ring-1 focus:ring-telegram-primary/50 text-sm"}),c.jsx(zh,{className:"absolute right-3 top-2.5 text-gray-500 w-4 h-4"})]})]}),c.jsx("div",{className:"flex px-2 pb-1 shrink-0 border-b border-telegram-border dark:border-telegram-borderDark",children:["all","personal","groups"].map(Y=>c.jsx("button",{onClick:()=>w(Y),className:`flex-1 text-center py-2 border-b-2 font-medium text-sm transition-colors ${U===Y?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500"}`,children:Y==="all"?"":Y==="personal"?"":""},Y))}),c.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:ct.map(Y=>{const de=e[Y.id],Se=de==null?void 0:de.messages[de.messages.length-1],C=n===Y.id;return c.jsxs("div",{onClick:()=>r(Y.id),className:`flex items-center gap-3 p-2.5 mx-2 my-1 rounded-xl cursor-pointer transition-colors ${C?"bg-telegram-primary text-white":"hover:bg-gray-100 dark:hover:bg-white/5"}`,children:[c.jsxs("div",{className:"relative shrink-0",children:[Y.id==="saved"?c.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-400 flex items-center justify-center text-white",children:c.jsx(fy,{size:24,fill:"currentColor"})}):c.jsx("img",{src:Y.avatar,alt:Y.name,className:"w-12 h-12 rounded-full object-cover bg-gray-200"}),Y.id!=="saved"&&Y.status==="online"&&c.jsx("div",{className:`absolute bottom-0 right-0 w-3.5 h-3.5 rounded-full border-2 ${C?"bg-white border-telegram-primary":"bg-green-500 border-white dark:border-black"}`})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[c.jsx("h3",{className:`font-semibold text-base truncate ${C?"text-white":"text-gray-900 dark:text-gray-100"}`,children:Y.name}),Se&&c.jsx("span",{className:`text-[10px] ${C?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:Me(Se.timestamp)})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("p",{className:`text-sm truncate ${C?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:Y.status==="typing..."?c.jsx("span",{className:"text-telegram-primary animate-pulse",children:"  ..."}):Se?c.jsxs("span",{className:"flex items-center gap-1",children:[Se.senderId==="me"&&c.jsx("span",{className:"opacity-80",children:":"}),Se.type==="image"?" ":Se.type==="audio"?" ":Se.text]}):c.jsx("span",{className:"text-xs opacity-70 italic",children:Y.id!=="saved"&&Y.type==="user"?dt(Y.status,Y.lastSeen):Y.type==="group"?"":""})}),(de==null?void 0:de.unreadCount)>0&&c.jsx("span",{className:`min-w-[1.25rem] h-5 px-1 rounded-full text-xs font-bold flex items-center justify-center ${C?"bg-white text-telegram-primary":"bg-telegram-primary text-white"}`,children:de.unreadCount})]})]})]},Y.id)})}),c.jsxs("div",{className:"absolute bottom-6 left-6 flex flex-col gap-3 z-10",children:[c.jsx("button",{onClick:()=>{S(!0)},className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-full shadow-lg flex items-center justify-center hover:scale-105 transition-transform",title:" ",children:c.jsx(ru,{size:20})}),c.jsx("button",{onClick:()=>{k(!0)},className:"w-14 h-14 bg-telegram-primary text-white rounded-full shadow-lg flex items-center justify-center hover:scale-105 transition-transform",title:" ",children:c.jsx(_y,{size:24})})]})]})},iq=({className:t})=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[c.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),c.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),oq=({imageUrl:t,onClose:e})=>c.jsxs("div",{className:"fixed inset-0 z-[60] bg-black/95 flex items-center justify-center animate-fade-in backdrop-blur-sm",onClick:e,children:[c.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors z-50 backdrop-blur-md",children:c.jsx(kn,{size:24})}),c.jsx("a",{href:t,download:!0,onClick:n=>n.stopPropagation(),className:"absolute top-4 left-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors z-50 backdrop-blur-md",title:" ",children:c.jsx(cp,{size:24})}),c.jsx("div",{className:"w-full h-full p-4 flex items-center justify-center",children:c.jsx("img",{src:t,alt:"Full view",className:"max-w-full max-h-full object-contain select-none shadow-2xl rounded-md",onClick:n=>n.stopPropagation()})})]}),aq=["","","","","","","","","","","","","",""],lq=["","","","","",""],uq=["https://cdn-icons-png.flaticon.com/512/742/742751.png","https://cdn-icons-png.flaticon.com/512/742/742752.png","https://cdn-icons-png.flaticon.com/512/742/742822.png","https://cdn-icons-png.flaticon.com/512/742/742760.png","https://cdn-icons-png.flaticon.com/512/742/742920.png","https://cdn-icons-png.flaticon.com/512/742/742786.png","https://cdn-icons-png.flaticon.com/512/166/166538.png","https://cdn-icons-png.flaticon.com/512/190/190623.png","https://cdn-icons-png.flaticon.com/512/417/417779.png"],cq=t=>{const e=["#df3f4c","#4a9e56","#e08e0b","#8c52ff","#ff5ca8","#31b5d6","#3390ec"];let n=0;for(let r=0;r<t.length;r++)n=t.charCodeAt(r)+((n<<5)-n);return e[Math.abs(n)%e.length]},dq=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),hq=({contact:t,messages:e,myId:n,myRole:r,pinnedMessage:s,onSendMessage:i,onEditMessage:o,onDeleteMessage:l,onPinMessage:u,onUnpinMessage:h,onReaction:p,onBack:m,isMobile:g,onProfileClick:b,onAvatarClick:N,wallpaper:j,onCall:A})=>{const[E,_]=M.useState(""),[x,D]=M.useState(null),[$,U]=M.useState(null),[w,v]=M.useState(null),[k,I]=M.useState(!1),[S,R]=M.useState("emoji"),[T,qe]=M.useState(!1),[yt,ut]=M.useState(!1),[Qe,W]=M.useState(0),[J,ne]=M.useState(null),[me,he]=M.useState(null),[Re,et]=M.useState(!1),[vt,ct]=M.useState(!1),[Me,dt]=M.useState(!1),[Et,Y]=M.useState(""),[de,Se]=M.useState([]),[C,Ee]=M.useState(-1),[Ne,tt]=M.useState(0),rn=M.useRef(null),ao=M.useRef(null),Zs=M.useRef(null),Cr=M.useRef(null),ws=M.useRef(null),Pr=M.useRef(null),sr=M.useRef(null),Ct=M.useRef(null),zn=M.useRef(null),Be=M.useRef([]),$e=M.useRef(null),Bn=t.type==="group",L=t.id==="global_chat",K=`draft_${n}_${t.id}`;M.useEffect(()=>{const P=localStorage.getItem(K);P&&_(P)},[K]),M.useEffect(()=>{$||(E?localStorage.setItem(K,E):localStorage.removeItem(K))},[E,K,$]),M.useEffect(()=>()=>{Ct.current&&clearTimeout(Ct.current),t.id!=="saved"&&t.id!=="global_chat"&&Bl(n,!1)},[t.id,n]),M.useEffect(()=>{var P;Me||(P=rn.current)==null||P.scrollIntoView({behavior:"auto"})},[e.length,x,Me]),M.useEffect(()=>{const P=()=>{var ti;const nt=((ti=navigator.connection)==null?void 0:ti.rtt)||45,on=Math.floor(Math.random()*20)-10;tt(Math.max(10,nt+on))};P();const Z=setInterval(P,5e3);return()=>clearInterval(Z)},[]),M.useEffect(()=>{if(!Et.trim()){Se([]),Ee(-1);return}const P=e.filter(Z=>Z.type==="text"&&Z.text.toLowerCase().includes(Et.toLowerCase())).map(Z=>Z.id);Se(P),P.length>0?Ee(P.length-1):Ee(-1)},[Et,e]),M.useEffect(()=>{if(C>=0&&C<de.length){const P=de[C],Z=document.getElementById(`msg-${P}`);Z&&Z.scrollIntoView({behavior:"smooth",block:"center"})}},[C,de]),M.useEffect(()=>{Me&&sr.current?sr.current.focus():(Y(""),Se([]))},[Me]),M.useEffect(()=>{const P=()=>{v(null),I(!1),qe(!1)};return window.addEventListener("click",P),()=>window.removeEventListener("click",P)},[]);const ie=()=>{de.length!==0&&Ee(P=>P<de.length-1?P+1:0)},F=()=>{de.length!==0&&Ee(P=>P>0?P-1:de.length-1)},fe=()=>{if(!s)return;const P=document.getElementById(`msg-${s.id}`);P?(P.scrollIntoView({behavior:"smooth",block:"center"}),P.classList.add("bg-blue-100","dark:bg-blue-900/40"),setTimeout(()=>P.classList.remove("bg-blue-100","dark:bg-blue-900/40"),2e3)):alert("       .")},ae=P=>{_(P.target.value),t.id!=="saved"&&t.id!=="global_chat"&&(Ct.current||Bl(n,!0),Ct.current&&clearTimeout(Ct.current),Ct.current=setTimeout(()=>{Bl(n,!1),Ct.current=null},2e3))},le=()=>{E.trim()&&(Ct.current&&(clearTimeout(Ct.current),Ct.current=null,t.id!=="saved"&&t.id!=="global_chat"&&Bl(n,!1)),$?(o($.id,E),U(null)):(i({text:E,type:"text"},x==null?void 0:x.id),D(null)),_(""))},_e=P=>{i({imageUrl:P,type:"image",isSticker:!0},x==null?void 0:x.id),D(null),I(!1)},ye=async()=>{try{const P=await navigator.mediaDevices.getUserMedia({audio:!0}),Z=new MediaRecorder(P);zn.current=Z,Be.current=[],Z.ondataavailable=pe=>{pe.data.size>0&&Be.current.push(pe.data)},Z.start(),ut(!0),W(0),Pr.current=window.setInterval(()=>W(pe=>pe+1),1e3)}catch(P){console.error("Error accessing microphone:",P),alert("     .")}},we=P=>{Pr.current&&clearInterval(Pr.current),zn.current&&yt&&(zn.current.onstop=()=>{var Z;if(P&&Be.current.length>0){const pe=new Blob(Be.current,{type:"audio/mp3"}),nt=Math.floor(Qe/60),on=Qe%60;i({type:"audio",file:pe,audioDuration:`${nt}:${on.toString().padStart(2,"0")}`},x==null?void 0:x.id),D(null)}(Z=zn.current)==null||Z.stream.getTracks().forEach(pe=>pe.stop())},zn.current.stop()),ut(!1),W(0)},Bt=(P,Z="image")=>{if(P){const pe=(P.size/1024/1024).toFixed(2)+" MB";i({type:Z,file:P,fileName:P.name,fileSize:pe,text:Z==="image"?"":P.name},x==null?void 0:x.id),D(null),qe(!1)}},_n=P=>{P.preventDefault(),P.stopPropagation(),et(!1);const Z=P.dataTransfer.files;if(Z&&Z.length>0){const pe=Z[0],nt=pe.type.startsWith("image/");Bt(pe,nt?"image":"file")}},sn=async()=>{L&&r==="owner"&&confirm("              .")&&await UP()},ir=async P=>{const Z=prompt("    ");if(Z)try{await RP(P.id,P.text||(P.type==="image"?"":""),P.senderId,P.senderName||"",n,Z),alert("           .")}catch(pe){console.error(pe),alert("   .")}v(null)},qr=(P,Z)=>{var pe;if(P)if(J===Z)(pe=$e.current)==null||pe.pause(),ne(null);else{$e.current&&$e.current.pause();const nt=new Audio(P);$e.current=nt,ne(Z),nt.play(),nt.onended=()=>ne(null)}},or=P=>new Date(P).toLocaleTimeString("fa-IR",{hour:"2-digit",minute:"2-digit"}),el=P=>{if(!P)return"";const Z=new Date(P),pe=Date.now()-Z.getTime();return pe<12e4?"":pe<36e5?`  ${Math.floor(pe/6e4)}  `:pe<864e5?`  ${Math.floor(pe/36e5)}  `:"  "},ei=()=>j==="default"?{}:j.startsWith("http")||j.startsWith("data")?{backgroundImage:`url(${j})`,backgroundSize:"cover",backgroundPosition:"center"}:{backgroundColor:j},tl=P=>{if(!Et||!P)return P;const Z=new RegExp(`(${dq(Et)})`,"gi");return P.split(Z).map((nt,on)=>nt.toLowerCase()===Et.toLowerCase()?c.jsx("span",{className:"bg-yellow-300 text-black rounded px-0.5",children:nt},on):nt)},jr=t.id==="saved"||r==="admin"||r==="owner";return c.jsxs("div",{className:"h-full flex flex-col relative bg-telegram-bg dark:bg-telegram-bgDark overflow-hidden",onDragOver:P=>{P.preventDefault(),et(!0)},onDragLeave:P=>{P.preventDefault(),P.currentTarget.contains(P.relatedTarget)||et(!1)},onDrop:_n,children:[Re&&c.jsxs("div",{className:"absolute inset-0 z-50 bg-telegram-primary/80 backdrop-blur-sm flex flex-col items-center justify-center text-white animate-fade-in",children:[c.jsx(gy,{size:64,className:"mb-4 animate-bounce"}),c.jsx("h2",{className:"text-2xl font-bold",children:"    "})]}),me&&c.jsx(oq,{imageUrl:me,onClose:()=>he(null)}),c.jsx("input",{type:"file",ref:Cr,className:"hidden",accept:"image/*",onChange:P=>{var Z;return Bt((Z=P.target.files)==null?void 0:Z[0],"image")}}),c.jsx("input",{type:"file",ref:ws,className:"hidden",onChange:P=>{var Z;return Bt((Z=P.target.files)==null?void 0:Z[0],"file")}}),c.jsx("div",{className:"absolute inset-0 z-0",style:ei(),children:j==="default"&&c.jsx("div",{className:"absolute inset-0 chat-bg-pattern opacity-100"})}),t.status==="connecting"&&c.jsx("div",{className:"absolute top-16 left-0 right-0 bg-red-500/90 text-white text-xs py-1 text-center z-20",children:"  ..."}),c.jsxs("div",{className:"relative z-10 flex flex-col shrink-0 bg-white/95 dark:bg-telegram-bgDark/95 backdrop-blur-md border-b border-telegram-border dark:border-telegram-borderDark shadow-sm",children:[c.jsx("div",{className:"flex items-center justify-between px-2 py-2 h-16",children:Me?c.jsxs("div",{className:"flex-1 flex items-center gap-2 animate-fade-in w-full",children:[c.jsx("button",{onClick:()=>dt(!1),className:"p-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:c.jsx(kn,{size:24})}),c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("input",{ref:sr,value:Et,onChange:P=>Y(P.target.value),placeholder:"   ...",className:"w-full bg-gray-100 dark:bg-white/10 text-gray-900 dark:text-white rounded-lg pl-3 pr-10 py-2 text-sm outline-none focus:ring-2 focus:ring-telegram-primary"}),c.jsx(zh,{size:16,className:"absolute right-3 top-3 text-gray-400"})]}),c.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-500 font-mono w-16 justify-center",children:de.length>0?c.jsxs("span",{children:[C+1," / ",de.length]}):c.jsx("span",{children:"0 / 0"})}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:F,disabled:de.length===0,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full disabled:opacity-30",children:c.jsx($T,{size:20})}),c.jsx("button",{onClick:ie,disabled:de.length===0,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full disabled:opacity-30",children:c.jsx(Uh,{size:20})})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center gap-2 overflow-hidden cursor-pointer flex-1",onClick:b,children:[g&&c.jsx("button",{onClick:P=>{P.stopPropagation(),m()},className:"p-2 -mr-2 text-gray-500 dark:text-gray-300",children:c.jsx(Lu,{size:22})}),c.jsx("img",{src:t.avatar||"",alt:"",className:"w-10 h-10 rounded-full bg-gray-200 object-cover shrink-0"}),c.jsxs("div",{className:"flex flex-col overflow-hidden",children:[c.jsx("h2",{className:"font-bold text-gray-900 dark:text-white truncate text-base",children:t.name}),c.jsx("span",{className:`text-xs truncate ${t.status==="online"?"text-telegram-primary":"text-gray-500"}`,children:t.id==="saved"?"  ":t.status==="online"?"":el(t.lastSeen)})]})]}),c.jsxs("div",{className:"hidden md:flex items-center gap-1 text-[10px] text-gray-400 font-mono mr-2 px-2 py-1 bg-gray-100 dark:bg-white/5 rounded-full",title:"  (Ping)",children:[c.jsx(aI,{size:12,className:Ne<100?"text-green-500":"text-yellow-500"}),c.jsxs("span",{children:[Ne,"ms"]})]}),c.jsxs("div",{className:"flex items-center text-gray-500 gap-1",children:[c.jsx("button",{onClick:P=>{P.stopPropagation(),dt(!0)},className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-gray-500",title:"  ",children:c.jsx(zh,{size:20})}),L&&r==="owner"&&c.jsx("button",{onClick:P=>{P.stopPropagation(),sn()},className:"p-2 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full text-red-500",title:"  ",children:c.jsx(zu,{size:20})}),c.jsx("button",{onClick:P=>{P.stopPropagation(),A()},className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full text-telegram-primary",children:c.jsx(Da,{size:20})}),c.jsx("button",{className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full",children:c.jsx(eI,{size:20})})]})]})}),s&&c.jsxs("div",{className:"flex justify-between items-center px-4 py-2 bg-gray-50 dark:bg-black/20 border-t border-gray-100 dark:border-white/5 cursor-pointer hover:bg-gray-100 dark:hover:bg-black/30 transition-colors",onClick:fe,children:[c.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[c.jsx("div",{className:"w-1 self-stretch bg-telegram-primary rounded-full"}),c.jsxs("div",{className:"flex flex-col overflow-hidden",children:[c.jsx("span",{className:"text-xs font-bold text-telegram-primary truncate",children:"  "}),c.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-300 truncate",children:s.text||(s.type==="image"?"":"")})]})]}),jr&&c.jsx("button",{onClick:P=>{P.stopPropagation(),h()},className:"p-1 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full text-gray-500",children:c.jsx(kn,{size:16})})]})]}),c.jsxs("div",{ref:ao,className:"relative z-10 flex-1 overflow-y-auto p-2 sm:p-4 flex flex-col gap-1.5 scroll-smooth",onScroll:P=>ct(P.currentTarget.scrollHeight-P.currentTarget.scrollTop-P.currentTarget.clientHeight>200),children:[e.map((P,Z)=>{const pe=P.senderId==="me",nt=!e[Z+1]||e[Z+1].senderId!==P.senderId,on=Bn&&!pe&&(!e[Z-1]||e[Z-1].senderId!==P.senderId),ti=de.includes(P.id),Wc=de[C]===P.id,Nn=P.senderRole==="owner",lo=P.senderRole==="admin";let Rn="px-3 py-2 rounded-2xl shadow-sm text-base break-words border min-w-[4rem] relative transition-all ";return Wc?Rn+="ring-4 ring-yellow-400 dark:ring-yellow-500/50 ":ti&&(Rn+="ring-2 ring-yellow-200 dark:ring-yellow-500/20 "),Nn?Rn+="bg-gradient-to-br from-amber-50 to-yellow-100 dark:from-yellow-900/40 dark:to-amber-800/40 text-gray-900 dark:text-white border-amber-400 dark:border-amber-600 shadow-[0_0_15px_rgba(251,191,36,0.3)] ring-1 ring-amber-300 dark:ring-amber-700 ":lo?Rn+="bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-800 dark:to-blue-900/30 text-gray-900 dark:text-white border-blue-400 dark:border-blue-600 shadow-[0_0_10px_rgba(59,130,246,0.2)] ring-1 ring-blue-300 dark:ring-blue-700 ":pe?Rn+="bg-telegram-chatOut dark:bg-telegram-chatOutDark text-black dark:text-white border-transparent ":Rn+="bg-white dark:bg-telegram-chatInDark text-black dark:text-white border-transparent ",pe?Rn+="rounded-bl-none ":Rn+="rounded-br-none ",c.jsxs("div",{id:`msg-${P.id}`,className:`flex ${pe?"flex-row-reverse":"flex-row"} items-end gap-2 max-w-[90%] md:max-w-[75%] ${pe?"self-end":"self-start"} group animate-slide-in`,children:[Bn&&!pe&&c.jsx("div",{className:"w-8 h-8 shrink-0 mb-1 cursor-pointer hover:scale-105 transition-transform",onClick:()=>N&&N({id:P.senderId,name:P.senderName,avatar:P.senderAvatar,type:"user"}),children:nt&&c.jsx("img",{src:P.senderAvatar||"https://via.placeholder.com/32",className:"w-8 h-8 rounded-full shadow-md"})}),c.jsxs("div",{className:"flex flex-col relative",onContextMenu:an=>{an.preventDefault(),an.stopPropagation(),v({x:an.clientX,y:an.clientY,message:P,isMe:pe})},children:[P.isSticker?c.jsx("img",{src:P.imageUrl,className:"w-32 h-32 object-contain cursor-pointer drop-shadow-md",onClick:()=>he(P.imageUrl)}):c.jsxs("div",{className:Rn,children:[on&&c.jsxs("div",{className:"text-xs font-bold mb-1 flex items-center gap-1 cursor-pointer hover:underline",style:{color:cq(P.senderId)},onClick:()=>N&&N({id:P.senderId,name:P.senderName,avatar:P.senderAvatar,type:"user"}),children:[P.senderName,P.senderRole==="owner"&&c.jsxs("span",{className:"flex items-center gap-0.5 text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/50 px-1 rounded-full text-[9px] border border-amber-200",children:[c.jsx(py,{size:10,fill:"currentColor"}),"  "]}),P.senderRole==="admin"&&c.jsxs("span",{className:"flex items-center gap-0.5 text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/50 px-1 rounded-full text-[9px] border border-blue-200",children:[c.jsx(vy,{size:10,fill:"currentColor"})," "]})]}),pe&&(Nn||lo)&&c.jsxs("div",{className:"text-[10px] font-bold mb-1 flex items-center gap-1 opacity-80 border-b border-black/10 dark:border-white/10 pb-1",children:[Nn&&c.jsxs("span",{className:"flex items-center gap-0.5 text-amber-700 dark:text-amber-300",children:[c.jsx(py,{size:10,fill:"currentColor"}),"   ()"]}),lo&&c.jsxs("span",{className:"flex items-center gap-0.5 text-blue-700 dark:text-blue-300",children:[c.jsx(vy,{size:10,fill:"currentColor"}),"  ()"]})]}),P.replyToId&&c.jsx("div",{className:"mb-1 pl-2 border-r-2 border-telegram-primary text-xs opacity-70 truncate bg-black/5 dark:bg-white/5 rounded p-1",children:"   "}),P.type==="image"&&c.jsx("img",{src:P.imageUrl,className:"rounded-lg mb-1 max-w-full max-h-80 object-cover",onClick:()=>he(P.imageUrl)}),P.type==="audio"&&c.jsxs("div",{className:"flex items-center gap-2 p-1 min-w-[150px]",children:[c.jsx("button",{onClick:()=>qr(P.fileUrl||P.imageUrl,P.id),className:`p-2 rounded-full ${pe?"bg-white text-green-600":"bg-telegram-primary text-white"}`,children:J===P.id?c.jsx(tI,{size:16}):c.jsx(iI,{size:16})}),c.jsxs("div",{className:"flex flex-col w-full",children:[c.jsx("div",{className:"h-1 bg-gray-300 rounded-full overflow-hidden w-full",children:c.jsx("div",{className:`h-full bg-telegram-primary ${J===P.id?"w-full animate-pulse":"w-0"}`})}),c.jsx("span",{className:"text-[10px] mt-1 opacity-70",children:P.audioDuration})]})]}),P.type==="file"&&c.jsxs("div",{className:"flex items-center gap-3 p-2 bg-black/5 dark:bg-white/5 rounded-lg max-w-xs",children:[c.jsx("div",{className:`p-3 rounded-full ${pe?"bg-telegram-primary/20 text-telegram-primary":"bg-gray-200 text-gray-600"}`,children:c.jsx(Fh,{size:24})}),c.jsxs("div",{className:"flex flex-col overflow-hidden",children:[c.jsx("span",{className:"font-bold text-sm truncate",children:P.fileName}),c.jsx("span",{className:"text-xs opacity-60",children:P.fileSize||"File"})]}),P.fileUrl&&c.jsx("a",{href:P.fileUrl,download:!0,target:"_blank",rel:"noreferrer",className:"p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full",children:c.jsx(cp,{size:20})})]}),P.type==="text"&&c.jsx("div",{dir:"auto",className:`whitespace-pre-wrap leading-snug ${Nn?"font-medium":""}`,children:Me?tl(P.text):P.text}),c.jsxs("div",{className:"flex items-center justify-end gap-1 mt-1 opacity-60 text-[10px] select-none",children:[P.edited&&c.jsx("span",{className:"mr-1 italic",children:" "}),c.jsx("span",{children:or(P.timestamp)}),pe&&(P.status==="read"?c.jsx(BT,{size:12,className:"text-blue-500"}):c.jsx(Vu,{size:12})),P.status==="error"&&c.jsx("span",{className:"text-red-500 font-bold",children:"!"})]})]}),P.reactions&&Object.keys(P.reactions).length>0&&c.jsx("div",{className:"flex flex-wrap gap-1 mt-1 px-1",children:Object.entries(P.reactions).map(([an,nl])=>c.jsxs("button",{onClick:()=>p(P.id,an),className:"bg-white dark:bg-gray-800 rounded-full px-1.5 py-0.5 text-xs shadow-sm border border-gray-100 dark:border-gray-700",children:[an," ",c.jsx("span",{className:"font-bold",children:nl.length})]},an))})]})]},P.id)}),c.jsx("div",{ref:rn})]}),vt&&!Me&&c.jsx("button",{onClick:()=>{var P;return(P=rn.current)==null?void 0:P.scrollIntoView({behavior:"smooth"})},className:"absolute bottom-20 right-4 z-20 bg-white dark:bg-gray-700 p-2 rounded-full shadow-lg border text-gray-500",children:c.jsx(Uh,{size:24})}),c.jsxs("div",{className:"relative z-10 bg-white dark:bg-telegram-bgDark p-2 border-t border-gray-200 dark:border-white/10 shrink-0",children:[x&&c.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-white/5 p-2 rounded-t-lg mb-1 text-sm border-l-4 border-telegram-primary",children:[c.jsxs("div",{className:"flex flex-col ml-2",children:[c.jsx("span",{className:"text-telegram-primary font-bold",children:"  "}),c.jsx("span",{className:"truncate opacity-70 max-w-[200px]",children:x.text||""})]}),c.jsx("button",{onClick:()=>D(null),children:c.jsx(kn,{size:16})})]}),c.jsx("div",{className:"flex items-end gap-2 max-w-5xl mx-auto",children:yt?c.jsxs("div",{className:"flex-1 bg-telegram-secondary dark:bg-telegram-secondaryDark rounded-full p-3 flex items-center justify-between animate-pulse",children:[c.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[c.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-ping"})," ",Math.floor(Qe/60),":",(Qe%60).toString().padStart(2,"0")]}),c.jsx("span",{onClick:()=>we(!1),className:"cursor-pointer text-gray-500",children:""}),c.jsx(va,{size:24,className:"text-telegram-primary cursor-pointer rotate-180",onClick:()=>we(!0)})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>qe(!T),className:"p-3 text-gray-500 hover:text-telegram-primary",children:c.jsx(gy,{size:24,className:"rotate-45"})}),T&&c.jsxs("div",{className:"absolute bottom-20 right-2 bg-white dark:bg-gray-800 rounded-xl shadow-xl p-2 flex flex-col gap-2 z-50 animate-fade-in",children:[c.jsxs("button",{onClick:()=>{var P;return(P=Cr.current)==null?void 0:P.click()},className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg text-gray-800 dark:text-white",children:[c.jsx(ow,{size:18})," "]}),c.jsxs("button",{onClick:()=>{var P;return(P=ws.current)==null?void 0:P.click()},className:"flex items-center gap-2 px-4 py-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-lg text-gray-800 dark:text-white",children:[c.jsx(Fh,{size:18})," "]})]}),c.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-black/20 rounded-2xl flex items-center relative",children:[c.jsx("textarea",{ref:Zs,value:E,onChange:ae,onKeyDown:P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),le())},placeholder:"...",className:"w-full bg-transparent p-3 max-h-32 resize-none outline-none text-gray-900 dark:text-white",rows:1}),c.jsx("button",{onClick:()=>I(!k),className:"p-2 text-gray-400 hover:text-telegram-primary",children:c.jsx(uI,{size:24})})]}),E.trim()?c.jsx("button",{onClick:le,className:"p-3 bg-telegram-primary rounded-full text-white shadow-lg hover:scale-105 transition-transform",children:c.jsx(va,{size:20,className:"rotate-180"})}):c.jsx("button",{onClick:ye,className:"p-3 bg-gray-200 dark:bg-white/10 rounded-full text-gray-500 hover:bg-gray-300 dark:hover:bg-white/20 transition-colors",children:c.jsx(uw,{size:24})}),k&&c.jsxs("div",{className:"absolute bottom-20 left-4 bg-white dark:bg-gray-800 shadow-2xl rounded-xl border w-72 h-64 overflow-y-auto p-2 grid grid-cols-6 gap-2 z-50",onClick:P=>P.stopPropagation(),children:[c.jsxs("div",{className:"col-span-6 flex border-b mb-2 pb-1",children:[c.jsx("button",{onClick:()=>R("emoji"),className:`flex-1 ${S==="emoji"?"text-telegram-primary font-bold":""}`,children:""}),c.jsx("button",{onClick:()=>R("sticker"),className:`flex-1 ${S==="sticker"?"text-telegram-primary font-bold":""}`,children:""})]}),S==="emoji"?aq.map(P=>c.jsx("button",{onClick:()=>_(Z=>Z+P),className:"text-2xl hover:bg-gray-100 rounded",children:P},P)):uq.map((P,Z)=>c.jsx("img",{src:P,onClick:()=>_e(P),className:"w-full h-auto hover:scale-110 transition-transform cursor-pointer"},Z))]})]})})]}),w&&c.jsxs("div",{className:"fixed z-[60] bg-white dark:bg-gray-800 rounded-lg shadow-xl p-2 min-w-[150px] animate-fade-in border dark:border-gray-700",style:{top:w.y,left:w.x},children:[c.jsx("div",{className:"flex gap-1 mb-2 bg-gray-50 dark:bg-black/20 p-1 rounded justify-center",children:lq.map(P=>c.jsx("button",{onClick:()=>{p(w.message.id,P),v(null)},className:"hover:scale-125 transition-transform",children:P},P))}),c.jsxs("button",{onClick:()=>{D(w.message),v(null)},className:"w-full text-right p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded flex gap-2",children:[c.jsx(oI,{size:16})," "]}),c.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(w.message.text||""),v(null)},className:"w-full text-right p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded flex gap-2",children:[c.jsx(HT,{size:16})," "]}),jr&&c.jsxs("button",{onClick:()=>{u(w.message),v(null)},className:"w-full text-right p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded flex gap-2 border-t border-gray-100 dark:border-gray-700 mt-1",children:[c.jsx(sI,{size:16}),"  "]}),!w.isMe&&c.jsxs("button",{onClick:()=>ir(w.message),className:"w-full text-right p-2 hover:bg-red-50 text-red-500 rounded flex gap-2 border-t border-gray-100 dark:border-gray-700 mt-1",children:[c.jsx(nu,{size:16})," "]}),(w.isMe||r==="owner"||r==="admin")&&c.jsxs("button",{onClick:()=>{l(w.message.id),v(null)},className:"w-full text-right p-2 hover:bg-red-50 text-red-500 rounded flex gap-2",children:[c.jsx(zu,{size:16})," ",w.isMe?"":" ()"]}),w.isMe&&c.jsxs("button",{onClick:()=>{U(w.message),_(w.message.text),v(null)},className:"w-full text-right p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded flex gap-2",children:[c.jsx(nI,{size:16})," "]})]})]})},fq=({contact:t,onClose:e,onStartChat:n})=>c.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-telegram-secondaryDark border-l border-telegram-border dark:border-telegram-borderDark overflow-y-auto animate-slide-in",children:[c.jsxs("div",{className:"flex items-center gap-4 p-4 sticky top-0 bg-white/80 dark:bg-telegram-secondaryDark/80 backdrop-blur-md z-10",children:[c.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 dark:hover:text-gray-200",children:c.jsx(kn,{size:24})}),c.jsx("span",{className:"font-semibold text-lg",children:" "})]}),c.jsxs("div",{className:"px-6 py-4 flex flex-col items-center border-b-8 border-gray-100 dark:border-black/20",children:[c.jsx("img",{src:t.avatar,alt:t.name,className:"w-28 h-28 rounded-full object-cover mb-4 shadow-lg"}),c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-1",children:t.name}),c.jsx("p",{className:"text-gray-500 text-sm",children:t.status==="online"?c.jsx("span",{className:"text-telegram-primary",children:""}):`  ${t.lastSeen||" "}`}),n&&c.jsxs("button",{onClick:()=>n(t),className:"mt-4 flex items-center gap-2 bg-telegram-primary hover:bg-telegram-primaryDark text-white px-6 py-2 rounded-full font-medium transition-colors",children:[c.jsx(Uu,{size:18})," "]})]}),c.jsxs("div",{className:"p-4 space-y-5 border-b-8 border-gray-100 dark:border-black/20",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"mt-1 text-gray-500",children:c.jsx(Da,{size:22})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-900 dark:text-white text-base",children:t.phone||"---"}),c.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:""})]})]}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"mt-1 text-gray-500",children:c.jsx(iw,{size:22})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-900 dark:text-white text-base",children:t.username||"---"}),c.jsx("p",{className:"text-gray-500 text-xs mt-0.5",children:" "})]})]}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"mt-1 text-gray-500",children:c.jsx(up,{size:22})}),c.jsxs("div",{className:"flex-1 flex justify-between items-center",children:[c.jsx("p",{className:"text-gray-900 dark:text-white text-base",children:""}),c.jsx("div",{className:"w-10 h-5 bg-telegram-primary rounded-full relative cursor-pointer",children:c.jsx("div",{className:"absolute left-1 top-1 w-3 h-3 bg-white rounded-full"})})]})]}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"mt-1 text-gray-500",children:c.jsx(Fh,{size:22})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-900 dark:text-white text-base leading-snug",children:t.bio||" "}),c.jsx("p",{className:"text-gray-500 text-xs mt-1",children:""})]})]})]}),c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-2",children:[c.jsx("button",{className:"flex-1 py-2 text-telegram-primary border-b-2 border-telegram-primary font-medium text-sm",children:""}),c.jsx("button",{className:"flex-1 py-2 text-gray-500 font-medium text-sm hover:text-gray-700 dark:hover:text-gray-300",children:""}),c.jsx("button",{className:"flex-1 py-2 text-gray-500 font-medium text-sm hover:text-gray-700 dark:hover:text-gray-300",children:""})]}),c.jsx("div",{className:"grid grid-cols-3 gap-1",children:[1,2,3,4,5,6].map(r=>c.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-800 cursor-pointer hover:opacity-80 transition-opacity",children:c.jsx("img",{src:`https://picsum.photos/200/200?random=${r+10}`,className:"w-full h-full object-cover",alt:"media"})},r))})]})]}),pq=[{id:"default",name:"",value:"default",color:"#8db5d0"},{id:"blue",name:" ",value:"#dbeafe",color:"#dbeafe"},{id:"green",name:" ",value:"#dcfce7",color:"#dcfce7"},{id:"dark",name:"",value:"#18181b",color:"#18181b"},{id:"pink",name:"",value:"#fce7f3",color:"#fce7f3"},{id:"pattern1",name:" ",value:"https://img.freepik.com/free-vector/hand-drawn-contact-sheet-template_23-2150937449.jpg",color:"#e5e7eb"},{id:"pattern2",name:" ",value:"https://img.freepik.com/free-vector/seamless-pattern-with-cute-cats_23-2147665476.jpg",color:"#e5e7eb"}],mq=({isOpen:t,onClose:e,userProfile:n,onSave:r,wallpaper:s,onSaveWallpaper:i})=>{const[o,l]=M.useState(n),[u,h]=M.useState("profile"),[p,m]=M.useState(s),[g,b]=M.useState(""),[N,j]=M.useState(!1),A=M.useRef(null);if(M.useEffect(()=>{l(n),m(s)},[n,s,t]),!t)return null;const E=()=>{r(o),i(p),e()},_=async x=>{var $;const D=($=x.target.files)==null?void 0:$[0];if(D){j(!0);try{const U=`avatars/${n.uid}/${Date.now()}_${D.name}`,w=await B1(D,U);l(v=>({...v,avatar:w}))}catch(U){console.error("Storage failed, attempting base64 fallback",U);try{if(D.size>1024*1024)alert("  :             .");else{const w=new FileReader;w.onloadend=()=>{const v=w.result;l(k=>({...k,avatar:v}))},w.readAsDataURL(D)}}catch{alert("    .")}}finally{j(!1)}}};return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-telegram-secondaryDark w-full max-w-md rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[c.jsxs("div",{className:"flex flex-col border-b border-gray-100 dark:border-white/10",children:[c.jsxs("div",{className:"flex items-center justify-between p-4",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:""}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx(kn,{size:24,className:"text-gray-500 dark:text-gray-300"})})]}),c.jsxs("div",{className:"flex px-4",children:[c.jsx("button",{onClick:()=>h("profile"),className:`flex-1 pb-3 text-sm font-medium border-b-2 transition-colors ${u==="profile"?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(Ni,{size:18}),""]})}),c.jsx("button",{onClick:()=>h("chat"),className:`flex-1 pb-3 text-sm font-medium border-b-2 transition-colors ${u==="chat"?"border-telegram-primary text-telegram-primary":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(ow,{size:18})," "]})})]})]}),c.jsx("div",{className:"overflow-y-auto flex-1 p-0",children:u==="profile"?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"relative bg-telegram-secondary dark:bg-black/20 p-6 flex flex-col items-center justify-center gap-4",children:[c.jsx("input",{type:"file",ref:A,className:"hidden",accept:"image/*",onChange:_}),c.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>{var x;return!N&&((x=A.current)==null?void 0:x.click())},children:[c.jsx("div",{className:"w-24 h-24 rounded-full bg-telegram-primary text-white flex items-center justify-center text-3xl font-bold shadow-lg overflow-hidden border-4 border-white dark:border-gray-700",children:N?c.jsx(dp,{className:"animate-spin",size:32}):o.avatar?c.jsx("img",{src:o.avatar,alt:"Profile",className:"w-full h-full object-cover"}):o.name.charAt(0)}),c.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(zT,{size:24,className:"text-white"})})]}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"     "})})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:c.jsx(Ni,{size:20})}),c.jsx("input",{type:"text",value:o.name,onChange:x=>l({...o,name:x.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white",placeholder:" "}),c.jsx("label",{className:"text-xs text-telegram-primary mt-1 block",children:" ()"})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:c.jsx(GT,{size:20})}),c.jsx("input",{type:"text",value:o.bio,onChange:x=>l({...o,bio:x.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white",placeholder:""}),c.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"   "})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:c.jsx(iw,{size:20})}),c.jsx("input",{type:"text",value:o.username,onChange:x=>l({...o,username:x.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white dir-ltr text-right",placeholder:" "}),c.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"  "})]}),c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"absolute top-3 right-0 text-gray-400",children:c.jsx(Da,{size:20})}),c.jsx("input",{type:"tel",value:o.phone,onChange:x=>l({...o,phone:x.target.value}),className:"w-full bg-transparent border-b border-gray-300 dark:border-gray-700 py-3 pr-8 focus:outline-none focus:border-telegram-primary transition-colors text-gray-900 dark:text-white dir-ltr text-right",placeholder:" "}),c.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:" "})]})]})]}):c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"       ."}),c.jsx("div",{className:"grid grid-cols-3 gap-3",children:pq.map(x=>c.jsxs("div",{onClick:()=>m(x.value),className:`
                                    relative aspect-[3/4] rounded-lg cursor-pointer overflow-hidden border-2 transition-all shadow-sm
                                    ${p===x.value?"border-telegram-primary scale-105":"border-transparent hover:scale-105"}
                                `,children:[c.jsx("div",{className:"w-full h-full",style:{backgroundColor:x.color,backgroundImage:x.value.startsWith("http")?`url(${x.value})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:x.value==="default"&&c.jsx("div",{className:"w-full h-full opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7z' fill='%23ffffff' fill-opacity='0.4' fill-rule='evenodd'/%3E%3C/svg%3E")`}})}),c.jsx("div",{className:"absolute bottom-0 w-full bg-black/40 text-white text-[10px] text-center py-1",children:x.name}),p===x.value&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:c.jsx(Vu,{className:"text-white drop-shadow-md",size:32})})]},x.id))}),c.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-white/10",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"  "}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",value:g,onChange:x=>b(x.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 bg-gray-100 dark:bg-white/5 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-telegram-primary"}),c.jsx("button",{onClick:()=>{g&&m(g)},className:"bg-telegram-secondary dark:bg-white/10 text-telegram-primary rounded-lg px-4 py-2 text-sm font-medium hover:bg-gray-200 dark:hover:bg-white/20",children:""})]})]})]})}),c.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-black/20 flex justify-end gap-3",children:[c.jsx("button",{onClick:e,className:"px-4 py-2 text-telegram-primary hover:bg-telegram-primary/10 rounded-lg transition-colors font-medium",children:""}),c.jsxs("button",{onClick:E,disabled:N,className:"px-6 py-2 bg-telegram-primary hover:bg-telegram-primaryDark disabled:opacity-50 text-white rounded-lg shadow-md hover:shadow-lg transition-all flex items-center gap-2",children:[c.jsx(Vu,{size:18})," "]})]})]})})},gq=({onClose:t,currentUserEmail:e,currentUserRole:n,onStartChat:r})=>{const[s,i]=M.useState("users"),[o,l]=M.useState([]),[u,h]=M.useState([]),[p,m]=M.useState([]),[g,b]=M.useState(!0),[N,j]=M.useState({isOpen:!1,targetUid:null}),[A,E]=M.useState({isOpen:!1,report:null}),[_,x]=M.useState({isOpen:!1,targetUid:null,targetName:""}),[D,$]=M.useState([]),[U,w]=M.useState(null),[v,k]=M.useState([]),[I,S]=M.useState(""),[R,T]=M.useState([]),[qe,yt]=M.useState("");M.useEffect(()=>{ut(),Qe();const C=CP(h),Ee=SP(m);return()=>{C(),Ee()}},[]);const ut=async()=>{b(!0);const C=await qP();l(C),b(!1)},Qe=async()=>{const C=await $1();T(C)},W=async(C,Ee,Ne)=>{if(n!=="owner"){alert("       .");return}const tt=o.find(rn=>rn.uid===C);if((tt==null?void 0:tt.email)===Tn.OWNER_EMAIL){alert("       .");return}await jP(C,Ne),l(o.map(rn=>rn.uid===C?{...rn,role:Ne}:rn))},J=async(C,Ee)=>{const Ne=o.find(tt=>tt.uid===C);if((Ne==null?void 0:Ne.role)==="owner"){alert("     .");return}if((Ne==null?void 0:Ne.role)==="admin"&&n!=="owner"){alert("      .");return}await DP(C,Ee||!1),l(o.map(tt=>tt.uid===C?{...tt,isBanned:!Ee,banExpiresAt:void 0}:tt))},ne=async(C,Ee)=>{const Ne=o.find(tt=>tt.uid===C);if((Ne==null?void 0:Ne.role)==="owner"||(Ne==null?void 0:Ne.role)==="admin"&&n!=="owner"){alert("     .");return}await OP(C,Ee),alert(`   ${Ee}   .`),ut()},me=async(C,Ee)=>{const Ne=C||N.targetUid,tt=Ee||I;!Ne||!tt.trim()||(await BP(Ne,"  ",tt),Ee||(j({isOpen:!1,targetUid:null}),S(""),alert("  .")))},he=async()=>{if(!qe.trim())return;const C=[...R,qe.trim()];T(C),yt(""),await W0(C)},Re=async C=>{const Ee=R.filter(Ne=>Ne!==C);T(Ee),await W0(Ee)},et=async C=>{if(C.role==="admin"||C.role==="owner")return;x({isOpen:!0,targetUid:C.uid,targetName:C.name}),$([]),w(null),k([]);const Ee=await FP(C.uid);$(Ee)},vt=async C=>{if(!_.targetUid)return;w(C);const Ee=await zP(_.targetUid,C);k(Ee)},ct=async C=>{confirm("    ")&&await PP(C,n==="owner"?" ":"")},Me=async C=>{confirm("          .")&&(await $0(C),E({isOpen:!1,report:null}))},dt=async C=>{confirm(`    ${C.userName}  `)&&(await J(C.userId,!0),await B0(C.id,!0),alert("       ."))},Et=async C=>{confirm("   ")&&await B0(C,!1)},Y=async C=>{confirm(" ")&&await NP(C)},de=u.filter(C=>n==="owner"?!0:C.status==="pending"),Se=p.filter(C=>C.status==="pending");return c.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-5xl h-[85vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden",children:[c.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-800 flex justify-between items-center border-b border-gray-200 dark:border-gray-700",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Fu,{className:"text-red-600",size:24}),c.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"  "})]}),c.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:c.jsx(kn,{size:24})})]}),c.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:[c.jsx("button",{onClick:()=>i("users"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="users"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(Ni,{size:18})," "]})}),c.jsx("button",{onClick:()=>i("reports"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="reports"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(nu,{size:18})," ",u.filter(C=>C.status==="pending").length>0&&c.jsx("span",{className:"bg-red-500 text-white text-[10px] px-1.5 rounded-full",children:u.filter(C=>C.status==="pending").length})]})}),c.jsx("button",{onClick:()=>i("appeals"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="appeals"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(hy,{size:18})," ",Se.length>0&&c.jsx("span",{className:"bg-orange-500 text-white text-[10px] px-1.5 rounded-full",children:Se.length})]})}),c.jsx("button",{onClick:()=>i("filters"),className:`flex-1 py-3 px-4 font-medium text-sm transition-colors whitespace-nowrap ${s==="filters"?"bg-white dark:bg-gray-900 border-b-2 border-blue-500 text-blue-600":"bg-gray-50 dark:bg-gray-800 text-gray-500"}`,children:c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx(dw,{size:18}),"  "]})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:s==="users"?g?c.jsx("div",{className:"text-center py-10 text-gray-500",children:"    ..."}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"w-full text-right",children:[c.jsx("thead",{className:"text-xs text-gray-500 bg-gray-50 dark:bg-gray-800 uppercase",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3",children:""}),c.jsx("th",{className:"px-6 py-3",children:" / "}),c.jsx("th",{className:"px-6 py-3",children:""}),c.jsx("th",{className:"px-6 py-3",children:""}),c.jsx("th",{className:"px-6 py-3",children:""})]})}),c.jsx("tbody",{children:o.map(C=>c.jsxs("tr",{className:"bg-white dark:bg-gray-900 border-b dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[c.jsxs("td",{className:"px-6 py-4 flex items-center gap-3",children:[c.jsx("img",{src:C.avatar,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:C.name}),C.email===Tn.OWNER_EMAIL&&c.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-0.5 rounded-full w-fit",children:"Owner"})]})]}),c.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{children:C.email}),c.jsx("span",{className:"text-xs",children:C.phone}),c.jsx("span",{className:"text-[10px] opacity-50",children:C.uid})]})}),c.jsx("td",{className:"px-6 py-4",children:n==="owner"&&C.email!==Tn.OWNER_EMAIL?c.jsxs("select",{value:C.role,onChange:Ee=>W(C.uid,C.role,Ee.target.value),className:"bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",children:[c.jsx("option",{value:"user",children:""}),c.jsx("option",{value:"admin",children:""}),c.jsx("option",{value:"owner",children:" "})]}):c.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${C.role==="owner"?"bg-yellow-100 text-yellow-800":C.role==="admin"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:C.role==="owner"?" ":C.role==="admin"?"":""})}),c.jsx("td",{className:"px-6 py-4",children:C.isBanned?c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{className:"text-red-600 font-bold flex items-center gap-1",children:[c.jsx(bo,{size:14})," "]}),C.banExpiresAt&&c.jsx("span",{className:"text-xs text-orange-500",children:" "})]}):c.jsxs("span",{className:"text-green-600 font-bold flex items-center gap-1",children:[c.jsx(ql,{size:14})," "]})}),c.jsxs("td",{className:"px-6 py-4 flex items-center gap-2",children:[C.email!==Tn.OWNER_EMAIL&&(n==="owner"||n==="admin"&&C.role==="user")&&c.jsx("button",{onClick:()=>J(C.uid,C.isBanned||!1),title:C.isBanned?" ":" ",className:`p-2 rounded-lg text-white ${C.isBanned?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:c.jsx(bo,{size:16})}),c.jsx("button",{onClick:()=>j({isOpen:!0,targetUid:C.uid}),title:"  ",className:"p-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white",children:c.jsx(up,{size:16})}),c.jsx("button",{onClick:()=>{r(C),t()},title:"",className:"p-2 rounded-lg bg-teal-500 hover:bg-teal-600 text-white",children:c.jsx(Uu,{size:16})}),(n==="owner"||n==="admin"&&C.role==="user")&&c.jsx("button",{onClick:()=>et(C),title:"  (Ghost Mode)",className:`p-2 rounded-lg text-white ${C.role==="admin"||C.role==="owner"?"bg-gray-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,disabled:C.role==="admin"||C.role==="owner",children:c.jsx(my,{size:16})})]})]},C.uid))})]})}):s==="appeals"?c.jsxs("div",{className:"space-y-4",children:[Se.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-10 opacity-50",children:[c.jsx(hy,{size:48,className:"mb-2"}),c.jsx("p",{children:"      ."})]}):Se.map(C=>c.jsxs("div",{className:"p-4 rounded-xl border border-orange-200 bg-orange-50 dark:bg-orange-900/10 dark:border-orange-800 flex flex-col gap-3",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[c.jsx(Ni,{size:16})," ",C.userName]}),c.jsx("span",{className:"text-xs text-gray-500 font-mono",children:C.userId})]}),c.jsx("span",{className:"text-xs text-gray-400",children:new Date(C.createdAt).toLocaleString("fa-IR")})]}),c.jsx("div",{className:"bg-white dark:bg-black/20 p-3 rounded-lg text-sm leading-relaxed text-gray-800 dark:text-gray-200",children:C.message}),c.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[c.jsx("button",{onClick:()=>Et(C.id),className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg text-sm hover:bg-red-200",children:" "}),c.jsxs("button",{onClick:()=>dt(C),className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700 flex items-center gap-2 shadow-sm",children:[c.jsx(ql,{size:16}),"   "]})]})]},C.id)),p.filter(C=>C.status!=="pending").length>0&&c.jsxs("div",{className:"mt-8 border-t pt-4 dark:border-gray-700",children:[c.jsx("h4",{className:"text-sm font-bold text-gray-500 mb-4",children:" "}),p.filter(C=>C.status!=="pending").map(C=>c.jsxs("div",{className:"p-3 mb-2 rounded border dark:border-gray-700 opacity-60 hover:opacity-100 transition-opacity bg-gray-50 dark:bg-gray-800 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-sm",children:C.userName}),c.jsx("span",{className:`mx-2 text-xs px-2 py-0.5 rounded-full ${C.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.status==="approved"?" ":" "})]}),c.jsx("button",{onClick:()=>Y(C.id),className:"text-red-400 hover:text-red-600",children:c.jsx(zu,{size:16})})]},C.id))]})]}):s==="reports"?c.jsx("div",{className:"space-y-4",children:de.length===0?c.jsx("p",{className:"text-center text-gray-500 py-10",children:"   ."}):de.map(C=>c.jsxs("div",{className:`p-4 rounded-xl border flex flex-col md:flex-row gap-4 ${C.status==="handled"?"bg-green-50 border-green-200 dark:bg-green-900/10":"bg-white border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[C.status==="pending"?c.jsxs("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[c.jsx(nu,{size:10})," "]}):c.jsxs("span",{className:"bg-green-100 text-green-600 text-xs px-2 py-0.5 rounded-full font-bold flex items-center gap-1",children:[c.jsx(Vu,{size:10}),"    ",C.handledBy]}),c.jsx("span",{className:"text-xs text-gray-400",children:new Date(C.createdAt).toLocaleString("fa-IR")})]}),c.jsxs("div",{className:"mb-2",children:[c.jsxs("p",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:[": ",c.jsx("span",{className:"font-mono text-xs opacity-70",children:C.reporterId})]}),c.jsxs("p",{className:"text-sm font-bold text-red-500",children:[": ",C.reportedUserName," ",c.jsxs("span",{className:"font-mono text-xs opacity-70 text-gray-400",children:["(",C.reportedUserId,")"]})]})]}),c.jsxs("div",{className:"bg-gray-100 dark:bg-black/20 p-2 rounded text-sm mb-2",children:[c.jsx("span",{className:"text-xs opacity-50 block mb-1",children:" :"}),C.messageContent]}),c.jsxs("div",{className:"text-xs text-red-500 bg-red-50 dark:bg-red-900/20 p-2 rounded inline-block",children:[": ",C.reason]})]}),c.jsxs("div",{className:"flex flex-row md:flex-col gap-2 justify-center border-t md:border-t-0 md:border-r border-gray-100 dark:border-gray-700 pt-2 md:pt-0 md:pr-4",children:[C.status==="pending"&&c.jsxs("button",{onClick:()=>E({isOpen:!0,report:C}),className:"flex items-center justify-center gap-2 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm",children:[c.jsx(QT,{size:16}),"  "]}),n==="owner"&&C.status==="handled"&&c.jsxs("button",{onClick:()=>Me(C.id),className:"flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm",children:[c.jsx(ql,{size:16}),"   "]})]})]},C.id))}):c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-sm text-yellow-800 flex items-start gap-3",children:[c.jsx(Rd,{className:"shrink-0"}),c.jsx("p",{children:"               (***)   ."})]}),c.jsxs("div",{className:"flex gap-2 mb-6",children:[c.jsx("input",{type:"text",value:qe,onChange:C=>yt(C.target.value),placeholder:"  ...",className:"flex-1 p-3 rounded-xl border bg-gray-50 dark:bg-gray-800 dark:border-gray-700 dark:text-white"}),c.jsx("button",{onClick:he,className:"bg-blue-600 text-white px-6 py-2 rounded-xl hover:bg-blue-700 transition-colors",children:""})]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:R.map((C,Ee)=>c.jsxs("div",{className:"bg-red-100 text-red-800 px-3 py-1 rounded-full flex items-center gap-2",children:[c.jsx("span",{children:C}),c.jsx("button",{onClick:()=>Re(C),className:"hover:text-red-900",children:c.jsx(kn,{size:14})})]},Ee))})]})}),N.isOpen&&c.jsx("div",{className:"absolute inset-0 z-[110] bg-black/70 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md shadow-2xl",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"    "}),c.jsx("textarea",{value:I,onChange:C=>S(C.target.value),placeholder:"   ...",className:"w-full h-32 p-3 border rounded-lg mb-4 bg-gray-50 dark:bg-gray-700 dark:border-gray-600 resize-none"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx("button",{onClick:()=>j({isOpen:!1,targetUid:null}),className:"px-4 py-2 text-gray-500",children:""}),c.jsxs("button",{onClick:()=>me(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg flex items-center gap-2",children:[c.jsx(va,{size:16})," "]})]})]})}),A.isOpen&&A.report&&c.jsx("div",{className:"absolute inset-0 z-[110] bg-black/80 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-y-auto max-h-[90vh]",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2 text-red-600",children:[c.jsx(Fu,{}),"   "]}),c.jsx("button",{onClick:()=>E({isOpen:!1,report:null}),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full",children:c.jsx(kn,{})})]}),c.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2 text-red-800 dark:text-red-200",children:[c.jsx(Rd,{size:24,className:"text-red-600"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold text-sm block",children:"  (  )"}),c.jsx("span",{className:"text-xs opacity-80",children:"          ."})]})]}),c.jsx("button",{onClick:()=>{confirm("        (  )   ")&&(J(A.report.reportedUserId,!1),J(A.report.reporterId,!1),alert("      ."))},className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-bold shadow-sm whitespace-nowrap",children:"  "})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[c.jsxs("div",{className:"border border-red-200 dark:border-red-900/50 bg-red-50 dark:bg-red-900/10 rounded-xl p-4",children:[c.jsxs("h4",{className:"font-bold text-red-700 dark:text-red-400 mb-3 flex items-center gap-2",children:[c.jsx(Ni,{size:18})," : ",A.report.reportedUserName]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("button",{onClick:()=>J(A.report.reportedUserId,!1),className:"w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[c.jsx(bo,{size:16}),"  "]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("button",{onClick:()=>ne(A.report.reportedUserId,24),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[c.jsx(oi,{size:14}),"   "]}),c.jsxs("button",{onClick:()=>ne(A.report.reportedUserId,72),className:"bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[c.jsx(oi,{size:14}),"   "]})]}),c.jsxs("button",{onClick:()=>ne(A.report.reportedUserId,168),className:"w-full bg-orange-700 hover:bg-orange-800 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[c.jsx(oi,{size:14}),"   "]}),c.jsxs("button",{onClick:()=>{const C=prompt("    :");C&&me(A.report.reportedUserId,` : ${C}`)},className:"w-full bg-yellow-500 hover:bg-yellow-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[c.jsx(Rd,{size:16}),"  "]})]})]}),c.jsxs("div",{className:"border border-blue-200 dark:border-blue-900/50 bg-blue-50 dark:bg-blue-900/10 rounded-xl p-4",children:[c.jsxs("h4",{className:"font-bold text-blue-700 dark:text-blue-400 mb-3 flex items-center gap-2",children:[c.jsx(nu,{size:18})," : ",A.report.reporterId]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("button",{onClick:()=>{const C=prompt("    ( ):");C&&me(A.report.reporterId,` : ${C}`)},className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[c.jsx(sw,{size:16}),"   "]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[c.jsxs("button",{onClick:()=>ne(A.report.reporterId,24),className:"bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[c.jsx(oi,{size:14}),"   "]}),c.jsxs("button",{onClick:()=>ne(A.report.reporterId,72),className:"bg-orange-600 hover:bg-orange-700 text-white py-2 rounded-lg text-xs flex items-center justify-center gap-1",children:[c.jsx(oi,{size:14}),"   "]})]}),c.jsxs("button",{onClick:()=>J(A.report.reporterId,!1),className:"w-full bg-gray-800 hover:bg-gray-900 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[c.jsx(bo,{size:16}),"  ( )"]})]}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-200 dark:border-blue-800",children:[c.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"   :"}),c.jsxs("button",{onClick:()=>{ct(A.report.id),E({isOpen:!1,report:null})},className:"w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[c.jsx(ql,{size:16}),"    "]}),c.jsxs("button",{onClick:()=>{$0(A.report.id),E({isOpen:!1,report:null})},className:"w-full mt-2 bg-red-100 hover:bg-red-200 text-red-600 py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[c.jsx(zu,{size:16}),"   "]})]})]})]})]})}),_.isOpen&&c.jsx("div",{className:"absolute inset-0 z-[110] bg-black/70 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-6xl h-[80vh] shadow-2xl flex flex-col overflow-hidden border border-gray-300 dark:border-gray-700",children:[c.jsxs("div",{className:"p-4 bg-purple-700 text-white flex justify-between items-center shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(my,{size:24,className:"animate-pulse"}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold",children:["  : ",_.targetName]}),c.jsx("p",{className:"text-xs opacity-80",children:"Ghost Mode: Viewing chats as user"})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:()=>J(_.targetUid,!0),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm flex items-center gap-1",children:[c.jsx(bo,{size:14}),"   "]}),c.jsx("button",{onClick:()=>x({isOpen:!1,targetUid:null,targetName:""}),className:"bg-white/10 hover:bg-white/20 p-2 rounded-full",children:c.jsx(kn,{size:20})})]})]}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[c.jsxs("div",{className:"w-1/3 border-l border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 overflow-y-auto",children:[c.jsx("h4",{className:"p-3 font-bold text-gray-500 text-sm border-b dark:border-gray-700",children:" "}),D.map(C=>c.jsxs("div",{onClick:()=>vt(C.id),className:`flex items-center gap-3 p-3 cursor-pointer transition-colors border-b dark:border-gray-800 ${U===C.id?"bg-purple-100 dark:bg-purple-900/30":"hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:[c.jsx("img",{src:C.avatar,className:"w-10 h-10 rounded-full bg-gray-300"}),c.jsxs("div",{className:"overflow-hidden",children:[c.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100 truncate",children:C.name}),c.jsx("div",{className:"text-xs text-gray-500",children:C.type==="group"?"":""})]}),U===C.id&&c.jsx(FT,{size:16,className:"mr-auto text-purple-500"})]},C.id)),D.length===0&&c.jsx("p",{className:"text-center p-4 text-sm text-gray-500",children:"  ."})]}),c.jsx("div",{className:"flex-1 bg-white dark:bg-black/20 overflow-y-auto p-4 flex flex-col",children:U?v.length>0?v.map(C=>c.jsxs("div",{className:`mb-2 p-3 rounded-lg max-w-[80%] border ${C.senderId===_.targetUid?"self-end bg-purple-50 border-purple-200 dark:bg-purple-900/20 dark:border-purple-800":"self-start bg-gray-50 border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("span",{className:"text-xs font-bold text-gray-600 dark:text-gray-400",children:C.senderName||C.senderId}),c.jsx("span",{className:"text-[10px] text-gray-400",children:new Date(C.timestamp).toLocaleTimeString("fa-IR")})]}),c.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-200",children:C.text})]},C.id)):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[c.jsx(Uu,{size:40,className:"mb-2 opacity-50"}),c.jsx("p",{children:"     ."})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[c.jsx(Lu,{size:40,className:"mb-2 opacity-50"}),c.jsx("p",{children:"      ."})]})})]})]})})]})})},yq=({onSuccess:t,storedAccounts:e=[],initialEmail:n=""})=>{const[r,s]=M.useState(!0),[i,o]=M.useState(!1),[l,u]=M.useState(""),[h,p]=M.useState(e.length>0&&!n),[m,g]=M.useState({name:"",email:n||"",phone:"",password:""});M.useEffect(()=>{n&&(g(E=>({...E,email:n})),p(!1))},[n]);const b=async E=>{E.preventDefault(),u(""),o(!0);try{if(r){if(!m.email||!m.password)throw new Error("       ");await wP(m.email,m.password)}else{if(!m.name||!m.email||!m.password||!m.phone)throw new Error("     ");if(m.password.length<6)throw new Error("      ");await _P(m.email,m.password,m.name,m.phone)}}catch(_){console.error(_),_.code==="auth/invalid-email"?u("   "):_.code==="auth/user-not-found"||_.code==="auth/wrong-password"||_.code==="auth/invalid-credential"?u("     "):_.code==="auth/email-already-in-use"?u("     "):u(_.message||"  .    .")}finally{o(!1)}},N=async()=>{u(""),o(!0);try{await xP()}catch(E){if(console.error("Google Login Error:",E),E.code==="auth/unauthorized-domain"){const _=window.location.hostname;u(` "${_}"  .      Authentication > Settings > Authorized domains    .`)}else E.code==="auth/popup-closed-by-user"?u("     ."):u(E.message||"    ")}finally{o(!1)}},j=E=>{g(_=>({..._,email:E.email})),p(!1),s(!0)},A=()=>c.jsx("div",{className:"absolute bottom-6 left-0 right-0 z-20 flex justify-center animate-fade-in pointer-events-none",children:c.jsxs("div",{className:"pointer-events-auto bg-white/10 dark:bg-black/40 backdrop-blur-md border border-white/20 dark:border-white/10 px-6 py-2.5 rounded-full shadow-2xl flex items-center gap-4 transition-transform hover:-translate-y-1 duration-300",children:[c.jsxs("a",{href:"https://github.com/mrv006",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-gray-700 dark:text-gray-200 hover:text-telegram-primary dark:hover:text-telegram-primary transition-colors group",children:[c.jsx("div",{className:"p-1.5 bg-white/20 rounded-full group-hover:bg-white/40 transition-colors",children:c.jsx(KT,{size:18})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-[10px] opacity-60 font-medium leading-none mb-0.5",children:"Designed & Developed by"}),c.jsx("span",{className:"text-sm font-bold leading-none tracking-wide font-mono",children:"Mr.V"})]})]}),c.jsx("div",{className:"w-px h-8 bg-gray-400/30 dark:bg-white/20"}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-300",children:[c.jsx(lI,{size:16,className:"opacity-70"}),c.jsx("span",{className:"text-xs font-mono font-bold tracking-wider opacity-90",children:"09902076468"})]})]})});return h&&e.length>0?c.jsxs("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark p-4 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 opacity-10 chat-bg-pattern pointer-events-none"}),c.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-telegram-secondaryDark rounded-3xl shadow-2xl p-8 relative z-10 animate-fade-in",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-lg shadow-telegram-primary/30 p-2 overflow-hidden border-4 border-telegram-primary",children:c.jsx("img",{src:"https://www.tarhbama.com/cities-vector/147566",alt:"Logo",className:"w-full h-full object-cover"})}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"  "}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"         "})]}),c.jsxs("div",{className:"space-y-3 mb-6",children:[e.map(E=>c.jsxs("button",{onClick:()=>j(E),className:"w-full bg-gray-50 dark:bg-white/5 hover:bg-gray-100 dark:hover:bg-white/10 p-3 rounded-xl flex items-center gap-4 transition-colors border border-gray-100 dark:border-gray-700",children:[c.jsx("img",{src:E.avatar,className:"w-12 h-12 rounded-full object-cover"}),c.jsxs("div",{className:"text-right flex-1",children:[c.jsx("h3",{className:"font-bold text-gray-900 dark:text-white",children:E.name}),c.jsx("p",{className:"text-sm text-gray-500",children:E.email})]}),c.jsx(Lu,{size:20,className:"text-gray-400 rotate-180"})]},E.uid)),c.jsxs("button",{onClick:()=>p(!1),className:"w-full bg-transparent hover:bg-gray-50 dark:hover:bg-white/5 p-3 rounded-xl flex items-center gap-4 transition-colors border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-500 hover:text-telegram-primary",children:[c.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-white/5 flex items-center justify-center",children:c.jsx(cw,{size:24})}),c.jsx("div",{className:"text-right flex-1",children:c.jsx("h3",{className:"font-bold",children:"   "})})]})]})]}),A()]}):c.jsxs("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark p-4 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 opacity-10 chat-bg-pattern pointer-events-none"}),c.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-telegram-secondaryDark rounded-3xl shadow-2xl p-8 relative z-10 animate-fade-in border border-white/50 dark:border-white/5",children:[c.jsxs("div",{className:"text-center mb-8 relative",children:[e.length>0&&c.jsx("button",{onClick:()=>p(!0),className:"absolute top-0 right-0 p-2 text-gray-400 hover:text-gray-600",title:"   ",children:c.jsx(ru,{size:20})}),c.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto flex items-center justify-center mb-4 shadow-xl shadow-telegram-primary/30 ring-4 ring-telegram-primary dark:ring-telegram-secondaryDark p-2 overflow-hidden transform hover:scale-105 transition-transform duration-500",children:c.jsx("img",{src:"https://www.tarhbama.com/cities-vector/147566",alt:"Logo",className:"w-full h-full object-cover"})}),c.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-white mb-2 tracking-tight",children:r?"  ":"  "}),c.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm font-medium",children:r?"   ":"     "})]}),l&&c.jsxs("div",{className:"mb-6 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg flex items-start gap-2 text-right dir-rtl",dir:"rtl",children:[c.jsx(sw,{size:16,className:"mt-0.5 shrink-0"}),c.jsx("span",{children:l})]}),c.jsxs("form",{onSubmit:b,className:"space-y-4",children:[!r&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"relative group",children:[c.jsx(Ni,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),c.jsx("input",{type:"text",name:"name",autoComplete:"name",placeholder:"   ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white font-medium placeholder:font-normal",value:m.name,onChange:E=>g({...m,name:E.target.value})})]}),c.jsxs("div",{className:"relative group",children:[c.jsx(Da,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),c.jsx("input",{type:"tel",name:"phone",autoComplete:"tel",placeholder:" ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.phone,onChange:E=>g({...m,phone:E.target.value})})]})]}),c.jsxs("div",{className:"relative group",children:[c.jsx(YT,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),c.jsx("input",{type:"email",name:"email",autoComplete:"username",placeholder:"",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.email,onChange:E=>g({...m,email:E.target.value})})]}),c.jsxs("div",{className:"relative group",children:[c.jsx(aw,{className:"absolute right-3 top-3 text-gray-400 group-focus-within:text-telegram-primary transition-colors",size:20}),c.jsx("input",{type:"password",name:"password",autoComplete:r?"current-password":"new-password",placeholder:" ",className:"w-full bg-gray-100 dark:bg-white/5 border border-transparent focus:bg-white dark:focus:bg-black/20 focus:border-telegram-primary rounded-xl py-3 pr-10 pl-4 outline-none transition-all text-gray-900 dark:text-white dir-ltr text-right font-medium placeholder:font-normal",value:m.password,onChange:E=>g({...m,password:E.target.value})})]}),c.jsx("button",{type:"submit",disabled:i,className:"w-full bg-telegram-primary hover:bg-telegram-primaryDark text-white font-bold py-3 rounded-xl shadow-lg shadow-telegram-primary/30 flex items-center justify-center gap-2 transition-transform active:scale-95 disabled:opacity-70 disabled:cursor-not-allowed mt-6",children:i?c.jsx(dp,{className:"animate-spin"}):c.jsxs(c.Fragment,{children:[r?"":" ",c.jsx(Lu,{size:20,className:"rotate-180"})]})})]}),c.jsxs("div",{className:"relative my-6",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-200 dark:border-white/10"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-2 bg-white dark:bg-telegram-secondaryDark text-gray-500",children:""})})]}),c.jsxs("button",{type:"button",onClick:N,disabled:i,className:"w-full bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/10 text-gray-700 dark:text-white font-medium py-3 rounded-xl flex items-center justify-center gap-3 transition-colors",children:[c.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",className:"w-5 h-5",alt:"Google"}),"   "]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsx("button",{onClick:()=>{s(!r),u("")},className:"text-telegram-primary hover:underline text-sm font-medium",children:r?"     ":"     "})})]}),A()]})},vq=({currentUser:t,onLogout:e,banExpiresAt:n})=>{const[r,s]=M.useState(""),[i,o]=M.useState(!1),[l,u]=M.useState(!1),[h,p]=M.useState("");M.useEffect(()=>{if(n){const g=setInterval(()=>{const N=Date.now(),j=n-N;if(j<=0)p("   .     ."),clearInterval(g);else{const A=Math.floor(j/36e5),E=Math.floor(j%(1e3*60*60)/(1e3*60));p(`${A}   ${E}  `)}},6e4),b=n-Date.now();if(b>0){const N=Math.floor(b/36e5),j=Math.floor(b%(1e3*60*60)/(1e3*60));p(`${N}   ${j}  `)}return()=>clearInterval(g)}},[n]);const m=async()=>{if(r.trim()){o(!0);try{await AP(t.uid,t.name,r),u(!0),s("")}catch(g){console.error("Error sending appeal",g),alert("   .    .")}finally{o(!1)}}};return c.jsx("div",{className:"fixed inset-0 z-[200] bg-gray-100 dark:bg-black flex flex-col items-center justify-center p-4 animate-fade-in",children:c.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-md rounded-3xl shadow-2xl overflow-hidden border border-gray-200 dark:border-gray-800",children:[c.jsxs("div",{className:"bg-red-600 p-8 flex flex-col items-center text-center text-white",children:[c.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mb-4 backdrop-blur-sm animate-pulse",children:c.jsx(Fu,{size:40})}),c.jsx("h1",{className:"text-2xl font-bold mb-2",children:"   "}),n?c.jsxs("div",{className:"bg-red-800/50 px-4 py-2 rounded-lg mt-2 flex items-center gap-2",children:[c.jsx(oi,{size:16}),c.jsx("span",{className:"font-mono text-sm",children:h||"  ..."})]}):c.jsx("p",{className:"opacity-90 text-sm leading-relaxed",children:"           ."})]}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-start gap-3 bg-red-50 dark:bg-red-900/20 p-4 rounded-xl text-red-800 dark:text-red-200 text-sm border border-red-100 dark:border-red-800",children:[c.jsx(aw,{className:"shrink-0 mt-1",size:18}),c.jsxs("p",{className:"leading-relaxed",children:["        . ",n?"        .":"               ."]})]}),l?c.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 p-6 rounded-xl text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-800 text-green-600 dark:text-green-200 rounded-full flex items-center justify-center mx-auto mb-3",children:c.jsx(va,{size:24,className:"rotate-180"})}),c.jsx("h3",{className:"font-bold text-green-700 dark:text-green-300 mb-1",children:"  "}),c.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:"      .    ."}),c.jsx("button",{onClick:()=>u(!1),className:"text-xs text-gray-400 underline mt-4 hover:text-gray-600 dark:hover:text-gray-200",children:"  "})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:"flex items-center gap-2 text-sm font-bold text-gray-700 dark:text-gray-300",children:[c.jsx(Uu,{size:16}),"    /"]}),c.jsx("textarea",{value:r,onChange:g=>s(g.target.value),placeholder:"       ...",className:"w-full h-32 p-3 rounded-xl border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-black/20 focus:ring-2 focus:ring-red-500 outline-none resize-none text-gray-900 dark:text-white transition-all"}),c.jsx("button",{onClick:m,disabled:i||!r.trim(),className:"w-full bg-telegram-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-3 rounded-xl flex items-center justify-center gap-2 transition-all shadow-lg",children:i?"  ...":c.jsxs(c.Fragment,{children:[c.jsx(va,{size:18,className:"rotate-180"})," "]})})]}),c.jsx("div",{className:"border-t border-gray-100 dark:border-gray-800 pt-4",children:c.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 text-gray-500 hover:text-red-500 transition-colors py-2 text-sm",children:[c.jsx(lw,{size:16}),"   "]})})]})]})})},_q="data:audio/mpeg;base64,//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//uQxAAAAANIAAAAAExBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",fu=[{id:"global_chat",name:"   ",avatar:"https://cdn-icons-png.flaticon.com/512/921/921490.png",status:"online",bio:"        (   )",username:"@global_world",phone:"",type:"group",isGlobal:!0},{id:"saved",name:"  ",avatar:"",status:"online",bio:"       ",username:"@saved_messages",phone:"",type:"user"}],Vo={};fu.forEach(t=>{Vo[t.id]={contactId:t.id,messages:[],unreadCount:0,draft:""}});const wq={uid:"",name:" ",email:"",bio:"...",username:"@guest",phone:"",role:"user",isBanned:!1,avatar:"",createdAt:Date.now(),lastSeen:Date.now(),status:"offline"},xq=()=>{var $e,Bn;const[t,e]=M.useState(null),[n,r]=M.useState(!0),[s,i]=M.useState(fu),[o,l]=M.useState(Vo),[u,h]=M.useState(wq),[p,m]=M.useState([]),[g,b]=M.useState(""),[N,j]=M.useState("default"),[A,E]=M.useState(null),[_,x]=M.useState(()=>localStorage.getItem("irangram_theme")||Ei.LIGHT),[D,$]=M.useState(window.innerWidth<768),[U,w]=M.useState(!1),[v,k]=M.useState(null),[I,S]=M.useState(!1),[R,T]=M.useState(!1),[qe,yt]=M.useState(!1),[ut,Qe]=M.useState(null),[W,J]=M.useState(!1),[ne,me]=M.useState(0),[he,Re]=M.useState(!1),[et,vt]=M.useState(null),ct=M.useRef(null),Me=M.useRef(null),dt=M.useRef(null),Et=M.useRef(new Audio(_q));M.useEffect(()=>{"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission()},[]),M.useEffect(()=>{if(u.isBanned&&"Notification"in window&&Notification.permission==="granted")try{new Notification("    ",{body:"       .      .",icon:"https://cdn-icons-png.flaticon.com/512/2111/2111615.png",tag:"ban_status",requireInteraction:!0})}catch(L){console.error("Notification trigger failed",L)}},[u.isBanned]),M.useEffect(()=>{const L=K=>{K.preventDefault(),Qe(K)};return window.addEventListener("beforeinstallprompt",L),()=>{window.removeEventListener("beforeinstallprompt",L)}},[]);const Y=async()=>{if(!ut)return;ut.prompt();const{outcome:L}=await ut.userChoice;L==="accepted"&&Qe(null)};M.useEffect(()=>{const L=localStorage.getItem("irangram_accounts");L&&m(JSON.parse(L))},[]),M.useEffect(()=>{const L=vP(async K=>{var ie;if(K){e(K);const F=await z0(K.uid);h({uid:K.uid,name:(F==null?void 0:F.name)||K.displayName||"",email:K.email||"",bio:(F==null?void 0:F.bio)||"",username:(F==null?void 0:F.username)||((ie=K.email)==null?void 0:ie.split("@")[0])||"",phone:(F==null?void 0:F.phone)||"",role:(F==null?void 0:F.role)||"user",isBanned:(F==null?void 0:F.isBanned)||!1,banExpiresAt:F==null?void 0:F.banExpiresAt,avatar:(F==null?void 0:F.avatar)||K.photoURL||`https://ui-avatars.com/api/?name=${K.email}`,createdAt:F==null?void 0:F.createdAt,lastSeen:F==null?void 0:F.lastSeen,status:(F==null?void 0:F.status)||"online"});const fe=K.uid,ae=localStorage.getItem(`irangram_contacts_${fe}`);i(ae?JSON.parse(ae):fu);const le=localStorage.getItem(`irangram_sessions_${fe}`);let _e=JSON.parse(le||JSON.stringify(Vo));_e.global_chat||(_e.global_chat=Vo.global_chat),l(_e);const ye=localStorage.getItem(`irangram_wallpaper_${fe}`);j(ye||"default"),m(we=>{var ir;const Bt={uid:K.uid,name:(F==null?void 0:F.name)||K.displayName||"",avatar:(F==null?void 0:F.avatar)||`https://ui-avatars.com/api/?name=${K.email}`,email:K.email||"",username:(F==null?void 0:F.username)||((ir=K.email)==null?void 0:ir.split("@")[0])||"",role:(F==null?void 0:F.role)||"user"},_n=we.filter(qr=>qr.uid!==K.uid),sn=[Bt,..._n];return localStorage.setItem("irangram_accounts",JSON.stringify(sn)),sn})}else e(null),i(fu),l(Vo);r(!1)});return()=>L()},[]),M.useEffect(()=>{if(!t)return;const L=EP(t.uid,fe=>{fe.isBanned&&fe.banExpiresAt&&MP(t.uid,fe),h(ae=>({...ae,...fe}))});zl(t.uid,"online");const K=setInterval(()=>{zl(t.uid,"online")},6e4),ie=()=>zl(t.uid,"offline");window.addEventListener("beforeunload",ie);const F=bP(fe=>{i(ae=>{const le=ae.map(_e=>{const ye=fe.find(we=>we.uid===_e.id);return ye?{..._e,status:ye.status,lastSeen:new Date(ye.lastSeen).toISOString(),avatar:ye.avatar||_e.avatar}:_e});return JSON.stringify(le)!==JSON.stringify(ae)?le:ae})});return()=>{L(),F(),clearInterval(K),window.removeEventListener("beforeunload",ie),zl(t.uid,"offline")}},[t]),M.useEffect(()=>{t&&(localStorage.setItem(`irangram_sessions_${t.uid}`,JSON.stringify(o)),localStorage.setItem(`irangram_contacts_${t.uid}`,JSON.stringify(s)),localStorage.setItem(`irangram_wallpaper_${t.uid}`,N))},[o,s,N,t]),M.useEffect(()=>{localStorage.setItem("irangram_theme",_)},[_]),M.useEffect(()=>{if(!t||u.isBanned)return;const L=nq(F=>{F.currentVersion>Tn.VERSION&&yt(!0)}),K=$P(t.uid,F=>{if(F.length>0){const fe=F[0];vt({title:fe.title,message:fe.message}),WP(t.uid,fe.id)}}),ie=ZP(t.uid,async F=>{for(const fe of F){const ae=fe.participants.find(le=>le!==t.uid);ae&&(i(le=>(le.find(ye=>ye.id===ae)||z0(ae).then(ye=>{ye&&i(we=>we.find(Bt=>Bt.id===ae)?we:[...we,{id:ye.uid,name:ye.name,avatar:ye.avatar,bio:ye.bio,username:"@"+ye.username,phone:ye.phone,status:ye.status,type:"user"}])}),le)),l(le=>{const _e=le[ae]||{contactId:ae,messages:[],unreadCount:0,draft:""};let ye=_e.messages;ye.length===0&&fe.lastMessage&&(ye=[{id:"preview-"+Date.now(),text:fe.lastMessage,senderId:fe.lastSenderId||"them",timestamp:fe.updatedAt,status:"read",type:"text",reactions:{}}]);let we=_e.unreadCount;return fe.lastSenderId&&fe.lastSenderId!==t.uid&&A!==ae&&we===0&&(we=1),{...le,[ae]:{..._e,messages:ye,unreadCount:A===ae?0:we}}}))}});return rq(),()=>{L(),K(),ie()}},[t,u.isBanned,A]),M.useEffect(()=>{if(!t||u.isBanned)return;const L=K=>{const ie=K.map(F=>({...F,senderId:F.senderId===t.uid?"me":F.senderId,reactions:F.reactions||{}}));l(F=>{var _e,ye,we,Bt,_n,sn;const fe=(ye=(_e=F.global_chat)==null?void 0:_e.messages.slice(-1)[0])==null?void 0:ye.id,ae=(we=ie.slice(-1)[0])==null?void 0:we.id;let le=((Bt=F.global_chat)==null?void 0:Bt.unreadCount)||0;if(fe!==ae&&ie.length>0&&ie[ie.length-1].senderId!=="me"){A!=="global_chat"&&(le+=1);try{Et.current.currentTime=0,Et.current.play().catch(()=>{})}catch{}}return{...F,global_chat:{contactId:"global_chat",messages:ie,unreadCount:A==="global_chat"?0:le,draft:((_n=F.global_chat)==null?void 0:_n.draft)||"",pinnedMessage:(sn=F.global_chat)==null?void 0:sn.pinnedMessage}}})};return ct.current=QP(L),Me.current=GP("global_chat",K=>{l(ie=>({...ie,global_chat:{...ie.global_chat,pinnedMessage:K}}))}),()=>{ct.current&&ct.current(),Me.current&&Me.current()}},[t,A,u.isBanned]),M.useEffect(()=>{if(!t||!A){dt.current&&dt.current();return}const L=["saved","global_chat"].includes(A),K=s.find(F=>F.id===A),ie=(K==null?void 0:K.type)==="group";if(!L&&!ie){dt.current&&dt.current();const F=Hd(t.uid,A);console.log("Subscribing to private chat:",F),dt.current=XP(F,fe=>{const ae=fe.map(le=>({...le,senderId:le.senderId===t.uid?"me":le.senderId,reactions:le.reactions||{}}));l(le=>{var _e;return{...le,[A]:{contactId:A,messages:ae,unreadCount:0,draft:((_e=le[A])==null?void 0:_e.draft)||""}}})})}else dt.current&&(dt.current(),dt.current=null);return()=>{dt.current&&dt.current()}},[A,t,s]),M.useEffect(()=>{let L;return W?L=setInterval(()=>{me(K=>K+1)},1e3):me(0),()=>clearInterval(L)},[W]);const de=()=>x(L=>L===Ei.LIGHT?Ei.DARK:Ei.LIGHT),Se=L=>{E(L),w(!1),k(null),l(K=>({...K,[L]:{...K[L],unreadCount:0}}))},C=L=>{if(s.find(K=>K.id===L.id)){Se(L.id);return}i(K=>[...K,L]),l(K=>({...K,[L.id]:{contactId:L.id,messages:[],unreadCount:0,draft:""}})),Se(L.id)},Ee=async L=>{if(t)try{const K=await IP(L,t.uid);if(K){const ie={id:K.id,name:K.name,avatar:K.avatar,bio:"Group Chat",username:"",phone:"",status:"online",type:"group"};C(ie)}}catch(K){console.error("Error creating group",K),alert("   ")}},Ne=M.useCallback(async(L,K)=>{!A||!t||(A==="global_chat"?await tq(L,K,t.uid):l(ie=>{const F=ie[A];if(!F)return ie;const fe=F.messages.map(ae=>{if(ae.id!==L)return ae;const le={...ae.reactions},_e=le[K]||[];return _e.includes("me")?(le[K]=_e.filter(ye=>ye!=="me"),le[K].length===0&&delete le[K]):le[K]=[..._e,"me"],{...ae,reactions:le}});return{...ie,[A]:{...F,messages:fe}}}))},[A,t]),tt=M.useCallback(async L=>{A&&(A==="global_chat"?await LP(L):l(K=>({...K,[A]:{...K[A],messages:K[A].messages.filter(ie=>ie.id!==L)}})))},[A]),rn=M.useCallback(async L=>{if(!A)return;const K={id:L.id,text:L.type==="text"?L.text.substring(0,50):L.type==="image"?"":"",sender:L.senderName||"",type:L.type};A==="global_chat"?(u.role==="admin"||u.role==="owner")&&await HP("global_chat",K):l(ie=>({...ie,[A]:{...ie[A],pinnedMessage:K}}))},[A,u]),ao=M.useCallback(async()=>{A&&(A==="global_chat"?(u.role==="admin"||u.role==="owner")&&await KP("global_chat"):l(L=>({...L,[A]:{...L[A],pinnedMessage:null}})))},[A,u]),Zs=M.useCallback(async(L,K)=>{if(!A||!t)return;if(A==="global_chat"){await VP(L,K);return}const ie=["saved","global_chat"].includes(A),F=s.find(ae=>ae.id===A),fe=(F==null?void 0:F.type)==="group";if(!ie&&!fe){const ae=Hd(t.uid,A);await JP(ae,L,K);return}l(ae=>{const le=ae[A];if(!le)return ae;const _e=le.messages.map(ye=>ye.id===L?{...ye,text:K,edited:!0}:ye);return{...ae,[A]:{...le,messages:_e}}})},[A,t,s]),Cr=M.useCallback(async(L,K)=>{if(!A||!t)return;let ie=L.imageUrl,F=L.fileUrl;if(L.file)try{const we=L.type==="audio"?"audios":L.type==="image"?"images":"files",Bt=`uploads/${t.uid}/${we}/${Date.now()}_${L.fileName||"file"}`,_n=await B1(L.file,Bt);L.type==="image"?ie=_n:F=_n}catch(we){console.error("Upload failed",we),alert("     .");return}if(A==="global_chat"){const we=u.name?`https://ui-avatars.com/api/?name=${u.name}&background=random&color=fff&size=64`:"";await YP({text:L.text,type:L.type,imageUrl:ie,fileUrl:F,fileName:L.fileName,fileSize:L.fileSize,audioDuration:L.audioDuration,isSticker:L.isSticker,replyToId:K,senderId:t.uid},{name:u.name,avatar:we,role:u.role});return}const fe=["saved","global_chat"].includes(A),ae=s.find(we=>we.id===A),le=(ae==null?void 0:ae.type)==="group";if(!fe&&!le){const we=Hd(t.uid,A);await eq(we,A,{text:L.text,type:L.type,senderId:t.uid,imageUrl:ie,fileUrl:F,fileName:L.fileName,fileSize:L.fileSize,audioDuration:L.audioDuration,isSticker:L.isSticker,replyToId:K},{name:u.name,avatar:u.avatar});return}let _e=L.imageUrl;L.file&&!ie&&!F?_e=URL.createObjectURL(L.file):ie?_e=ie:F&&(_e=F);const ye={id:Date.now().toString(),text:L.text||(L.isSticker?"Sticker":L.type==="image"?"":L.type==="audio"?" ":""),senderId:"me",timestamp:Date.now(),status:"read",type:L.type,imageUrl:L.type==="image"?_e:void 0,fileUrl:L.type!=="image"?_e:void 0,fileName:L.fileName,fileSize:L.fileSize,audioDuration:L.audioDuration,isSticker:L.isSticker,replyToId:K,reactions:{}};l(we=>({...we,[A]:{...we[A],messages:[...we[A].messages,ye]}}))},[A,t,u,s]),ws=async L=>{const K={...u,...L};if(h(K),t){await kP(t.uid,K),m(F=>F.map(fe=>fe.uid===t.uid?{...fe,name:K.name,username:K.username}:fe));const ie=p.map(F=>F.uid===t.uid?{...F,name:K.name,username:K.username}:F);localStorage.setItem("irangram_accounts",JSON.stringify(ie))}},Pr=async()=>{window.confirm("    ")&&(b(""),await Wd(t==null?void 0:t.uid),e(null))},sr=async()=>{b(""),await Wd(t==null?void 0:t.uid),e(null)},Ct=async L=>{const K=p.find(ie=>ie.uid===L);K&&b(K.email),await Wd(t==null?void 0:t.uid),e(null)},zn=L=>{const K={id:L.uid,name:L.name,avatar:L.avatar,bio:L.bio,username:"@"+L.username,phone:L.phone,status:"offline",type:"user"};C(K)},Be=L=>{L.id==="me"||L.id===(t==null?void 0:t.uid)?S(!0):k({id:L.id,name:L.name||"",avatar:L.avatar||"",username:"",phone:"",bio:" ",type:"user",status:"offline"})};return n?c.jsx("div",{className:"h-[100dvh] w-full flex items-center justify-center bg-white dark:bg-black text-telegram-primary",children:c.jsx(yy,{className:"animate-spin w-10 h-10"})}):t?u.isBanned?c.jsx(vq,{currentUser:{uid:t.uid,name:u.name},onLogout:Pr,banExpiresAt:u.banExpiresAt}):c.jsxs("div",{className:"flex flex-col h-[100dvh] w-full overflow-hidden bg-white dark:bg-black font-sans relative",children:[et&&c.jsx("div",{className:"fixed inset-0 z-[120] bg-black/60 flex items-center justify-center p-6 animate-fade-in backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full border-t-4 border-blue-500",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-600 dark:text-blue-400",children:[c.jsx(up,{size:28}),c.jsx("h3",{className:"text-xl font-bold",children:et.title})]}),c.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-6 leading-relaxed whitespace-pre-wrap",children:et.message}),c.jsx("button",{onClick:()=>vt(null),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 rounded-xl transition-colors",children:" "})]})}),qe&&c.jsxs("div",{onClick:()=>window.location.reload(),className:"fixed bottom-6 left-6 z-[100] bg-telegram-primary text-white p-4 rounded-2xl shadow-2xl shadow-blue-500/30 flex items-center gap-4 cursor-pointer hover:scale-105 transition-transform animate-slide-in",children:[c.jsx("div",{className:"bg-white/20 p-2.5 rounded-full",children:c.jsx(yy,{size:24,className:"animate-spin"})}),c.jsxs("div",{className:"text-right",children:[c.jsx("h3",{className:"font-bold text-sm",children:" "}),c.jsx("p",{className:"text-xs opacity-90 mt-0.5",children:"    "})]})]}),W&&c.jsxs("div",{className:"fixed inset-0 z-[90] bg-gray-900/95 backdrop-blur-md flex flex-col items-center justify-between py-12 text-white animate-fade-in",children:[c.jsxs("div",{className:"flex flex-col items-center mt-10",children:[c.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-white/20 mb-4 shadow-2xl",children:c.jsx("img",{src:(($e=s.find(L=>L.id===A))==null?void 0:$e.avatar)||"https://via.placeholder.com/150",className:"w-full h-full object-cover"})}),c.jsx("h2",{className:"text-3xl font-bold mb-2",children:((Bn=s.find(L=>L.id===A))==null?void 0:Bn.name)||" "}),c.jsx("p",{className:"text-white/60 text-lg animate-pulse",children:ne>0?`${Math.floor(ne/60)}:${(ne%60).toString().padStart(2,"0")}`:"  ..."})]}),c.jsxs("div",{className:"flex items-center gap-8 mb-10",children:[c.jsx("button",{onClick:()=>Re(!he),className:`p-4 rounded-full transition-all ${he?"bg-white text-gray-900":"bg-white/10 hover:bg-white/20"}`,children:he?c.jsx(JT,{size:32}):c.jsx(uw,{size:32})}),c.jsx("button",{onClick:()=>{J(!1)},className:"p-6 bg-red-500 rounded-full shadow-lg hover:bg-red-600 hover:scale-110 transition-all",children:c.jsx(rI,{size:40})}),c.jsx("button",{className:"p-4 bg-white/10 hover:bg-white/20 rounded-full transition-all",children:c.jsx(Da,{size:32,className:"rotate-180"})})]})]}),R&&c.jsx(gq,{onClose:()=>T(!1),currentUserEmail:t.email,currentUserRole:u.role||"user",onStartChat:zn}),c.jsx(mq,{isOpen:I,onClose:()=>S(!1),userProfile:u,onSave:ws,wallpaper:N,onSaveWallpaper:j}),c.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[c.jsxs("div",{className:`
            ${D&&A?"hidden":"flex"}
            ${D?"w-full":"w-80 lg:w-96"} 
            flex-col h-full z-20 transition-all duration-300 shadow-xl bg-white dark:bg-telegram-bgDark
          `,children:[c.jsx("div",{className:"flex-1 overflow-hidden",children:c.jsx(sq,{contacts:s,sessions:o,activeContactId:A,onSelectContact:Se,toggleTheme:de,theme:_,userProfile:u,onOpenSettings:()=>S(!0),onOpenAdminPanel:()=>T(!0),onAddContact:C,showInstallButton:!!ut,onInstall:Y,storedAccounts:p,onAddAccount:sr,onSwitchAccount:Ct,onCreateGroup:Ee})}),c.jsxs("div",{className:"p-2 border-t border-telegram-border dark:border-telegram-borderDark flex justify-between items-center bg-gray-50 dark:bg-telegram-bgDark",children:[c.jsxs("span",{className:"text-xs text-gray-400 px-2",children:["v",Tn.VERSION]}),c.jsx("button",{onClick:Pr,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-white/5 rounded-lg",title:" ",children:c.jsx(lw,{size:18})})]})]}),c.jsxs("div",{className:`
            ${D&&!A?"hidden":"flex"}
            flex-1 h-full relative flex-col min-w-0
          `,children:[c.jsx("div",{className:"flex-1 h-full relative flex flex-col min-w-0",children:A?c.jsx(hq,{contact:s.find(L=>L.id===A),messages:o[A].messages,pinnedMessage:o[A].pinnedMessage,myId:"me",myRole:u.role||"user",onSendMessage:Cr,onEditMessage:Zs,onDeleteMessage:tt,onPinMessage:rn,onUnpinMessage:ao,onReaction:Ne,onBack:()=>E(null),isMobile:D,onProfileClick:()=>w(!0),onAvatarClick:Be,wallpaper:N,onCall:()=>J(!0)},A):c.jsx("div",{className:"h-full w-full flex items-center justify-center bg-telegram-bg dark:bg-telegram-bgDark text-gray-400 dark:text-gray-600 pattern-bg",children:c.jsxs("div",{className:"text-center p-6 bg-white/50 dark:bg-black/50 backdrop-blur-sm rounded-2xl",children:[c.jsx("span",{className:"text-4xl block mb-4",children:""}),c.jsx("h3",{className:"font-bold mb-2",children:"   "}),c.jsx("p",{className:"text-sm",children:"    "})]})})}),(U||v)&&c.jsx("div",{className:`
                    absolute inset-y-0 right-0 z-50 bg-white dark:bg-telegram-secondaryDark shadow-2xl transition-transform duration-300
                    ${D?"w-full":"w-80 border-l border-telegram-border dark:border-telegram-borderDark"}
                `,children:c.jsx(fq,{contact:v||s.find(L=>L.id===A),onClose:()=>{w(!1),k(null)},onStartChat:v?L=>{C(L),k(null)}:void 0})})]})]})]}):c.jsx(yq,{onSuccess:e,storedAccounts:p,initialEmail:g})},W1=document.getElementById("root");if(!W1)throw new Error("Could not find root element to mount to");const Eq=Kd.createRoot(W1);Eq.render(c.jsx(AE.StrictMode,{children:c.jsx(xq,{})}));
